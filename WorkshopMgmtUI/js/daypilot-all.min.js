/**
@license
DayPilot Pro for JavaScript 2023.3.5688 (trial)
Copyright (c) 2005 - 2023 Annpoint s.r.o.
https://www.daypilot.org/
Use of this software is subject to license terms.
*/
var DayPilot = {}; if ("undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    function e(e) { var t = DayPilot.Date.Cache.Ticks; if (t[e]) return DayPilot.Stats.cacheHitsTicks += 1, t[e]; var n, i = new Date(e), a = i.getUTCMilliseconds(); n = 0 === a ? "" : a < 10 ? ".00" + a : a < 100 ? ".0" + a : "." + a; var r = i.getUTCSeconds(); r < 10 && (r = "0" + r); var o = i.getUTCMinutes(); o < 10 && (o = "0" + o); var s = i.getUTCHours(); s < 10 && (s = "0" + s); var l = i.getUTCDate(); l < 10 && (l = "0" + l); var d = i.getUTCMonth() + 1; d < 10 && (d = "0" + d); var c = i.getUTCFullYear(); if (c <= 0) throw "The minimum year supported is 1."; c < 10 ? c = "000" + c : c < 100 ? c = "00" + c : c < 1e3 && (c = "0" + c); var u = c + "-" + d + "-" + l + "T" + s + ":" + o + ":" + r + n; return t[e] = u, u } function t(e, t) { return !DayPilot.Util.isNullOrUndefined(e) && (!DayPilot.Util.isNullOrUndefined(t) && e.toLocaleLowerCase() === t.toLocaleLowerCase()) } function n(e) { e = Math.min(e, 255), e = Math.max(e, 0); var t = e.toString(16); return e < 16 ? "0" + t : t } if ("undefined" == typeof DayPilot.$) {
        DayPilot.$ = function (e) { return document.getElementById(e) }, Object.defineProperty(DayPilot, "isKhtml", { get: function () { return navigator && navigator.userAgent && navigator.userAgent.indexOf("KHTML") !== -1 } }), Object.defineProperty(DayPilot, "isIE", { get: function () { return navigator && navigator.userAgent && (navigator.userAgent.indexOf("MSIE") !== -1 || navigator.userAgent.indexOf("Trident") !== -1) } }), Object.defineProperty(DayPilot, "isIEQuirks", { get: function () { return this.isIE && document.compatMode && "BackCompat" === document.compatMode } }), DayPilot.browser = {}, Object.defineProperty(DayPilot.browser, "ff", { get: function () { return navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") !== -1 } }), Object.defineProperty(DayPilot.browser, "chrome", { get: function () { return navigator && navigator.userAgent && navigator.userAgent.indexOf("Chrome") !== -1 } }), Object.defineProperty(DayPilot.browser, "ie", { get: function () { return DayPilot.isIE } }), Object.defineProperty(DayPilot.browser, "edge", { get: function () { return navigator && navigator.userAgent && navigator.userAgent.indexOf("Edge") !== -1 } }), Object.defineProperty(DayPilot.browser, "webkit", { get: function () { return navigator && navigator.userAgent && navigator.userAgent.indexOf("WebKit") !== -1 } }), Object.defineProperty(DayPilot.browser, "android", { get: function () { var e = navigator.userAgent; return e.indexOf("Mozilla/5.0") > -1 && e.indexOf("Android ") > -1 && e.indexOf("AppleWebKit") > -1 && !(e.indexOf("Chrome") > -1) } }), Object.defineProperty(DayPilot.browser, "ios", { get: function () { return navigator.userAgent.indexOf("iPad") > -1 || navigator.userAgent.indexOf("iPhone") > -1 } }), Object.defineProperty(DayPilot.browser, "hover", { get: function () { return !window.matchMedia("(any-hover: none)").matches } }), DayPilot.libs = {}, DayPilot.libs.angularjs = "object" == typeof angularjs, DayPilot.touch = {}, Object.defineProperty(DayPilot.touch, "start", { get: function () { return window.navigator.msPointerEnabled ? "MSPointerDown" : "touchstart" } }), Object.defineProperty(DayPilot.touch, "move", { get: function () { return window.navigator.msPointerEnabled ? "MSPointerMove" : "touchmove" } }), Object.defineProperty(DayPilot.touch, "end", { get: function () { return window.navigator.msPointerEnabled ? "MSPointerUp" : "touchend" } }), DayPilot.mo2 = function (e, t) { if ("undefined" != typeof t.offsetX) { var n = { x: t.offsetX + 1, y: t.offsetY + 1 }; if (!e) return n; for (var i = t.srcElement; i && i !== e;)"SPAN" !== i.tagName && (n.x += i.offsetLeft, i.offsetTop > 0 && (n.y += i.offsetTop - i.scrollTop)), i = i.offsetParent; return i ? n : null } if ("undefined" != typeof t.layerX) { var n = { x: t.layerX, y: t.layerY, src: t.target }; if (!e) return n; for (var i = t.target; i && "absolute" !== i.style.position && "relative" !== i.style.position;)i = i.parentNode, DayPilot.isKhtml && (n.y += i.scrollTop); for (; i && i !== e;)n.x += i.offsetLeft, n.y += i.offsetTop - i.scrollTop, i = i.offsetParent; return i ? n : null } return null }, DayPilot.mo3 = function (e, t) { var n, i = DayPilot.page(t); if (i) if (e) { var a = DayPilot.abs(e); if (!a) throw new Error("no abs"); n = { x: i.x - a.x, y: i.y - a.y } } else n = { x: i.x, y: i.y }; else if (n = DayPilot.mo2(e, t), !n) return null; return n.shift = t.shiftKey, n.meta = t.metaKey, n.ctrl = t.ctrlKey, n.alt = t.altKey, n }, DayPilot.mc = function (e) { if (e.touches) { var t = e.touches[0]; return { x: t.pageX, y: t.pageY } } return e.pageX || e.pageY ? { x: e.pageX, y: e.pageY } : { x: e.clientX + document.documentElement.scrollLeft, y: e.clientY + document.documentElement.scrollTop } }, DayPilot.Stats = {}, DayPilot.Stats.eventObjects = 0, DayPilot.Stats.dateObjects = 0, DayPilot.Stats.cacheHitsCtor = 0, DayPilot.Stats.cacheHitsParsing = 0, DayPilot.Stats.cacheHitsTicks = 0, DayPilot.list = function (e, t) { if (e && e.isDayPilotList && !t) return e; var n = DayPilot.isArray(e) || "[object NodeList]" === Object.prototype.toString.call(e), i = !n && !DayPilot.Util.isNullOrUndefined(e), a = []; if (a.isDayPilotList = !0, a.clone = function () { var e = DayPilot.list(); return a.forEach(function (t) { e.push(t) }), e }, a.each = function (e) { if (e) { if (a.forEach) return void a.forEach(e); for (var t = 0; t < this.length; t++)e(a[t], t, a) } }, a.addProps = function (e) { var t = a.clone(); if (e) for (var n in e) t[n] = e[n]; return t }, a.last = function () { return 0 === a.length ? null : a[a.length - 1] }, a.first = function () { return 0 === a.length ? null : a[0] }, a.add = function (e) { var t = a.clone(); return t.push(e), t }, a.map = function (e) { if ("function" != typeof e) throw "DayPilot.list().map(f): Function expected"; var t = DayPilot.list(); return a.forEach(function (n, i, a) { t.push(e(n, i, a)) }), t }, a.filter = function (e) { var t = DayPilot.list(); if ("function" != typeof e) throw "DayPilot.list().filter(f): Function expected"; return a.forEach(function (n, i, a) { e(n, i, a) && t.push(n) }), t }, a.concat = function (e) { if (!e) return a; for (var t = a.clone(), n = 0; n < e.length; n++)t.push(e[n]); return t }, a.find || (a.find = function (e) { if ("function" != typeof e) throw "DayPilot.list().find(f): Function expected"; for (var t = 0; t < this.length; t++)if (e(a[t])) return a[t] }), a.findIndex || (a.findIndex = function (e) { if ("function" != typeof e) throw "DayPilot.list().findIndex(f): Function expected"; for (var t = 0; t < this.length; t++)if (e(a[t])) return t; return -1 }), a.some || (a.some = function (e) { if ("function" != typeof e) throw "DayPilot.list().some(f): Function expected"; for (var t = 0; t < this.length; t++)if (e(a[t])) return !0; return !1 }), a.reduce || (a.reduce = function (e, t) { if ("function" != typeof e) throw "DayPilot.list().reduce(f): Function expected"; var n, i = 0; if ("undefined" != typeof t) n = t; else { if (i = 1, 0 === a.length) throw "DayPilot.list().reduce(f): No initial value and empty list"; n = a[0] } for (var r = i; r < this.length; r++)n = e(n, a[r], r, this); return n }), a.isEmpty = function () { return 0 === a.length }, n) for (var r = 0; r < e.length; r++)a[r] = e[r]; else i && (a[0] = e); return a }, DayPilot.list.for = function (e, t) { for (var n = DayPilot.list(), i = 0; i < e; i++)"function" == typeof t ? n.push(t(i)) : n.push(i); return n }, DayPilot.line = function (e, t, n, i, a) { a = a || {}; var r = { "x": e, "y": t }, o = { "x": n, "y": i, "deg": DayPilot.deg(e, t, n, i) }, s = !1; if (t < i) { var l = t; t = i, i = l, l = e, e = n, n = l, s = !0 } var d = DayPilot.deg(e, t, n, i), c = { "x": e, "y": t }, u = { "x": n, "y": i }, h = function () { var a = Math.abs(e - n), r = Math.abs(t - i), o = (e + n) / 2; return o - Math.sqrt(a * a + r * r) / 2 }(), f = function () { return (t + i) / 2 }(), v = DayPilot.distance(c, u), p = document.createElement("div"); p.setAttribute("style", "width:" + v + "px;height:0px;-moz-transform:rotate(" + d + "deg);-webkit-transform:rotate(" + d + "deg);-ms-transform:rotate(" + d + "deg);transform:rotate(" + d + "deg);position:absolute;top:" + f + "px;left:" + h + "px;"), a.cssClass && (p.className = a.cssClass); var m = document.createElement("div"); m.appendChild(p); var g, b, d, y, w = !!a.arrow; if (w) { var g = o.y - 5, b = o.x - 5, d = d; o.y > r.y && (d -= 180); var y = document.createElement("div"); y.style.borderColor = "black", y.style.width = "10px", y.style.height = "10px", y.style.borderRadius = "10px", y.style.position = "absolute", y.style.left = b + "px", y.style.top = g + "px", a.cssClass ? y.className = a.cssClass + "_circle" : y.style.backgroundColor = "black", m.appendChild(y) } return m }, DayPilot.deg = function (e, t, n, i) { var a, r = Math.abs(e - n), o = Math.abs(t - i), s = (e + n) / 2, l = (t + i) / 2, d = Math.sqrt(r * r + o * o), c = s - d / 2, u = l; r = d / 2, a = Math.abs(s - c), o = Math.sqrt(Math.abs(e - c) * Math.abs(e - c) + Math.abs(t - u) * Math.abs(t - u)); var h = (o * o - r * r - a * a) / (2 * r * a); return 180 * Math.acos(h) / Math.PI }, DayPilot.complete = function (e) { return "complete" === document.readyState ? void e() : (DayPilot.complete.list || (DayPilot.complete.list = [], DayPilot.re(document, "readystatechange", function () { if ("complete" === document.readyState) { for (var e = 0; e < DayPilot.complete.list.length; e++) { (0, DayPilot.complete.list[e])() } DayPilot.complete.list = [] } })), void DayPilot.complete.list.push(e)) }, DayPilot.page = function (e) { var t = e.changedTouches && e.changedTouches[0] ? e.changedTouches[0] : e; return "undefined" == typeof t.pageX || DayPilot.browser.ie ? "undefined" != typeof e.clientX && document.body && document.documentElement ? { x: e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft, y: e.clientY + document.body.scrollTop + document.documentElement.scrollTop } : null : { x: t.pageX, y: t.pageY } }, DayPilot.rel = function (e, t) { var n = DayPilot.abs(e), i = DayPilot.abs(t); return { "x": n.x - i.x, "y": n.y - i.y, "w": e.offsetWidth, "h": e.offsetHeight } }, DayPilot.abs = function (e, t) { if (!e) return null; if (e.getBoundingClientRect) { var n = DayPilot.absBoundingClientBased(e); if (t) { var i = DayPilot.absOffsetBased(e, !1), t = DayPilot.absOffsetBased(e, !0); n.x += t.x - i.x, n.y += t.y - i.y, n.w = t.w, n.h = t.h } return n } return DayPilot.absOffsetBased(e, t) }, DayPilot.absBoundingClientBased = function (e) { var t = e.getBoundingClientRect(); return { x: t.left + window.pageXOffset, y: t.top + window.pageYOffset, w: e.clientWidth, h: e.clientHeight, toString: function () { return "x:" + this.x + " y:" + this.y + " w:" + this.w + " h:" + this.h } } }, DayPilot.isArray = function (e) { return "[object Array]" === Object.prototype.toString.call(e) }, DayPilot.absOffsetBased = function (e, t) { for (var n = { x: e.offsetLeft, y: e.offsetTop, w: e.clientWidth, h: e.clientHeight, toString: function () { return "x:" + this.x + " y:" + this.y + " w:" + this.w + " h:" + this.h } }; DayPilot.op(e);)e = DayPilot.op(e), n.x -= e.scrollLeft, n.y -= e.scrollTop, t && (n.x < 0 && (n.w += n.x, n.x = 0), n.y < 0 && (n.h += n.y, n.y = 0), e.scrollLeft > 0 && n.x + n.w > e.clientWidth && (n.w -= n.x + n.w - e.clientWidth), e.scrollTop && n.y + n.h > e.clientHeight && (n.h -= n.y + n.h - e.clientHeight)), n.x += e.offsetLeft, n.y += e.offsetTop; var i = DayPilot.pageOffset(); return n.x += i.x, n.y += i.y, n }, DayPilot.wd = function () { var e = DayPilot.isIEQuirks, t = document.documentElement.clientHeight; e && (t = document.body.clientHeight); var n = document.documentElement.clientWidth; e && (n = document.body.clientWidth); var i = document.documentElement && document.documentElement.scrollTop || document.body.scrollTop, a = document.documentElement && document.documentElement.scrollLeft || document.body.scrollLeft, r = {}; return r.width = n, r.height = t, r.scrollTop = i, r.scrollLeft = a, r }, DayPilot.op = function (e) { try { return e.offsetParent } catch (e) { return document.body } }, DayPilot.distance = function (e, t) { return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)) }, DayPilot.doc = function () { var e = document.documentElement; return e && e.clientHeight ? e : document.body }, DayPilot.pageOffset = function () { if ("undefined" != typeof window.pageXOffset) return { x: window.pageXOffset, y: window.pageYOffset }; var e = DayPilot.doc(); return { x: e.scrollLeft, y: e.scrollTop } }, DayPilot.ac = function (e, t) { if (!t) var t = []; for (var n = 0; e.children && n < e.children.length; n++)t.push(e.children[n]), DayPilot.ac(e.children[n], t); return t }, DayPilot.indexOf = function (e, t, n) { if (!e || !e.length) return -1; for (var i = 0; i < e.length; i++)if (n) { if (n(e[i], t)) return i } else if (e[i] === t) return i; return -1 }, DayPilot.contains = function (e, t) { if (2 !== arguments.length) throw new DayPilot.Exception("DayPilot.contains() requires two arguments."); return !!e && (e === t && !DayPilot.isArray(e) || DayPilot.indexOf(e, t) !== -1) }, DayPilot.rfa = function (e, t) { var n = DayPilot.indexOf(e, t); n !== -1 && e.splice(n, 1) }, DayPilot.sheet = function (e) { if ("undefined" == typeof window) { var t = {}; return t.add = function () { }, t.commit = function () { }, t } e = e || window.document; var n = e.createElement("style"); n.setAttribute("type", "text/css"), n.styleSheet || n.appendChild(e.createTextNode("")), (e.head || e.getElementsByTagName("head")[0]).appendChild(n); var i = !!n.styleSheet, t = {}; return t.rules = [], t.commit = function () { try { i && (n.styleSheet.cssText = this.rules.join("\n")) } catch (e) { } }, t.add = function (e, a, r) { if (i) return void this.rules.push(e + "{" + a + "}"); if (n.sheet.insertRule) "undefined" == typeof r && (r = n.sheet.cssRules.length), n.sheet.insertRule(e + "{" + a + "}", r); else { if (!n.sheet.addRule) throw "No CSS registration method found"; n.sheet.addRule(e, a, r) } return t }, t.print = function () { for (var e = n.sheet.cssRules, t = [], i = 0; i < e.length; i++)t.push(e[i].cssText); return t.join("\n") }, t }, DayPilot.Args = function (e) { var t = this; this.isArgs = !0, this.preventDefault = function () { e && e.preventDefault(), t.preventDefault.value = !0 } }, DayPilot.Debug = function (e) { var t = this; this.printToBrowserConsole = !1, this.enabled = !1, this.messages = [], this.target = null, this.c = null, this.clear = function () { this.messages = [], t.c && (t.c.innerHTML = "") }, this.hide = function () { DayPilot.de(t.c), t.c = null }, this.show = function () { t.c && t.hide(); var n = e.nav.top, i = document.createElement("div"); i.style.position = "absolute", i.style.top = "0px", i.style.bottom = "0px", i.style.left = "0px", i.style.right = "0px", i.style.backgroundColor = "black", i.style.color = "#ccc", i.style.overflow = "auto", i.style.webkitUserSelect = "auto", i.style.MozUserSelect = "all", i.onclick = function () { t.hide() }; for (var a = 0; a < this.messages.length; a++) { var r = t.messages[a], o = r.f(); i.appendChild(o) } this.c = i, n.appendChild(i) }, this.log = function () { if (t.target) { for (var e = [], n = 0; n < arguments.length; n++) { var i = arguments[n]; e.push(i) } var a = e.join(" "); t.target.style.whiteSpace = "pre", t.target.innerText += a + "\n" } }, this.message = function (e, t) { if (this.enabled) { var n = {}; n.time = new DayPilot.Date, n.level = t || "debug", n.text = DayPilot.Util.escapeHtml(e), n.f = function () { var e = document.createElement("div"); switch (e.innerHTML = n.time + " (" + n.level + "): " + n.text, n.level) { case "error": e.style.color = "red"; break; case "warning": e.style.color = "orange"; break; case "info": e.style.color = "white"; break; case "debug": }return e }, this.messages.push(n), this.printToBrowserConsole && "undefined" != typeof console && console.log(n) } } }, DayPilot.re = function (e, t, n) { n && e && e.addEventListener(t, n, !1) }, DayPilot.rePassive = function (e, t, n) { n && e && e.addEventListener(t, n, { "passive": !0 }) }, DayPilot.reNonPassive = function (e, t, n) { n && e && e.addEventListener(t, n, { "passive": !1 }) }, DayPilot.ue = function (e, t, n) { e.removeEventListener(t, n, !1) }, DayPilot.ds = function (e) { return DayPilot.Date.toStringSortable(e) }, DayPilot.gs = function (e, t) { return window.getComputedStyle(e, null).getPropertyValue(t) || "" }, DayPilot.StyleReader = function (e) { this.get = function (t) { return e ? DayPilot.gs(e, t) : null }, this.getPx = function (e) { var t = this.get(e); if (t) return t.indexOf("px") === -1 ? void 0 : parseInt(t, 10) }, this.getFont = function () { var e = this.get("font-weight"), t = "italic" === this.get("font-style") ? "italic" : ""; return { "family": this.get("font-family"), "size": this.get("font-size"), "style": t + " " + e, "asString": function () { return DayPilot.Util.fontString(this) } } }, this.getBackColor = function (e) { "undefined" == typeof e && (e = "white"); var t = this.get("background-color"); return DayPilot.Util.isTransparentColor(t) ? e : t } }, DayPilot.he = function (e) { var t = e.replace(/&/g, "&amp;"); return t = t.replace(/</g, "&lt;"), t = t.replace(/>/g, "&gt;"), t = t.replace(/"/g, "&quot;") }, DayPilot.he2 = function (e) { var t = document.createTextNode(e), n = document.createElement("div"); return n.appendChild(t), n.innerHTML }, DayPilot.us = function (e) { if (e) { e.setAttribute("unselectable", "on"), e.style.userSelect = "none", e.style.MozUserSelect = "none", e.style.KhtmlUserSelect = "none", e.style.webkitUserSelect = "none"; for (var t = 0; t < e.childNodes.length; t++)1 === e.childNodes[t].nodeType && DayPilot.us(e.childNodes[t]) } }, DayPilot.pu = function (e) { var t, n, i, a = e.attributes; if (a) for (n = a.length, t = 0; t < n; t += 1)a[t] && (i = a[t].name, "function" == typeof e[i] && (e[i] = null)); if (a = e.childNodes) for (n = a.length, t = 0; t < n; t += 1) { DayPilot.pu(e.childNodes[t]) } }, DayPilot.puc = function (e) { var t, n, i = e.childNodes; if (i) { var n = i.length; for (t = 0; t < n; t += 1)DayPilot.pu(e.childNodes[t]) } }, DayPilot.de = function (e) { if (e) if (DayPilot.isArray(e)) for (var t = 0; t < e.length; t++)DayPilot.de(e[t]); else e.parentNode && e.parentNode.contains(e) && e.parentNode.removeChild(e) }, DayPilot.fade = function (e, t, n) { if (e) { clearTimeout(e.messageTimeout); var i = "none" !== e.style.display, a = t > 0, r = t < 0; if (0 !== t) { if (a ? e.status = "in" : r && (e.status = "out"), a && !i) e.target = parseFloat(e.style.opacity), e.opacity = 0, e.style.opacity = 0, e.style.display = ""; else if (r && !e.target) e.target = e.style.opacity; else { var o = e.opacity, s = Math.floor(10 * (o + t)) / 10; a && s > e.target && (s = e.target), r && s < 0 && (s = 0); e.opacity = s, e.style.opacity = s } a && (e.opacity >= e.target || e.opacity >= 1) || r && e.opacity <= 0 ? (e.target = null, r && (e.style.opacity = e.target, e.opacity = e.target, e.style.display = "none"), n && "function" == typeof n && (e.status = null, n())) : e.messageTimeout = setTimeout(function () { DayPilot.fade(e, t, n) }, 50) } } }, DayPilot.sw = function (e) { return e ? e.offsetWidth - e.clientWidth : 0 }, DayPilot.swa = function () { var e = document.createElement("div"); e.style.position = "absolute", e.style.top = "-2000px", e.style.left = "-2000px", e.style.width = "200px", e.style.height = "100px", e.style.overflow = "auto"; var t = document.createElement("div"); t.style.width = "300px", t.style.height = "300px", e.appendChild(t), document.body.appendChild(e); var n = DayPilot.sw(e); return document.body.removeChild(e), n }, DayPilot.sh = function (e) { return e ? e.offsetHeight - e.clientHeight : 0 }, DayPilot.guid = function () { var e = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }; return "" + e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() }, DayPilot.ua = function (e) { if (!DayPilot.isArray(e)) throw new DayPilot.Exception("DayPilot.ua() - array required"); var t = []; return e.forEach(function (e) { DayPilot.contains(t, e) || t.push(e) }), t }, DayPilot.am = function () { return "undefined" == typeof angular ? null : (DayPilot.am.cached || (DayPilot.am.cached = angular.module("daypilot", [])), DayPilot.am.cached) }, function () { function e(e, i) { var a = { w: e.offsetWidth, h: e.offsetHeight, x: parseInt(e.style.left), y: parseInt(e.style.top) }; a.height = e.style.height, a.width = e.style.width, a.top = e.style.top, a.left = e.style.left, a.toString = function () { return "w: " + this.w + " h:" + this.h }; var r = {}; if (r.finished = null, r.vertical = "center", r.horizontal = "center", i) for (var o in i) r[o] = i[o]; e.style.visibility = "hidden", e.style.display = ""; var s = i.animation || "fast", l = t(s); l.div = e, l.i = 0, l.target = a, l.config = r, n(l) } function t(e) { var t = function () { var e = []; e.time = 10; var t, n = .08; t = .1; for (var i = t; i < 1.2; i += n)e.push(i), t = i; n = .03; for (var i = t; i > .8; i -= n)e.push(i), t = i; for (var i = t; i <= 1; i += n)e.push(i), t = i; return e }, n = function () { var e = []; e.time = 10; var t, n = .04; t = .1; for (var i = t; i <= 1; i += n)e.push(i), t = i; return e }, i = function () { var e = []; e.time = 10; var t, n = .08; t = .1; for (var i = t; i <= 1; i += n)e.push(i), t = i; return e }, a = { "fast": i, "slow": n, "jump": t }; return a[e] || (e = "fast"), a[e]() } function n(e) { var t, i = e.div, a = e[e.i], r = a * e.target.h; switch (e.config.vertical) { case "center": t = e.target.y - (r - e.target.h) / 2; break; case "top": t = e.target.y; break; case "bottom": t = e.target.y - (r - e.target.h); break; default: throw "Unexpected 'vertical' value." }var o, s = a * e.target.w; switch (e.config.horizontal) { case "left": o = e.target.x; break; case "center": o = e.target.x - (s - e.target.w) / 2; break; case "right": o = e.target.x - (s - e.target.w); break; default: throw "Unexpected 'horizontal' value." }i.style.height = r + "px", i.style.top = t + "px", i.style.width = s + "px", i.style.left = o + "px", i.style.visibility = "visible", e.i++, e.i < e.length - 1 ? setTimeout(function (e) { return function () { n(e) } }(e), e.time) : (i.style.width = e.target.width, i.style.height = e.target.height, i.style.top = e.target.top, i.style.left = e.target.left, "function" == typeof e.config.finished && e.config.finished()) } DayPilot.pop = e }(), DayPilot.Util = {}, DayPilot.Util.addClass = function (e, t) { if (t && e) if (DayPilot.isArray(e)) for (var n = 0; n < e.length; n++)DayPilot.Util.addClass(e[n], t); else { if (!e.className) return void (e.className = t); var i = new RegExp("(^|\\s)" + t + "($|\\s)"); i.test(e.className) || (e.className = e.className + " " + t) } }, DayPilot.Util.normalizeColor = function (e) { function t(e) { return e = e.replace(/[^\d,]/g, "").split(","), "#" + ((1 << 24) + (+e[0] << 16) + (+e[1] << 8) + +e[2]).toString(16).slice(1) } return 0 === e.indexOf("rgb") ? t(e) : e }, DayPilot.Util.addClassToString = function (e, t) { return e ? new RegExp("(^|\\s)" + t + "($|\\s)").test(e) ? e : e + " " + t : t }, DayPilot.Util.removeClassFromString = function (e, t) { if (!e) return ""; var n = new RegExp("(^|\\s)" + t + "($|\\s)"); return e.replace(n, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, "") }, DayPilot.Util.removeClass = function (e, t) { if (e) if (DayPilot.isArray(e)) for (var n = 0; n < e.length; n++)DayPilot.Util.removeClass(e[n], t); else if (e.className) { var i = new RegExp("(^|\\s)" + t + "($|\\s)"); e.className = e.className.replace(i, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, "") } }, DayPilot.Util.props = function (e) { var t = []; for (var n in e) t.push(n), t.push(e[n]); return t.join("-") }, DayPilot.Util.propArray = function (e, t, n) { return DayPilot.list(e).map(function (e) { return e[t] ? e[t] : n }) }, DayPilot.Util.updatePropsFromArray = function (e, t, n) { for (var i = 0; i < n.length; i++)e[i][t] = n[i] }, DayPilot.Util.copyProps = function (e, t, n) { if (t || (t = {}), !e) return t; if ("undefined" == typeof n) for (var i in e) e.hasOwnProperty(i) && "undefined" != typeof e[i] && (t[i] = e[i]); else for (var a = 0; a < n.length; a++) { var i = n[a]; "undefined" != typeof e[i] && (t[i] = e[i]) } return t }, DayPilot.Util.ownPropsAsArray = function (e) { var t = []; if (!e) return t; for (var n in e) if (e.hasOwnProperty(n)) { var i = {}; i.key = n, i.val = e[n], t.push(i) } return t }, DayPilot.Util.firstPropValue = function (e) { for (var t in e) return e[t] }, DayPilot.Util.isOnlyProperty = function (e, t) { if (!e) return !1; for (var n in e) if (e.hasOwnProperty(n) && n !== t) return !1; return !0 }, DayPilot.Util.createArrayCopy = function (e, t) { if (!DayPilot.isArray(e)) return []; for (var n = [], i = 0; i < e.length; i++) { var a = {}; DayPilot.Util.copyProps(e[i], a, t), n.push(a) } return n }, DayPilot.Util.atLeast = function (e, t) { return Math.max(e, t) }, DayPilot.Util.atMost = function (e, t) { return Math.min(e, t) }, DayPilot.Util.avg = function (e, t) { return (e + t) / 2 }, DayPilot.Util.div = function (e, t, n, i, a) { var r = document.createElement("div"); return (t || n || i || a) && (i < 0 && (t += i, i *= -1), a < 0 && (n += a, a *= -1), r.style.position = "absolute", "number" == typeof t ? r.style.left = t + "px" : "string" == typeof t && (r.style.left = t), "number" == typeof n ? r.style.top = n + "px" : "string" == typeof n && (r.style.top = n), "number" == typeof i ? r.style.width = i + "px" : "string" == typeof i && (r.style.width = i), "number" == typeof a ? r.style.height = a + "px" : "string" == typeof a && (r.style.height = a)), e && e.appendChild(r), r }, DayPilot.Util.overlaps = function (e, t, n, i) { return !(t <= n || e >= i) }, DayPilot.Util.isMouseEvent = function (e) { return !!navigator.msPointerEnabled && (!!e.pointerType && ("mouse" === e.pointerType || 4 === e.pointerType)) }, DayPilot.Util.mouseButton = function (e) { var t = {}; switch (e.button) { case 0: t.left = !0; break; case 1: t.middle = !0; break; case 2: t.right = !0 }return t }, DayPilot.Util.membersPlain = function (e) { var t = DayPilot.Util.members(e, 2), n = function (e) { for (var t = 0; t < e.length; t++) { var n = e[t], i = n.name; n.obsolete && (i += " (obsolete)"), n.noCssOnly && (i += " (!cssOnly)"), n.aspnet && (i += " (ASP.NET)"), n.mvc && (i += "(MVC)"), e[t] = i } }; return n(t.events), n(t.methods), n(t.properties), t }, DayPilot.Util.shouldApply = function (e) { if (!e) return !1; var t = e.toLowerCase(); return !(t.indexOf("before") >= 0) && (!(t.indexOf("after") >= 0) && ("onrowfilter" !== t && "oneventfilter" !== t)) }, DayPilot.Util.safeApply = function (e, t) { var n = e["$root"]["$$phase"]; "$apply" === n || "$digest" === n ? e["$eval"](t) : e["$apply"](t) }, DayPilot.Util.members = function (e, t) { var n = DayPilot.list(), i = DayPilot.list(), a = DayPilot.list(), r = e && e.members ? e.members.obsolete : [], o = e && e.members ? e.members.noCssOnly : [], s = e && e.members ? e.members.ignore : [], l = e && e.members && e.members.ignoreFilter ? e.members.ignoreFilter : function () { return !1 }; for (var d in e) if (0 !== d.indexOf("$") && 0 !== d.indexOf("_") && 0 !== d.indexOf("number") && 0 !== d.indexOf("is") && "v" !== d && !DayPilot.contains(s, d) && !l(d)) if (0 !== d.indexOf("on")) if ("function" != typeof e[d]) if ("object" != typeof e[d]) a.push(d); else { var c = e[d]; if (0 === t) { a.push(d); continue } if (c && c.nodeType > 0) { a.push(d); continue } if (c instanceof DayPilot.Bubble) { a.push(d); continue } if (c instanceof DayPilot.Date) { a.push(d); continue } if (c instanceof DayPilot.Menu) { a.push(d); continue } if (c instanceof DayPilot.Scheduler) { a.push(d); continue } if (DayPilot.isArray(c)) { a.push(d); continue } null === c && a.push(d); var u = null; "number" == typeof t && (u = t - 1); for (var h = DayPilot.Util.members(c, u), f = 0; f < h.events.length; f++)n.push(d + "." + h.events[f].name); for (var f = 0; f < h.methods.length; f++)i.push(d + "." + h.methods[f].name); for (var f = 0; f < h.properties.length; f++)a.push(d + "." + h.properties[f].name) } else i.push(d); else n.push(d); n.sort(), i.sort(), a.sort(); var v = function (e) { for (var t = 0; t < e.length; t++) { var n = e[t], i = {}; i.name = n, e[t] = i, DayPilot.contains(r, n) && (i.obsolete = !0), DayPilot.contains(o, n) && (i.noCssOnly = !0), n.indexOf("CallBack") !== -1 && (i.aspnet = !0, i.mvc = !0), n.indexOf("PostBack") !== -1 && (i.aspnet = !0), n.indexOf("Notify") !== -1 && (i.aspnet = !0, i.mvc = !0) } }; return v(n), v(i), v(a), { "events": n, "methods": i, "properties": a } }, DayPilot.Util.replaceCharAt = function (e, t, n) { return e.substr(0, t) + n + e.substr(t + n.length) }, DayPilot.Util.evalVariable = function (e, t) { if (t = t || ["object"], null === e || "undefined" == typeof e) return null; if (DayPilot.indexOf(t, typeof e) !== -1) return e; if ("string" != typeof e) throw "Unable to resolve a variable name (not a string)."; if (!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)) throw "Invalid variable name: " + e; return eval(e) }, DayPilot.Util.evalFunction = function (e) { if (null === e) return null; if ("function" == typeof e) return e; if ("string" != typeof e) throw "Unable to resolve a function (not a string)."; if (!/^\(?function/.test(e)) throw "Invalid function string"; return eval("(" + e + ")") }, DayPilot.Util.isNullOrUndefined = function (e) { return null === e || "undefined" == typeof e }, DayPilot.Util.log = function (e) { window.console && window.console.log && window.console.log(e) }, DayPilot.Util.workerFrom = function (e) { var t = e.toString(), n = t.slice(t.indexOf("{") + 1, t.lastIndexOf("}")), i = new Blob([n]), a = window.URL.createObjectURL(i); return new Worker(a) }, DayPilot.Util.dataUriToBlob = function (e) { if ("string" != typeof e) throw "DayPilot.Util.dataUriToBlob(): dataURI string expected"; for (var t = e.split(","), n = t[0], i = t[1], a = n.indexOf("base64") !== -1, r = a ? atob : decodeURI, o = n.split(":")[1].split(";")[0], s = r(i), l = new window.Uint8Array(s.length), d = 0; d < s.length; d++)l[d] = s.charCodeAt(d); return new Blob([l], { "type": o }) }, DayPilot.Util.downloadDataUri = function (e, t) { var n = DayPilot.Util.dataUriToBlob(e); DayPilot.Util.downloadBlob(n, t) }, DayPilot.Util.downloadBlob = function (e, t) { var t = t || "download"; if (window.navigator.msSaveBlob) window.navigator.msSaveBlob(e, t); else { var n = window.URL.createObjectURL(e), i = document.createElement("a"); i.download = t, i.href = n, i.style.display = "none", document.body.appendChild(i), i.click(), setTimeout(function () { document.body.removeChild(i), window.URL.revokeObjectURL(n) }) } }, DayPilot.Util.monitor = function (e, t, n) { var i = e[t]; e[t] = function () { n.apply(e, arguments), i.apply(e, arguments) } }, DayPilot.Util.isTransparentColor = function (e) { return "transparent" === e || "rgba(0, 0, 0, 0)" === e }, DayPilot.Util.stripTags = function (e) { if (DayPilot.Util.isNullOrUndefined(e)) return e; if ("string" == typeof e) return e.replace(/<(?:.|\n)*?>/gm, ""); throw new DayPilot.Exception("Unable to strip tags from a non-string") }, DayPilot.Util.escapeHtml = function (e) { var t = document.createElement("div"); return t.innerText = e, t.innerHTML }, DayPilot.Util.escapeTextHtml = function (e, t) { return DayPilot.Util.isNullOrUndefined(t) ? DayPilot.Util.isNullOrUndefined(e) ? "" : DayPilot.Util.escapeHtml(e) : t }, DayPilot.Util.isSameEvent = function (e, t) { return !(!e || !t) && (e = e instanceof DayPilot.Event ? e.data : e, t = t instanceof DayPilot.Event ? t.data : t, e === t || (!DayPilot.Util.isNullOrUndefined(e.id) && e.id === t.id || !(!DayPilot.Util.isNullOrUndefined(e.id) || DayPilot.Util.isNullOrUndefined(e.recurrentMasterId)) && (e.recurrentMasterId === t.recurrentMasterId && new DayPilot.Date(e.start) === new DayPilot.Date(t.start)))) }, DayPilot.Util.isReactComponent = function (e) { return e && e.$$typeof === ("function" == typeof Symbol && Symbol.for && Symbol.for("react.element") || 60103) }, DayPilot.Util.fontString = function (e) { return (e.style + " " + e.size + " " + e.family).trim() }, DayPilot.Util.fontHeight = function (e) { var t = DayPilot.Util.fontString(e); if ("number" != typeof DayPilot.Util.fontHeight.cache[t]) { var n = document.createElement("div"); n.style.position = "fixed", n.style.left = "-2000px;", n.style.top = "-2000px", n.style.padding = "0px", n.style.font = t, n.innerText = "X", document.body.appendChild(n), DayPilot.Util.fontHeight.cache[t] = new DayPilot.StyleReader(n).getPx("height"), document.body.removeChild(n) } return DayPilot.Util.fontHeight.cache[t] }, DayPilot.Util.fontHeight.cache = {}, DayPilot.Areas = {}, DayPilot.Areas.attach = function (e, t, n) { var n = n || {}, a = n.areas, r = n.allowed || function () { return !0 }, o = n.offsetX || 0; a = i(t, a), a && DayPilot.isArray(a) && 0 !== a.length && (DayPilot.re(e, "mousemove", function (i) { e.active || e.areasDisabled || !r() || DayPilot.Areas.showAreas(e, t, i, a, { "offsetX": o, "eventDiv": n.eventDiv }) }), DayPilot.re(e, "mouseleave", function (t) { DayPilot.Areas.hideAreas(e, t) }), DayPilot.list(a).forEach(function (i) { if (DayPilot.Areas.isVisible(i)) { var a = DayPilot.Areas.createArea(e, t, i, { "offsetX": o, "eventDiv": n.eventDiv }); e.appendChild(a) } })) }, DayPilot.Areas.disable = function (e) { e.areasDisabled = !0, DayPilot.list(e.childNodes).filter(function (e) { return e.isActiveArea && !e.area.start }).forEach(function (e) { e.j = e.style.display, e.style.display = "none" }) }, DayPilot.Areas.enable = function (e) { e.areasDisabled = !1, DayPilot.list(e.childNodes).filter(function (e) { return e.isActiveArea && !e.area.start }).forEach(function (e) { e.j ? e.style.display = e.j : e.style.display = "" }) }, DayPilot.Areas.remove = function (e) { var t = DayPilot.list(e.childNodes).filter(function (e) { return e.isActiveArea }); DayPilot.de(t) }, DayPilot.Areas.isVisible = function (e) { var t = e.visibility || e.v || "Visible"; return "Visible" === t || "TouchVisible" === t && !DayPilot.browser.hover }, DayPilot.Areas.copy = function (e) { return DayPilot.isArray(e) ? e.map(function (e) { return DayPilot.Util.copyProps(e, {}) }) : [] }, DayPilot.Areas.resolvePosition = function (e, t, n, i) { var a = DayPilot.Areas.copy(e), r = t; return a.forEach(function (e) { e.start && (e.left = r.getPixels(new DayPilot.Date(e.start)).left - n), "number" == typeof e.offsetX && (e.left += e.offsetX), e.end && (e.right = n + i - r.getPixels(new DayPilot.Date(e.end)).left) }), a }; var i = function (e, t) { return DayPilot.isArray(t) || (t = e.areas, t || (e.cache ? t = e.cache.areas : e.data && (t = e.data.areas))), t }; DayPilot.Areas.showAreas = function (e, t, n, i, a) { if (!DayPilot.Global.resizing && !DayPilot.Global.moving && !DayPilot.Global.selecting && !e.active && DayPilot.browser.hover) { if (DayPilot.Areas.all && DayPilot.Areas.all.length > 0) for (var r = 0; r < DayPilot.Areas.all.length; r++) { var o = DayPilot.Areas.all[r]; o !== e && DayPilot.Areas.hideAreas(o, n) } if (e.active = {}, DayPilot.isArray(i) || (i = t.areas, i || (t.cache ? i = t.cache.areas : t.data && (i = t.data.areas))), i && 0 !== i.length && !(e.areas && e.areas.length > 0)) { e.areas = []; for (var r = 0; r < i.length; r++) { var s = i[r]; if (!DayPilot.Areas.isVisible(s)) { var l = DayPilot.Areas.createArea(e, t, s, a); e.areas.push(l), e.appendChild(l), DayPilot.Areas.all.push(e) } } e.active.children = DayPilot.ac(e) } } }, DayPilot.Areas.createArea = function (e, t, n, i) {
            function a(e, t, n) { var i = {}; return i.area = e, i.source = t, i.originalEvent = n, i.preventDefault = function () { i.preventDefault.value = !0 }, "function" == typeof e.onClick && e.onClick(i), i } function r(e, t, n) { DayPilot.Bubble && DayPilot.Bubble.touchPosition(n), e.calendar.bubble && e.calendar.bubble.showEvent(e, !0) } function o(e, t, n, i) { DayPilot.Menu && DayPilot.Menu.touchPosition(i); var a = n.contextMenu || n.menu; if (a instanceof DayPilot.Menu || ("string" == typeof a ? a = DayPilot.Util.evalVariable(a) : t.isEvent && t.client.contextMenu() ? a = t.client.contextMenu() : t.isEvent && t.calendar.contextMenu ? a = DayPilot.Util.evalVariable(t.calendar.contextMenu) : t.isRow && t.calendar.contextMenuResource && (a = DayPilot.Util.evalVariable(t.calendar.contextMenuResource))), a && a.show) { var r = { "type": "area", "div": e, "e": t, "area": n, "a": d }; a.show(t, { "initiator": r }) } } function s(e) { return "string" == typeof e && isNaN(e) ? e : "undefined" != typeof e ? e + "px" : void 0 } var i = i || {}, l = (i.offsetX || 0, i.eventDiv || e), d = document.createElement("div"); d.isActiveArea = !0, d.area = n, d.setAttribute("unselectable", "on"); var c = n.w || n.width, u = n.h || n.height, h = n.cssClass || n.css || n.className; if ("undefined" != typeof n.style && d.setAttribute("style", n.style), d.style.position = "absolute", d.style.width = s(c), d.style.height = s(u), d.style.right = s(n.right), d.style.top = s(n.top),
                d.style.left = s(n.left), d.style.bottom = s(n.bottom), "undefined" != typeof n.html || "undefined" != typeof n.text) d.innerHTML = DayPilot.Util.escapeTextHtml(n.text, n.html); else if (n.icon) { var f = document.createElement("i"); f.className = n.icon, d.appendChild(f) } else if (n.image) { var v = document.createElement("img"); v.src = n.image, d.appendChild(v) } else if (n.symbol) { var p = "http://www.w3.org/2000/svg", m = document.createElementNS(p, "svg"); m.setAttribute("width", "100%"), m.setAttribute("height", "100%"); var g = document.createElementNS(p, "use"); g.setAttribute("href", n.symbol), m.appendChild(g), d.appendChild(m) } if (h && (d.className = h), n.toolTip && d.setAttribute("title", n.toolTip), n.backColor && (d.style.background = n.backColor), n.background && (d.style.background = n.background), n.fontColor && (d.style.color = n.fontColor), n.padding && (d.style.padding = n.padding + "px", d.style.boxSizing = "border-box"), n.verticalAlignment) switch (d.style.display = "flex", n.verticalAlignment) { case "center": d.style.alignItems = "center"; break; case "top": d.style.alignItems = "flex-start"; break; case "bottom": d.style.alignItems = "flex-end" }if (n.horizontalAlignment) switch (d.style.display = "flex", n.horizontalAlignment) { case "right": d.style.justifyContent = "flex-end"; break; case "left": d.style.justifyContent = "flex-start"; break; case "center": d.style.justifyContent = "center" }if ("ResizeEnd" === n.action || "ResizeStart" === n.action || "Move" === n.action) { if (t.calendar.isCalendar) switch (n.action) { case "ResizeEnd": n.cursor = "s-resize", n.dpBorder = "bottom"; break; case "ResizeStart": n.cursor = "n-resize", n.dpBorder = "top"; break; case "Move": n.cursor = "move" }if (t.calendar.isScheduler || t.calendar.isMonth) switch (n.action) { case "ResizeEnd": n.cursor = "e-resize", n.dpBorder = "right"; break; case "ResizeStart": n.cursor = "w-resize", n.dpBorder = "left"; break; case "Move": n.cursor = "move" }d.onmousemove = function (e, t, n) { return function (i) { t.calendar.internal && t.calendar.internal.dragInProgress && t.calendar.internal.dragInProgress() || (i.cancelBubble = !0, e.style.cursor = n.cursor, n.dpBorder && (e.dpBorder = n.dpBorder)) } }(l, t, n), d.onmouseout = function (e, t, n) { return function (t) { e.style.cursor = "" } }(l, t, n) } if (("ResizeEnd" === n.action || "ResizeStart" === n.action) && t.isEvent && t.calendar.internal.touch) { var b = function (e, t, n) { return function (i) { i.cancelBubble = !0; var a = t.calendar.internal.touch, r = i.touches ? i.touches[0] : i, o = { x: r.pageX, y: r.pageY }; t.calendar.coords = a.relativeCoords(i), a.preventEventTap = !0, t.calendar.isScheduler ? a.startResizing(e, "ResizeEnd" === n.action ? "right" : "left") : t.calendar.isCalendar && a.startResizing(e, "ResizeEnd" === n.action ? "bottom" : "top", o) } }(l, t, n); DayPilot.rePassive(d, DayPilot.touch.start, b) } if ("ContextMenu" === n.action && t.isEvent && t.calendar.internal.touch) { var b = function (e, t, n) { return function (i) { i.cancelBubble = !0, i.preventDefault(), o(e, t, n, i), t.calendar.internal.touch.preventEventTap = !0 } }(l, t, n), y = function (e, t, n) { return function (e) { e.cancelBubble = !0, e.preventDefault() } }(l, t, n); DayPilot.reNonPassive(d, DayPilot.touch.start, b), DayPilot.reNonPassive(d, DayPilot.touch.end, y) } if ("Bubble" === n.action && t.isEvent && t.calendar.internal.touch) { var b = function (e, t, n) { return function (e) { e.cancelBubble = !0, e.preventDefault(); var i = a(n, t, e); if (!i.preventDefault.value) { r(t, n, e); t.calendar.internal.touch.preventEventTap = !0, "function" == typeof n.onClicked && n.onClicked(i) } } }(l, t, n), y = function (e, t, n) { return function (e) { e.cancelBubble = !0, e.preventDefault() } }(l, t, n); DayPilot.reNonPassive(d, DayPilot.touch.start, b), DayPilot.reNonPassive(d, DayPilot.touch.end, y) } if ("Move" === n.action && t.isEvent && t.calendar.internal.touch) { var b = function (e, t, n) { return function (n) { n.cancelBubble = !0; var i = t.calendar.internal.touch, a = n.touches ? n.touches[0] : n, r = { x: a.pageX, y: a.pageY }; t.calendar.coords = i.relativeCoords(n), DayPilot.Global && DayPilot.Global.touch && (DayPilot.Global.touch.active = !0), i.preventEventTap = !0, i.startMoving(e, r) } }(l, t, n); DayPilot.rePassive(d, DayPilot.touch.start, b) } if ("Move" === n.action && t.isRow && t.calendar.internal.touch, "Bubble" === n.action && t.isEvent ? (d.onmousemove = function (e, t, n) { return function (e) { n.bubble ? n.bubble.showEvent(t, !0) : t.calendar.bubble && t.calendar.bubble.showEvent(t, !0) } }(e, t, n), d.onmouseout = function (e, t, n) { return function (e) { "undefined" != typeof DayPilot.Bubble && (n.bubble ? n.bubble.hideOnMouseOut() : t.calendar.bubble && t.calendar.bubble.hideOnMouseOut()) } }(e, t, n)) : "Bubble" === n.action && t.isRow ? (d.onmousemove = function (e, t, n) { return function (e) { n.bubble ? n.bubble.showResource(t, !0) : t.calendar.resourceBubble && t.calendar.resourceBubble.showResource(t, !0) } }(e, t, n), d.onmouseout = function (e, t, n) { return function (e) { "undefined" != typeof DayPilot.Bubble && (n.bubble ? n.bubble.hideOnMouseOut() : t.calendar.resourceBubble && t.calendar.resourceBubble.hideOnMouseOut()) } }(e, t, n)) : "Bubble" === n.action && "undefined" != typeof DayPilot.Bubble && n.bubble instanceof DayPilot.Bubble && (d.onmousemove = function (e, t, n) { return function (e) { n.bubble.showHtml(null, null) } }(e, t, n), d.onmouseout = function (e, t, n) { return function (e) { "undefined" != typeof DayPilot.Bubble && n.bubble && n.bubble.hideOnMouseOut() } }(e, t, n)), "HoverMenu" === n.action && (d.onmousemove = function (e, t, n) { return function (e) { var i = n.menu; "string" == typeof i && (i = DayPilot.Util.evalVariable(i)), i && i.show && (i.visible ? i.source && "undefined" != typeof i.source.id && i.source.id !== t.id && i.show(t) : i.show(t), i.cancelHideTimeout()) } }(e, t, n), d.onmouseout = function (e, t, n) { return function (e) { var t = n.menu; "string" == typeof t && (t = DayPilot.Util.evalVariable(t)), t && t.hideOnMouseOver && t.delayedHide() } }(e, t, n)), "JavaScript" === n.action) { var b = function (e, t, n) { return function (e) { if (!DayPilot.Util.isMouseEvent(e)) { e.cancelBubble = !0, e.preventDefault(); t.calendar.internal.touch; DayPilot.Global && DayPilot.Global.touch && (DayPilot.Global.touch.start = !0) } } }(l, t, n), y = function (e, t, n) { return function (e) { if (!DayPilot.Util.isMouseEvent(e)) { e.cancelBubble = !0, e.preventDefault(); t.calendar.internal.touch; DayPilot.Global && DayPilot.Global.touch && (DayPilot.Global.touch.start = !1); var i = n.js; if ("string" == typeof i && (i = DayPilot.Util.evalFunction(n.js)), "function" == typeof i) { var a = n.target || t; i.call(this, a) } } } }(l, t, n); DayPilot.reNonPassive(d, DayPilot.touch.start, b), DayPilot.reNonPassive(d, DayPilot.touch.end, y) } if ("None" === n.action) { var b = function (e, t, n) { return function (e) { var i = a(n, t, e); "function" == typeof n.onClicked && n.onClicked(i), e.preventDefault(), e.stopPropagation() } }(l, t, n); DayPilot.reNonPassive(d, DayPilot.touch.start, b) } return d.onmousedown = function (e, t, n) { return function (i) { if ("function" == typeof n.onmousedown && n.onmousedown(i), "function" == typeof n.mousedown) { var a = {}; a.area = n, a.div = e, a.originalEvent = i, a.source = t, n.mousedown(a) } if ("Move" === n.action && t.isRow) { var r = t.$.row; (0, t.calendar.internal.rowStartMoving)(r) } "undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), "Move" === n.action && (DayPilot.Global.movingAreaData = n.data), "Move" === n.action && t.isEvent && t.calendar.internal && t.calendar.internal.startMoving && t.calendar.internal.startMoving(e, i); "Move" !== n.action && "ResizeEnd" !== n.action && "ResizeStart" !== n.action && n.action && "Default" !== n.action && (i.preventDefault(), i.cancelBubble = !0) } }(e, t, n), d.onclick = function (e, t, n) { return function (i) { var r = a(n, t, i); if (!r.preventDefault.value) { switch (n.action) { case "JavaScript": var s = n.js; if ("string" == typeof s && (s = DayPilot.Util.evalFunction(n.js)), "function" == typeof s) { var l = n.target || t; s.call(this, l) } i.cancelBubble = !0; break; case "ContextMenu": o(e, t, n, i), i.cancelBubble = !0; break; case "CallBack": alert("callback not implemented yet, id: " + n.id), i.cancelBubble = !0; break; case "None": i.cancelBubble = !0 }"function" == typeof n.onClicked && n.onClicked(r) } } }(e, t, n), "function" == typeof n.onMouseEnter && d.addEventListener("mouseenter", function (e, t, n) { return function (e) { var i = {}; i.area = n, i.source = t, i.originalEvent = e, n.onMouseEnter(i) } }(e, t, n)), "function" == typeof n.onMouseLeave && d.addEventListener("mouseleave", function (e, t, n) { return function (e) { var i = {}; i.area = n, i.source = t, i.originalEvent = e, n.onMouseLeave(i) } }(e, t, n)), d
        }, DayPilot.Areas.all = [], DayPilot.Areas.hideAreas = function (e, t) { if (e && e && e.active) { var n = e.active, i = e.areas; if (n && n.children && t) { var a = t.toElement || t.relatedTarget; if (~DayPilot.indexOf(n.children, a)) return } if (!i || 0 === i.length) return void (e.active = null); DayPilot.de(i), e.active = null, e.areas = [], DayPilot.rfa(DayPilot.Areas.all, e), n.children = null } }, DayPilot.Areas.hideAll = function (e) { if (DayPilot.Areas.all && 0 !== DayPilot.Areas.all.length) for (var t = 0; t < DayPilot.Areas.all.length; t++)DayPilot.Areas.hideAreas(DayPilot.Areas.all[t], e) }, DayPilot.Action = function (e, t, n, i) { var a = this; this.calendar = e, this.isAction = !0, this.action = t, this.params = n, this.data = i, this.notify = function () { a.calendar.internal.invokeEvent("Immediate", this.action, this.params, this.data) }, this.auto = function () { a.calendar.internal.invokeEvent("Notify", this.action, this.params, this.data) }, this.queue = function () { a.calendar.queue.add(this) }, this.toJSON = function () { var e = {}; return e.name = this.action, e.params = this.params, e.data = this.data, e } }, DayPilot.Selection = function (e, t, n, i) { this.menuType = "selection", this.start = new DayPilot.Date(e), this.end = new DayPilot.Date(t), this.resource = n, this.root = i, this.calendar = i, this.toJSON = function (e) { var t = {}; return t.start = this.start, t.end = this.end, t.resource = this.resource, t } }, DayPilot.Link = function (e, t) { this.isLink = !0, this.data = e, this.calendar = t, this.to = function () { return this.data.to }, this.from = function () { return this.data.from }, this.type = function () { return this.data.type }, this.id = function () { return this.data.id }, this.toJSON = function () { var e = {}; return e.from = this.data.from, e.to = this.data.to, e.id = this.data.id, e.type = this.data.type, e } }, DayPilot.Event = function (e, t, n) { var i = this; this.calendar = t, this.data = e ? e : {}, this.part = n ? n : {}, "undefined" == typeof this.data.id && (this.data.id = this.data.value); var a = {}, r = ["id", "text", "start", "end", "resource"]; this.isEvent = !0, DayPilot.Stats.eventObjects += 1, this.temp = function () { if (a.dirty) return a; for (var e = 0; e < r.length; e++)a[r[e]] = i.data[r[e]]; return a.dirty = !0, a }, this.copy = function () { var e = {}; return DayPilot.Util.copyProps(i.data, e), e }, this.commit = function () { if (a.dirty) { for (var e = 0; e < r.length; e++)i.data[r[e]] = a[r[e]]; "function" == typeof i.data.commitCallback && i.data.commitCallback(), a.dirty = !1 } }, this.dirty = function () { return a.dirty }, this.id = function (e) { return "undefined" == typeof e ? i.data.id : void (this.temp().id = e) }, this.value = function (e) { return "undefined" == typeof e ? i.id() : void i.id(e) }, this.text = function (e) { if ("undefined" == typeof e) return i.data.text; this.temp().text = e; var t = DayPilot.Util.escapeHtml(e); this.client.innerHTML(t) }, this.start = function (e) { return "undefined" == typeof e ? new DayPilot.Date(i.data.start) : void (this.temp().start = new DayPilot.Date(e)) }, this.end = function (e) { return "undefined" == typeof e ? t && t.internal.adjustEndNormalize ? t.internal.adjustEndNormalize(new DayPilot.Date(i.data.end)) : new DayPilot.Date(i.data.end) : void (this.temp().end = new DayPilot.Date(e)) }, this.duration = function () { return new DayPilot.Duration(this.start(), this.end()) }, this.rawend = function (e) { if ("undefined" == typeof e) return t && t.internal.adjustEndIn ? t.internal.adjustEndIn(new DayPilot.Date(i.data.end)) : new DayPilot.Date(i.data.end); throw new DayPilot.Exception("DayPilot.Event.rawend() is readonly") }, this.partStart = function () { return new DayPilot.Date(this.part.start) }, this.partEnd = function () { return new DayPilot.Date(this.part.end) }, this.row = function () { return this.resource() }, this.allday = function () { return "undefined" == typeof val ? i.data.allday : void (this.temp().allday = val) }, this.isAllDay = this.allday, this.resource = function (e) { return "undefined" == typeof e ? i.data.resource : void (this.temp().resource = e) }, this.recurrent = function () { return i.data.recurrent }, this.recurrentMasterId = function () { return i.data.recurrentMasterId }, this.useBox = function () { return this.part.box }, this.staticBubbleHTML = function () { return this.bubbleHtml() }, this.bubbleHtml = function () { return i.cache ? i.cache.bubbleHtml || i.data.bubbleHtml : i.data.bubbleHtml }, this.tag = function (e) { if (i.data.tags) return i.data.tags[e]; var t = i.data.tag; if (!t) return null; if ("undefined" == typeof e) return i.data.tag; for (var n = i.calendar.tagFields, a = -1, r = 0; r < n.length; r++)e === n[r] && (a = r); if (a === -1) throw "Field name not found."; return t[a] }, this.client = {}, this.client.innerHTML = function (e) { if ("undefined" == typeof e) { var t = i.cache || i.data, n = i.calendar && i.calendar.internal && i.calendar.internal.xssTextHtml; return n ? n(t.text, t.html) : DayPilot.Util.escapeTextHtml(t.text, t.html) } i.data.html = e, i.cache && (i.cache.html = e) }, this.client.html = this.client.innerHTML, this.client.header = function (e) { return "undefined" == typeof e ? i.data.header : void (i.data.header = e) }, this.client.cssClass = function (e) { return "undefined" == typeof e ? i.data.cssClass : void (i.data.cssClass = e) }, this.client.toolTip = function (e) { if ("undefined" == typeof e) { var t = null; return t = i.cache && "undefined" != typeof i.cache.toolTip ? i.cache.toolTip : "undefined" != typeof i.data.toolTip ? i.data.toolTip : i.data.text } i.data.toolTip = e }, this.client.backColor = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.backColor ? i.cache.backColor : "undefined" != typeof i.data.backColor ? i.data.backColor : i.calendar.eventBackColor : void (i.data.backColor = e) }, this.client.borderColor = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.borderColor ? i.cache.borderColor : "undefined" != typeof i.data.borderColor ? i.data.borderColor : i.calendar.eventBorderColor : void (i.data.borderColor = e) }, this.client.barColor = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.barColor ? i.cache.barColor : "undefined" != typeof i.data.barColor ? i.data.barColor : i.calendar.durationBarColor : void (i.data.barColor = e) }, this.client.barVisible = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.barHidden ? !i.cache.barHidden : i.calendar.durationBarVisible && !i.data.barHidden : void (i.data.barHidden = !e) }, this.client.contextMenu = function (e) { if ("undefined" == typeof e) { if (i.oContextMenu) return i.oContextMenu; var t = i.cache ? i.cache.contextMenu : i.data.contextMenu; return t ? DayPilot.Util.evalVariable(t) : null } i.oContextMenu = e }, this.client.moveEnabled = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.moveDisabled ? !i.cache.moveDisabled : "Disabled" !== i.calendar.eventMoveHandling && !i.data.moveDisabled : void (i.data.moveDisabled = !e) }, this.client.resizeEnabled = function (e) { return "undefined" == typeof e ? "Milestone" !== i.data.type && (i.cache && "undefined" != typeof i.cache.resizeDisabled ? !i.cache.resizeDisabled : "Disabled" !== i.calendar.eventResizeHandling && !i.data.resizeDisabled) : void (i.data.resizeDisabled = !e) }, this.client.rightClickEnabled = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.rightClickDisabled ? !i.cache.rightClickDisabled : "Disabled" !== i.calendar.eventRightClickHandling && !i.data.rightClickDisabled : void (i.data.rightClickDisabled = !e) }, this.client.clickEnabled = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.clickDisabled ? !i.cache.clickDisabled : "Disabled" !== i.calendar.eventClickHandling && !i.data.clickDisabled : void (i.data.clickDisabled = !e) }, this.client.deleteEnabled = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.deleteDisabled ? !i.cache.deleteDisabled : "Disabled" !== i.calendar.eventDeleteHandling && !i.data.deleteDisabled : void (i.data.deleteDisabled = !e) }, this.client.doubleClickEnabled = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.doubleClickDisabled ? !i.cache.doubleClickDisabled : "Disabled" !== i.calendar.eventDoubleClickHandling && !i.data.doubleClickDisabled : void (i.data.doubleClickDisabled = !e) }, this.client.deleteClickEnabled = function (e) { return "undefined" == typeof e ? i.cache && "undefined" != typeof i.cache.deleteDisabled ? !i.cache.deleteDisabled : "Disabled" !== i.calendar.eventDeleteHandling && !i.data.deleteDisabled : void (i.data.deleteDisabled = !e) }, this.toJSON = function (e) { var t = {}; if (t.value = this.id(), t.id = this.id(), t.text = this.text(), t.start = this.start().toJSON(), t.end = this.end().toJSON(), t.resource = this.resource(), t.isAllDay = !1, t.recurrentMasterId = this.recurrentMasterId(), t.join = this.data.join, t.tag = {}, i.data.tags) for (var n in i.data.tags) i.data.tags.hasOwnProperty(n) && (t.tag[n] = "" + i.data.tags[n]); else if (i.calendar && i.calendar.tagFields) for (var a = i.calendar.tagFields, r = 0; r < a.length; r++)t.tag[a[r]] = this.tag(a[r]); return t } }, DayPilot.Task = function (e, t) { if (!e) throw "Trying to initialize DayPilot.Task with null data parameter"; var n = this, i = null; if (e instanceof DayPilot.Event) i = e, this.data = e.data.task; else { if (e instanceof DayPilot.Task) return e; e.isTaskWrapper ? this.data = e.data : this.data = e } var a = {}, r = ["id", "text", "start", "end", "complete", "type"]; this.isTask = !0, this.calendar = t, this.temp = function () { if (a.dirty) return a; for (var e = 0; e < r.length; e++)a[r[e]] = n.data[r[e]]; return a.dirty = !0, a }, this.copy = function () { var e = {}; return DayPilot.Util.copyProps(n.data, e), e }, this.commit = function () { if (a.dirty) { for (var e = 0; e < r.length; e++)n.data[r[e]] = a[r[e]]; a.dirty = !1 } }, this.dirty = function () { return a.dirty }, this.id = function (e) { return "undefined" == typeof e ? n.data.id : void (this.temp().id = e) }, this.text = function (e) { if ("undefined" == typeof e) return n.data.text; this.temp().text = e; var t = DayPilot.Util.escapeHtml(e); this.client.innerHTML(t) }, this.start = function (e) { return "undefined" == typeof e ? new DayPilot.Date(n.data.start) : void (this.temp().start = new DayPilot.Date(e)) }, this.duration = function () { return new DayPilot.Duration(this.start(), this.end()) }, this.end = function (e) { return "undefined" == typeof e ? t && "Date" === t.eventEndSpec ? new DayPilot.Date(n.data.end).getDatePart().addDays(1) : new DayPilot.Date(n.data.end) : void (this.temp().end = new DayPilot.Date(e)) }, this.type = function (e) { return "undefined" == typeof e ? i ? i.data.type || "Task" : n.data.type : void (this.temp().type = e) }, this.complete = function (e) { return "undefined" == typeof e ? n.data.complete ? n.data.complete : 0 : void (this.temp().complete = e) }, this.children = function () { var e = []; e.add = function (e) { var t = new DayPilot.Task(e); this.data.children || (this.data.children = []), this.children.push(t.data) }; for (var n = 0; this.data.children && n < this.data.children.length; n++)e.push(new DayPilot.Task(this.data.children[n], t)); return e }, this.toJSON = function (e) { var t = {}; return t.id = this.id(), t.text = this.text(), t.start = this.start().toJSON(), t.end = this.end().toJSON(), t.type = this.type(), t.tags = {}, DayPilot.Util.copyProps(this.data.tags, t.tags), t }, this.row = {}; var o = this.row; o.expanded = function (e) { return "undefined" == typeof e ? !n.data.row || !n.data.row.collapsed : (n.data.row || (n.data.row = {}), !!n.data.row.collapsed != !e && t.internal.rowObjectForTaskData(n.data).toggle(), n.data.row.collapsed = !e, void 0) }, o.expand = function () { o.expanded(!0) }, o.collapse = function () { o.expanded(!1) }, o.toggle = function () { o.expanded(!o.expanded()) } }, DayPilot.request = function (e, t, n, i) { var a = DayPilot.createXmlHttp(); a && (a.open("POST", e, !0), a.setRequestHeader("Content-type", "text/plain"), a.onreadystatechange = function () { if (4 === a.readyState) return 200 !== a.status && 304 !== a.status ? void (i ? i(a) : window.console && console.log("HTTP error " + a.status)) : void t(a) }, 4 !== a.readyState && ("object" == typeof n && (n = JSON.stringify(n)), a.send(n))) }, DayPilot.ajax = function (e) { if (!e) throw new DayPilot.Exception("Parameter object required."); if ("string" != typeof e.url) throw new DayPilot.Exception("The parameter object must have 'url' property."); var t = DayPilot.createXmlHttp(); if (!t) throw new DayPilot.Exception("Unable to create XMLHttpRequest object"); var n = "object" == typeof e.data, i = e.data, a = e.method || (e.data ? "POST" : "GET"), r = e.success || function () { }, o = e.error || function () { }, s = e.url, l = e.contentType || (n ? "application/json" : "text/plain"), d = e.headers || {}; t.open(a, s, !0), t.setRequestHeader("Content-type", l), DayPilot.Util.ownPropsAsArray(d).forEach(function (e) { t.setRequestHeader(e.key, e.val) }), t.onreadystatechange = function () { if (4 === t.readyState) if (200 === t.status || 201 === t.status || 204 === t.status || 304 === t.status) { var e = {}; e.request = t, t.responseText && (e.data = JSON.parse(t.responseText)), r(e) } else if (o) { var e = {}; e.request = t, o(e) } else window.console && console.log("HTTP error " + t.status) }, 4 !== t.readyState && (n && (i = JSON.stringify(i)), t.send(i)) }, DayPilot.createXmlHttp = function () { return new XMLHttpRequest }, DayPilot.Http = {}, DayPilot.Http.ajax = function (e) { DayPilot.ajax(e) }, DayPilot.Http.get = function (e, t) { return t = t || {}, new Promise(function (n, i) { var a = {}; a.url = e, a.method = "GET", a.success = function (e) { n(e) }, a.error = function (e) { i(e) }, a.contentType = t.contentType, a.headers = t.headers, DayPilot.ajax(a) }) }, DayPilot.Http.post = function (e, t, n) { return n = n || {}, new Promise(function (i, a) { var r = {}; r.url = e, r.method = "POST", r.data = t, r.success = function (e) { i(e) }, r.error = function (e) { a(e) }, r.contentType = n.contentType, r.headers = n.headers, DayPilot.ajax(r) }) }, DayPilot.Http.put = function (e, t, n) { return n = n || {}, new Promise(function (i, a) { var r = {}; r.url = e, r.method = "PUT", r.data = t, r.success = function (e) { i(e) }, r.error = function (e) { a(e) }, r.contentType = n.contentType, r.headers = n.headers, DayPilot.ajax(r) }) }, DayPilot.Http.delete = function (e, t) { return t = t || {}, new Promise(function (n, i) { var a = {}; a.url = e, a.method = "DELETE", a.success = function (e) { n(e) }, a.error = function (e) { i(e) }, a.contentType = t.contentType, a.headers = t.headers, DayPilot.ajax(a) }) }, DayPilot.Http.patch = function (e, t, n) { return n = n || {}, new Promise(function (i, a) { var r = {}; r.url = e, r.method = "PATCH", r.data = t, r.success = function (e) { i(e) }, r.error = function (e) { a(e) }, r.contentType = n.contentType, r.headers = n.headers, DayPilot.ajax(r) }) }, DayPilot.Duration = function (e) { var t = this, n = 864e5, i = 36e5, a = 6e4, r = 1e3; if (2 === arguments.length) { var o = arguments[0], s = arguments[1]; if (!(o instanceof DayPilot.Date) && "string" != typeof o) throw "DayPilot.Duration(): Invalid start argument, DayPilot.Date expected"; if (!(s instanceof DayPilot.Date) && "string" != typeof s) throw "DayPilot.Duration(): Invalid end argument, DayPilot.Date expected"; "string" == typeof o && (o = new DayPilot.Date(o)), "string" == typeof s && (s = new DayPilot.Date(s)), e = s.getTime() - o.getTime() } return this.ticks = e || 0, DayPilot.Date.Cache.DurationCtor["" + e] ? DayPilot.Date.Cache.DurationCtor["" + e] : (DayPilot.Date.Cache.DurationCtor["" + e] = this, this.toString = function (e) { if (!e) return t.days() + "." + t.hours() + ":" + t.minutes() + ":" + t.seconds() + "." + t.milliseconds(); var n = t.minutes(); n = (n < 10 ? "0" : "") + n; var i = e; return i = i.replace("mm", n), i = i.replace("m", t.minutes()), i = i.replace("H", t.hours()), i = i.replace("h", t.hours()), i = i.replace("d", t.days()), i = i.replace("s", t.seconds()) }, this.totalHours = function () { return t.ticks / i }, this.totalDays = function () { return t.ticks / n }, this.totalMinutes = function () { return t.ticks / a }, this.totalSeconds = function () { return t.ticks / r }, this.totalMilliseconds = function () { return t.ticks }, this.days = function () { return Math.floor(t.totalDays()) }, this.hours = function () { var e = t.ticks - t.days() * n; return Math.floor(e / i) }, this.minutes = function () { var e = t.ticks - Math.floor(t.totalHours()) * i; return Math.floor(e / a) }, this.seconds = function () { var e = t.ticks - Math.floor(t.totalMinutes()) * a; return Math.floor(e / r) }, this.milliseconds = function () { return t.ticks % r }, void (this.add = function (e) { return new DayPilot.Duration(t.ticks + e.ticks) })) }, DayPilot.Duration.ofWeeks = function (e) { return new DayPilot.Duration(1e3 * e * 60 * 60 * 24 * 7) }, DayPilot.Duration.ofDays = function (e) { return new DayPilot.Duration(1e3 * e * 60 * 60 * 24) }, DayPilot.Duration.ofHours = function (e) { return new DayPilot.Duration(1e3 * e * 60 * 60) }, DayPilot.Duration.ofMinutes = function (e) { return new DayPilot.Duration(1e3 * e * 60) }, DayPilot.Duration.ofSeconds = function (e) { return new DayPilot.Duration(1e3 * e) }, DayPilot.Duration.weeks = function (e) { return DayPilot.Duration.ofWeeks(e) }, DayPilot.Duration.days = function (e) { return DayPilot.Duration.ofDays(e) }, DayPilot.Duration.hours = function (e) { return DayPilot.Duration.ofHours(e) }, DayPilot.Duration.minutes = function (e) { return DayPilot.Duration.ofMinutes(e) }, DayPilot.Duration.seconds = function (e) { return DayPilot.Duration.ofSeconds(e) }, DayPilot.TimeSpan = function () { throw "Please use DayPilot.Duration class instead of DayPilot.TimeSpan." }; try { DayPilot.TimeSpan.prototype = Object.create(DayPilot.Duration.prototype) } catch (e) { } DayPilot.Date = function (t, n) { if (t instanceof DayPilot.Date) return t; var i; DayPilot.Util.isNullOrUndefined(t) && (i = DayPilot.DateUtil.fromLocal().getTime(), t = i); var a = DayPilot.Date.Cache.Ctor; if (a[t]) return DayPilot.Stats.cacheHitsCtor += 1, a[t]; var r = !1; if ("string" == typeof t) { try { i = DayPilot.DateUtil.fromStringSortable(t, n).getTime() } catch (e) { throw new DayPilot.Exception("DayPilot.Date - Unable to parse ISO8601 date/time string: " + t) } r = !0 } else if ("number" == typeof t) { if (isNaN(t)) throw "Cannot create DayPilot.Date from NaN"; i = t } else { if (!(t instanceof Date)) throw "Unrecognized parameter: use Date, number or string in ISO 8601 format"; i = n ? DayPilot.DateUtil.fromLocal(t).getTime() : t.getTime() } var o = e(i); return a[o] ? a[o] : (a[o] = this, a[i] = this, r && o !== t && DayPilot.DateUtil.hasTzSpec(t) && (a[t] = this), Object.defineProperty ? (Object.defineProperty(this, "ticks", { get: function () { return i } }), Object.defineProperty(this, "value", { "value": o, "writable": !1, "enumerable": !0 })) : (this.ticks = i, this.value = o), DayPilot.Date.Config.legacyShowD && (this.d = new Date(i)), void (DayPilot.Stats.dateObjects += 1)) }, DayPilot.Date.Config = {}, DayPilot.Date.Config.legacyShowD = !1, DayPilot.Date.Cache = {}, DayPilot.Date.Cache.Parsing = {}, DayPilot.Date.Cache.Ctor = {}, DayPilot.Date.Cache.Ticks = {}, DayPilot.Date.Cache.DurationCtor = {}, DayPilot.Date.Cache.clear = function () { DayPilot.Date.Cache.Parsing = {}, DayPilot.Date.Cache.Ctor = {}, DayPilot.Date.Cache.Ticks = {}, DayPilot.Date.Cache.DurationCtor = {} }, DayPilot.Date.prototype.addDays = function (e) { return e ? new DayPilot.Date(this.ticks + 24 * e * 60 * 60 * 1e3) : this }, DayPilot.Date.prototype.addHours = function (e) { return e ? this.addTime(60 * e * 60 * 1e3) : this }, DayPilot.Date.prototype.addMilliseconds = function (e) { return e ? this.addTime(e) : this }, DayPilot.Date.prototype.addMinutes = function (e) { return e ? this.addTime(60 * e * 1e3) : this }, DayPilot.Date.prototype.addMonths = function (e) { if (!e) return this; var t = new Date(this.ticks), n = t.getUTCFullYear(), i = t.getUTCMonth() + 1; if (e > 0) { for (; e >= 12;)e -= 12, n++; e > 12 - i ? (n++, i = e - (12 - i)) : i += e } else { for (; e <= -12;)e += 12, n--; i + e <= 0 ? (n--, i = 12 + i + e) : i += e } var a = new Date(t.getTime()); a.setUTCDate(1), a.setUTCFullYear(n), a.setUTCMonth(i - 1); var r = new DayPilot.Date(a).daysInMonth(); return a.setUTCDate(Math.min(r, t.getUTCDate())), new DayPilot.Date(a) }, DayPilot.Date.prototype.addSeconds = function (e) { return e ? this.addTime(1e3 * e) : this }, DayPilot.Date.prototype.addTime = function (e) { return e ? (e instanceof DayPilot.Duration && (e = e.ticks), new DayPilot.Date(this.ticks + e)) : this }, DayPilot.Date.prototype.addYears = function (e) { var t = new Date(this.ticks), n = new Date(this.ticks), i = this.getYear() + e, a = this.getMonth(); n.setUTCDate(1), n.setUTCFullYear(i), n.setUTCMonth(a); var r = new DayPilot.Date(n).daysInMonth(); return n.setUTCDate(Math.min(r, t.getUTCDate())), new DayPilot.Date(n) }, DayPilot.Date.prototype.dayOfWeek = function () { return new Date(this.ticks).getUTCDay() }, DayPilot.Date.prototype.dayOfWeekISO = function () { return new Date(this.ticks).getUTCDay() || 7 }, DayPilot.Date.prototype.getDayOfWeek = function () { return new Date(this.ticks).getUTCDay() }, DayPilot.Date.prototype.getDayOfYear = function () { var e = this.firstDayOfYear(); return DayPilot.DateUtil.daysDiff(e, this) + 1 }, DayPilot.Date.prototype.daysInMonth = function () { var e = new Date(this.ticks), t = e.getUTCMonth() + 1, n = e.getUTCFullYear(), i = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]; return 2 !== t ? i[t - 1] : n % 4 !== 0 ? i[1] : n % 100 === 0 && n % 400 !== 0 ? i[1] : i[1] + 1 }, DayPilot.Date.prototype.daysInYear = function () { var e = this.getYear(); return e % 4 !== 0 ? 365 : e % 100 === 0 && e % 400 !== 0 ? 365 : 366 }, DayPilot.Date.prototype.dayOfYear = function () { return Math.ceil((this.getDatePart().getTime() - this.firstDayOfYear().getTime()) / 864e5) + 1 }, DayPilot.Date.prototype.equals = function (e) { if (null === e) return !1; if (e instanceof DayPilot.Date) return this === e; throw "The parameter must be a DayPilot.Date object (DayPilot.Date.equals())" }, DayPilot.Date.prototype.firstDayOfMonth = function () { var e = new Date; return e.setUTCFullYear(this.getYear(), this.getMonth(), 1), e.setUTCHours(0), e.setUTCMinutes(0), e.setUTCSeconds(0), e.setUTCMilliseconds(0), new DayPilot.Date(e) }, DayPilot.Date.prototype.firstDayOfYear = function () { var e = this.getYear(), t = new Date; return t.setUTCFullYear(e, 0, 1), t.setUTCHours(0), t.setUTCMinutes(0), t.setUTCSeconds(0), t.setUTCMilliseconds(0), new DayPilot.Date(t) }, DayPilot.Date.prototype.firstDayOfWeek = function (e) { var t = this; if (e instanceof DayPilot.Locale) e = e.weekStarts; else if ("string" == typeof e && DayPilot.Locale.find(e)) { var n = DayPilot.Locale.find(e); e = n.weekStarts } else e = e || 0; for (var i = t.dayOfWeek(); i !== e;)t = t.addDays(-1), i = t.dayOfWeek(); return new DayPilot.Date(t) }, DayPilot.Date.prototype.getDay = function () { return new Date(this.ticks).getUTCDate() }, DayPilot.Date.prototype.getDatePart = function () { var e = new Date(this.ticks); return e.setUTCHours(0), e.setUTCMinutes(0), e.setUTCSeconds(0), e.setUTCMilliseconds(0), new DayPilot.Date(e) }, DayPilot.Date.prototype.getYear = function () { return new Date(this.ticks).getUTCFullYear() }, DayPilot.Date.prototype.getHours = function () { return new Date(this.ticks).getUTCHours() }, DayPilot.Date.prototype.getMilliseconds = function () { return new Date(this.ticks).getUTCMilliseconds() }, DayPilot.Date.prototype.getMinutes = function () { return new Date(this.ticks).getUTCMinutes() }, DayPilot.Date.prototype.getMonth = function () { return new Date(this.ticks).getUTCMonth() }, DayPilot.Date.prototype.getSeconds = function () { return new Date(this.ticks).getUTCSeconds() }, DayPilot.Date.prototype.getTotalTicks = function () { return this.getTime() }, DayPilot.Date.prototype.getTime = function () { return this.ticks }, DayPilot.Date.prototype.getTimePart = function () { var e = this.getDatePart(); return DayPilot.DateUtil.diff(this, e) }, DayPilot.Date.prototype.lastDayOfMonth = function () { var e = new Date(this.firstDayOfMonth().getTime()), t = this.daysInMonth(); return e.setUTCDate(t), new DayPilot.Date(e) }, DayPilot.Date.prototype.weekNumber = function () { var e = this.firstDayOfYear(), t = (this.getTime() - e.getTime()) / 864e5; return Math.ceil((t + e.dayOfWeek() + 1) / 7) }, DayPilot.Date.prototype.weekNumberISO = function () { var e = !1, t = this.dayOfYear(), n = this.firstDayOfYear().dayOfWeek(), i = this.firstDayOfYear().addYears(1).addDays(-1).dayOfWeek(); 0 === n && (n = 7), 0 === i && (i = 7); var a = 8 - n; 4 !== n && 4 !== i || (e = !0); var r = Math.ceil((t - a) / 7), o = r; return a >= 4 && (o += 1), o > 52 && !e && (o = 1), 0 === o && (o = this.firstDayOfYear().addDays(-1).weekNumberISO()), o }, DayPilot.Date.prototype.toDateLocal = function () { var e = new Date(this.ticks), t = new Date; return t.setFullYear(e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate()), t.setHours(e.getUTCHours()), t.setMinutes(e.getUTCMinutes()), t.setSeconds(e.getUTCSeconds()), t.setMilliseconds(e.getUTCMilliseconds()), t }, DayPilot.Date.prototype.toDate = function () { return new Date(this.ticks) }, DayPilot.Date.prototype.toJSON = function () { return this.value }, DayPilot.Date.prototype.toString = function (e, t) { return e ? new r(e, t).print(this) : this.toStringSortable() }, DayPilot.Date.prototype.toStringSortable = function () { return e(this.ticks) }, DayPilot.Date.parse = function (e, t, n) { return new r(t, n).parse(e) }; var a = 0; DayPilot.Date.today = function () { return new DayPilot.Date(DayPilot.DateUtil.localToday(), !0) }, DayPilot.Date.now = function () { return new DayPilot.Date }, DayPilot.Date.fromYearMonthDay = function (e, t, n) { t = t || 1, n = n || 1; var i = new Date(0); return i.setUTCFullYear(e), i.setUTCMonth(t - 1), i.setUTCDate(n), new DayPilot.Date(i) }, DayPilot.DateUtil = {}, DayPilot.DateUtil.fromStringSortable = function (e, t) {
            var n = function () { return new DayPilot.Exception("Invalid string format (use '2010-12-31' or '2010-12-31T23:50:00'): '" + e + "'") }; if (!e) throw new DayPilot.Exception("Can't create DayPilot.Date from an empty string"); var i = e.length, a = 10 === i, r = 19 === i, o = i > 19; if (!a && !r && !o) throw n(); if (DayPilot.Date.Cache.Parsing[e] && !t) return DayPilot.Stats.cacheHitsParsing += 1, DayPilot.Date.Cache.Parsing[e]; var s = e.substring(0, 4); if (isNaN(s)) throw n(); var l = e.substring(5, 7); if (isNaN(l)) throw n(); var d = e.substring(8, 10); if (isNaN(d)) throw n(); var c = new Date(0); if (c.setUTCFullYear(s, l - 1, d), a) return DayPilot.Date.Cache.Parsing[e] = c, c; var u = e.substring(11, 13); if (isNaN(u)) throw n(); var h = e.substring(14, 16); if (isNaN(h)) throw n(); var f = e.substring(17, 19); if (isNaN(f)) throw n(); if (c.setUTCHours(u),
                c.setUTCMinutes(h), c.setUTCSeconds(f), r) return DayPilot.Date.Cache.Parsing[e] = c, c; var v = e[19], p = 0; if ("." === v) { var m = parseInt(e.substring(20, 23)); if (isNaN(m)) throw n(); c.setUTCMilliseconds(m), p = DayPilot.DateUtil.getTzOffsetMinutes(e.substring(23)) } else p = DayPilot.DateUtil.getTzOffsetMinutes(e.substring(19)); var g = new DayPilot.Date(c); return t || (g = g.addMinutes(-p)), c = g.toDate(), DayPilot.Date.Cache.Parsing[e] = c, c
        }, DayPilot.DateUtil.getTzOffsetMinutes = function (e) { if (DayPilot.Util.isNullOrUndefined(e) || "" === e) return 0; if ("Z" === e) return 0; var t = e[0], n = parseInt(e.substring(1, 3)), i = parseInt(e.substring(4)), a = 60 * n + i; if ("-" === t) return -a; if ("+" === t) return a; throw "Invalid timezone spec: " + e }, DayPilot.DateUtil.hasTzSpec = function (e) { return !!e.indexOf("+") || !!e.indexOf("-") }, DayPilot.DateUtil.daysDiff = function (e, t) { if (e && t || function () { throw "two parameters required" }(), e = new DayPilot.Date(e), t = new DayPilot.Date(t), e.getTime() > t.getTime()) return null; for (var n = 0, i = e.getDatePart(), a = t.getDatePart(); i < a;)i = i.addDays(1), n++; return n }, DayPilot.DateUtil.daysSpan = function (e, t) { if (e && t || function () { throw "two parameters required" }(), e = new DayPilot.Date(e), t = new DayPilot.Date(t), e === t) return 0; var n = DayPilot.DateUtil.daysDiff(e, t); return t == t.getDatePart() && n--, n }, DayPilot.DateUtil.diff = function (e, t) { if (!(e && t && e.getTime && t.getTime)) throw "Both compared objects must be Date objects (DayPilot.Date.diff)."; return e.getTime() - t.getTime() }, DayPilot.DateUtil.fromLocal = function (e) { e || (e = new Date); var t = new Date; return t.setUTCFullYear(e.getFullYear(), e.getMonth(), e.getDate()), t.setUTCHours(e.getHours()), t.setUTCMinutes(e.getMinutes()), t.setUTCSeconds(e.getSeconds()), t.setUTCMilliseconds(e.getMilliseconds()), t }, DayPilot.DateUtil.localToday = function () { var e = new Date; return e.setHours(0), e.setMinutes(0), e.setSeconds(0), e.setMilliseconds(0), e }, DayPilot.DateUtil.hours = function (e, t) { var n = e.getUTCMinutes(); n < 10 && (n = "0" + n); var i = e.getUTCHours(); if (t) { var a = i < 12, i = i % 12; 0 === i && (i = 12); return i + ":" + n + " " + (a ? "AM" : "PM") } return i + ":" + n }, DayPilot.DateUtil.max = function (e, t) { return e.getTime() > t.getTime() ? e : t }, DayPilot.DateUtil.min = function (e, t) { return e.getTime() < t.getTime() ? e : t }; var r = function (e, n) { "string" == typeof n && (n = DayPilot.Locale.find(n)); var n = n || DayPilot.Locale.US, i = [{ "seq": "yyyy", "expr": "[0-9]{4,4}", "str": function (e) { return e.getYear() } }, { "seq": "yy", "expr": "[0-9]{2,2}", "str": function (e) { return e.getYear() % 100 }, "transform": function (e) { return parseInt(e) + 2e3 } }, { "seq": "mm", "expr": "[0-9]{2,2}", "str": function (e) { var t = e.getMinutes(); return t < 10 ? "0" + t : t } }, { "seq": "m", "expr": "[0-9]{1,2}", "str": function (e) { return e.getMinutes() } }, { "seq": "HH", "expr": "[0-9]{2,2}", "str": function (e) { var t = e.getHours(); return t < 10 ? "0" + t : t } }, { "seq": "H", "expr": "[0-9]{1,2}", "str": function (e) { return e.getHours() } }, { "seq": "hh", "expr": "[0-9]{2,2}", "str": function (e) { var t = e.getHours(), t = t % 12; 0 === t && (t = 12); var n = t; return n < 10 ? "0" + n : n } }, { "seq": "h", "expr": "[0-9]{1,2}", "str": function (e) { var t = e.getHours(), t = t % 12; return 0 === t && (t = 12), t } }, { "seq": "ss", "expr": "[0-9]{2,2}", "str": function (e) { var t = e.getSeconds(); return t < 10 ? "0" + t : t } }, { "seq": "s", "expr": "[0-9]{1,2}", "str": function (e) { return e.getSeconds() } }, { "seq": "MMMM", "expr": "[^\\s0-9]*", "str": function (e) { return n.monthNames[e.getMonth()] }, "transform": function (e) { var i = DayPilot.indexOf(n.monthNames, e, t); return i < 0 ? null : i + 1 } }, { "seq": "MMM", "expr": "[^\\s0-9]*", "str": function (e) { return n.monthNamesShort[e.getMonth()] }, "transform": function (e) { var i = DayPilot.indexOf(n.monthNamesShort, e, t); return i < 0 ? null : i + 1 } }, { "seq": "MM", "expr": "[0-9]{2,2}", "str": function (e) { var t = e.getMonth() + 1; return t < 10 ? "0" + t : t } }, { "seq": "M", "expr": "[0-9]{1,2}", "str": function (e) { return e.getMonth() + 1 } }, { "seq": "dddd", "expr": "[^\\s0-9]*", "str": function (e) { return n.dayNames[e.getDayOfWeek()] } }, { "seq": "ddd", "expr": "[^\\s0-9]*", "str": function (e) { return n.dayNamesShort[e.getDayOfWeek()] } }, { "seq": "dd", "expr": "[0-9]{2,2}", "str": function (e) { var t = e.getDay(); return t < 10 ? "0" + t : t } }, { "seq": "%d", "expr": "[0-9]{1,2}", "str": function (e) { return e.getDay() } }, { "seq": "d", "expr": "[0-9]{1,2}", "str": function (e) { return e.getDay() } }, { "seq": "tt", "expr": "(AM|PM|am|pm)", "str": function (e) { return e.getHours() < 12 ? "AM" : "PM" }, "transform": function (e) { return e.toUpperCase() } }], a = function (e) { return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&") }; this.init = function () { this.year = this.findSequence("yyyy") || this.findSequence("yy"), this.month = this.findSequence("MMMM") || this.findSequence("MMM") || this.findSequence("MM") || this.findSequence("M"), this.day = this.findSequence("dd") || this.findSequence("d"), this.hours = this.findSequence("HH") || this.findSequence("H"), this.minutes = this.findSequence("mm") || this.findSequence("m"), this.seconds = this.findSequence("ss") || this.findSequence("s"), this.ampm = this.findSequence("tt"), this.hours12 = this.findSequence("hh") || this.findSequence("h") }, this.findSequence = function (t) { function n(e) { return parseInt(e) } return e.indexOf(t) === -1 ? null : { "findValue": function (r) { for (var o = a(e), s = null, l = 0; l < i.length; l++) { var d = (i[l].length, t === i[l].seq), c = i[l].expr; d && (c = "(" + c + ")", s = i[l].transform), o = o.replace(i[l].seq, c) } o = "^" + o + "$"; try { var u = new RegExp(o), h = u.exec(r); return h ? (s = s || n)(h[1]) : null } catch (e) { throw "unable to create regex from: " + o } } } }, this.print = function (t) { for (var n = function (e) { for (var t = 0; t < i.length; t++)if (i[t] && i[t].seq === e) return i[t]; return null }, a = e.length <= 0, r = 0, o = []; !a;) { var s = e.substring(r), l = /%?(.)\1*/.exec(s); if (l && l.length > 0) { var d = l[0], c = n(d); c ? o.push(c) : o.push(d), r += d.length, a = e.length <= r } else a = !0 } for (var u = 0; u < o.length; u++) { var h = o[u]; "string" != typeof h && (o[u] = h.str(t)) } return o.join("") }, this.parse = function (e) { var t = this.year.findValue(e); if (!t) return null; var n = this.month.findValue(e); if (DayPilot.Util.isNullOrUndefined(n)) return null; if (n > 12 || n < 1) return null; var i = this.day.findValue(e), a = DayPilot.Date.fromYearMonthDay(t, n).daysInMonth(); if (i < 1 || i > a) return null; var r = this.hours ? this.hours.findValue(e) : 0, o = this.minutes ? this.minutes.findValue(e) : 0, s = this.seconds ? this.seconds.findValue(e) : 0, l = this.ampm ? this.ampm.findValue(e) : null; if (this.ampm && this.hours12) { var d = this.hours12.findValue(e); if (d < 1 || d > 12) return null; r = "PM" === l ? 12 === d ? 12 : d + 12 : 12 === d ? 0 : d } if (r < 0 || r > 23) return null; if (o < 0 || o > 59) return null; if (s < 0 || s > 59) return null; var c = new Date; return c.setUTCFullYear(t, n - 1, i), c.setUTCHours(r), c.setUTCMinutes(o), c.setUTCSeconds(s), c.setUTCMilliseconds(0), new DayPilot.Date(c) }, this.init() }; DayPilot.ColorUtil = {}, DayPilot.ColorUtil.hexToRgb = function (e) { if (!/^#[0-9a-f]{6}$/i.test(e)) throw new DayPilot.Exception("Invalid color, only full hex color string accepted, eg. '#ffaaff'."); return e = e.replace("#", ""), { r: parseInt(e.substring(0, 2), 16), g: parseInt(e.substring(2, 4), 16), b: parseInt(e.substring(4, 6), 16) } }, DayPilot.ColorUtil.rgbToHex = function (e) { return "#" + n(e.r) + n(e.g) + n(e.b) }, DayPilot.ColorUtil.adjustLuminance = function (e, t) { return { r: e.r + t, g: e.g + t, b: e.b + t } }, DayPilot.ColorUtil.darker = function (e, t) { var n = DayPilot.ColorUtil.hexToRgb(e); "number" != typeof t && (t = 1); var i = 17, a = Math.round(t * i), r = DayPilot.ColorUtil.adjustLuminance(n, -a); return DayPilot.ColorUtil.rgbToHex(r) }, DayPilot.ColorUtil.lighter = function (e, t) { return "number" != typeof t && (t = 1), DayPilot.ColorUtil.darker(e, -t) }, DayPilot.ColorUtil.pl = function (e) { var t = DayPilot.ColorUtil.hexToRgb(e), n = t.r / 255, i = t.g / 255, a = t.b / 255; return Math.sqrt(.299 * n * n + .587 * i * i + .114 * a * a) }, DayPilot.ColorUtil.contrasting = function (e, t, n) { var i = DayPilot.ColorUtil.pl(e); return t = t || "#ffffff", n = n || "#000000", i > .5 ? n : t }, DayPilot.Canvas = function (e, t, n, i, a) { function r(e, t, n) { for (var i = t.split(" "), a = [], r = i[0], o = 1; o < i.length; o++) { var s = i[o]; e.measureText(r + " " + s).width < n ? r += " " + s : (a.push(r), r = s) } return a.push(r), a } var i = i || 1, s = document.createElement("canvas"); s.width = e * i, s.height = t * i; var l = s.getContext("2d"); l.scale(i, i), this.defaultFileName = "image.png", "image/jpeg" === n && (this.defaultFileName = "image.jpg", a = a || .92), this.groupStart = function (e) { }, this.groupEnd = function () { }, this.fillRect = function (e, t) { l.save(), l.strokeStyle = "rgb(0,0,0,0)", l.fillStyle = t, l.fillRect(e.x, e.y, e.w, e.h), l.restore() }, this.rect = function (e, t) { l.save(), l.strokeStyle = t, l.beginPath(), l.rect(e.x + .5, e.y + .5, e.w - 1, e.h - 1), l.stroke(), l.restore() }, this.diamond = function (e, t) { l.save(), l.strokeStyle = "rgb(0,0,0,0)", l.fillStyle = t, l.beginPath(), l.moveTo(e.x + e.w / 2, e.y + .5), l.lineTo(e.x + e.w - .5, e.y + e.h / 2), l.lineTo(e.x + e.w / 2, e.y + e.h - .5), l.lineTo(e.x + .5, e.y + e.h / 2), l.closePath(), l.fill(), l.restore() }, this.triangle = function (e, t, n) { for (n = n || 0; n < 0;)n += 360; for (; n >= 360;)n -= 360; switch (l.save(), l.strokeStyle = "rgb(0,0,0,0)", l.fillStyle = t, l.beginPath(), n) { case 0: l.moveTo(e.x + e.w / 3, e.y + .5), l.lineTo(e.x + e.w + .5, e.y + e.h / 2), l.lineTo(e.x + e.w / 3, e.y + e.h - .5); break; case 90: l.moveTo(e.x - .5, e.y + e.h / 3), l.lineTo(e.x + e.w + .5, e.y + e.h / 3), l.lineTo(e.x + e.w / 2, e.y + e.h + .5); break; case 180: l.moveTo(e.x + 2 * e.w / 3, e.y + .5), l.lineTo(e.x + 2 * e.w / 3, e.y + e.h), l.lineTo(e.x, e.y + e.h / 2); break; case 270: l.moveTo(e.x + e.w / 2, e.y + e.w / 2 + .5), l.lineTo(e.x + e.w - .5, e.y + 2 * e.h / 3), l.lineTo(e.x, e.y + 2 * e.h / 3); break; default: throw new DayPilot.Exception("Unsupported rotation angle") }l.closePath(), l.fill(), l.restore() }, this.upperLeftCorner = function (e, t) { l.save(), l.strokeStyle = "rgb(0,0,0,0)", l.fillStyle = t, l.beginPath(), l.moveTo(e.x, e.y), l.lineTo(e.x + e.w, e.y), l.lineTo(e.x, e.y + e.h), l.closePath(), l.fill(), l.restore() }, this.upperRightCorner = function (e, t) { l.save(), l.strokeStyle = "rgb(0,0,0,0)", l.fillStyle = t, l.beginPath(), l.moveTo(e.x, e.y), l.lineTo(e.x + e.w, e.y), l.lineTo(e.x + e.w, e.y + e.h), l.closePath(), l.fill(), l.restore() }, this.textWidth = function (e, t) { l.save(), l.font = t.style + " " + t.size + " " + t.family; var n = l.measureText(e).width + 1; return l.restore(), n }, this.text = function (e, t, n, i, a, o, s) { if (t) { if ("number" == typeof t && (t = "" + t), "string" != typeof t) throw "String expected, supplied: " + typeof t; a = a || "left", o = o || 0, i = i || "#000", s = s || "top", l.save(); var d = DayPilot.Util.fontHeight(n), c = DayPilot.browser.ff ? 3 : 0; c += .2 * d, c += DayPilot.browser.chrome ? 1 : 0, c += DayPilot.browser.ie ? 1 : 0, l.beginPath(), l.rect(e.x + .5 + o, e.y + .5 + o, e.w - 1 - o, e.h - 1 - o), l.clip(), l.fillStyle = i, l.font = n.style + " " + n.size + " " + n.family, l.textBaseline = "top", l.textAlign = a; var u = e.x; switch (a) { case "left": u += o; break; case "center": u += e.w / 2; break; case "right": u += e.w - o }var h = 1.2 * d, f = t.split("\n"), v = []; DayPilot.list(f).forEach(function (t) { var n = r(l, t, e.w); DayPilot.list(n).forEach(function (e) { v.push(e) }) }); var p = h - d, m = h * v.length - p, g = e.h - 2 * o, b = e.y + o; switch (s) { case "top": b += c; break; case "center": b += (g - m) / 2 + .1 * d; break; case "bottom": b += g - m }for (var y = 0; y < v.length; y++) { var w = v[y]; l.fillText(w, u, b), b += h } l.restore() } }, this.line = function (e, t, n, i, a) { l.save(), l.lineWidth = 1, l.strokeStyle = a, l.beginPath(), l.moveTo(e + .5, t + .5), l.lineTo(n + .5, i + .5), l.stroke(), l.restore() }, this.image = function (e, t) { if (t) { if ("string" == typeof t) { var n = t, t = document.createElement("img"); if (0 !== n.indexOf("data:"), !0) return t.onload = function () { l.save(), l.drawImage(t, e.x, e.y), l.restore() }, void (t.src = n); t.src = n } l.save(), l.drawImage(t, e.x, e.y), l.restore() } }, this.symbol = function (e, t, n) { var i = "http://www.w3.org/2000/svg", a = document.createElementNS(i, "svg"), r = this; n = n || {}; var s = n.color; new o(t).k().then(function (t) { if (s) { var n = document.createElementNS(i, "style"); n.innerHTML = "svg { color: " + s + "; }", a.appendChild(n) } a.setAttribute("viewBox", t.getAttribute("viewBox")), a.setAttribute("width", e.w), a.setAttribute("height", e.h); var o = document.createElementNS(i, "g"); o.innerHTML = t.innerHTML, a.appendChild(o); var l = (new XMLSerializer).serializeToString(a), d = "data:image/svg+xml;base64," + btoa(l); r.image(e, d) }) }, this.getWidth = function () { return s.width }, this.getHeight = function () { return s.height }, this.getElement = function () { return s }, this.getSource = function () { return "<img src='" + s.toDataURL(n, a) + "' />" }, this.getDataUri = function () { return s.toDataURL(n, a) }, this.getDefaultFileName = function () { return this.defaultFileName }, this.getBlob = function () { return s.msToBlob ? s.msToBlob() : DayPilot.Util.dataUriToBlob(this.getDataUri()) } }, DayPilot.Svg = function (e, t) { function n(e, t) { var n = document.createElementNS(a, "clipPath"); n.id = "clip" + DayPilot.guid(); var i = document.createElementNS(a, "rect"); i.setAttribute("x", 0), i.setAttribute("y", 0), i.setAttribute("width", e), i.setAttribute("height", t), n.appendChild(i), s.defs.appendChild(n); var o = document.createElementNS(a, "g"); o.setAttribute("clip-path", "url(#" + n.id + ")"), r.appendChild(o), r = o } function i(e, t) { var n = null; if (e) { if ("string" == typeof e) { if (0 === e.indexOf("data:")) { var i = {}; i.dataUri = e, t(i) } n = e } else n = e.src; var e = document.createElement("img"); e.onload = function () { var e = document.createElement("canvas"); e.width = this.naturalWidth, e.height = this.naturalHeight, e.getContext("2d").drawImage(this, 0, 0); var n = {}; n.dataUri = e.toDataURL("image/png"), t(n) }, e.src = n } } var a = "http://www.w3.org/2000/svg", r = document.createElementNS(a, "svg"), s = this; this.l = r, this.groups = [], r.outerHTML && r.setAttribute("xmlns", a), r.setAttribute("viewBox", "0 0 " + e + " " + t); var l = document.createElementNS(a, "defs"); r.appendChild(l), s.defs = l, n(e, t), this.defaultFileName = "image.svg", this.groupStart = function (e) { var t = document.createElementNS(a, "g"); for (var n in e) t.setAttribute("data-" + n, e[n]); r = t, this.group && this.groups.push(this.group), this.group = t }, this.groupEnd = function () { if (!this.group) throw new DayPilot.Exception("SVG export = group not open"); var e = this.group; this.group = this.groups.pop(), r = this.group, r || (r = this.l), r.appendChild(e) }, this.fillRect = function (e, t) { var n = document.createElementNS(a, "rect"); n.setAttribute("x", e.x), n.setAttribute("y", e.y), n.setAttribute("width", e.w), n.setAttribute("height", e.h), n.setAttribute("fill", t), r.appendChild(n) }, this.diamond = function (e, t) { var n = document.createElementNS(a, "path"), i = ""; i += "M " + (e.x + e.w / 2) + " " + e.y, i += " ", i += "L " + (e.x + e.w) + " " + (e.y + e.h / 2), i += " ", i += "L " + (e.x + e.w / 2) + " " + (e.y + e.h), i += " ", i += "L " + e.x + " " + (e.y + e.h / 2), i += " Z", n.setAttribute("d", i), n.setAttribute("fill", t), r.appendChild(n) }, this.triangle = function (e, t, n) { var i = document.createElementNS(a, "path"), o = ""; o += "M " + (e.x + e.w / 3) + " " + e.y, o += " ", o += "L " + (e.x + e.w) + " " + (e.y + e.h / 2), o += " ", o += "L " + (e.x + e.w / 3) + " " + (e.y + e.h), o += " Z", i.setAttribute("d", o), i.setAttribute("fill", t), "number" == typeof n && i.setAttribute("transform", "rotate(" + n + "," + (e.x + e.w / 2) + "," + (e.y + e.h / 2) + ")"), r.appendChild(i) }, this.upperLeftCorner = function (e, t) { var n = document.createElementNS(a, "path"), i = ""; i += "M " + e.x + " " + e.y, i += " ", i += "L " + (e.x + e.w) + " " + e.y, i += " ", i += "L " + e.x + " " + (e.y + e.h), i += " Z", n.setAttribute("d", i), n.setAttribute("fill", t), r.appendChild(n) }, this.upperRightCorner = function (e, t) { var n = document.createElementNS(a, "path"), i = ""; i += "M " + e.x + " " + e.y, i += " ", i += "L " + (e.x + e.w) + " " + e.y, i += " ", i += "L " + (e.x + e.w) + " " + (e.y + e.h), i += " Z", n.setAttribute("d", i), n.setAttribute("fill", t), r.appendChild(n) }, this.rect = function (e, t) { if (!(e.w <= 0 || e.h <= 0)) { var n = document.createElementNS(a, "rect"); n.setAttribute("x", e.x + .5), n.setAttribute("y", e.y + .5), n.setAttribute("width", e.w - 1), n.setAttribute("height", e.h - 1), n.setAttribute("stroke", t), n.setAttribute("stroke-width", "1"), n.setAttribute("fill", "transparent"), r.appendChild(n) } }, this.text = function (e, t, n, i, o, l, d) { function c(e, t, o) { var s = document.createElementNS(a, "text"); s.setAttribute("fill", i), s.setAttribute("font-family", n.family), s.setAttribute("font-size", n.size), s.setAttribute("font-style", u), s.setAttribute("font-weight", h), s.setAttribute("x", t), s.setAttribute("y", o), s.setAttribute("dy", "0.8em"), s.setAttribute("text-anchor", p), s.setAttribute("clip-path", "url(#" + m.id + ")"); var l = document.createTextNode(e); s.appendChild(l), r.appendChild(s) } if (t) { if ("number" == typeof t && (t = "" + t), "string" != typeof t) throw "String expected, supplied: " + typeof t; if (!(e.w < 0)) { o = o || "left", l = l || 0, d = d || "top"; var u = n.style; u.indexOf("italic") !== -1 && (u = "bold"); var h = n.style; if (n.style) var f = 3; var v = e.x, p = "start"; switch (o) { case "center": v += e.w / 2, p = "middle"; break; case "right": v += e.w, p = "end" }var m = document.createElementNS(a, "clipPath"); m.id = "clip" + DayPilot.guid(); var g = document.createElementNS(a, "rect"); g.setAttribute("x", e.x), g.setAttribute("y", e.y), g.setAttribute("width", e.w), g.setAttribute("height", e.h), m.appendChild(g), s.defs.appendChild(m); var b = DayPilot.Util.fontHeight(n), y = 1.2 * b, w = t.split("\n"), x = y - b, k = y * w.length - x, C = e.h - 2 * l, _ = e.y + l; switch (d) { case "top": _ += f; break; case "center": _ += (C - k) / 2 + .1 * b; break; case "bottom": _ += C - k }for (var D = 0; D < w.length; D++) { c(w[D], v + l, _), _ += y } } } }, this.line = function (e, t, n, i, o) { var s = document.createElementNS(a, "line"); s.setAttribute("x1", e + .5), s.setAttribute("y1", t + .5), s.setAttribute("x2", n + .5), s.setAttribute("y2", i + .5), s.setAttribute("stroke", o), r.appendChild(s) }, this.image = function (e, t) { function n(t) { var n = document.createElementNS(a, "image"); n.setAttribute("href", t.dataUri), n.setAttribute("x", e.x), n.setAttribute("y", e.y), n.setAttribute("width", e.w), n.setAttribute("height", e.h), o.appendChild(n) } var o = document.createElementNS(a, "g"); r.appendChild(o), i(t, n) }, this.symbol = function (e, t, n) { var i = "http://www.w3.org/2000/svg", a = document.createElementNS(i, "symbol"), s = this; n = n || {}; var l = n.color; new o(t).k().then(function (t) { if (l) { var n = document.createElementNS(i, "style"); n.innerHTML = "svg { color: " + l + "; }", a.appendChild(n) } var o = DayPilot.guid(); a.setAttribute("viewBox", t.getAttribute("viewBox")), a.setAttribute("width", e.w), a.setAttribute("height", e.h), a.setAttribute("id", o); var d = document.createElementNS(i, "g"); d.innerHTML = t.innerHTML, a.appendChild(d), s.l.appendChild(a); var c = document.createElementNS(i, "use"); c.setAttribute("href", "#" + o), c.setAttribute("x", e.x), c.setAttribute("y", e.y), r.appendChild(c) }) }, this.m = {}, this.textWidth = function (e, t) { var n = "#" + e + "#" + JSON.stringify(t), i = this.m[n]; if ("number" == typeof i) return i; var a = "http://www.w3.org/2000/svg", r = document.createElementNS(a, "svg"); r.style.position = "absolute", r.style.left = "-10000px", r.style.width = "100px", r.outerHTML && r.setAttribute("xmlns", a), r.setAttribute("viewBox", "0 0 100 100"); var o = document.createElementNS(a, "text"); o.setAttribute("font-family", t.family), o.setAttribute("font-size", t.size), o.setAttribute("font-style", t.style), o.setAttribute("x", 0), o.setAttribute("y", 0), o.setAttribute("dy", "1em"); var s = document.createTextNode(e); o.appendChild(s), r.appendChild(o), document.body.appendChild(r); var l = o.getComputedTextLength(); return this.m[n] = l, document.body.removeChild(r), l }, this.getWidth = function () { return e }, this.getHeight = function () { return t }, this.getElement = function () { return this.l }, this.getSource = function () { if (this.l.outerHTML) return this.l.outerHTML; var e = document.createElement("div"), t = this.l.cloneNode(!0); return e.appendChild(t), e.innerHTML }, this.getDataUri = function () { return "data:application/octet-stream," + encodeURIComponent(this.getSource()) }, this.getDefaultFileName = function () { return this.defaultFileName }, this.getBlob = function () { return new Blob([this.getSource()]) } }, DayPilot.Excel = function () { var e = this, t = null, n = null, i = null, a = {}; a.xmlns = "urn:schemas-microsoft-com:office:spreadsheet", a.o = "urn:schemas-microsoft-com:office:office", a.x = "urn:schemas-microsoft-com:office:excel", a.ss = "urn:schemas-microsoft-com:office:spreadsheet", a.html = "http://www.w3.org/TR/REC-html40", this.init = function () { t = document.implementation.createDocument(a.xmlns, "Workbook", null), t.documentElement.setAttribute("xmlns:o", a.o), t.documentElement.setAttribute("xmlns:x", a.x), t.documentElement.setAttribute("xmlns:ss", a.ss), t.documentElement.setAttribute("xmlns:html", a.html); var r = t.createElement("x:ExcelWorkbook"); t.documentElement.appendChild(r), n = t.createElement("ss:Styles"), t.documentElement.appendChild(n), i = e.styles.create(), i.setId("Default"), i.setName("Normal") }, this.worksheets = [], this.worksheets.create = function (t) { var n = e.el(a.ss, "Worksheet"), i = new r(n); return i.setName(t), this.push(i), i }, this.styles = [], this.styles.create = function (e) { var i = t.createElement("ss:Style"); n.appendChild(i); var a = new o(i); return this.push(a), a }, this.styles.getDefault = function () { return i }, this.el = function (e, n) { var i = t.createElementNS(e, n); return t.documentElement.appendChild(i), i }, this.getSource = function () { return '<?xml version="1.0"?>' + (new XMLSerializer).serializeToString(t) }, this.getDataUri = function () { return "data:application/vnd.ms-excel," + encodeURIComponent(this.getSource()) }, this.getElement = function () { return t }, this.getDefaultFileName = function () { return "spreadsheet.xls" }, this.getBlob = function () { return new Blob([this.getSource()]) }; var r = function (e) { var n = t.createElement("Table"); e.appendChild(n); var i = t.createElement("x:WorksheetOptions"); e.appendChild(i), this.rows = [], this.setName = function (t) { e.setAttribute("ss:Name", t) }, this.cell = function (e, i) { for (; i >= this.rows.length;) { var r = t.createElement("Row"); n.appendChild(r), this.rows.push(new a(r)) } return this.rows[i].cell(e) }, this.enableGridlines = function (e) { var n = DayPilot.list(i.childNodes).find(function (e) { return "x:DoNotDisplayGridlines" === e.tagName }); if (!n && !e) { var a = t.createElement("x:DoNotDisplayGridlines"); i.appendChild(a) } n && e && i.removeChild(n) }; var a = function (e) { this.cells = [], this.getElement = function () { return e }, this.cell = function (i) { for (; i >= this.cells.length;) { var a = t.createElement("Cell"); e.appendChild(a), this.cells.push(new n(a)) } return this.cells[i] }; var n = function (e) { this.setText = function (n) { var i = t.createElement("Data"); i.setAttribute("ss:Type", "String"); var a = t.createTextNode(n); for (i.appendChild(a); e.firstChild;)e.removeChild(e.firstChild); return e.appendChild(i), this }, this.setColspan = function (t) { return t > 1 ? e.setAttribute("ss:MergeAcross", t - 1) : e.removeAttribute("ss:MergeAcross"), this }, this.setRowspan = function (t) { return t > 1 ? e.setAttribute("ss:MergeDown", t - 1) : e.removeAttribute("ss:MergeDown"), this }, this.setStyle = function (t) { if (!(t instanceof o)) throw "Invalid argument, Style expected"; return e.setAttribute("ss:StyleID", t.getId()), this } } } }, o = function (e) { var n = DayPilot.guid(); e.setAttribute("ss:ID", n); var i = t.createElement("ss:Alignment"); e.appendChild(i); var a = t.createElement("ss:Interior"); e.appendChild(a); var r = t.createElement("ss:Borders"); e.appendChild(r), this.setHorizontalAlignment = function (e) { i.setAttribute("ss:Horizontal", e) }, this.setVerticalAlignment = function (e) { i.setAttribute("ss:Vertical", e) }, this.setBackColor = function (e) { var t = DayPilot.Util.normalizeColor(e); a.setAttribute("ss:Color", t), a.setAttribute("ss:Pattern", "Solid") }, this.setBorderColor = function (e) { function n(e, n) { var i = t.createElement("ss:Border"); return i.setAttribute("ss:Position", e), i.setAttribute("ss:LineStyle", "Continuous"), i.setAttribute("ss:Color", DayPilot.Util.normalizeColor(n)), i } this.clearBorders(); var i = n("Left", e); r.appendChild(i); var a = n("Right", e); r.appendChild(a); var o = n("Top", e); r.appendChild(o); var s = n("Bottom", e); r.appendChild(s) }, this.clearBorders = function () { for (; r.firstChild;)r.removeChild(r.firstChild) }, this.getId = function () { return n }, this.setId = function (t) { n = t, e.setAttribute("ss:ID", n) }, this.setName = function (t) { e.setAttribute("ss:Name", t) } }; this.init() }, DayPilot.Export = function (e) { this.toElement = function () { return e.getElement() }, this.dimensions = function () { return { "width": e.getWidth(), "height": e.getHeight() } }, this.toHtml = function () { return e.getSource() }, this.toDataUri = function () { return e.getDataUri() }, this.toBlob = function () { return e.getBlob() }, this.print = function (t) { t = t || {}, t.orientation = t.orientation || "portrait"; var n = document.createElement("iframe"); n.setAttribute("width", 0), n.setAttribute("height", 0), n.setAttribute("frameborder", 0), n.setAttribute("src", "about:blank"), n.onload = function () { var i = n.contentWindow.document; if (i.body.appendChild(e.getElement()), "landscape" === t.orientation) { var a = DayPilot.sheet(i); a.add("@page", "size: landscape;"), a.commit() } n.contentWindow.document.execCommand("print", !1, null) || (n.contentWindow.focus(), n.contentWindow.print()), setTimeout(function () { document.body.removeChild(n) }, 10) }, document.body.appendChild(n) }, this.download = function (t) { var t = t || e.getDefaultFileName(), n = e.getBlob(); DayPilot.Util.downloadBlob(n, t) } }, DayPilot.Exception = function (e) { return new Error(e) }, DayPilot.Locale = function (e, t) { if (this.id = e, this.dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], this.dayNamesShort = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], this.monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], this.monthNamesShort = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], this.datePattern = "M/d/yyyy", this.timePattern = "H:mm", this.dateTimePattern = "M/d/yyyy H:mm", this.timeFormat = "Clock12Hours", this.weekStarts = 0, t) for (var n in t) this[n] = t[n] }, DayPilot.Locale.all = {}, DayPilot.Locale.find = function (e) { if (!e) return null; var t = e.toLowerCase(); return t.length > 2 && (t = DayPilot.Util.replaceCharAt(t, 2, "-")), DayPilot.Locale.all[t] }, DayPilot.Locale.register = function (e) { DayPilot.Locale.all[e.id] = e }, DayPilot.Locale.register(new DayPilot.Locale("ca-es", { "dayNames": ["diumenge", "dilluns", "dimarts", "dimecres", "dijous", "divendres", "dissabte"], "dayNamesShort": ["dg", "dl", "dt", "dc", "dj", "dv", "ds"], "monthNames": ["gener", "febrer", "març", "abril", "maig", "juny", "juliol", "agost", "setembre", "octubre", "novembre", "desembre", ""], "monthNamesShort": ["gen.", "febr.", "març", "abr.", "maig", "juny", "jul.", "ag.", "set.", "oct.", "nov.", "des.", ""], "timePattern": "H:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("cs-cz", { "dayNames": ["neděle", "pondělí", "úterý", "středa", "čtvrtek", "pátek", "sobota"], "dayNamesShort": ["ne", "po", "út", "st", "čt", "pá", "so"], "monthNames": ["leden", "únor", "březen", "duben", "květen", "červen", "červenec", "srpen", "září", "říjen", "listopad", "prosinec", ""], "monthNamesShort": ["I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX", "X", "XI", "XII", ""], "timePattern": "H:mm", "datePattern": "d. M. yyyy", "dateTimePattern": "d. M. yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("da-dk", { "dayNames": ["søndag", "mandag", "tirsdag", "onsdag", "torsdag", "fredag", "lørdag"], "dayNamesShort": ["sø", "ma", "ti", "on", "to", "fr", "lø"], "monthNames": ["januar", "februar", "marts", "april", "maj", "juni", "juli", "august", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "maj", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "HH:mm", "datePattern": "dd-MM-yyyy", "dateTimePattern": "dd-MM-yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("de-at", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Jänner", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jän", "Feb", "Mär", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("de-ch", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jan", "Feb", "Mrz", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("de-de", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jan", "Feb", "Mrz", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("de-lu", { "dayNames": ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"], "dayNamesShort": ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"], "monthNames": ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember", ""], "monthNamesShort": ["Jan", "Feb", "Mrz", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("en-au", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "h:mm tt", "datePattern": "d/MM/yyyy", "dateTimePattern": "d/MM/yyyy h:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("en-ca", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "h:mm tt", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd h:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("en-gb", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("en-us", { "dayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "dayNamesShort": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "monthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "monthNamesShort": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "timePattern": "h:mm tt", "datePattern": "M/d/yyyy", "dateTimePattern": "M/d/yyyy h:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("es-es", { "dayNames": ["domingo", "lunes", "martes", "miércoles", "jueves", "viernes", "sábado"], "dayNamesShort": ["D", "L", "M", "X", "J", "V", "S"], "monthNames": ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre", ""], "monthNamesShort": ["ene.", "feb.", "mar.", "abr.", "may.", "jun.", "jul.", "ago.", "sep.", "oct.", "nov.", "dic.", ""], "timePattern": "H:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("es-mx", { "dayNames": ["domingo", "lunes", "martes", "miércoles", "jueves", "viernes", "sábado"], "dayNamesShort": ["do.", "lu.", "ma.", "mi.", "ju.", "vi.", "sá."], "monthNames": ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre", ""], "monthNamesShort": ["ene.", "feb.", "mar.", "abr.", "may.", "jun.", "jul.", "ago.", "sep.", "oct.", "nov.", "dic.", ""], "timePattern": "hh:mm tt", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy hh:mm tt", "timeFormat": "Clock12Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("eu-es", {
            "dayNames": ["igandea", "astelehena", "asteartea", "asteazkena", "osteguna", "ostirala", "larunbata"], "dayNamesShort": ["ig", "al", "as", "az", "og", "or", "lr"], "monthNames": ["urtarrila", "otsaila", "martxoa", "apirila", "maiatza", "ekaina", "uztaila", "abuztua", "iraila", "urria", "azaroa", "abendua", ""],
            "monthNamesShort": ["urt.", "ots.", "mar.", "api.", "mai.", "eka.", "uzt.", "abu.", "ira.", "urr.", "aza.", "abe.", ""], "timePattern": "H:mm", "datePattern": "yyyy/MM/dd", "dateTimePattern": "yyyy/MM/dd H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1
        })), DayPilot.Locale.register(new DayPilot.Locale("fi-fi", { "dayNames": ["sunnuntai", "maanantai", "tiistai", "keskiviikko", "torstai", "perjantai", "lauantai"], "dayNamesShort": ["su", "ma", "ti", "ke", "to", "pe", "la"], "monthNames": ["tammikuu", "helmikuu", "maaliskuu", "huhtikuu", "toukokuu", "kesäkuu", "heinäkuu", "elokuu", "syyskuu", "lokakuu", "marraskuu", "joulukuu", ""], "monthNamesShort": ["tammi", "helmi", "maalis", "huhti", "touko", "kesä", "heinä", "elo", "syys", "loka", "marras", "joulu", ""], "timePattern": "H:mm", "datePattern": "d.M.yyyy", "dateTimePattern": "d.M.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("fr-be", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd-MM-yy", "dateTimePattern": "dd-MM-yy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("fr-ca", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("fr-ch", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("fr-fr", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("fr-lu", { "dayNames": ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"], "dayNamesShort": ["di", "lu", "ma", "me", "je", "ve", "sa"], "monthNames": ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre", ""], "monthNamesShort": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc.", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("gl-es", { "dayNames": ["domingo", "luns", "martes", "mércores", "xoves", "venres", "sábado"], "dayNamesShort": ["do", "lu", "ma", "mé", "xo", "ve", "sá"], "monthNames": ["xaneiro", "febreiro", "marzo", "abril", "maio", "xuño", "xullo", "agosto", "setembro", "outubro", "novembro", "decembro", ""], "monthNamesShort": ["xan", "feb", "mar", "abr", "maio", "xuño", "xul", "ago", "set", "out", "nov", "dec", ""], "timePattern": "H:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("it-it", { "dayNames": ["domenica", "lunedì", "martedì", "mercoledì", "giovedì", "venerdì", "sabato"], "dayNamesShort": ["do", "lu", "ma", "me", "gi", "ve", "sa"], "monthNames": ["gennaio", "febbraio", "marzo", "aprile", "maggio", "giugno", "luglio", "agosto", "settembre", "ottobre", "novembre", "dicembre", ""], "monthNamesShort": ["gen", "feb", "mar", "apr", "mag", "giu", "lug", "ago", "set", "ott", "nov", "dic", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("it-ch", { "dayNames": ["domenica", "lunedì", "martedì", "mercoledì", "giovedì", "venerdì", "sabato"], "dayNamesShort": ["do", "lu", "ma", "me", "gi", "ve", "sa"], "monthNames": ["gennaio", "febbraio", "marzo", "aprile", "maggio", "giugno", "luglio", "agosto", "settembre", "ottobre", "novembre", "dicembre", ""], "monthNamesShort": ["gen", "feb", "mar", "apr", "mag", "giu", "lug", "ago", "set", "ott", "nov", "dic", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("ja-jp", { "dayNames": ["日曜日", "月曜日", "火曜日", "水曜日", "木曜日", "金曜日", "土曜日"], "dayNamesShort": ["日", "月", "火", "水", "木", "金", "土"], "monthNames": ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月", ""], "monthNamesShort": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", ""], "timePattern": "H:mm", "datePattern": "yyyy/MM/dd", "dateTimePattern": "yyyy/MM/dd H:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("ko-kr", { "dayNames": ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"], "dayNamesShort": ["일", "월", "화", "수", "목", "금", "토"], "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월", ""], "monthNamesShort": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", ""], "timePattern": "tt h:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd tt h:mm", "timeFormat": "Clock12Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("nb-no", { "dayNames": ["søndag", "mandag", "tirsdag", "onsdag", "torsdag", "fredag", "lørdag"], "dayNamesShort": ["sø", "ma", "ti", "on", "to", "fr", "lø"], "monthNames": ["januar", "februar", "mars", "april", "mai", "juni", "juli", "august", "september", "oktober", "november", "desember", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "mai", "jun", "jul", "aug", "sep", "okt", "nov", "des", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("nl-nl", { "dayNames": ["zondag", "maandag", "dinsdag", "woensdag", "donderdag", "vrijdag", "zaterdag"], "dayNamesShort": ["zo", "ma", "di", "wo", "do", "vr", "za"], "monthNames": ["januari", "februari", "maart", "april", "mei", "juni", "juli", "augustus", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mrt", "apr", "mei", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "HH:mm", "datePattern": "d-M-yyyy", "dateTimePattern": "d-M-yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("nl-be", { "dayNames": ["zondag", "maandag", "dinsdag", "woensdag", "donderdag", "vrijdag", "zaterdag"], "dayNamesShort": ["zo", "ma", "di", "wo", "do", "vr", "za"], "monthNames": ["januari", "februari", "maart", "april", "mei", "juni", "juli", "augustus", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mrt", "apr", "mei", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "H:mm", "datePattern": "d/MM/yyyy", "dateTimePattern": "d/MM/yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("nn-no", { "dayNames": ["søndag", "måndag", "tysdag", "onsdag", "torsdag", "fredag", "laurdag"], "dayNamesShort": ["sø", "må", "ty", "on", "to", "fr", "la"], "monthNames": ["januar", "februar", "mars", "april", "mai", "juni", "juli", "august", "september", "oktober", "november", "desember", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "mai", "jun", "jul", "aug", "sep", "okt", "nov", "des", ""], "timePattern": "HH:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("pt-br", { "dayNames": ["domingo", "segunda-feira", "terça-feira", "quarta-feira", "quinta-feira", "sexta-feira", "sábado"], "dayNamesShort": ["D", "S", "T", "Q", "Q", "S", "S"], "monthNames": ["janeiro", "fevereiro", "março", "abril", "maio", "junho", "julho", "agosto", "setembro", "outubro", "novembro", "dezembro", ""], "monthNamesShort": ["jan", "fev", "mar", "abr", "mai", "jun", "jul", "ago", "set", "out", "nov", "dez", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("pl-pl", { "dayNames": ["niedziela", "poniedziałek", "wtorek", "środa", "czwartek", "piątek", "sobota"], "dayNamesShort": ["N", "Pn", "Wt", "Śr", "Cz", "Pt", "So"], "monthNames": ["styczeń", "luty", "marzec", "kwiecień", "maj", "czerwiec", "lipiec", "sierpień", "wrzesień", "październik", "listopad", "grudzień", ""], "monthNamesShort": ["sty", "lut", "mar", "kwi", "maj", "cze", "lip", "sie", "wrz", "paź", "lis", "gru", ""], "timePattern": "HH:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("pt-pt", { "dayNames": ["domingo", "segunda-feira", "terça-feira", "quarta-feira", "quinta-feira", "sexta-feira", "sábado"], "dayNamesShort": ["D", "S", "T", "Q", "Q", "S", "S"], "monthNames": ["janeiro", "fevereiro", "março", "abril", "maio", "junho", "julho", "agosto", "setembro", "outubro", "novembro", "dezembro", ""], "monthNamesShort": ["jan", "fev", "mar", "abr", "mai", "jun", "jul", "ago", "set", "out", "nov", "dez", ""], "timePattern": "HH:mm", "datePattern": "dd/MM/yyyy", "dateTimePattern": "dd/MM/yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 0 })), DayPilot.Locale.register(new DayPilot.Locale("ro-ro", { "dayNames": ["duminică", "luni", "marți", "miercuri", "joi", "vineri", "sâmbătă"], "dayNamesShort": ["D", "L", "Ma", "Mi", "J", "V", "S"], "monthNames": ["ianuarie", "februarie", "martie", "aprilie", "mai", "iunie", "iulie", "august", "septembrie", "octombrie", "noiembrie", "decembrie", ""], "monthNamesShort": ["ian.", "feb.", "mar.", "apr.", "mai.", "iun.", "iul.", "aug.", "sep.", "oct.", "nov.", "dec.", ""], "timePattern": "H:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("ru-ru", { "dayNames": ["воскресенье", "понедельник", "вторник", "среда", "четверг", "пятница", "суббота"], "dayNamesShort": ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"], "monthNames": ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь", ""], "monthNamesShort": ["янв", "фев", "мар", "апр", "май", "июн", "июл", "авг", "сен", "окт", "ноя", "дек", ""], "timePattern": "H:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("sk-sk", { "dayNames": ["nedeľa", "pondelok", "utorok", "streda", "štvrtok", "piatok", "sobota"], "dayNamesShort": ["ne", "po", "ut", "st", "št", "pi", "so"], "monthNames": ["január", "február", "marec", "apríl", "máj", "jún", "júl", "august", "september", "október", "november", "december", ""], "monthNamesShort": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", ""], "timePattern": "H:mm", "datePattern": "d.M.yyyy", "dateTimePattern": "d.M.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("sv-se", { "dayNames": ["söndag", "måndag", "tisdag", "onsdag", "torsdag", "fredag", "lördag"], "dayNamesShort": ["sö", "må", "ti", "on", "to", "fr", "lö"], "monthNames": ["januari", "februari", "mars", "april", "maj", "juni", "juli", "augusti", "september", "oktober", "november", "december", ""], "monthNamesShort": ["jan", "feb", "mar", "apr", "maj", "jun", "jul", "aug", "sep", "okt", "nov", "dec", ""], "timePattern": "HH:mm", "datePattern": "yyyy-MM-dd", "dateTimePattern": "yyyy-MM-dd HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("tr-tr", { "dayNames": ["Pazar", "Pazartesi", "Salı", "Çarşamba", "Perşembe", "Cuma", "Cumartesi"], "dayNamesShort": ["Pz", "Pt", "Sa", "Ça", "Pe", "Cu", "Ct"], "monthNames": ["Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık", ""], "monthNamesShort": ["Oca", "Şub", "Mar", "Nis", "May", "Haz", "Tem", "Ağu", "Eyl", "Eki", "Kas", "Ara", ""], "timePattern": "HH:mm", "datePattern": "d.M.yyyy", "dateTimePattern": "d.M.yyyy HH:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("uk-ua", { "dayNames": ["неділя", "понеділок", "вівторок", "середа", "четвер", "п'ятниця", "субота"], "dayNamesShort": ["Нд", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"], "monthNames": ["січень", "лютий", "березень", "квітень", "травень", "червень", "липень", "серпень", "вересень", "жовтень", "листопад", "грудень", ""], "monthNamesShort": ["Січ", "Лют", "Бер", "Кві", "Тра", "Чер", "Лип", "Сер", "Вер", "Жов", "Лис", "Гру", ""], "timePattern": "H:mm", "datePattern": "dd.MM.yyyy", "dateTimePattern": "dd.MM.yyyy H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("zh-cn", { "dayNames": ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"], "dayNamesShort": ["日", "一", "二", "三", "四", "五", "六"], "monthNames": ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月", ""], "monthNamesShort": ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月", ""], "timePattern": "H:mm", "datePattern": "yyyy/M/d", "dateTimePattern": "yyyy/M/d H:mm", "timeFormat": "Clock24Hours", "weekStarts": 1 })), DayPilot.Locale.register(new DayPilot.Locale("zh-tw", { "dayNames": ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"], "dayNamesShort": ["日", "一", "二", "三", "四", "五", "六"], "monthNames": ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月", ""], "monthNamesShort": ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月", ""], "timePattern": "tt hh:mm", "datePattern": "yyyy/M/d", "dateTimePattern": "yyyy/M/d tt hh:mm", "timeFormat": "Clock12Hours", "weekStarts": 0 })), DayPilot.Locale.US = DayPilot.Locale.find("en-us"), DayPilot.Switcher = function (e) { function t(e, t, i) { var a = {}; a.start = e, a.end = t, a.day = i, a.target = n.s.control, a.preventDefault = function () { this.preventDefault.value = !0 }; var r = n.N; r && r.start === a.start && r.end === a.end && r.day === a.day && r.target === a.target || (n.N = a, "function" == typeof n.onChange && (n.onChange(a), a.preventDefault.value) || "function" == typeof n.onTimeRangeSelect && (n.onTimeRangeSelect(a), a.preventDefault.value) || (n.s.C(n.t), "function" == typeof n.onChanged && n.onChanged(a), "function" == typeof n.onTimeRangeSelected && n.onTimeRangeSelected(a))) } var n = this; this.n = [], this.p = [], this.q = {}, this.selectedClass = null, this.s = null, this.t = DayPilot.Date.today(), this.onChange = null, this.onChanged = null, this.onSelect = null, this.q.updateMode = function (e) { var t = n.q.control; t && (t.selectMode = e, t.select(n.t)) }, this.addView = function (e, t) { var i; if ("string" == typeof e) { if (i = document.getElementById(e), !i) throw "Element not found: " + e } else i = e; var a = i, r = {}; return r.u = !0, r.z = a.id, r.control = a, r.A = t || {}, r.B = function () { a.hide ? a.hide() : a.nav && a.nav.top ? a.nav.top.style.display = "none" : a.style.display = "none" }, r.C = function (e) { (function () { return !!a.backendUrl || !("function" != typeof WebForm_DoCallback || !a.uniqueID) })() ? a.commandCallBack && a.commandCallBack("navigate", { "day": e }) : (a.startDate = e, a.update()) }, r.D = function () { n.E(), a.show ? a.show() : a.nav && a.nav.top ? a.nav.top.style.display = "" : a.style.display = "" }, r.F = function () { if (r.A.navigatorSelectMode) return r.A.navigatorSelectMode; if (a.isCalendar) switch (a.viewType) { case "Day": return "day"; case "Week": return "week"; case "WorkWeek": return "week"; default: return "day" } else if (a.isMonth) switch (a.viewType) { case "Month": return "month"; case "Weeks": return "week"; default: return "day" }return "day" }, this.n.push(r), r }, this.addTrigger = function (e, t) { var i; if ("string" == typeof e) { if (i = document.getElementById(e), !i) throw "Element not found: " + e } else i = e; var a = this.G(t); a || (a = this.addView(t)); var r = {}; return r.H = !0, r.I = i, r.z = i.id, r.J = a, r.K = function (e) { n.show(r), n.L(r), e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1) }, DayPilot.re(i, "click", r.K), this.p.push(r), r }, this.addButton = this.addTrigger, this.select = function (e) { var t = this.M(e); t ? t.K() : this.p.length > 0 && this.p[0].K() }, this.M = function (e) { for (var t = 0; t < this.p.length; t++) { var n = this.p[t]; if (n.z === e) return n } return null }, this.L = function (e) { if (this.selectedClass) { for (var t = 0; t < this.p.length; t++) { var n = this.p[t]; DayPilot.Util.removeClass(n.I, this.selectedClass) } DayPilot.Util.addClass(e.I, this.selectedClass) } }, this.addNavigator = function (e) { n.q.control = e, e.timeRangeSelectedHandling = "JavaScript", e.onTimeRangeSelected = function () { var i, a, r; if (1 === e.api) i = arguments[0], a = arguments[1], r = arguments[2]; else { var o = arguments[0]; i = o.start, a = o.end, r = o.day } n.t = r, t(i, a, r) } }, this.show = function (e) { var i, a; if (e.H) a = e, i = a.J; else if (i = e.u ? e : this.G(e), this.s === i) return; if (n.onSelect) { var r = {}; r.source = a ? a.I : null, r.target = i.control, n.onSelect(r) } this.s = i, i.D(); var o = i.F(); n.q.updateMode(o), t(n.q.control.selectionStart, n.q.control.selectionEnd.addDays(1), n.q.control.selectionDay) }, this.G = function (e) { for (var t = 0; t < this.n.length; t++)if (this.n[t].control === e) return this.n[t]; return null }, this.E = function () { for (var e = 0; e < this.n.length; e++)this.n[e].B() }, Object.defineProperty(this, "active", { get: function () { return n.s } }), this.events = {}, this.events.load = function (e, t, i) { if (!n.s || !n.s.control) throw "DayPilot.Switcher.events.load(): Active view not found"; n.s.control.events.load(e, t, i) }, this.N = null, this.O = function () { if (e) for (var t in e) if ("triggers" === t) { var i = e.triggers || []; i.forEach(function (e) { n.addTrigger(e.id, e.view) }) } else "navigator" === t ? n.addNavigator(e.navigator) : n[t] = e[t] }, this.O() }, function () {
            if (!DayPilot.Global.defaultCss) {
                var e = DayPilot.sheet(); e.add(".bubble_default_main", "cursor: default; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"), e.add(".bubble_default_main_inner", 'border-radius: 5px; padding: 4px;color: #666;background: #eeeeee; background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");border: 1px solid #ccc;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;-moz-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);-webkit-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);'), e.add(".bubble_default_arrow_top", "fill: #ffffff; stroke: #cccccc; stroke-width: 1;"), e.add(".bubble_default_arrow_bottom", "fill: #eeeeee; stroke: #cccccc; stroke-width: 2;"), e.add(".bubble_default_arrow_left", "fill: #ffffff; stroke: #cccccc; stroke-width: 1;"), e.add(".bubble_default_arrow_right", "fill: #ffffff; stroke: #cccccc; stroke-width: 1;"), e.add(".calendar_default_main", "border: 1px solid #c0c0c0; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"), e.add(".calendar_default_main *, .calendar_default_main *:before, .calendar_default_main *:after", "box-sizing: content-box;"), e.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner", "color: #333;background: #f3f3f3;"), e.add(".calendar_default_colheader_back", "background: #f3f3f3; border-bottom: 1px solid red;"), e.add(".calendar_default_colheader_back_inner", "position: absolute; inset: 0; border-bottom: 1px solid #c0c0c0;"), e.add(".calendar_default_cornerright_inner", "position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px; border-bottom: 1px solid #c0c0c0;"), e.add(".calendar_default_direction_rtl .calendar_default_cornerright_inner", "border-right: 1px solid #c0c0c0;"), e.add(".calendar_default_rowheader_inner", "font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; padding: 3px;"), e.add(".calendar_default_direction_rtl .calendar_default_rowheader_inner", "border-right: none;"), e.add(".calendar_default_corner_inner", "position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"), e.add(".calendar_default_direction_rtl .calendar_default_corner_inner", "border-right: none;"), e.add(".calendar_default_rowheader_minutes", "font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;"), e.add(".calendar_default_colheader_inner", "position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; display: flex; align-items: center; justify-content: center;"), e.add(".calendar_default_cell_inner", "position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;"), e.add(".calendar_default_cell_business .calendar_default_cell_inner", "background: #fff"), e.add(".calendar_default_alldayheader_inner", "text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"), e.add(".calendar_default_message", "opacity: 0.9; padding: 10px; color: #ffffff;background: #ffa216;"), e.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner", "color: #333; border: 1px solid #999;"), e.add(".calendar_default_event_bar", "top: 0px;bottom: 0px;left: 0px;width: 6px;background-color: #9dc8e8;"), e.add(".calendar_default_event_bar_inner", "position: absolute;width: 6px;background-color: #1066a8;"), e.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner", 'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".calendar_default_selected .calendar_default_event_inner", "background: #ddd;"), e.add(".calendar_default_alldayevent_inner", "position: absolute;top: 0px;bottom: 0px;left: 0px;right: 0px;overflow:hidden;padding: 4px;margin-right: 0px; display: flex; align-items: center;"), e.add(".calendar_default_event_withheader .calendar_default_event_inner", "padding-top: 15px;"), e.add(".calendar_default_event", "cursor: default;"), e.add(".calendar_default_event_inner", "position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 8px;"), e.add(".calendar_default_shadow_inner", "box-sizing: border-box; background-color: #bbbbbb;border: 1px solid #888888;opacity: 0.5;height: 100%;"), e.add(".calendar_default_shadow", "box-shadow: 0 2px 5px rgba(0,0,0,.2);"), e.add(".calendar_default_shadow_forbidden:after", "content:''; position: absolute; top: 5px; left: calc(50% - 10px); border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; background-image: url('data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%279%27 fill=%27%23cc0000aa%27 /%3E%3Cline x1=%275%27 y1=%275%27 x2=%2715%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3Cline x1=%2715%27 y1=%275%27 x2=%275%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: center; background-size: contain;"), e.add(".calendar_default_shadow_forbidden .calendar_default_shadow_inner", "border: 1px solid #cc0000; background: #cc4125"), e.add(".calendar_default_event_delete", "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"), e.add(".calendar_default_event_delete:hover", "opacity: 1;-ms-filter: none;"), e.add(".calendar_default_scroll_up", "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAB3RJTUUH2wESDiYcrhwCiQAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAARnQU1BAACxjwv8YQUAAACcSURBVHjaY2AgF9wWsTW6yGMlhi7OhC7AyMDQzMnBXIpFHAFuCtuaMTP+P8nA8P/b1x//FfW/HHuF1UQmxv+NUP1c3OxMVVhNvCVi683E8H8LXOY/w9+fTH81tF8fv4NiIpBRj+YoZtZ/LDUoJmKYhsVUpv0MDiyMDP96sIYV0FS2/8z9ICaLlOhvS4b/jC//MzC8xBG0vJeF7GQBlK0xdiUzCtsAAAAASUVORK5CYII=);"), e.add(".calendar_default_scroll_down", "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAACqSURBVChTY7wpam3L9J+xmQEP+PGPKZZxP4MDi4zI78uMDIwa2NT+Z2DYovrmiC+TI8OBP/8ZmEqwGvif4e8vxr+FIDkmEKH25vBWBgbG0+iK/zEwLtF+ffwOXCGI8Y+BoRFFIdC030x/WmBiYBNhpgLdswNJ8RSYaSgmgk39z1gPUfj/29ef/9rwhQTDHRHbrbdEbLvRFcGthkkAra/9/uMvhkK8piNLAgCRpTnNn4AEmAAAAABJRU5ErkJggg==);"), e.add(".calendar_default_now", "background-color: red;"), e.add(".calendar_default_now:before", "content: ''; top: -5px; border-width: 5px; border-color: transparent transparent transparent red; border-style: solid; width: 0px; height:0px; position: absolute; -moz-transform: scale(.9999);"), e.add(".calendar_default_shadow_top", 'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".calendar_default_shadow_bottom", 'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".calendar_default_crosshair_vertical, .calendar_default_crosshair_horizontal, .calendar_default_crosshair_left, .calendar_default_crosshair_top", "background-color: gray; opacity: 0.2;"), e.add(".calendar_default_loading", "background-color: orange; color: white; padding: 2px;"), e.add(".calendar_default_scroll", "background-color: #f3f3f3;"), e.add(".calendar_default_event_moving_source", "opacity: 0.5;"), e.add(".calendar_default_colmove_handle", "background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"), e.add(".calendar_default_colheader:hover .calendar_default_colheader_splitter", "background-color: #c0c0c0;"), e.add(".calendar_default_colmove_source", "background-color: black; opacity: 0.5;"), e.add(".calendar_default_colmove_position_before", "box-sizing: border-box; border-left: 2px solid #999999;"), e.add(".calendar_default_colmove_position_before:before", "content: ''; border-width: 6px; border-color: transparent #999999 transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".calendar_default_colmove_position_after", "box-sizing: border-box; border-right: 2px solid #999999;"), e.add(".calendar_default_colmove_position_after:before", "content: ''; border-width: 6px; border-color: transparent transparent transparent #999999; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".calendar_default_colmove_position_child", "box-sizing: border-box; border-bottom: 2px solid #999999;"), e.add(".calendar_default_colmove_position_child:before", "content: ''; border-width: 6px; border-color: #999999 transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".calendar_default_colmove_position_forbidden", "border-top: 2px solid red;"), e.add(".calendar_default_colheader .calendar_default_colheader_splitter:hover", "background-color: #999999;"), e.add(".menu_default_main", "user-select:none; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;font-size: 13px;border: 1px solid #dddddd;background-color: white;padding: 0px;cursor: default;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAABCAIAAABG0om7AAAAKXRFWHRDcmVhdGlvbiBUaW1lAHBvIDEwIDUgMjAxMCAyMjozMzo1OSArMDEwMGzy7+IAAAAHdElNRQfaBQoUJAesj4VUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAABGdBTUEAALGPC/xhBQAAABVJREFUeNpj/P//PwO1weMnT2RlZAAYuwX/4oA3BgAAAABJRU5ErkJggg==);background-repeat: repeat-y;xborder-radius: 5px;-moz-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);-webkit-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);"), e.add(".menu_default_main, .menu_default_main *, .menu_default_main *:before, .menu_default_main *:after", "box-sizing: content-box;"), e.add(".menu_default_title", "background-color: #f2f2f2;border-bottom: 1px solid gray;padding: 4px 4px 4px 37px;"), e.add(".menu_default_main a", "padding: 2px 2px 2px 35px;color: black;text-decoration: none;cursor: default;"), e.add(".menu_default_main.menu_default_withchildren a", "padding: 2px 35px 2px 35px;"), e.add(".menu_default_main a img", "margin-left: 6px;margin-top: 2px;"), e.add(".menu_default_item_text", "display: block;height: 20px;line-height: 20px; overflow:hidden;padding-left: 2px;padding-right: 20px; white-space: nowrap;"), e.add(".menu_default_main a:hover", "background-color: #f3f3f3;"), e.add(".menu_default_main div div", "border-top: 1px solid #dddddd;margin-top: 2px;margin-bottom: 2px;margin-left: 28px;"), e.add(".menu_default_main a.menu_default_item_disabled", "color: #ccc"), e.add(".menu_default_item_haschildren.menu_default_item_haschildren_active", "background-color: #f3f3f3;"), e.add(".menu_default_item_haschildren a:before", "content: ''; border-width: 5px; border-color: transparent transparent transparent #666; border-style: solid; width: 0px; height:0px; position: absolute; right: 5px; margin-top: 5px;"), e.add(".menu_default_item_icon", "position: absolute; top:0px; left: 0px; padding: 2px 2px 2px 8px;"), e.add(".menu_default_item a i", "height: 20px;line-height: 20px;"), e.add(".menu_default_item .menu_default_item_symbol", "width: 18px; height: 18px; color: #999; margin-left: 6px;margin-top: 2px;"), e.add(".menubar_default_main", "border-bottom: 1px solid #ccc; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px; user-select:none;"),
                    e.add(".menubar_default_item", "display: inline-block;  padding: 6px 10px; cursor: default;"), e.add(".menubar_default_item:hover", "background-color: #f2f2f2;"), e.add(".menubar_default_item_active", "background-color: #f2f2f2;"), e.add(".month_default_main", "border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;color: #333;"), e.add(".month_default_main *, .month_default_main *:before, .month_default_main *:after", "box-sizing: content-box;"), e.add(".month_default_cell_inner", "border-right: 1px solid #ddd;border-bottom: 1px solid #ddd;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;background-color: #f9f9f9;"), e.add(".month_default_cell_business .month_default_cell_inner", "background-color: #fff;"), e.add(".month_default_cell_header", "text-align: right; padding: 4px; box-sizing: border-box;"), e.add(".month_default_header_inner", "position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;cursor: default;color: #333;background: #f3f3f3; overflow:hidden; display: flex; align-items: center; justify-content: center;"), e.add(".month_default_message", "padding: 10px;opacity: 0.9; color: #ffffff;background: #ffa216;"), e.add(".month_default_event_inner", "position: absolute;top: 0px;bottom: 0px;left: 1px;right: 1px;overflow:hidden;padding: 2px;padding-left: 10px;color: #333;background: #fff;background: linear-gradient(to bottom, #ffffff 0%, #eeeeee);border: 1px solid #999;border-radius: 0px;display: flex; align-items: center;"), e.add(".month_default_event_continueright .month_default_event_inner", "border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-right-style: dotted;"), e.add(".month_default_event_continueleft .month_default_event_inner", "border-top-left-radius: 0px;border-bottom-left-radius: 0px;border-left-style: dotted;"), e.add(".month_default_event_bar", "top: 0px;bottom: 0px;left: 0px;width: 6px;"), e.add(".month_default_event_bar_inner", "position: absolute;width: 6px;background-color: #1066a8;"), e.add(".month_default_event_continueleft .month_default_event_bar", "display: none;"), e.add(".month_default_selected .month_default_event_inner", "background: #ddd;"), e.add(".month_default_shadow_inner", "box-sizing: border-box; background-color: #bbbbbb;border: 1px solid #888888;opacity: 0.5;height: 100%;"), e.add(".month_default_shadow", "box-shadow: 0 2px 5px rgba(0,0,0,.2);"), e.add(".month_default_event_delete", "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"), e.add(".month_default_event_delete:hover", "opacity: 1;-ms-filter: none;"), e.add(".month_default_event_timeleft", "color: #ccc; font-size: 11px; display: flex; align-items: center;"), e.add(".month_default_event_timeright", "color: #ccc; font-size: 11px; display: flex; align-items: center; justify-content: end;"), e.add(".month_default_loading", "background-color: orange; color: white; padding: 2px;"), e.add(".month_default_shadow_forbidden:after", "content:''; position: absolute; top: calc(50% - 10px); left: 10px; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; background-image: url('data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%279%27 fill=%27%23cc0000aa%27 /%3E%3Cline x1=%275%27 y1=%275%27 x2=%2715%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3Cline x1=%2715%27 y1=%275%27 x2=%275%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: center; background-size: contain;"), e.add(".month_default_shadow_forbidden .month_default_shadow_inner", "border: 1px solid #cc0000; background: #cc4125"), e.add(".navigator_default_main", "border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"), e.add(".navigator_default_main *, .navigator_default_main *:before, .navigator_default_main *:after", "box-sizing: content-box;"), e.add(".navigator_default_month", "font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 12px;"), e.add(".navigator_default_day", "color: black;"), e.add(".navigator_default_weekend", "background-color: #f0f0f0;"), e.add(".navigator_default_dayheader", "color: black;"), e.add(".navigator_default_line", "border-bottom: 1px solid #c0c0c0;"), e.add(".navigator_default_dayother", "color: gray;"), e.add(".navigator_default_todaybox", "border: 1px solid red;"), e.add(".navigator_default_title, .navigator_default_titleleft, .navigator_default_titleright", "border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"), e.add(".navigator_default_busy", "font-weight: bold;"), e.add(".navigator_default_cell", "text-align: center;"), e.add(".navigator_default_select .navigator_default_cell_box", "background-color: #FFE794; opacity: 0.5;"), e.add(".navigator_default_title", "text-align: center;"), e.add(".navigator_default_titleleft, .navigator_default_titleright", "text-align: center;"), e.add(".navigator_default_dayheader", "text-align: center;"), e.add(".navigator_default_weeknumber", "text-align: center; color: #999;"), e.add(".navigator_default_cell_text", "cursor: pointer;"), e.add(".scheduler_default_main *, .scheduler_default_main *:before, .scheduler_default_main *:after", "box-sizing: content-box;"), e.add(".scheduler_default_main", "box-sizing: content-box; border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"), e.add(".scheduler_default_selected .scheduler_default_event_inner", "background: #ddd;"), e.add(".scheduler_default_timeheader_scroll", "background: #f3f3f3;"), e.add(".scheduler_default_message", "opacity: 0.9; padding: 10px; color: #ffffff; background: #ffa216;"), e.add(".scheduler_default_timeheadergroup,.scheduler_default_timeheadercol", "color: #333;background: #f3f3f3;"), e.add(".scheduler_default_rowheader,.scheduler_default_corner", "color: #333;background: #f3f3f3;"), e.add(".scheduler_default_rowheader.scheduler_default_rowheader_selected", "background-color: #aaa; background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent); background-size: 20px 20px;"), e.add(".scheduler_default_rowheader_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e0e0e0;padding: 7px;display: flex; align-items: center;"), e.add(".scheduler_default_timeheadergroup_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"), e.add(".scheduler_default_timeheadercol_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"), e.add(".scheduler_default_timeheader_float", "display: flex; align-items: center; justify-content: center;"), e.add(".scheduler_default_divider, .scheduler_default_splitter", "background-color: #c0c0c0;"), e.add(".scheduler_default_divider_horizontal", "background-color: #c0c0c0;"), e.add(".scheduler_default_matrix_vertical_line", "background-color: #eee;"), e.add(".scheduler_default_matrix_vertical_break", "background-color: #999;"), e.add(".scheduler_default_matrix_horizontal_line", "background-color: #eee;"), e.add(".scheduler_default_resourcedivider", "background-color: #c0c0c0;"), e.add(".scheduler_default_shadow_inner", "box-sizing: border-box; background-color: #bbbbbb;border: 1px solid #888888;opacity: 0.5;height: 100%;"), e.add(".scheduler_default_shadow", "box-shadow: 0 2px 5px rgba(0,0,0,.2);"), e.add(".scheduler_default_event", "font-size:13px;color:#333;"), e.add(".scheduler_default_event_inner", "position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 2px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"), e.add(".scheduler_default_event_bar", "top:0px;left:0px;right:0px;height:4px;background-color:#9dc8e8;"), e.add(".scheduler_default_event_bar_inner", "position:absolute;height:4px;background-color:#1066a8;"), e.add(".scheduler_default_event_inner", 'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".scheduler_default_event_float", "display: flex; align-items: center;"), e.add(".scheduler_default_event_float_inner", "padding:2px 2px 2px 8px; position: relative;"), e.add(".scheduler_default_event_float_inner:after", 'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top: calc(50% - 5px);left:-4px;'), e.add(".scheduler_default_event_focus", "outline: red 2px solid; z-index: 100; opacity: 0.5;"), e.add(".scheduler_default_columnheader_inner", "font-weight: bold;"), e.add(".scheduler_default_columnheader_splitter", "box-sizing: border-box; border-right: 1px solid #c0c0c0;"), e.add(".scheduler_default_columnheader_splitter:hover", "background-color: #c0c0c0;"), e.add(".scheduler_default_columnheader_cell_inner", "position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; padding: 2px; display: flex; align-items: center;"), e.add(".scheduler_default_cell", "background-color: #f9f9f9;"), e.add(".scheduler_default_cell.scheduler_default_cell_business", "background-color: #fff;"), e.add(".scheduler_default_cell.scheduler_default_cell_business.scheduler_default_cell_selected,.scheduler_default_cell.scheduler_default_cell_selected", "background-color: #ccc; background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent); background-size: 20px 20px;"), e.add(".scheduler_default_tree_image_no_children", ""), e.add(".scheduler_default_tree_image_expand", "background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J00gMS41IDAuNSBMIDYuNSA1IEwgMS41IDkuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6Izk5OTk5OTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=);"), e.add(".scheduler_default_tree_image_collapse", "background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMS41IEwgNSA2LjUgTCA5LjUgMS41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==);"), e.add(".scheduler_default_event_delete", "background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTInIGhlaWdodD0nMTInIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgMTEuNSAxMS41IE0gMC41IDExLjUgTCAxMS41IDAuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6IzQ2NDY0NjtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=) no-repeat center center; opacity: 0.6; cursor: pointer;"), e.add(".scheduler_default_event_delete:hover", "opacity: 1;"), e.add(".scheduler_default_rowmove_handle", "background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"), e.add(".scheduler_default_rowmove_source", "background-color: black; opacity: 0.2;"), e.add(".scheduler_default_rowmove_position_before, .scheduler_default_rowmove_position_after", "background-color: #999; height: 2px;"), e.add(".scheduler_default_rowmove_position_child", "margin-left: 10px; background-color: #999; height: 2px;"), e.add(".scheduler_default_rowmove_position_child:before", "content: '+'; color: #999; position: absolute; top: -8px; left: -10px;"), e.add(".scheduler_default_rowmove_position_forbidden", "background-color: red; height: 2px; margin-left: 10px;"), e.add(".scheduler_default_rowmove_position_forbidden:before", "content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"), e.add(".scheduler_default_link_horizontal", "border-bottom-style: solid; border-bottom-color: #cc0000"), e.add(".scheduler_default_link_vertical", "border-right-style: solid; border-right-color: #cc0000"), e.add(".scheduler_default_link_arrow_right:before", "content: ''; border-width: 6px; border-color: transparent transparent transparent #cc0000; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".scheduler_default_link_arrow_left:before", "content: ''; border-width: 6px; border-color: transparent #cc0000 transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".scheduler_default_link_arrow_down:before", "content: ''; border-width: 6px; border-color: #cc0000 transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".scheduler_default_link_arrow_up:before", "content: ''; border-width: 6px; border-color: transparent transparent #cc0000 transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".scheduler_default_block", "background-color: #808080; opacity: 0.5;"), e.add(".scheduler_default_main .scheduler_default_event_group", "box-sizing: border-box; font-size:13px; color:#666; padding:2px; overflow:hidden; border:1px solid #ccc; background-color: #fff; display: flex; align-items: center; white-space: nowrap;"), e.add(".scheduler_default_main .scheduler_default_header_icon", "box-sizing: border-box; border: 1px solid #c0c0c0; background-color: #f5f5f5; color: #000;"), e.add(".scheduler_default_header_icon:hover", "background-color: #ccc;"), e.add(".scheduler_default_header_icon_hide:before", "content: '\\00AB';"), e.add(".scheduler_default_header_icon_show:before", "content: '\\00BB';"), e.add(".scheduler_default_row_new .scheduler_default_rowheader_inner", "padding-left: 10px; color: #666; cursor: text; background-position: 0px 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"), e.add(".scheduler_default_row_new .scheduler_default_rowheader_inner:hover", "background: white; color: white;"), e.add(".scheduler_default_rowheader textarea", "padding: 3px;"), e.add(".scheduler_default_rowheader_scroll", "cursor: default; background: #f3f3f3;"), e.add(".scheduler_default_shadow_forbidden:after, .scheduler_default_shadow_overlap:after", "content:''; position: absolute; top: calc(50% - 10px); left: 10px; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; background-image: url('data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%279%27 fill=%27%23cc0000aa%27 /%3E%3Cline x1=%275%27 y1=%275%27 x2=%2715%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3Cline x1=%2715%27 y1=%275%27 x2=%275%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: center; background-size: contain;"), e.add(".scheduler_default_shadow_forbidden .scheduler_default_shadow_inner, .scheduler_default_shadow_overlap .scheduler_default_shadow_inner", "border: 1px solid #cc0000; background: #cc4125"), e.add(".scheduler_default_shadow_invalid .scheduler_default_shadow_inner", "background-color: #cc4125;"), e.add(".scheduler_default_event_moving_source", "opacity: 0.5;"), e.add(".scheduler_default_linkpoint", "background-color: white; border: 1px solid gray; border-radius: 5px;"), e.add(".scheduler_default_linkpoint.scheduler_default_linkpoint_hover", "background-color: black;"), e.add(".scheduler_default_event.scheduler_default_event_version .scheduler_default_event_inner", "overflow:hidden; background-color: #cfdde8;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"), e.add(".scheduler_default_crosshair_vertical, .scheduler_default_crosshair_horizontal, .scheduler_default_crosshair_left, .scheduler_default_crosshair_top", "background-color: gray; opacity: 0.2;"), e.add(".scheduler_default_link_dot", "border-radius: 10px; background-color: #cc0000"), e.add(".scheduler_default_task_milestone .scheduler_default_event_inner", "position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: #38761d; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"), e.add(".scheduler_default_event_left", "white-space: nowrap; color: #666; cursor: default; display: flex; align-items: center;"), e.add(".scheduler_default_event_right", "white-space: nowrap; color: #666; cursor: default; display: flex; align-items: center;"), e.add(".scheduler_default_main:focus", "outline: none;"), e.add(".scheduler_default_cell_focus", "outline: red 2px solid; outline-offset: -2px; z-index: 100; opacity: 0.5;"), e.add(".scheduler_default_cell_focus.scheduler_default_cell_focus_top", "border-top: 4px solid red;"), e.add(".scheduler_default_cell_focus.scheduler_default_cell_focus_bottom", "border-bottom: 4px solid red;"), e.add(".scheduler_default_selectionrectangle", "background-color: #0000ff; border: 1px solid #000033; opacity: 0.4;"); e.add(".scheduler_default_link_shadow", "border:1px solid black;"); e.add(".scheduler_default_link_shadow_circle", "background-color:black;"), e.add(".scheduler_default_event_move_left", "box-sizing: border-box; padding: 2px; border: 1px solid #ccc; background: #fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee); display: flex; align-items: center;"), e.add(".scheduler_default_event_move_right", "box-sizing: border-box; padding: 2px; border: 1px solid #ccc; background: #fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee); display: flex; align-items: center;"), e.add(".scheduler_default_link_hover", "box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"), e.add(".scheduler_default_sorticon", "opacity: 0.2;background-position: center center; background-repeat: no-repeat; cursor: pointer;"), e.add(".scheduler_default_sorticon.scheduler_default_sorticon_asc", "background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBvbHlnb24gcG9pbnRzPSI1IDEuNSwgMTAgMTAsIDAgMTAiLz48L3N2Zz4=');"), e.add(".scheduler_default_sorticon.scheduler_default_sorticon_desc", "background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBvbHlnb24gcG9pbnRzPSI1IDguNSwgMCAwLCAxMCAwIi8+PC9zdmc+');"), e.add(".scheduler_default_sorticon.scheduler_default_sorticon_active", "opacity: 1;"), e.add(".scheduler_default_loading", "background-color: orange; color: white; padding: 2px;"), e.add(".gantt_default_selected .gantt_default_event_inner", "background: #ddd;"), e.add(".gantt_default_main", "border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"), e.add(".gantt_default_main *, .gantt_default_main *:before, .gantt_default_main *:after", "box-sizing: content-box;"), e.add(".gantt_default_timeheader", "cursor: default;color: #666;"), e.add(".gantt_default_message", "opacity: 0.9;padding: 10px; color: #ffffff;background: #ffa216;"), e.add(".gantt_default_timeheadergroup,.gantt_default_timeheadercol", "color: #333;background: #f3f3f3;"), e.add(".gantt_default_rowheader,.gantt_default_corner", "color: #333;background: #f3f3f3;"), e.add(".gantt_default_rowheader.gantt_default_rowheader_selected", "background-color: #aaa;background-image: -webkit-gradient(linear, 0 100%, 100% 0,color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"), e.add(".gantt_default_rowheader_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e0e0e0;padding: 7px;display: flex; align-items: center;"), e.add(".gantt_default_timeheadergroup_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"), e.add(".gantt_default_timeheadercol_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"), e.add(".gantt_default_timeheader_float", "display: flex; align-items: center; justify-content: center;"), e.add(".gantt_default_divider, .gantt_default_splitter", "background-color: #c0c0c0;"), e.add(".gantt_default_divider_horizontal", "background-color: #c0c0c0;"), e.add(".gantt_default_matrix_vertical_line", "background-color: #eee;"), e.add(".gantt_default_matrix_vertical_break", "background-color: #000;"), e.add(".gantt_default_matrix_horizontal_line", "background-color: #eee;"), e.add(".gantt_default_resourcedivider", "background-color: #c0c0c0;"), e.add(".gantt_default_shadow_inner", "box-sizing: border-box; background-color: #bbbbbb;border: 1px solid #888888;opacity: 0.5;height: 100%;"), e.add(".gantt_default_shadow", "box-shadow: 0 2px 5px rgba(0,0,0,.2);"), e.add(".gantt_default_event", "color:#666;"), e.add(".gantt_default_event_inner", "position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 2px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"), e.add(".gantt_default_event_bar", "top:0px;left:0px;right:0px;height:4px;background-color:#9dc8e8;"), e.add(".gantt_default_event_bar_inner", "position:absolute;height:4px;background-color:#1066a8;"), e.add(".gantt_default_event_inner", 'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".gantt_default_event_float_inner", "padding:6px 2px 2px 8px;"), e.add(".gantt_default_event_float_inner:after", 'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:8px;left:-4px;'), e.add(".gantt_default_columnheader_inner", "font-weight: bold;"), e.add(".gantt_default_columnheader_splitter", "background-color: #666;opacity: 0.5;"), e.add(".gantt_default_columnheader_cell_inner", "position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; padding: 2px; display: flex; align-items: center;"), e.add(".gantt_default_cell", "background-color: #f9f9f9;"), e.add(".gantt_default_cell.gantt_default_cell_business", "background-color: #fff;"), e.add(".gantt_default_cell.gantt_default_cell_business.gantt_default_cell_selected,.gantt_default_cell.gantt_default_cell_selected", "background-color: #ccc;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"), e.add(".gantt_default_tree_image_no_children", ""), e.add(".gantt_default_tree_image_expand", "background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J00gMS41IDAuNSBMIDYuNSA1IEwgMS41IDkuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6Izk5OTk5OTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=);"), e.add(".gantt_default_tree_image_collapse", "background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMS41IEwgNSA2LjUgTCA5LjUgMS41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==);"), e.add(".gantt_default_event_move_left", 'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".gantt_default_event_move_right", 'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".gantt_default_event_delete", "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"), e.add(".gantt_default_event_delete:hover", "opacity: 1;-ms-filter: none;"), e.add(".gantt_default_rowmove_handle", "background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"), e.add(".gantt_default_rowmove_source", "background-color: black; opacity: 0.2;"), e.add(".gantt_default_rowmove_position_before, .gantt_default_rowmove_position_after", "background-color: #999; height: 2px;"), e.add(".gantt_default_rowmove_position_child", "margin-left: 10px; background-color: #999; height: 2px;"), e.add(".gantt_default_rowmove_position_child:before", "content: '+'; color: #999; position: absolute; top: -8px; left: -10px;"), e.add(".gantt_default_rowmove_position_forbidden", "background-color: red; height: 2px; margin-left: 10px;"), e.add(".gantt_default_rowmove_position_forbidden:before", "content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"), e.add(".gantt_default_task_group .gantt_default_event_inner", "position:absolute;top:5px;left:0px;right:0px;bottom:6px;overflow:hidden; background: #0b5394; filter: none; border: 0px none;"),
                        e.add(".gantt_default_task_group.gantt_default_event:before", "content:''; border-color: transparent transparent transparent #0b5394; border-style: solid; border-width: 6px; position: absolute; bottom: 0px;"), e.add(".gantt_default_task_group.gantt_default_event:after", "content:''; border-color: transparent #0b5394 transparent transparent; border-style: solid; border-width: 6px; position: absolute; bottom: 0px; right: 0px;"), e.add(".gantt_default_task_milestone .gantt_default_event_inner", "position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: #38761d; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"), e.add(".gantt_default_browser_ie8 .gantt_default_task_milestone .gantt_default_event_inner", "-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476);\""), e.add(".gantt_default_event_left", "white-space: nowrap; color: #666; cursor: default;  display: flex; align-items: center;"), e.add(".gantt_default_event_right", "white-space: nowrap; color: #666; cursor: default;  display: flex; align-items: center;"), e.add(".gantt_default_link_horizontal", "border-bottom-style: solid; border-bottom-color: #cc0000;"), e.add(".gantt_default_link_vertical", "border-right-style: solid; border-right-color: #cc0000;"), e.add(".gantt_default_link_arrow_right:before", "content: ''; border-width: 6px; border-color: transparent transparent transparent #cc0000; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".gantt_default_link_arrow_left:before", "content: ''; border-width: 6px; border-color: transparent #cc0000 transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".gantt_default_link_arrow_down:before", "content: ''; border-width: 6px; border-color: #cc0000 transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".gantt_default_link_arrow_up:before", "content: ''; border-width: 6px; border-color: transparent transparent #cc0000 transparent; border-style: solid; width: 0px; height:0px; position: absolute;"), e.add(".gantt_default_shadow_overlap .gantt_default_shadow_inner", "background-color: #cc4125;"), e.add(".gantt_default_block", "background-color: gray; opacity: 0.5;"), e.add(".gantt_default_link_hover", "box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"), e.add(".gantt_default_main .gantt_default_header_icon", "box-sizing: border-box; border: 1px solid #aaa; background-color: #f5f5f5; color: #000;"), e.add(".gantt_default_header_icon:hover", "background-color: #ccc;"), e.add(".gantt_default_header_icon_hide:before", "content: '\\00AB';"), e.add(".gantt_default_header_icon_show:before", "content: '\\00BB';"), e.add(".gantt_default_row_new .gantt_default_rowheader_inner", "cursor: text; background-position: 0 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"), e.add(".gantt_default_row_new .gantt_default_rowheader_inner:hover", "background: white;"), e.add(".gantt_default_rowheader textarea", "padding: 5px;"), e.add(".gantt_default_rowheader_scroll", "cursor: default; background: #f3f3f3;"), e.add(".gantt_default_shadow_forbidden:after", "content:''; position: absolute; top: calc(50% - 10px); left: 10px; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; background-image: url('data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27%3E%3Ccircle cx=%2710%27 cy=%2710%27 r=%279%27 fill=%27%23cc0000aa%27 /%3E%3Cline x1=%275%27 y1=%275%27 x2=%2715%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3Cline x1=%2715%27 y1=%275%27 x2=%275%27 y2=%2715%27 stroke=%27white%27 stroke-width=%271.5%27/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: center; background-size: contain;"), e.add(".gantt_default_shadow_forbidden .gantt_default_shadow_inner", "border: 1px solid #cc0000; background: #cc4125"), e.add(".gantt_default_event_moving_source", "opacity: 0.5;"), e.add(".gantt_default_event.gantt_default_event_version .gantt_default_event_inner", "background-color: #cfdde8;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"), e.add(".gantt_default_task_group.gantt_default_event_continueleft.gantt_default_event:before", "border:0;"), e.add(".gantt_default_task_group.gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner:before", 'content:"";border-color: transparent #fff transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:2px;left:-4px;'), e.add(".gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner", "padding-left: 8px;"), e.add(".gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner:before", 'content:"";border-color: transparent #000 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:7px;left:-4px;'), e.add(".gantt_default_task_group.gantt_default_event_continueright.gantt_default_event:after", "border:0;"), e.add(".gantt_default_task_group.gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner:after", 'content:"";border-color: transparent transparent transparent #fff;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:2px;right:-2px;'), e.add(".gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner", "padding-right: 8px;"), e.add(".gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner:after", 'content:"";border-color: transparent transparent transparent #000;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:7px;right:-2px;'), e.add(".gantt_default_linkpoint", "background-color: white; border: 1px solid gray; border-radius: 5px;"), e.add(".gantt_default_linkpoint.gantt_default_linkpoint_hover", "background-color: black;"), e.add(".gantt_default_crosshair_vertical, .gantt_default_crosshair_horizontal, .gantt_default_crosshair_left, .gantt_default_crosshair_top", "background-color: gray; opacity: 0.2; "), e.add(".gantt_default_selectionrectangle", "background-color: #0000ff; border: 1px solid #000033; opacity: 0.4;"), e.add(".gantt_default_link_shadow", "border:1px solid black;"), e.add(".gantt_default_link_shadow_circle", "background-color:black;"), e.add(".gantt_default_link_hover", "box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"), e.add(".kanban_default_main *, .kanban_default_main *:before, .kanban_default_main *:after", "box-sizing: content-box;"), e.add(".kanban_default_main", "box-sizing: content-box; border: 1px solid #c0c0c0;font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"), e.add(".kanban_default_selected .kanban_default_event_inner", "background: #ddd;"), e.add(".kanban_default_timeheader", "cursor: default;color: #333;"), e.add(".kanban_default_message", "opacity: 0.9;padding: 10px; color: #ffffff;background: #ffa216;"), e.add(".kanban_default_colheadercell", "color: #333;background: #f3f3f3;"), e.add(".kanban_default_rowheader,.kanban_default_corner", "color: #333;background: #f3f3f3;"), e.add(".kanban_default_rowheader.kanban_default_rowheader_selected", "background-color: #aaa;background-image: -webkit-gradient(linear, 0 100%, 100% 0,color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"), e.add(".kanban_default_rowheader_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #f3f3f3;padding: 2px;"), e.add(".kanban_default_colheadercell", "text-align: center;"), e.add(".kanban_default_colheadercell_inner", "position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;"), e.add(".kanban_default_divider, .kanban_default_splitter", "background-color: #c0c0c0;"), e.add(".kanban_default_divider_horizontal", "background-color: #c0c0c0;"), e.add(".kanban_default_matrix_vertical_line", "background-color: #eee;"), e.add(".kanban_default_matrix_vertical_break", "background-color: #000;"), e.add(".kanban_default_matrix_horizontal_line", "background-color: #eee;"), e.add(".kanban_default_rowheaderdivider", "background-color: #c0c0c0;"), e.add(".kanban_default_shadow_inner", "background-color: #666666;opacity: 0.5;height: 100%;"), e.add(".kanban_default_card", "color:#333;"), e.add(".kanban_default_card_inner", "position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:5px 2px 2px 2px;overflow:hidden;border:1px solid #ccc;"), e.add(".kanban_default_card_inner", 'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'), e.add(".kanban_default_cell", "background-color: #fff;"), e.add(".kanban_default_cell.kanban_default_cell_selected", "background-color: #ccc;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"), e.add(".kanban_default_tree_image_no_children", "background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLzEyzsCJAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAADBJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOL31MeLxHwCeXUT0WkFMKAAAAABJRU5ErkJggg==);"), e.add(".kanban_default_tree_image_expand", "background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLyUoFBT0AAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAFJJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeRhgJGREc4GijMBtTNgA0BxFog+uA4IA2gmUJwFog/IgUhAGBB9KPYhA3T74Jog+hjx+A8A1KRQ+AN5vcwAAAAASUVORK5CYII=);"), e.add(".kanban_default_tree_image_collapse", "background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLxB+p9DXAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAENJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOAtEHyMjI7IE0EygOAtEH5CDqY9c+xjx+A8ANndK9WaZlP4AAAAASUVORK5CYII=);"), e.add(".kanban_default_card_delete", "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"), e.add(".kanban_default_card_delete:hover", "opacity: 1;-ms-filter: none;"), e.add(".kanban_default_rowmove_source", "background-color: black; opacity: 0.2;"), e.add(".kanban_default_rowmove_position_before, .kanban_default_rowmove_position_after", "background-color: #999; height: 2px;"), e.add(".kanban_default_rowmove_position_forbidden", "background-color: red; height: 2px; margin-left: 10px;"), e.add(".kanban_default_rowmove_position_forbidden:before", "content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"), e.add(".kanban_default_block", "background-color: gray; opacity: 0.5;"), e.add(".kanban_default_main .kanban_default_header_icon", "box-sizing: border-box; border: 1px solid #aaa; background-color: #f5f5f5; color: #000;"), e.add(".kanban_default_header_icon:hover", "background-color: #ccc;"), e.add(".kanban_default_header_icon_hide:before", "content: '\\00AB';"), e.add(".kanban_default_header_icon_show:before", "content: '\\00BB';"), e.add(".kanban_default_row_new .kanban_default_rowheader_inner", "cursor: text; background-position: 0px 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"), e.add(".kanban_default_row_new .kanban_default_rowheader_inner:hover", "background: white;"), e.add(".kanban_default_rowheader textarea", "padding: 3px;"), e.add(".kanban_default_rowheader_scroll", "cursor: default;"), e.add(".kanban_default_card_moving_source", "opacity: 0.5;"), e.add(".kanban_default_card .kanban_default_card_inner", "padding: 5px 5px 5px 10px;"), e.add(".kanban_default_cell", "background-color: #fff;"), e.add(".kanban_default_rowmove_handle", "opacity: 0.5; background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"), e.add(".kanban_default_card_header", "font-size: 120%; font-weight: bold;"), e.add(".kanban_default_card_bar", "background-color: #cc0000; cursor:move;"), e.add(".kanban_default_cell.kanban_default_collapsed", "background-color: #eee;"), e.add(".kanban_default_swimlane_collapse", "cursor:pointer; border: 1px solid #ccc; text-align:center;"), e.add(".kanban_default_swimlane_collapse:before", "content: '^';"), e.add(".kanban_default_swimlane_expand", "cursor:pointer; border: 1px solid #ccc; text-align:center;"), e.add(".kanban_default_swimlane_expand:before", "content: '>';"), e.add(".kanban_default_columnmove_handle", "opacity: 0.5; background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"), e.add(".kanban_default_columnmove_position", "background-color: #333;"), e.add(".kanban_default_crosshair_vertical, .kanban_default_crosshair_horizontal, .kanban_default_crosshair_left, .kanban_default_crosshair_top", "background-color: gray; opacity: 0.2;"), e.add(".queue_default_main", "min-width: 100px; border: 1px solid #ccc; padding: 5px; min-height: 200px; overflow-y: auto; font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif; font-size: 13px;"), e.add(".queue_default_event_bar", "left: 0px; top: 0px; bottom: 0px; width: 5px; background-color: #1066a8;"), e.add(".queue_default_event_inner", "position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 10px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"), e.add(".queue_default_event_inner", "background:#fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee);"), e.add(".queue_default_selected .queue_default_event_inner", "background: #ddd;"), e.add(".queue_default_shadow", "background-color: #ccc;"), e.commit(), DayPilot.Global.defaultCss = !0
            }
        }(); var o = function (e) { function t() { var t = new URL(e, location.href); return t.origin + t.pathname !== location.origin + location.pathname } var n = this; this.k = function () { return t() ? fetch(e).then(function (e) { return e.text() }).then(function (e) { var t = document.createElement("div"); return t.innerHTML = e, new Promise(function (e, i) { e(t.querySelector(n.P())) }) }) : new Promise(function (e, t) { e(document.querySelector(n.P())) }) }, this.P = function () { return new URL(e, location.href).hash } }, s = function (e) { var t = this; this.id = e, this.widths = [], this.titles = [], this.data = [], this.height = null, this.splitterWidth = 3, this.splitterWidthLast = null, this.css = {}, this.css.title = null, this.css.titleInner = null, this.css.splitter = null, this.enabled = !0, this.blocks = [], this.drag = {}, this.updated = function () { }, this.updating = function () { }, this.started = function () { }; var n = {}; n.splitterWidth = function (e) { var n = e && "number" == typeof t.splitterWidthLast ? t.splitterWidthLast : t.splitterWidth; return t.enabled ? n : 1 }, this.init = function () { var i; if (!e) throw "error: id not provided"; if ("string" == typeof e) i = document.getElementById(e); else { if (!e.appendChild) throw "error: invalid object provided"; i = e } this.div = i, this.blocks = []; for (var a = 0; a < this.widths.length; a++) { var r = a === this.widths.length - 1, o = n.splitterWidth(r), s = document.createElement("div"); s.style.display = "inline-block", null !== t.height ? s.style.height = t.height + "px" : s.style.height = "100%", s.style.width = this.widths[a] - o + "px", s.style.overflow = "hidden", s.style.position = "relative", s.setAttribute("unselectable", "on"), s.className = this.css.title, i.appendChild(s); var l = this.titles[a], d = null, c = [], u = null; "object" == typeof l && (d = l.html, c = l.areas, u = l.cssClass), u && DayPilot.Util.addClass(s, u); var h = document.createElement("div"); h.innerHTML = d, h.setAttribute("unselectable", "on"), h.className = this.css.titleInner, s.appendChild(h), DayPilot.Areas.attach(s, t.data[a], { "areas": c }); var f = document.createElement("div"); f.style.display = "inline-block", null !== t.height ? f.style.height = t.height + "px" : f.style.height = "100%", f.style.width = o + "px", f.style.position = "relative", f.appendChild(document.createElement("div")), t.enabled && (f.style.cursor = "col-resize"), f.setAttribute("unselectable", "on"), f.className = this.css.splitter; var v = {}; v.index = a, v.width = this.widths[a], f.data = v, f.onmousedown = function (e) { if (e.preventDefault(), t.enabled) { var n = DayPilot.page(e); n && (t.drag.start = n, t.drag.data = this.data, t.div.style.cursor = "col-resize", t.started()) } }, i.appendChild(f); var p = {}; p.section = s, p.handle = f, this.blocks.push(p) } this.registerGlobalHandlers() }, this.updateWidths = function () { for (var e = 0; e < this.blocks.length; e++) { var t = this.blocks[e], n = this.widths[e]; t.handle.data.width = n, this.Q(e) } }, this.Q = function (e) { var t = this.blocks[e], i = this.widths[e], a = e === this.widths.length - 1; t.section.style.width = i - n.splitterWidth(a) + "px" }, this.totalWidth = function () { for (var e = 0, t = 0; t < this.widths.length; t++)e += this.widths[t]; return e }, this.gMouseMove = function (e) { if (t.drag.start) { var n = t.drag.data, i = DayPilot.page(e); if (i) { var a = i.x - t.drag.start.x, r = n.index; t.widths[r] = Math.max(5, n.width + a), t.Q(r); var o = {}; o.widths = this.widths, o.index = n.index, t.updating(o) } } }, this.gMouseUp = function (e) { if (t.drag.start) { t.drag.start = null, document.body.style.cursor = "", t.div.style.cursor = ""; var n = t.drag.data; n.width = t.widths[n.index]; var i = {}; i.widths = this.widths, i.index = n.index, t.updated(i) } }, this.dispose = function () { DayPilot.list(this.blocks).forEach(function (e) { e.handle.onmousedown = null, DayPilot.de(e.section), DayPilot.de(e.handle) }), this.unregisterGlobalHandlers() }, this.registerGlobalHandlers = function () { DayPilot.re(document, "mousemove", this.gMouseMove), DayPilot.re(document, "mouseup", this.gMouseUp) }, this.unregisterGlobalHandlers = function () { DayPilot.ue(document, "mousemove", this.gMouseMove), DayPilot.ue(document, "mouseup", this.gMouseUp) } }; DayPilot.Splitter = s
    }
}(DayPilot), function () { "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded() }(), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    if ("undefined" == typeof DayPilot.Bubble || !DayPilot.Bubble.def) {
        var e = {}; e.mouseMove = function (t) { if ("undefined" != typeof e) { e.mouse = e.mousePosition(t); var n = e.active; if (n && n.R.showPosition) { var i = n.R.showPosition, a = e.mouse; i.clientX !== a.clientX || i.clientY !== a.clientY } } }, e.touchPosition = function (e) { if (!e || !e.touches) return null; var t = e.touches[0], n = {}; return n.x = t.pageX, n.y = t.pageY, n.clientX = t.clientX, n.clientY = t.clientY, n }, e.mousePosition = function (e) { var t = DayPilot.mo3(null, e); return e && (t.clientY = e.clientY, t.clientX = e.clientX), t }, DayPilot.Bubble = function (t) {
            this.v = "2023.3.5688"; var n = this, i = {}; if (this.hideAfter = 500, this.loadingText = "Loading...", this.animated = !0, this.animation = "fast", this.position = "Above", this.hideOnClick = !0, this.hideOnHover = !1, this.showAfter = 500, this.showLoadingLabel = !0, this.showArrow = !0, this.zIndex = 10, this.theme = "bubble_default", this.onLoad = null, this.onBeforeDomAdd = null, this.onBeforeDomRemove = null, this.R = function () { }, this.S = 10, this.T = 10, this.callBack = function (e) { this.aspnet() ? WebForm_DoCallback(this.uniqueID, JSON.stringify(e), this.updateView, this, this.callbackError, !0) : e.calendar.internal.bubbleCallBack ? e.calendar.internal.bubbleCallBack(e, this) : e.calendar.bubbleCallBack(e, this) }, this.callbackError = function (e, t) { alert(e) }, this.updateView = function (t, a) { if (n !== a) throw "Callback object mismatch (internal error)"; if (!t) return void n.U(); var r = null, o = null, s = null; if ("string" == typeof t ? o = t : "object" == typeof t && (r = t, o = t.html, s = t.element), e.active = n, n) { var l = !1, d = !1; if (i.div) { if (s) { i.V.innerHTML = ""; if (DayPilot.Util.isReactComponent(s)) { if (!(n.W.calendar && n.W.calendar.internal.reactRefs().reactDOM)) throw new DayPilot.Exception("Can't reach ReactDOM"); n.Y.X(s, i.V), d = n.Y.Z() } else i.V.appendChild(s); l = !0 } else o && (i.V.innerHTML = o, l = !0); i.div.domArgs = r } l && (d ? setTimeout(function () { n._() }) : n._()) } }, this.init = function () { }, this.dispose = function () { }, this.update = function (e) { DayPilot.Util.copyProps(e, this) }, this.aspnet = function () { return "undefined" != typeof WebForm_DoCallback }, this.showEvent = function (t, n) { var i = new e.CallBackArgs(t.calendar || t.root, "Event", t, t.bubbleHtml ? t.bubbleHtml() : null); n ? this.show(i) : this.showOnMouseOver(i) }, this.showGroup = function (e) { this.showOnMouseOver(e) }, this.showCell = function (t, n) { e.cancelShowing(); var i = new e.CallBackArgs(t.calendar || t.root, "Cell", t, t.staticBubbleHTML ? t.staticBubbleHTML() : null); i.div = n, this.showOnMouseOver(i) }, this.showLink = function (t) { e.cancelShowing(); var n = new e.CallBackArgs(t.calendar || t.root, "Cell", t, t.data && t.data.bubbleHtml); this.showOnMouseOver(n) }, this.showTime = function (t) { var n = new e.CallBackArgs(t.calendar || t.root, "Time", t, t.staticBubbleHTML ? t.staticBubbleHTML() : null); this.showOnMouseOver(n) }, this.showResource = function (t, n) { var i = {}; i.calendar = t.calendar, i.id = t.id, i.name = t.name, i.start = t.start, t.bubbleHtml ? i.bubbleHtml = function () { return t.bubbleHtml } : t.data && t.data.bubbleHtml && (i.bubbleHtml = function () { return t.data.bubbleHtml }), i.toJSON = function () { var e = {}; return e.id = this.id, e }; var a = new e.CallBackArgs(i.calendar || i.root, "Resource", i, i.bubbleHtml ? i.bubbleHtml() : null); a.div = t.div, n ? this.show(a) : this.showOnMouseOver(a) }, this.showHtml = function (t, n) { var i = new e.CallBackArgs(null, "Html", null, t); i.div = n, this.show(i) }, this.hide = function () { e.active === this && DayPilot.Bubble.hide() }, this.toJSON = function () { return null }, this.show = function (t) { if (n.aa(t)) { var a = this.animated; if (this.R.showPosition = e.mouse, e.showing = null, !e.mouse) return void setTimeout(function () { n.show(t) }, 100); var r = e.mouse; r.h = 0, r.w = 0; var o = this.getDiv(t), s = n.ba(), l = "Above" === s, d = "Right" === s; if ((l || d) && o) { var c = 2, u = DayPilot.abs(o, !0); if (!u) return; r.x = u.x, r.y = u.y, r.h = u.h + c, r.w = u.w } this.R.mouse = r; var h; try { h = JSON.stringify(t.object) } catch (e) { return } if (!(e.active === this && this.R.sourceId === h || "undefined" != typeof DayPilot.Menu && DayPilot.Menu.active)) { e.hideActive(), e.active = this, this.R.sourceId = h; var f = document.createElement("div"); f.setAttribute("unselectable", "on"), f.style.position = "absolute", this.showLoadingLabel || (f.style.display = "none"), f.className = this.ca("_main"), f.style.top = "-3000px", f.style.left = "-3000px", f.style.zIndex = this.zIndex + 1, a && (f.style.visibility = "hidden"), this.hideOnClick && (f.onclick = function () { e.hideActive() }), f.onmousemove = function (t) { n.hideOnHover && e.hideActive(), e.cancelShowing(), e.cancelHiding(); var t = t || window.event; t.cancelBubble = !0 }, f.oncontextmenu = function () { return !1 }, f.onmouseleave = function () { n.delayedHide() }; var v = this.T, p = this.S, m = "http://www.w3.org/2000/svg", g = document.createElementNS(m, "svg"); g.setAttribute("viewBox", "0 0 12 10"), g.setAttribute("class", this.ca("_arrow_top")), g.style.width = "12px", g.style.height = "10px", g.style.position = "absolute", g.style.top = "0px", g.style.left = v + "px", g.style.display = "none", g.innerHTML = '<polyline points="0 10 6 0 12 10"></polyline>'; var b = document.createElementNS(m, "svg"); b.setAttribute("viewBox", "0 0 12 10"), b.setAttribute("class", this.ca("_arrow_bottom")), b.style.width = "12px", b.style.height = "10px", b.style.position = "absolute", b.style.bottom = "0px", b.style.left = v + "px", b.style.display = "none", b.innerHTML = '<polyline points="0 0 6 10 12 0"></polyline>'; var y = document.createElementNS(m, "svg"); y.setAttribute("viewBox", "0 0 10 12"), y.setAttribute("class", this.ca("_arrow_left")), y.style.width = "10px", y.style.height = "12px", y.style.position = "absolute", y.style.top = p + "px", y.style.left = "0px", y.style.display = "none", y.innerHTML = '<polyline points="10 0 0 6 10 12"></polyline>'; var w = document.createElementNS(m, "svg"); w.setAttribute("viewBox", "0 0 10 12"), w.setAttribute("class", this.ca("_arrow_right")), w.style.width = "10px", w.style.height = "12px", w.style.position = "absolute", w.style.top = p + "px", w.style.right = "0px", w.style.display = "none", w.innerHTML = '<polyline points="0 0 10 6 0 12"></polyline>'; var x = document.createElement("div"); f.appendChild(x), f.appendChild(g), f.appendChild(b), f.appendChild(y), f.appendChild(w), x.className = this.ca("_main_inner"), x.innerHTML = this.loadingText, document.body.appendChild(f), i.div = f, i.V = x, i.da = g, i.ea = b, i.fa = y, i.ga = w, n.W = function () { }, n.W.calendar = t.calendar; var k = {}; k.source = t.object, k.async = !1, k.html = t.staticHTML, k.loaded = function () { this.async && n.ha(k) }, this.showLoadingLabel && !a && this._(), t.staticHTML && "function" != typeof this.onLoad ? n.ha(k) : "function" == typeof this.onLoad ? (this.onLoad(k), k.async || n.ha(k)) : "function" == typeof n.onDomAdd || "function" == typeof n.onBeforeDomAdd ? n.ha(k) : this.ia(t) && this.callBack(t) } } }, this.aa = function (e) { return !!e.staticHTML || ("function" == typeof this.onLoad || ("function" == typeof n.onDomAdd || "function" == typeof n.onBeforeDomAdd || !!this.ia(e))) }, this.ha = function (e) { var t = {}; t.source = e.source, t.html = e.html, t.element = null, "function" == typeof n.onDomAdd && n.onDomAdd(t), "function" == typeof n.onBeforeDomAdd && n.onBeforeDomAdd(t), n.updateView(t, n) }, this.getDiv = function (e) { return e.div ? e.div : "Event" === e.type && e.calendar && e.calendar.internal.findEventDiv ? e.calendar.internal.findEventDiv(e.object) : void 0 }, this.ca = function (e) { var t = this.theme || this.cssClassPrefix; return t ? t + e : "" }, this.ba = function () { var e = n.position; if (!e) return "Above"; if ("eventtop" === e.toLowerCase()) return "Above"; if ("above" === e.toLowerCase()) return "Above"; if ("mouse" === e.toLowerCase()) return "Mouse"; if ("right" === e.toLowerCase()) return "Right"; throw new DayPilot.Exception("Unrecognized DayPilot.Bubble.position value: " + e) }, this._ = function () {
                var t = this.animated, a = this.R.mouse, r = n.ba(), o = 10, s = 0; if (i.div && a) {
                    if (!a.x || !a.y) return void e.hideActive(); var l = i.div, d = i.V; l.style.display = ""; var c = l.offsetHeight; this.showArrow && (c += 9); var u = l.offsetWidth; this.showArrow && (u += 9), l.style.display = "none"; var h = DayPilot.wd(), f = h.width, v = h.height, p = "bottom", m = "left"; if ("Mouse" === r) { var g = 0; if (a.clientY > v - c + o) { a.clientY - (v - c) + o; g = a.y - c - 10 } else g = a.y + 22; if ("number" == typeof g && (l.style.top = Math.max(g, 0) + "px"), a.clientX > f - u + o) { var b = a.clientX - (f - u) + o; l.style.left = a.x - b + "px" } else l.style.left = a.x + "px" } else if ("Above" === r) { var y = 2, g = a.y - c - y, w = h.scrollTop; g < w && (g = a.y + a.h, p = "top"), "number" == typeof g && (l.style.top = Math.max(g, 0) + "px"); var x = a.x; a.x + u + o > f && (x = f - u - o, m = "right"), l.style.left = x + "px" } else if ("Right" === r) { p = "top"; var g = a.y, x = a.x + a.w; x + u + o > f && u < a.x && (x = x - u - a.w, m = "right"); var k = g + c + o - v; k > 0 && (g -= k, s = k, g < 0 && (s += g, g = 0)), l.style.top = g + "px", l.style.left = x + "px" } if (l.style.display = "", this.showArrow && ("Above" === r || "Mouse" === r ? "bottom" === p ? (i.da.style.display = "none",
                        i.ea.style.display = "", d.style.marginTop = "0px", d.style.marginBottom = "9px") : (i.da.style.display = "", i.ea.style.display = "none", d.style.marginTop = "9px", d.style.marginBottom = "0px") : "left" === m ? (i.ga.style.display = "none", i.fa.style.display = "", i.fa.style.top = this.S + s + "px", d.style.marginRight = "0px", d.style.marginLeft = "9px") : (i.ga.style.display = "", i.fa.style.display = "none", i.ga.style.top = this.S + s + "px", d.style.marginRight = "9px", d.style.marginLeft = "0px")), t) { l.style.display = ""; var C = {}; C.color = d.style.color, C.overflow = l.style.overflow, d.style.color = "transparent", l.style.overflow = "hidden", DayPilot.pop(l, { "finished": function () { d.style.color = C.color, l.style.overflow = C.overflow }, "vertical": p, "horizontal": m, "animation": n.animation }) }
                }
            }, this.delayedHide = function () { e.showing === this && e.cancelShowing(); var t = e.active; if (t === this && (e.cancelHiding(), t.hideAfter > 0)) { var n = t.hideAfter; e.timeoutHide = window.setTimeout(e.hideActive, n) } }, this.showOnMouseOver = function (t) { e.active === this && e.cancelHiding(); var i = function (e) { return function () { n.show(e) } }; clearTimeout(e.timeoutShow), e.timeoutShow = window.setTimeout(i(t), this.showAfter), e.showing = this }, this.hideOnMouseOut = function () { this.delayedHide() }, this.ia = function (e) { return !!e.calendar.backendUrl || !("function" != typeof WebForm_DoCallback || !this.uniqueID) }, this.U = function () { if (i.div) { var e = i.div.domArgs; if (i.div.domArgs = null, e && ("function" == typeof n.onDomRemove && n.onDomRemove(e), "function" == typeof n.onBeforeDomRemove && n.onBeforeDomRemove(e), "function" == typeof n.onDomAdd || "function" == typeof n.onBeforeDomAdd)) { var t = i.V; if (t) { if (DayPilot.Util.isReactComponent(e.element)) { if (!(n.W.calendar && n.W.calendar.internal.reactRefs().reactDOM)) throw new DayPilot.Exception("Can't reach ReactDOM"); n.Y.ja(t) } } } document.body.removeChild(i.div), i.div = null } }, this.Y = {}, this.Y.X = function (e, t) { var i = n.W.calendar && n.W.calendar.internal.reactRefs().reactDOM; if ("function" == typeof i.createRoot) { var a = t.ka; a || (a = i.createRoot(t), t.ka = a), a.render(e) } else i.render(e, t) }, this.Y.Z = function () { var e = n.W.calendar && n.W.calendar.internal.reactRefs().reactDOM; return e && "function" == typeof e.createRoot }, this.Y.ja = function (e) { var t = n.W.calendar && n.W.calendar.internal.reactRefs().reactDOM; if ("function" == typeof t.createRoot) { var i = e.ka; setTimeout(function () { i.unmount() }, 0) } else t.unmountComponentAtNode(e) }, t) for (var a in t) this[a] = t[a]; this.init()
        }, DayPilot.Bubble.touchPosition = function (t) { t.touches && (e.mouse = e.touchPosition(t)) }, e.cancelShowing = function () { e.showing = null, e.timeoutShow && (window.clearTimeout(e.timeoutShow), e.timeoutShow = null) }, e.cancelHiding = function () { e.timeoutHide && window.clearTimeout(e.timeoutHide) }, e.hideActive = function () { e.cancelHiding(); var t = e.active; t && t.U(), e.active = null }, e.CallBackArgs = function (e, t, n, i) { this.calendar = e, this.type = t, this.object = n, this.staticHTML = i, this.toJSON = function () { var e = {}; return e.uid = this.calendar.uniqueID, e.type = this.type, e.object = n, e } }, "undefined" != typeof document && DayPilot.re(document, "mousemove", e.mouseMove), DayPilot.Bubble.hideActive = e.hideActive, DayPilot.Bubble.cancelShowing = e.cancelShowing, DayPilot.Bubble.hide = function (t) { if (t = t || {}, t.calendar) { var n = e.active; n && n.W.calendar === t.calendar && DayPilot.Bubble.hide() } else e.hideActive() }, DayPilot.Bubble.getActive = function () { return e.active }, DayPilot.Bubble.def = {}, "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded()
    }
}(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    if ("undefined" == typeof DayPilot.Calendar || !DayPilot.Calendar.def) {
        var e = 10, t = function () { return document.createElement("div") }, n = DayPilot.rePassive, i = DayPilot.reNonPassive, a = DayPilot.re, r = DayPilot.Util.addClass, o = DayPilot.Util.removeClass, s = DayPilot.Util.isMouseEvent, l = DayPilot.Util.copyProps, d = DayPilot.Util.isReactComponent, c = DayPilot.Util.overlaps, u = DayPilot.list, h = DayPilot.Global, f = DayPilot.de; DayPilot.Calendar = function (p, m) {
            this.v = "2023.3.5688"; var g = !1; if (this instanceof DayPilot.Calendar && !this.la && (g = !0, this.la = !0), !g) throw new DayPilot.Exception("DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'"); var b = this; this.uniqueID = null, this.clientName = p, this.id = p, this.isCalendar = !0, this.allDayEnd = "DateTime", this.allDayEventHeight = 34, this.allDayEventTextWrappingEnabled = !1, this.allowEventOverlap = !0, this.allowMultiSelect = !0, this.api = 2, this.autoRefreshCommand = "refresh", this.autoRefreshEnabled = !1, this.autoRefreshInterval = 60, this.autoRefreshMaxCount = 20, this.autoScroll = "Drag", this.backendUrl = null, "function" == typeof DayPilot.Bubble ? this.bubble = new DayPilot.Bubble : this.bubble = null, this.cellBubble = null, this.columnBubble = null, this.businessBeginsHour = 9, this.businessEndsHour = 18, this.cellHeight = 30, this.cellDuration = 30, this.clientState = {}, this.columnMarginRight = 5, this.columnMoveSameLevelOnly = !1, this.columnWidth = 200, this.columnWidthMin = 10, this.columnWidthSpec = "Auto", this.columnsLoadMethod = "GET", this.contextMenu = null, this.contextMenuSelection = null, this.cornerText = "", this.cornerHtml = null, this.crosshairType = "Header", this.cssClass = null, this.dayBeginsHour = 0, this.dayEndsHour = 24, this.days = 1, this.doubleClickTimeout = 300, this.durationBarVisible = !0, this.dynamicEventRendering = "Disabled", this.dynamicEventRenderingMarginX = 0, this.dynamicEventRenderingMarginY = 0, this.eventArrangement = "Cascade", this.eventsLoadMethod = "GET", this.headerHeight = 30, this.headerTextWrappingEnabled = !1, this.headerHeightAutoFit = !1, this.headerLevels = "Auto", this.height = 300, this.heightSpec = "BusinessHours", this.hideFreeCells = !1, this.hideUntilInit = !0, this.headerDateFormat = null, this.hourWidth = 60, this.initEventEnabled = !1, this.initScrollPos = null, this.loadingLabelText = "Loading...", this.loadingLabelHtml = null, this.loadingLabelVisible = !0, this.locale = "en-us", this.messageHideAfter = 5e3, this.moveBy = "Full", this.notifyCommit = "Immediate", this.rtl = !1, this.scrollDelayCells = 0, this.scrollDelayEvents = 10, this.scrollLabelsVisible = !1, this.showToolTip = !0, this.showAllDayEvents = !1, this.showEventStartEnd = !1, this.showHeader = !0, this.showHours = !0, this.showCurrentTime = !0, this.showCurrentTimeMode = "Day", this.showCurrentTimeOffset = 0, this.startDate = DayPilot.Date.today(), this.cssClassPrefix = "calendar_default", this.tapAndHoldTimeout = 300, this.theme = null, this.timeFormat = "Auto", this.timeHeaderCellDuration = 60, this.timeRangeSelectingStartEndEnabled = !1, this.timeRangeSelectingStartEndFormat = "Auto", this.eventMovingStartEndEnabled = !1, this.eventMovingStartEndFormat = "Auto", this.eventResizingStartEndEnabled = !1, this.eventResizingStartEndFormat = "Auto", this.useEventBoxes = "Always", this.viewType = "Days", this.visible = !0, this.watchWidthChanges = !0, this.weekStarts = "Auto", this.width = null, this.xssProtection = "Enabled", this.columnMoveHandling = "Disabled", this.columnResizeHandling = "Disabled", this.eventClickHandling = "Enabled", this.eventDoubleClickHandling = "Disabled", this.eventRightClickHandling = "ContextMenu", this.eventDeleteHandling = "Disabled", this.eventEditHandling = "Update", this.eventHoverHandling = "Bubble", this.eventResizeHandling = "Update", this.eventMoveHandling = "Update", this.eventSelectHandling = "Update", this.eventTapAndHoldHandling = "Move", this.headerClickHandling = "Enabled", this.timeRangeTapAndHoldHandling = "Select", this.timeRangeSelectedHandling = "Enabled", this.timeRangeClickHandling = "Enabled", this.timeRangeDoubleClickHandling = "Disabled", this.timeRangeRightClickHandling = "ContextMenu", this.onAutoRefresh = null, this.onColumnFilter = null, this.onColumnResize = null, this.onColumnResized = null, this.onEventFilter = null, this.onEventClick = null, this.onEventClicked = null, this.onEventDelete = null, this.onEventDeleted = null, this.onEventEdit = null, this.onEventEdited = null, this.onEventMove = null, this.onEventMoved = null, this.onEventMoving = null, this.onEventResize = null, this.onEventResized = null, this.onEventResizing = null, this.onEventSelect = null, this.onEventSelected = null, this.onEventRightClick = null, this.onEventRightClicked = null, this.onEventDoubleClick = null, this.onEventDoubleClicked = null, this.onHeaderClick = null, this.onHeaderClicked = null, this.onTimeRangeClick = null, this.onTimeRangeClicked = null, this.onTimeRangeRightClick = null, this.onTimeRangeRightClicked = null, this.onTimeRangeDoubleClick = null, this.onTimeRangeDoubleClicked = null, this.onTimeRangeSelect = null, this.onTimeRangeSelected = null, this.onTimeRangeSelecting = null, this.onAfterRender = null, this.onAfterEventRender = null, this.onAfterCellRender = null, this.onBeforeEventRender = null, this.onBeforeEventExport = null, this.onBeforeEventDomAdd = null, this.onBeforeEventDomRemove = null, this.onBeforeCellRender = null, this.onBeforeCellExport = null, this.onBeforeCornerDomAdd = null, this.onBeforeCornerDomRemove = null, this.onBeforeCornerRender = null, this.onBeforeHeaderRender = null, this.onBeforeHeaderExport = null, this.onBeforeTimeHeaderRender = null, this.ma = !0, this.na = e, this.oa = !0, this.pa = !0, this.qa = !0, this.ra = {}, this.ra.pixels = {}, this.ra.events = [], this.ra.sa = null, this.ra.ta = null, this.elements = {}, this.elements.events = [], this.elements.separators = [], this.elements.selection = [], this.elements.cells = {}, this.elements.crosshair = [], this.elements.timeHeaders = [], this.events = {}, this.events.list = [], this.nav = {}, this.va = 0, this.wa = !1, this.xa = !1, this.members = {}, this.members.obsolete = ["Init", "cleanSelection", "cssClassPrefix", "clientName", "uniqueID"], this.members.ignore = ["internal", "nav", "debug", "temp", "elements", "members", "onCallbackError"], this.ya = "javasc", this.za = {}, this.za.ie = navigator && navigator.userAgent && navigator.userAgent.indexOf("MSIE") !== -1, this.za.ff = navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") !== -1, this.clearSelection = function () { return this.Aa ? (v.Ba = null, v.Ca = null, h.selecting = null, this.Da(), void (this.Aa = [])) : void (this.Aa = []) }, this.Da = function () { this.Aa && (f(b.elements.selection), b.elements.selection = [], b.nav.activeSelection = null) }, this.cleanSelection = this.clearSelection, this.Ea = function () { b.ra.sa = null, b.ra.ta = null }, this.Fa = function (e, t) { return b.Ha.Ga() ? DayPilot.Util.escapeTextHtml(e, t) : DayPilot.Util.isNullOrUndefined(t) ? DayPilot.Util.isNullOrUndefined(e) ? "" : e : t }, this.Ia = function (e, t, n) { var i = {}; i.action = e, i.parameters = n, i.data = t, i.header = this.Ja(); var a = "JSON" + JSON.stringify(i); __doPostBack(b.uniqueID, a) }, this.Ka = function (e, t, n, i) { if (!this.ia()) return void b.debug.message("Callback invoked without the server-side backend specified. Callback canceled.", "warning"); "undefined" == typeof i && (i = "CallBack"), b.La(); var a = {}; a.action = e, a.type = i, a.parameters = t, a.data = n, a.header = this.Ja(); var r = "JSON" + JSON.stringify(a); this.backendUrl ? DayPilot.request(this.backendUrl, this.Ma, r, this.Na) : "function" == typeof WebForm_DoCallback && WebForm_DoCallback(this.uniqueID, r, this.Oa, this.clientName, this.onCallbackError, !0) }; this.ia = function () { return "javasc" !== b.ya && b.ya.indexOf("DCODE") === -1 || b.devsb }; this.Pa = function () { return !("function" != typeof WebForm_DoCallback || !this.uniqueID) }, this.Na = function (e) { if ("function" == typeof b.onAjaxError) { var t = {}; t.request = e, b.onAjaxError(t) } else "function" == typeof b.ajaxError && b.ajaxError(e) }, this.dispose = function () { var e = b; if (clearInterval(e.Qa), e.wa && !e.xa) { e.xa = !0, e.Ra && e.Ra.disconnect(), e.Sa(), e.Ta(), e.nav.messageClose && (e.nav.messageClose.onclick = null), e.nav.hourTable && (e.nav.hourTable.oncontextmenu = null, e.nav.hourTable.onmousemove = null), e.nav.header && (e.nav.header.oncontextmenu = null), e.nav.corner && (e.nav.corner.oncontextmenu = null), e.nav.zoom && (e.nav.zoom.onmousemove = null, e.nav.zoom.oncontextmenu = null), e.nav.scroll && (e.nav.scroll.onscroll = null, e.nav.scroll.root = null), DayPilot.pu(e.nav.loading), e.Ua(), e.Va(), e.Wa(), e.Xa(), e.nav.select = null, e.nav.cornerRight = null, e.nav.scrollable = null, e.nav.bottomLeft = null, e.nav.bottomRight = null, e.nav.allday = null, e.nav.zoom = null, e.nav.loading = null, e.nav.events = null, e.nav.header = null, e.nav.hourTable = null, e.nav.scrolltop = null, e.nav.scroll = null, e.nav.vsph = null, e.nav.main = null, e.nav.message = null, e.nav.messageClose = null, e.nav.top.removeAttribute("style"), e.nav.top.removeAttribute("class"), e.nav.top.removeEventListener("mouseleave", b.Ya); !(b.Y.reactDOM && DayPilot.browser.ie) && (e.nav.top.innerHTML = ""), e.nav.top.dp = null, e.nav.top = null, DayPilot.ue(window, "resize", e.Za), v.$a(e), "undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.cancelShowing(), DayPilot.Bubble.hide({ "calendar": e })), "undefined" != typeof DayPilot.Menu && DayPilot.Menu.hide({ "calendar": e }) } }, this._a = function () { this.nav.top.dispose = this.dispose }, this.Ma = function (e) { b.Oa(e.responseText) }, this.Ja = function () { var e = {}; return e.v = this.v, e.control = "dpc", e.id = this.id, e.clientState = b.clientState, e.columns = this.ab(), e.days = b.days, e.startDate = b.startDate, e.cellDuration = b.cellDuration, e.cssClassPrefix = b.cssClassPrefix, e.heightSpec = b.heightSpec, e.businessBeginsHour = b.businessBeginsHour, e.businessEndsHour = b.businessEndsHour, e.viewType = b.viewType, e.dayBeginsHour = b.dayBeginsHour, e.dayEndsHour = b.dayEndsHour, e.headerLevels = b.headerLevels, e.eventHeaderVisible = b.eventHeaderVisible, e.timeFormat = b.timeFormat, e.timeHeaderCellDuration = b.timeHeaderCellDuration, e.locale = b.locale, e.scrollY = b.scrollPos, e.showAllDayEvents = b.showAllDayEvents, e.tagFields = b.tagFields, e.weekStarts = b.weekStarts, e.selected = b.multiselect.events(), e.hashes = b.hashes, e }, this.bb = function () { b.cb(), b.db(), b.eb = null }, this.ab = function () { var e = []; if (e.ignoreToJSON = !0, !this.fb) return e; for (var t = 0; t < this.fb.length; t++) { var n = this.fb[t], i = this.gb(n); e.push(i) } return e }, this.gb = function (e) { var t = {}; return t.Value = e.id, t.Name = e.name, t.ToolTip = e.toolTip, t.Date = e.start, t.Children = this.hb(e.children), t }, this.hb = function (e) { var t = []; if (t.ignoreToJSON = !0, !e) return t; for (var n = 0; n < e.length; n++)t.push(this.gb(e[n])); return t }, this.Oa = function (e, t) { var e = JSON.parse(e); if (e.BubbleGuid) { var n = e.BubbleGuid, i = this.bubbles[n]; return delete this.bubbles[n], b.ib(), void ("undefined" != typeof e.Result.BubbleHTML && i.updateView(e.Result.BubbleHTML, i)) } if (e.CallBackRedirect) return void (document.location.href = e.CallBackRedirect); if ("undefined" != typeof e.ClientState && (b.clientState = e.ClientState), "None" === e.UpdateType) return b.ib(), b.jb(e.CallBackData, !0), void (e.Message && b.message(e.Message)); if (b.Ea(), e.VsUpdate) { var a = document.createElement("input"); a.type = "hidden", a.name = b.id + "_vsupdate", a.id = a.name, a.value = e.VsUpdate, b.nav.vsph.innerHTML = "", b.nav.vsph.appendChild(a) } if (b.Ta(), b.multiselect.clear(!0), b.multiselect.kb = e.SelectedEvents, "undefined" != typeof e.TagFields && (b.tagFields = e.TagFields), "undefined" != typeof e.SortDirections && (b.sortDirections = e.SortDirections), "Full" === e.UpdateType && (b.colors = e.Colors, b.palette = e.Palette, b.dirtyColors = e.DirtyColors, b.cellProperties = e.CellProperties, b.cellConfig = e.CellConfig, b.lb() === b.columns ? b.columns = e.Columns : b.columns.list = e.Columns, b.days = e.Days, b.startDate = new DayPilot.Date(e.StartDate).getDatePart(), b.cellDuration = e.CellDuration, b.heightSpec = e.HeightSpec ? e.HeightSpec : b.heightSpec, b.businessBeginsHour = e.BusinessBeginsHour ? e.BusinessBeginsHour : b.businessBeginsHour, b.businessEndsHour = e.BusinessEndsHour ? e.BusinessEndsHour : b.businessEndsHour, b.viewType = e.ViewType, b.headerLevels = e.HeaderLevels, b.backColor = e.BackColor ? e.BackColor : b.backColor, b.nonBusinessBackColor = e.NonBusinessBackColor ? e.NonBusinessBackColor : b.nonBusinessBackColor, b.eventHeaderVisible = e.EventHeaderVisible ? e.EventHeaderVisible : b.eventHeaderVisible, b.timeFormat = e.TimeFormat ? e.TimeFormat : b.timeFormat, b.timeHeaderCellDuration = "undefined" != typeof e.TimeHeaderCellDuration ? e.TimeHeaderCellDuration : b.timeHeaderCellDuration, b.locale = e.Locale ? e.Locale : b.locale, b.dayBeginsHour = "undefined" != typeof e.DayBeginsHour ? e.DayBeginsHour : b.dayBeginsHour, b.dayEndsHour = "undefined" != typeof e.DayEndsHour ? e.DayEndsHour : b.dayEndsHour, b.cornerHtml = e.CornerHTML, b.hours = e.Hours, b.mb(), b.nb()), e.Hashes) for (var r in e.Hashes) b.hashes[r] = e.Hashes[r]; if (b.ob(e.Events), b.pb(), ("Full" === e.UpdateType || b.hideFreeCells) && (b.qb(), b.rb(), b.sb(), b.tb(), b.ub(), b.vb(), b.wb(), b.xb(), b.clearSelection(), b.yb(), "undefined" != typeof e.ScrollY ? b.scrollToY(e.ScrollY) : b.scrollToY(b.initScrollPos)), b.zb(), b.D(), b.Ab(), b.Bb(), "Parent100Pct" === b.heightSpec && b.Cb(), "HoldForever" !== b.timeRangeSelectedHandling && b.clearSelection(), b.Db(), b.todo && b.todo.del) { var o = b.todo.del; o.parentNode.removeChild(o), b.todo.del = null } b.jb(e.CallBackData, !0), b.ib(), b.Eb(), e.Message && b.message(e.Message) }, this.jb = function (e, t) { var n = function (e, t) { return function () { if (b.Fb()) { if ("function" == typeof b.onAfterRender) { var n = {}; n.isCallBack = t, n.data = e, b.onAfterRender(n) } } else b.afterRender && b.afterRender(e, t) } }; window.setTimeout(n(e, t), 0) }, this.Gb = function (e, n) { var i = b.nav.events, a = i.rows[0].cells.length, r = b.Hb(b.coords.x); r < 0 && (r = 0), r >= a && (r = a - 1), b.rtl && (r = b.Ib.length - r - 1); var o = i.rows[0].cells[r], s = 0, l = 0, d = 0; if ("undefined" != typeof e.duration) { var c = e.duration; d = Math.floor((b.coords.y - s + b.cellHeight / 2) / b.cellHeight) * b.cellHeight + s, l = c * b.cellHeight / (60 * b.cellDuration), l = Math.max(l, b.cellHeight) } else { var u = e.event; l = u.part.height, d = u.part.top } var h = t(); h.setAttribute("unselectable", "on"), h.style.position = "absolute", h.style.width = "100%", h.style.height = l + "px", h.style.left = "0px", h.style.top = d + "px", h.style.zIndex = b.na, h.exclude = !0; var f = t(); return h.appendChild(f), h.className = b.ca("_shadow"), f.className = this.ca("_shadow_inner"), o.events.appendChild(h), h }, this.Jb = function () { return this.Kb() / 36e5 }, this.Lb = function () { return this.businessBeginsHour > this.businessEndsHour ? 24 - this.businessBeginsHour + this.businessEndsHour : this.businessEndsHour - this.businessBeginsHour }, this.Mb = function () { return this.dayBeginsHour >= this.dayEndsHour ? 24 - this.dayBeginsHour + this.dayEndsHour : this.dayEndsHour - this.dayBeginsHour }, this.Kb = function (e) { var t = 0; if ("BusinessHoursNoScroll" === this.heightSpec) t = this.Lb(); else if (this.hideFreeCells && !e) { var n = (this.Nb - 1) * this.cellDuration / this.cellHeight, i = Math.ceil(n / 60), a = this.businessBeginsHour > this.businessEndsHour ? this.businessEndsHour + 24 : this.businessEndsHour; t = Math.max(this.dayBeginsHour + i, a) - this.Ob() } else t = this.Mb(); return 60 * t * 60 * 1e3 }, this.message = function (e, n) { if (null !== e && b.wa) { var i, a = {}; "object" == typeof arguments[1] ? (a = arguments[1], i = a.delay) : i = n; var o = ""; o = a.rawHtml ? e : DayPilot.Util.escapeHtml(e), i = i || this.messageHideAfter || 2e3; var s, l = this.Pb(), d = this.showHours ? this.hourWidth : 0, c = DayPilot.sw(b.Qb()); if (b.rtl) { var u = d; d = c, c = u } if (this.nav.message) s = b.nav.message, this.nav.message.style.top = l + "px"; else { s = t(), s.style.position = "absolute", s.style.left = d + "px", s.style.top = l + "px", s.style.right = "0px", s.style.display = "none", s.onmousemove = function () { s.messageTimeout && !s.status && clearTimeout(s.messageTimeout) }, s.onmouseout = function () { "none" !== b.nav.message.style.display && (s.messageTimeout = setTimeout(b.Rb, 500)) }; var h = t(); h.onclick = function () { b.nav.message.style.display = "none" }, h.className = this.ca("_message"), s.appendChild(h); var f = t(); f.style.position = "absolute", f.className = this.ca("_message_close"), f.onclick = function () { b.nav.message.style.display = "none" }, s.appendChild(f), this.nav.top.insertBefore(s, this.nav.loading), this.nav.message = s, this.nav.messageClose = f } this.nav.cornerRight ? this.nav.message.style.right = c + "px" : this.nav.message.style.right = "0px"; var v = function () { if (b.nav.message) { var e = b.nav.message.firstChild; e.className = b.ca("_message"), a.cssClass && r(e, a.cssClass), e.innerHTML = o; var t = function () { s.messageTimeout = setTimeout(b.Rb, i) }; DayPilot.fade(b.nav.message, .2, t) } }; clearTimeout(s.messageTimeout), "none" !== this.nav.message.style.display ? DayPilot.fade(b.nav.message, -.2, v) : v() } }, this.message.show = function (e) { b.message(e) }, this.message.hide = function () { b.Rb() }, this.Rb = function () { var e = function () { b.nav.message.style.display = "none" }; DayPilot.fade(b.nav.message, -.2, e) }, this.tb = function () { this.nav.message && (this.nav.message.style.top = this.Pb() + "px") }, this.Sb = function () { return this.Kb() / (6e4 * this.cellDuration) }, this.eventClickPostBack = function (e, t) { this.Ia("EventClick", t, e) }, this.eventClickCallBack = function (e, t) { this.Ka("EventClick", e, t) }, this.Tb = function (e) { var t = this, e = e || window.event, n = e.ctrlKey, i = e.metaKey; if ("undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), "Disabled" === b.eventDoubleClickHandling) return void b.Ub(t, n, i, e); if (b.timeouts) { for (var a in b.timeouts) window.clearTimeout(b.timeouts[a]); b.timeouts = [] } else b.timeouts = []; var r = function (e, t, n, i) { return function () { b.Ub(e, t, n, i) } }; b.timeouts.push(window.setTimeout(r(this, n, i, e), b.doubleClickTimeout)) }, this.Ub = function (e, t, n, i) { var a = e.event; if (a.client.clickEnabled()) if (b.Fb()) { var r = {}; if (r.e = a, r.control = b, r.ctrl = t, r.meta = n, r.originalEvent = i, r.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onEventClick && (b.onEventClick(r), r.preventDefault.value)) return; switch (b.eventClickHandling) { case "PostBack": b.eventClickPostBack(a); break; case "CallBack": b.eventClickCallBack(a); break; case "Edit": b.Vb(e); break; case "Select": b.Wb(e, a, t, n); break; case "Bubble": b.bubble && b.bubble.showEvent(a); break; case "ContextMenu": var o = a.client.contextMenu(); o ? o.show(a) : b.contextMenu && b.contextMenu.show(a) }"function" == typeof b.onEventClicked && b.onEventClicked(r) } else switch (b.eventClickHandling) { case "PostBack": b.eventClickPostBack(a); break; case "CallBack": b.eventClickCallBack(a); break; case "JavaScript": b.onEventClick(a); break; case "Edit": b.Vb(e); break; case "Select": b.Wb(e, a, t, n); break; case "Bubble": b.bubble && b.bubble.showEvent(a); break; case "ContextMenu": var o = a.client.contextMenu(); o ? o.show(a) : b.contextMenu && b.contextMenu.show(a) } }, this.eventDoubleClickPostBack = function (e, t) { this.Ia("EventDoubleClick", t, e) }, this.eventDoubleClickCallBack = function (e, t) { this.Ka("EventDoubleClick", e, t) }, this.Xb = function (e) { if ("undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), b.timeouts) { for (var t in b.timeouts) window.clearTimeout(b.timeouts[t]); b.timeouts = null } var n = this.event, e = e || window.event; if (b.Fb()) { var i = {}; if (i.e = n, i.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onEventDoubleClick && (b.onEventDoubleClick(i), i.preventDefault.value)) return; switch (b.eventDoubleClickHandling) { case "PostBack": b.eventDoubleClickPostBack(n); break; case "CallBack": b.eventDoubleClickCallBack(n); break; case "Edit": n.allday() || b.Vb(this); break; case "Select": n.allday() || b.Wb(this, n, e.ctrlKey); break; case "Bubble": b.bubble && b.bubble.showEvent(n) }"function" == typeof b.onEventDoubleClicked && b.onEventDoubleClicked(i) } else switch (b.eventDoubleClickHandling) { case "PostBack": b.eventDoubleClickPostBack(n); break; case "CallBack": b.eventDoubleClickCallBack(n); break; case "JavaScript": b.onEventDoubleClick(n); break; case "Edit": n.allday() || b.Vb(this); break; case "Select": n.allday() || b.Wb(this, n, e.ctrlKey); break; case "Bubble": b.bubble && b.bubble.showEvent(n) } }, this.eventRightClickPostBack = function (e, t) { this.Ia("EventRightClick", t, e) }, this.eventRightClickCallBack = function (e, t) { this.Ka("EventRightClick", e, t) }, this.Yb = function (e) { var t = this.event; if (e.stopPropagation && e.stopPropagation(), !t.client.rightClickEnabled()) return !1; if (b.Fb()) { var n = {}; if (n.e = t, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onEventRightClick && (b.onEventRightClick(n), n.preventDefault.value)) return !1; switch (b.eventRightClickHandling) { case "PostBack": b.eventRightClickPostBack(t); break; case "CallBack": b.eventRightClickCallBack(t); break; case "ContextMenu": var i = t.client.contextMenu(); i ? i.show(t) : b.contextMenu && b.contextMenu.show(this.event); break; case "Bubble": b.bubble && b.bubble.showEvent(t) }"function" == typeof b.onEventRightClicked && b.onEventRightClicked(n) } else switch (b.eventRightClickHandling) { case "PostBack": b.eventRightClickPostBack(t); break; case "CallBack": b.eventRightClickCallBack(t); break; case "JavaScript": b.onEventRightClick(t); break; case "ContextMenu": var i = t.client.contextMenu(); i ? i.show(t) : b.contextMenu && b.contextMenu.show(this.event); break; case "Bubble": b.bubble && b.bubble.showEvent(t) }return e.preventDefault && e.preventDefault(), !1 }, this.Zb = function (e) { return new DayPilot.Column(e, b) }, this.headerClickPostBack = function (e, t) { this.Ia("HeaderClick", t, e) }, this.headerClickCallBack = function (e, t) { this.Ka("HeaderClick", e, t) }, this.$b = function (e) { var t = this.data, n = b.Zb(t, b); if (b.Fb()) { var i = {}; if (i.header = {}, i.header.id = t.id, i.header.name = t.name, i.header.start = t.start, i.column = n, i.originalEvent = e, i.shift = e.shiftKey, i.ctrl = e.ctrlKey, i.meta = e.metaKey, i.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onHeaderClick && (b.onHeaderClick(i), i.preventDefault.value)) return; switch (b.headerClickHandling) { case "PostBack": b.headerClickPostBack(n); break; case "CallBack": b.headerClickCallBack(n) }"function" == typeof b.onHeaderClicked && b.onHeaderClicked(i) } else switch (b.headerClickHandling) { case "PostBack": b.headerClickPostBack(n); break; case "CallBack": b.headerClickCallBack(n); break; case "JavaScript": b.onHeaderClick(n) } }, this._b = function (e) { if ("undefined" != typeof DayPilot.Bubble && b.columnBubble) if ("Resources" === b.viewType) { var t = {}; t.calendar = b, t.start = this.data.start, t.name = this.data.name, t.id = this.data.id, t.toJSON = function () { var e = {}; return e.id = this.id, e.start = this.start, e.name = this.name, e }, b.columnBubble.showResource(t) } else { var n = new DayPilot.Date(this.data.start), i = n.addDays(1), a = {}; a.calendar = b, a.start = n, a.end = i, a.toJSON = function () { var e = {}; return e.start = this.start, e.end = this.end, e }, b.columnBubble.showTime(a) } var r = this, o = r.firstChild; if (!o.active) { var s = r.data, l = b.Zb(s); l.areas = r.data.areas, DayPilot.Areas.showAreas(o, l) } "undefined" != typeof y && y.s && y.bc(e, r) }, this.cc = function (e) { "undefined" != typeof DayPilot.Bubble && b.columnBubble && b.columnBubble.hideOnMouseOut(), DayPilot.Areas.hideAreas(this.firstChild, e) }, this.eventDeletePostBack = function (e, t) { this.Ia("EventDelete", t, e) }, this.eventDeleteCallBack = function (e, t) { this.Ka("EventDelete", e, t) }, this.dc = function (e) { var t; if (t = e && e.isEvent ? e : e.parentNode.parentNode.event, "undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.hideActive(), DayPilot.Bubble.cancelShowing()), b.Fb()) { var n = {}; if (n.e = t, n.control = b, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onEventDelete && (b.onEventDelete(n), n.preventDefault.value)) return; switch (b.eventDeleteHandling) { case "PostBack": b.eventDeletePostBack(t); break; case "CallBack": b.eventDeleteCallBack(t); break; case "Update": b.events.remove(t) }"function" == typeof b.onEventDeleted && b.onEventDeleted(n) } else switch (b.eventDeleteHandling) { case "PostBack": b.eventDeletePostBack(t); break; case "CallBack": b.eventDeleteCallBack(t); break; case "JavaScript": b.onEventDelete(t) } }, this.eventResizePostBack = function (e, t, n, i) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var a = {}; a.e = e, a.newStart = t, a.newEnd = n, this.Ia("EventResize", i, a) }, this.eventResizeCallBack = function (e, t, n, i) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var a = {}; a.e = e, a.newStart = t, a.newEnd = n, this.Ka("EventResize", a, i) }, this.ec = function (e, t, n, i) { if ("PostBack" === e) b.postBack2(t, n, i); else if ("CallBack" === e) b.Ka(t, n, i, "CallBack"); else if ("Immediate" === e) b.Ka(t, n, i, "Notify"); else if ("Queue" === e) b.queue.add(new DayPilot.Action(this, t, n, i)); else { if ("Notify" !== e) throw new DayPilot.Exception("Invalid event invocation type"); "Notify" === k.fc() ? b.Ka(t, n, i, "Notify") : b.queue.add(new DayPilot.Action(b, t, n, i)) } }, this.Ob = function (e) { if ("BusinessHoursNoScroll" === this.heightSpec) return this.businessBeginsHour; if (this.hideFreeCells && !e) { var t = this.gc * this.cellDuration / this.cellHeight, n = Math.floor(t / 60); return n = Math.max(0, n), Math.min(this.dayBeginsHour + n, this.businessBeginsHour) } return this.dayBeginsHour }, this.visibleStart = function () { if ("Resources" === b.viewType) { if (b.Ib.isEmpty()) return DayPilot.Date.today(); var e = u(b.Ib).map(function (e) { return e.start.getTime() }), t = Math.min.apply(null, e); return new DayPilot.Date(t) } return this.Ib[0].start }, this.visibleEnd = function () { if ("Resources" === b.viewType) { if (b.Ib.isEmpty()) return DayPilot.Date.today().addDays(1); var e = u(b.Ib).map(function (e) { return e.start.getTime() }), t = Math.max.apply(null, e); return new DayPilot.Date(t).addDays(1) } var n = this.Ib, t = n.length - 1; return n[t].start.addDays(1) }, this.Fb = function () { return 2 === b.api }, this.hc = function (e, t) { var n = (e.start(), b.Ib[e.part.dayIndex].start), i = Math.floor(t / b.cellHeight), a = i * b.cellDuration, r = 60 * a * 1e3, o = 60 * b.Ob() * 60 * 1e3; return n.addTime(r + o) }, this.ic = function (e, t) { var n = Math.floor(t / b.cellHeight), i = n * b.cellDuration, a = 60 * i * 1e3, r = 60 * b.Ob() * 60 * 1e3; return b.Ib[e.part.dayIndex].start.addTime(a + r) }, this.jc = function (e, t, n, i) { if ("Disabled" !== this.eventResizeHandling) { var a, r; if ("top" === i ? (a = b.hc(e, n), r = e.end()) : "bottom" === i && (a = e.start(), r = b.ic(e, n + t)), b.Fb()) { var o = {}, s = function () { if (o.loaded = function () { }, b.kc(), !o.preventDefault.value) { switch (b.eventResizeHandling) { case "PostBack": b.eventResizePostBack(e, a, r); break; case "CallBack": b.eventResizeCallBack(e, a, r); break; case "Notify": b.eventResizeNotify(e, a, r); break; case "Update": e.start(a), e.end(r), b.events.update(e) }"function" == typeof b.onEventResized && b.onEventResized(o) } }; if (o.e = e, o.control = b, o.newStart = a, o.newEnd = r, o.preventDefault = function () { this.preventDefault.value = !0 }, o.async = !1, o.hideShadow = function () { b.kc() }, o.loaded = function () { s() }, "function" == typeof b.onEventResize && (b.onEventResize(o), o.preventDefault.value)) return void b.kc(); o.async || s() } else switch (b.kc(), b.eventResizeHandling) { case "PostBack": b.eventResizePostBack(e, a, r); break; case "CallBack": b.eventResizeCallBack(e, a, r); break; case "JavaScript": b.onEventResize(e, a, r); break; case "Notify": b.eventResizeNotify(e, a, r) } } }, this.eventResizeNotify = function (e, t, n, i) { var a = new DayPilot.Event(e.copy(), this); e.start(t), e.end(n), e.commit(), b.update(), this.lc("Notify", a, t, n, i) }, this.lc = function (e, t, n, i, a) { var r = {}; r.e = t, r.newStart = n, r.newEnd = i, this.ec(e, "EventResize", r, a) }, this.eventMovePostBack = function (e, t, n, i, a) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var r = {}; r.e = e, r.newStart = t, r.newEnd = n, r.newResource = i, this.Ia("EventMove", a, r) }, this.eventMoveCallBack = function (e, t, n, i, a) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var r = {}; r.e = e, r.newStart = t, r.newEnd = n, r.newResource = i, this.Ka("EventMove", r, a) }, this.nc = function (e, t, n) { var i = 0, a = Math.floor((n - i) / b.cellHeight), r = b.cellDuration, o = a * r * 60 * 1e3, s = e.start(), l = e.end(), d = new Date; s instanceof DayPilot.Date && (s = s.toDate()), d.setTime(Date.UTC(s.getUTCFullYear(), s.getUTCMonth(), s.getUTCDate())); var c = "Never" !== b.useEventBoxes ? s.getTime() - (d.getTime() + 3600 * s.getUTCHours() * 1e3 + Math.floor(s.getUTCMinutes() / r) * r * 60 * 1e3) : 0, u = l.getTime() - s.getTime(), h = 3600 * b.Ob() * 1e3; "undefined" == typeof t && (t = e.part.dayIndex); var f = this.Ib[t], v = f.start.getTime(), p = new Date; p.setTime(v + o + c + h); var m = new DayPilot.Date(p); return { "start": m, "end": m.addTime(u), "resource": f.id } }, this.oc = function (e, t, n, i, a) { if ("Disabled" !== b.eventMoveHandling) { var r = b.nc(e, t, n), o = r.start, s = r.end, l = r.resource, d = !!a; if (b.Fb()) { var c = {}, u = function () { if (c.loaded = function () { }, b.pc(), !c.preventDefault.value) { switch (b.eventMoveHandling) { case "PostBack": b.eventMovePostBack(e, o, s, l); break; case "CallBack": b.eventMoveCallBack(e, o, s, l); break; case "Notify": b.eventMoveNotify(e, o, s, l); break; case "Update": e.start(o), e.end(s), e.resource(l), d ? (e.commit(), b.events.add(e)) : b.events.update(e), b.qc() }"function" == typeof b.onEventMoved && b.onEventMoved(c) } }; if (c.e = e, c.control = b, c.newStart = r.start, c.newEnd = r.end, c.newResource = r.resource, c.external = d, c.areaData = h.movingAreaData, c.ctrl = !1, i && (c.ctrl = i.ctrlKey), c.shift = !1, i && (c.shift = i.shiftKey), c.preventDefault = function () { this.preventDefault.value = !0 }, c.async = !1, c.hideShadow = function () { b.pc() }, c.loaded = function () { u() }, "function" == typeof b.onEventMove && (b.onEventMove(c), c.preventDefault.value)) return void b.pc(); c.async || u() } else switch (b.pc(), b.eventMoveHandling) { case "PostBack": b.eventMovePostBack(e, o, s, l); break; case "CallBack": b.eventMoveCallBack(e, o, s, l); break; case "JavaScript": b.onEventMove(e, o, s, l, d, !!i && i.ctrlKey, !!i && i.shiftKey); break; case "Notify": b.eventMoveNotify(e, o, s, l, null) } } }, this.eventMoveNotify = function (e, t, n, i, a) { var r = new DayPilot.Event(e.copy(), this); e.start(t), e.end(n), e.resource(i), e.commit(), b.update(), this.rc("Notify", r, t, n, i, a) }, this.rc = function (e, t, n, i, a, r) { var o = {}; o.e = t, o.newStart = n, o.newEnd = i, o.newResource = a, this.ec(e, "EventMove", o, r) }, this.qc = function () {
                if (b.todo && b.todo.del) { var e = b.todo.del; e.parentNode.removeChild(e), b.todo.del = null }
            }, this.sc = function (e, t) { var n = b.tc(t), i = {}; i.args = e, i.guid = n, b.Ka("Bubble", i) }, this.tc = function (e) { var t = DayPilot.guid(); return this.bubbles || (this.bubbles = []), this.bubbles[t] = e, t }, this.eventMenuClickPostBack = function (e, t, n) { var i = {}; i.e = e, i.command = t, this.Ia("EventMenuClick", n, i) }, this.eventMenuClickCallBack = function (e, t, n) { var i = {}; i.e = e, i.command = t, this.Ka("EventMenuClick", i, n) }, this.uc = function (e, t, n) { switch (n) { case "PostBack": b.eventMenuClickPostBack(t, e); break; case "CallBack": b.eventMenuClickCallBack(t, e) } }, this.timeRangeMenuClickPostBack = function (e, t, n) { var i = {}; i.selection = e, i.command = t, this.Ia("TimeRangeMenuClick", n, i) }, this.timeRangeMenuClickCallBack = function (e, t, n) { var i = {}; i.selection = e, i.command = t, this.Ka("TimeRangeMenuClick", i, n) }, this.vc = function (e, t, n) { switch (n) { case "PostBack": b.timeRangeMenuClickPostBack(t, e); break; case "CallBack": b.timeRangeMenuClickCallBack(t, e) } }, this.timeRangeSelectedPostBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ia("TimeRangeSelected", i, a) }, this.timeRangeSelectedCallBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ka("TimeRangeSelected", a, i) }, this.wc = function (e, t, n, i) { e = new DayPilot.Date(e), t = new DayPilot.Date(t), i = i || "click"; var a = n; if (b.Fb()) { var r = {}; if (r.start = e, r.end = t, r.resource = a, r.control = b, r.origin = i, r.preventDefault = function () { this.preventDefault.value = !0 }, r.toJSON = function () { return l(r, {}, ["start", "end", "resource"]) }, "function" == typeof b.onTimeRangeSelect && (b.onTimeRangeSelect(r), r.preventDefault.value)) return; switch (b.timeRangeSelectedHandling) { case "PostBack": b.timeRangeSelectedPostBack(e, t, a); break; case "CallBack": b.timeRangeSelectedCallBack(e, t, a) }"function" == typeof b.onTimeRangeSelected && b.onTimeRangeSelected(r) } else switch (b.timeRangeSelectedHandling) { case "PostBack": b.timeRangeSelectedPostBack(e, t, n); break; case "CallBack": b.timeRangeSelectedCallBack(e, t, n); break; case "JavaScript": b.onTimeRangeSelected(e, t, n) } }, this.timeRangeDoubleClickPostBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ia("TimeRangeDoubleClick", i, a) }, this.timeRangeDoubleClickCallBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ka("TimeRangeDoubleClick", a, i) }, this.xc = function (e, t, n) { if (b.Fb()) { var i = n, a = {}; a.start = e, a.end = t, a.resource = i, a.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onTimeRangeClick && (b.onTimeRangeClick(a), a.preventDefault.value) || "function" == typeof b.onTimeRangeClicked && b.onTimeRangeClicked(a) } }, this.yc = function (e, t, n) { if (b.Fb()) { var i = n, a = {}; if (a.start = e, a.end = t, a.resource = i, a.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onTimeRangeDoubleClick && (b.onTimeRangeDoubleClick(a), a.preventDefault.value)) return; switch (b.timeRangeDoubleClickHandling) { case "PostBack": b.timeRangeDoubleClickPostBack(e, t, i); break; case "CallBack": b.timeRangeDoubleClickCallBack(e, t, i) }"function" == typeof b.onTimeRangeDoubleClicked && b.onTimeRangeDoubleClicked(a) } else switch (b.timeRangeDoubleClickHandling) { case "PostBack": b.timeRangeDoubleClickPostBack(e, t, n); break; case "CallBack": b.timeRangeDoubleClickCallBack(e, t, n); break; case "JavaScript": b.onTimeRangeDoubleClick(e, t, n) } }, this.eventEditPostBack = function (e, t, n) { var i = {}; i.e = e, i.newText = t, this.Ia("EventEdit", n, i) }, this.eventEditCallBack = function (e, t, n) { var i = {}; i.e = e, i.newText = t, this.Ka("EventEdit", i, n) }, this.zc = function (e, t) { if (b.Fb()) { var n = {}; if (n.control = b, n.e = e, n.newText = t, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onEventEdit && (b.onEventEdit(n), n.preventDefault.value)) return; switch (b.eventEditHandling) { case "PostBack": b.eventEditPostBack(e, n.newText); break; case "CallBack": b.eventEditCallBack(e, n.newText); break; case "Update": e.text(n.newText), b.events.update(e) }if ("function" == typeof b.onEventEdited && (b.onEventEdited(n), n.preventDefault.value)) return } else switch (b.eventEditHandling) { case "PostBack": b.eventEditPostBack(e, t); break; case "CallBack": b.eventEditCallBack(e, t); break; case "JavaScript": b.onEventEdit(e, t) } }, this.eventSelectPostBack = function (e, t, n) { var i = {}; i.e = e, i.change = t, this.Ia("EventSelect", n, i) }, this.eventSelectCallBack = function (e, t, n) { var i = {}; i.e = e, i.change = t, this.Ka("EventSelect", i, n) }, this.Ac = function (e, t, n, i) { var a = b.multiselect, r = a.isSelected(t); if (n || i || !r || 1 !== a.Bc.length) if (b.Fb()) { a.previous = a.events(); var o = {}; if (o.e = t, o.selected = a.isSelected(t), o.ctrl = n, o.meta = i, o.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onEventSelect && (b.onEventSelect(o), o.preventDefault.value)) return; switch (b.eventSelectHandling) { case "PostBack": b.eventSelectPostBack(t, s); break; case "CallBack": "undefined" != typeof WebForm_InitCallback && (window.Cc = "", window.Dc = [], WebForm_InitCallback()), b.eventSelectCallBack(t, s); break; case "Update": a.Ec(e, n) }"function" == typeof b.onEventSelected && (o.change = a.isSelected(t) ? "selected" : "deselected", o.selected = a.isSelected(t), b.onEventSelected(o)) } else { a.previous = a.events(), a.Ec(e, n); var s = a.isSelected(t) ? "selected" : "deselected"; switch (b.eventSelectHandling) { case "PostBack": b.eventSelectPostBack(t, s); break; case "CallBack": "undefined" != typeof WebForm_InitCallback && (window.Cc = "", window.Dc = [], WebForm_InitCallback()), b.eventSelectCallBack(t, s); break; case "JavaScript": b.onEventSelect(t, s) } } }, this.commandCallBack = function (e, t) { this.Sa(); var n = {}; n.command = e, this.Ka("Command", n, t) }, this.Fc = function (e) { if (!x.active && !x.using && (clearTimeout(v.selectedTimeout), !h.selecting)) { if (v.editing) return void v.editing.blur(); if (b.Aa && "Disabled" !== b.timeRangeDoubleClickHandling) for (var t = 0; t < b.Aa.length; t++)if (this === b.Aa[t]) return; if ("Disabled" !== b.timeRangeSelectedHandling) { if (DayPilot.Util.mouseButton(e).left) { var n = b.Hb(b.coords.x, !0); v.Gc = b.coords, v.Gc.calendar = b, b.clearSelection(), v.Ba = this, v.Ca = this, v.Hc = n, b.Aa.push(this), v.Ic = this, h.selecting = { "calendar": b }, b.Jc() } } } }, this.Jc = function () { this.getSelection() && b.Aa && !function () { var e = v.Ba, n = v.Ca, i = function () { if (e.data) return e.data.x; for (var t = e.parentNode.cells, n = 0; n < t.length; n++)if (t[n] === e) return n; return -1 }(), a = b.timeRangeSelectingStartEndFormat; "Auto" === a && (a = "Clock24Hours" === k.Kc() ? "H:mm" : "h:mm tt"); var o = b.Ib[i]; if (o) { var s = v.Ba === v.Ic, l = {}; l.anchor = s ? e.start : n.end, l.start = e.start, l.end = n.end, l.duration = new DayPilot.Duration(l.start, l.end), l.resource = o.id, l.allowed = !0, l.html = null, l.cssClass = null, l.top = {}, l.top.width = null, l.top.space = 5, l.top.html = l.start.toString(a, k.Lc()), l.top.enabled = b.timeRangeSelectingStartEndEnabled, l.bottom = {}, l.bottom.width = null, l.bottom.space = 5, l.bottom.html = l.end.toString(a, k.Lc()), l.bottom.enabled = b.timeRangeSelectingStartEndEnabled; var d = h.selecting && h.selecting.args; if (!d || d.start !== l.start || d.end !== l.end || d.resource != l.resource) { if (!b.allowEventOverlap) { var c = { "id": null, "start": l.start, "end": l.end, "resource": l.resource }; b.events.Mc(c) && (l.allowed = !1) } b.Nc(l.start, l.end, l.resource) && (l.allowed = !1), "function" == typeof b.onTimeRangeSelecting && l.allowed && b.onTimeRangeSelecting(l), h.selecting && (h.selecting.args = l); var u = b.Oc(l.start, o.start).boxTop - b.Pc(), f = b.Oc(l.end, o.start).boxBottom - b.Pc(), p = f - u, m = function () { if (b.nav.activeSelection) return b.nav.activeSelection; var e = t(); e.setAttribute("unselectable", "on"), e.style.zIndex = b.na, e.style.position = "absolute", e.style.left = "0px", e.style.width = "100%", e.onclick = function (e) { if ("Disabled" !== b.timeRangeClickHandling) { var t = b.getSelection(); t && b.xc(t.start, t.end, t.resource) } }, e.ondblclick = function (e) { if ("Disabled" !== b.timeRangeDoubleClickHandling) { clearTimeout(b.Qc); var t = b.getSelection(); t && b.yc(t.start, t.end, t.resource) } }; var n = t(); return n.setAttribute("unselectable", "on"), n.className = b.ca("_shadow_inner"), e.appendChild(n), b.nav.events.rows[0].cells[i].selection.appendChild(e), b.elements.selection.push(e), b.nav.activeSelection = e, e }(); m.className = b.ca("_shadow"), m.firstChild.innerHTML = "", m.style.top = u + "px", m.style.height = p + "px"; var g = m.firstChild; l.html && (g.innerHTML = l.html), l.cssClass && r(m, l.cssClass), l.allowed || r(m, b.ca("_shadow_forbidden")), b.Rc(m, i, l) } } }() }, this.pc = function () { b.Sc(v.movingShadow), v.movingShadow = null }, this.kc = function () { b.Sc(v.resizingShadow), v.resizingShadow = null }, this.Sc = function (e) { f(e), f(b.nav.indicatorTop), f(b.nav.indicatorBottom) }, this.Rc = function (e, n, i) { var a = b.nav.events.rows[0].cells, r = a[n].events, o = n === a.length - 1; if (f(b.nav.indicatorTop), f(b.nav.indicatorBottom), i.top.enabled) { var s = t(); s.style.zIndex = b.na, s.style.position = "absolute", s.style.top = e.offsetTop + "px", o ? s.style.right = "0px" : s.style.left = e.offsetWidth + i.top.space + "px", i.top.width ? s.style.width = i.top.width + "px" : s.style.whiteSpace = "nowrap", i.top.html && (s.innerHTML = i.top.html), s.className = b.ca("_shadow_top"), r.appendChild(s), b.elements.selection.push(s), b.nav.indicatorTop = s } if (i.bottom.enabled) { var l = t(); l.style.zIndex = b.na, l.style.position = "absolute", l.style.top = e.offsetTop + e.offsetHeight + "px", o ? l.style.right = "0px" : l.style.left = e.offsetWidth + i.bottom.space + "px", i.bottom.width ? l.style.width = i.bottom.width + "px" : l.style.whiteSpace = "nowrap", i.bottom.html && (l.innerHTML = i.bottom.html), l.className = b.ca("_shadow_bottom"), r.appendChild(l); var d = l.offsetHeight; l.style.top = e.offsetTop + e.offsetHeight - d + "px", b.elements.selection.push(l), b.nav.indicatorBottom = l } }, this.Tc = function (e) { "undefined" != typeof DayPilot.Bubble && b.cellBubble && b.cellBubble.hideOnMouseOut() }, this.Uc = function (e) { if ("undefined" != typeof v && !x.active && !x.using) { if ("undefined" != typeof DayPilot.Bubble && b.cellBubble) { var t = {}; t.calendar = b, t.start = this.start, t.end = this.end, t.resource = this.resource, t.toJSON = function () { var e = {}; return e.start = this.start, e.end = this.end, e.resource = this.resource, e }, b.cellBubble.showCell(t, this) } "undefined" != typeof w && w.s && w.Vc(t, e) } }, this.getSelection = function () { if (!v.Ba) return null; if (!v.Ca) return null; var e = v.Ba.start, t = v.Ca.end, n = v.Ba.resource; return new DayPilot.Selection(e, t, n, b) }, this.Wc = function (e) { }, this.Xc = function (e) { if ("Fixed" === b.columnWidthSpec || b.oa) { if (!b.nav.bottomLeft) return; b.nav.bottomLeft.scrollTop = b.nav.bottomRight.scrollTop, b.nav.upperRight && (b.nav.upperRight.scrollLeft = b.nav.bottomRight.scrollLeft), b.nav.scrollLayer.scrollLeft = b.nav.bottomRight.scrollLeft } var t = b.Yc(); b.scrollPos = t.scrollTop, b.Zc = t.clientHeight, b.nav.scrollpos.value = b.scrollPos, b.Db(), b.Ea(), "Progressive" === b.dynamicEventRendering && (clearTimeout(b.$c), 0 === b.scrollDelayEvents ? b._c() : b.$c = setTimeout(function () { b._c() }, b.scrollDelayEvents)), "Fixed" === b.columnWidthSpec && (clearTimeout(b.ad), 0 === b.scrollDelayCells ? b.bd() : b.ad = setTimeout(function () { b.bd() }, b.scrollDelayCells)) }, this.Db = function () { if (this.scrollLabelsVisible && this.cd) { if (this.nav && this.nav.main && this.nav.main.rows && this.nav.main.rows.length > 0 && this.nav.main.rows[0].cells.length > 0) { for (var e = (this.Ib, this.showHours ? this.hourWidth : 0), t = this.nav.main.rows[0].cells[0].clientWidth, n = 1, i = 0; i < this.nav.scrollUp.length; i++) { var a = this.nav.scrollUp[i], r = this.nav.scrollDown[i], o = Math.floor(e + i * t + t / 2 - 5 + n); o < 0 && (o = 0), o -= b.nav.bottomRight.scrollLeft, a && a.style && (a.style.left = o + "px"), r && r.style && (r.style.left = o + "px") } for (var s = this.Pc(), i = 0; i < this.nav.scrollUp.length; i++) { var l = this.nav.scrollUp[i], d = this.nav.scrollDown[i], c = this.cd[i].minEnd - s, u = this.cd[i].maxStart - s; l && d && (c <= b.scrollPos && parseInt(l.style.left) >= b.hourWidth ? (l.style.top = this.Pb() + "px", l.style.display = "") : l.style.display = "none", u >= b.scrollPos + b.Zc && parseInt(d.style.left) >= b.hourWidth ? (d.style.top = this.Pb() + this.Zc - 10 + "px", d.style.display = "") : d.style.display = "none") } } } }, this.dd = function (e) { var t = e.parentNode, n = 0, i = e.offsetTop, a = e.parentNode.offsetWidth, r = e.offsetHeight; e.event.allday() && (n = e.offsetLeft, a = e.offsetWidth); var o = document.createElement("textarea"); o.style.boxSizing = "border-box", o.style.position = "absolute", o.style.width = a + "px", o.style.height = r + "px"; var s = DayPilot.gs(e, "fontFamily"); s || (s = DayPilot.gs(e, "font-family")), o.style.fontFamily = s; var l = DayPilot.gs(e, "fontSize"); return l || (l = DayPilot.gs(e, "font-size")), o.style.fontSize = l, o.style.left = n + "px", o.style.top = i + "px", o.style.border = "1px solid black", o.style.padding = "0px", o.style.marginTop = "0px", o.style.backgroundColor = "white", o.value = (e.event.text() || "").trim(), o.event = e.event, t.appendChild(o), o }, this.Wb = function (e, t, n, i) { b.Ac(e, t, n, i) }, this.zoom = {}, this.zoom.active = -1, this.zoom.setActive = function (e) { var t; if ("number" == typeof e) t = b.zoomLevels[e]; else { if ("string" != typeof e) throw new DayPilot.Exception("Unexpected parameter type (string or number required): " + typeof e); var n = b.zoom.ed(e); t = b.zoomLevels[n] } if (!t) throw new DayPilot.Exception("Zoom level not found: " + e + " (" + typeof e + ")"); if (e !== b.zoom.active) { var i = b.zoom.fd(); b.zoom.gd(e), b.wa && b.update(), i && b.scrollToHour(i) } }, this.zoom.ed = function (e) { return u(b.zoomLevels).findIndex(function (t) { return t.id === e }) }, this.zoom.fd = function () { var e = b.hd(); if (!e) return null; var t = e.pixels.top; return b.jd(t) }, this.zoom.gd = function (e) { var t = b.zoomLevels.length - 1; e > t && (e = t), e < 0 && (e = 0), b.zoom.active = e; var n = b.zoomLevels[e], i = {}; return i.level = n, DayPilot.Util.ownPropsAsArray(n.properties).forEach(function (e) { if (0 !== e.key.indexOf("on")) return "function" == typeof e.val ? void (b[e.key] = e.val(i)) : void (b[e.key] = e.val) }), i }, this.multiselect = {}, this.multiselect.kb = [], this.multiselect.Bc = [], this.multiselect.kd = [], this.multiselect.ld = [], this.multiselect.md = function () { var e = b.multiselect; return JSON.stringify(e.events()) }, this.multiselect.events = function () { var e = b.multiselect, t = []; t.ignoreToJSON = !0; for (var n = 0; n < e.Bc.length; n++)t.push(e.Bc[n]); return t }, this.multiselect.nd = function () { b.nav.select.value = b.multiselect.md() }, this.multiselect.Ec = function (e, t) { var n = b.multiselect; if (n.isSelected(e.event)) if (b.allowMultiSelect) if (t) n.remove(e.event, !0); else { var i = n.Bc.length; n.clear(!0), i > 1 && n.add(e.event, !0) } else n.clear(!0); else b.allowMultiSelect && t ? n.add(e.event, !0) : (n.clear(!0), n.add(e.event, !0)); n.redraw(), n.nd() }, this.multiselect.od = function (e) { var t = b.multiselect; return t.pd(e, t.kb) }, this.multiselect.qd = function () { for (var e = b.multiselect, t = [], n = 0; n < e.Bc.length; n++) { var i = e.Bc[n]; t.push(i.value()) } alert(t.join("\n")) }, this.multiselect.add = function (e, t) { var n = b.multiselect; n.rd(e) === -1 && n.Bc.push(e), n.nd(), t || n.redraw() }, this.multiselect.remove = function (e, t) { var n = b.multiselect, i = n.rd(e); i !== -1 && n.Bc.splice(i, 1), n.nd(), t || n.redraw() }, this.multiselect.clear = function (e) { var t = b.multiselect; t.Bc = [], t.nd(), e || t.redraw() }, this.multiselect.redraw = function () { for (var e = b.multiselect, t = 0; t < b.elements.events.length; t++) { var n = b.elements.events[t]; e.isSelected(n.event) ? e.sd(n) : e.td(n) } }, this.multiselect.sd = function (e) { var t = b.multiselect, n = b.ca("_selected"); r(t.ud(e), n), t.kd.push(e) }, this.multiselect.ud = function (e) { return e }, this.multiselect.vd = function () { for (var e = b.multiselect, t = 0; t < e.kd.length; t++) { var n = e.kd[t]; e.td(n, !0) } e.kd = [] }, this.multiselect.td = function (e, t) { var n = b.multiselect, i = b.ca("_selected"); if (o(n.ud(e), i), !t) { var a = DayPilot.indexOf(n.kd, e); a !== -1 && n.kd.splice(a, 1) } }, this.multiselect.isSelected = function (e) { return b.multiselect.pd(e, b.multiselect.Bc) }, this.multiselect.rd = function (e) { for (var t = e.data, n = 0; n < b.multiselect.Bc.length; n++) { var i = b.multiselect.Bc[n]; if (b.xd(i.data, t)) return n } return -1 }, this.multiselect.pd = function (e, t) { if (!t) return !1; for (var n = 0; n < t.length; n++) { var i = t[n]; if (b.xd(e, i)) return !0 } return !1 }, this.Vb = function (e) { if (v.editing) return void v.editing.blur(); var t = this.dd(e); v.editing = t, a(t, DayPilot.touch.start, function (e) { e.stopPropagation() }), t.onblur = function () { if (e.event) { var n = e.event.text(), i = t.value; v.editing = null, t.onblur = null, f(t), n !== i && (e.style.display = "none", b.zc(e.event, i)) } }, t.onkeypress = function (e) { if (13 === (window.event ? event.keyCode : e.keyCode)) return this.onblur(), e.preventDefault(), !1 }, t.onkeyup = function (e) { return 27 === (window.event ? event.keyCode : e.keyCode) && (t.onblur = null, t.parentNode && t.parentNode.removeChild(t), v.editing = !1), !0 }, t.select(), t.focus() }, this.yd = function () { return "Resources" !== b.viewType && (!b.lb() || !b.ia()) }, this.lb = function () { return DayPilot.isArray(b.columns) ? b.columns : b.columns.list }, this.columns = {}, this.columns.list = [], this.columns.zd = !1, this.columns.filter = function (e) { b.Ad.params = e, b.wa && b.Bd() }, this.columns.find = function (e, t) { var n = "Resources" === b.viewType; e = new DayPilot.Date(e); var i = b.Ib.find(function (i) { var a = !n || i.id === t, r = i.start.addDays(1); return !!(a && i.start <= e && e < r) }); return i ? b.Zb(i, b) : null }, this.columns.load = function (e, t, n) { if (!e) throw new DayPilot.Exception("columns.load(): 'url' parameter required"); var i = function (e) { var t = {}; t.exception = e.exception, t.request = e.request, "function" == typeof n && n(t) }, a = function (e) { var n, a = e.request; try { n = JSON.parse(a.responseText) } catch (e) { var r = {}; return r.exception = e, void i(r) } if (DayPilot.isArray(n)) { var o = {}; if (o.preventDefault = function () { this.preventDefault.value = !0 }, o.data = n, "function" == typeof t && t(o), o.preventDefault.value) return; b.columns.list = n, b.wa && b.update() } }; b.columnsLoadMethod && "POST" === b.columnsLoadMethod.toUpperCase() ? DayPilot.ajax({ "method": "POST", "url": e, "success": a, "error": i }) : DayPilot.ajax({ "method": "GET", "url": e, "success": a, "error": i }) }, this.mb = function () { var e = b.yd(); if (b.Cd = 0, e) { var t = this.Dd(); this.Ib = this.Ed(t) } else this.fb = this.Ed(this.lb() || []), this.Ib = this.Fd(k.Gd(), !0) }, this.Hd = function () { return b.Ib.find(function (e) { return "number" == typeof e.width }) }, this.Id = function () { var e = this.startDate.getDatePart(), t = this.days; switch (this.viewType) { case "Day": t = 1; break; case "Week": t = 7, e = e.firstDayOfWeek(k.Jd()); break; case "WorkWeek": for (t = 5, e = e.firstDayOfWeek(k.Jd()); 1 !== e.dayOfWeek();)e = e.addDays(1) }var n = e.addDays(t), i = {}; return i.start = e, i.end = n, i.days = t, i }, this.Dd = function () { for (var e = [], t = this.Id(), n = t.start, i = t.days, a = 0; a < i; a++) { var r = {}; r.start = n.addDays(a); var o = k.Lc().datePattern; b.headerDateFormat && (o = b.headerDateFormat), r.name = r.start.toString(o, k.Lc()), r.html = r.name, e.push(r) } return e }, this.Ad = {}, this.Cd = 0, this.Kd = function () { if (!b.yd()) { "function" == typeof b.onColumnFilter && (b.ob(null, { "preLoadOnly": !0 }), this.Ld(b.Ib), this.Ib = this.Fd(k.Gd(), !0)); b.Hd() && b.Md() } }, this.Ld = function (e) { e && e.forEach(function (e) { b.Nd(e) }) }, this.Nd = function (e) { var t = e.data, n = !t.children || 0 === t.children.length; if ("function" == typeof b.onColumnFilter && b.Ad.params) if (n) { var i = e.parent, a = {}; a.visible = !0, a.column = b.Zb(e, b), a.filter = b.Ad.params, a.filterParam = a.filter, b.onColumnFilter(a), a.visible ? i && i.Od() : e.hidden = !0 } else e.hidden = !0; b.Ld(e.children) }, this.Pd = function (e, t) { var n = {}; n.id = e.id, n.start = new DayPilot.Date(e.start || b.startDate).getDatePart(), n.name = e.name, n.html = e.html || e.name, n.toolTip = e.toolTip, n.backColor = e.backColor, n.areas = e.areas, n.level = t ? t.level + 1 : 0, n.parent = t, n.data = e, n.width = e.width; !e.children || 0 === e.children.length; return b.Cd = Math.max(b.Cd, n.level), n.Od = function () { n.hidden = !1, n.parent && n.parent.Od() }, n.Qd = function (e, t) { var n = []; if (e <= 1) return this.hidden || n.push(this), n; if (!this.children || 0 === this.children.length) return t ? this.hidden || n.push(this) : n.push("empty"), n; for (var i = 0; i < this.children.length; i++)for (var a = this.children[i], r = a.Qd(e - 1, t), o = 0; o < r.length; o++)n.push(r[o]); return n }, n.Rd = function (e) { var t = 0; if (!this.children || this.children.length <= 0 || e <= 1) { return !this.hidden ? 1 : 0 } for (var n = 0; n < this.children.length; n++)t += this.children[n].Rd(e - 1); return t }, n.Sd = function (e) { for (var t = 0; t < this.blocks.length; t++) { var n = this.blocks[t]; if (n.Td(e.part.top, e.part.height)) return n.events.push(e), n.min = Math.min(n.min, e.part.top), n.max = Math.max(n.max, e.part.top + e.part.height), t } var n = []; return n.lines = [], n.events = [], n.Td = function (e, t) { return !(e + t - 1 < this.min || e > this.max - 1) }, n.Ud = function (e) { for (var t = 0; t < this.lines.length; t++) { var n = this.lines[t]; if (n.Vd(e.part.top, e.part.height)) return n.push(e), t } var n = []; return n.Vd = function (e, t) { for (var n = e + t - 1, i = this.length, a = 0; a < i; a++) { var r = this[a]; if (!(n < r.part.top || e > r.part.top + r.part.height - 1)) return !1 } return !0 }, n.push(e), this.lines.push(n), this.lines.length - 1 }, n.events.push(e), n.min = e.part.top, n.max = e.part.top + e.part.height, this.blocks.push(n), this.blocks.length - 1 }, n.Ud = function (e) { for (var t = 0; t < this.lines.length; t++) { var n = this.lines[t]; if (n.Vd(e.part.top, e.part.height)) return n.push(e), t } var n = []; return n.Vd = function (e, t) { for (var n = e + t - 1, i = this.length, a = 0; a < i; a++) { var r = this[a]; if (!(n < r.part.top || e > r.part.top + r.part.height - 1)) return !1 } return !0 }, n.push(e), this.lines.push(n), this.lines.length - 1 }, n.Ob = function () { return n.start.addHours(b.Ob(!0)) }, n.Wd = function () { var e = b.Kb(!0); return n.Ob().addTime(e) }, e.children && (n.children = this.Ed(e.children, n)), n }, this.Ed = function (e, t) { var n = u(); return u(e).forEach(function (e) { var i = b.Pd(e, t); n.push(i) }), n }, this.Fd = function (e, t) { for (var n = this.yd() ? this.Ib : this.fb, i = u(), a = 0; a < n.length; a++)for (var r = n[a].Qd(e, t), o = 0; o < r.length; o++)i.push(r[o]); return i }, this.selectTimeRange = function (e, t, n, i) { if (e && t) { e = new DayPilot.Date(e), t = new DayPilot.Date(t); var a = b.Xd(e, n, !0), r = b.Xd(t, n); a && r && a.data.x === r.data.x && (v.Ba = a, v.Ic = a, v.Ca = r, b.Aa = v.Yd(r), v.Hc = a.data.x, b.Jc(), i || setTimeout(function () { b.wc(e, t, n, "api") }, 0)) } }, b.Xd = function (e, t, n) { var i = b.Ib, a = b.nav.main, r = "Resources" === b.viewType, o = i.find(function (n) { var i = !r || n.id === t, a = n.Ob() <= e && e < n.Wd(); return i && a }); if (o) { var s = i.indexOf(o), l = function () { for (var t = 0; t < b.Sb(); t++) { var i = a.rows[t].cells[s]; if (i) { var r = i.data, o = r.start <= e && e <= r.end; if (n && (o = r.start <= e && e < r.end), o) return i } } return null }(); return l ? l : void 0 } }, this.Zd = {}; var y = this.Zd; y.$d = function (e) { var i = e.div.firstChild, a = t(), r = a.style; r.position = "absolute", r.left = "2px", r.top = "2px", r.bottom = "2px", r.width = "15px", r.opacity = "0.5", r.cursor = "move", r.display = "none", a.className = b.ca("_colmove_handle"), n(i, "mouseenter", function (e) { y.s || w.s || (r.display = "") }), n(i, "mouseleave", function (e) { r.display = "none" }), a.onmousedown = function (t) { y._d(t, e) }, i.$ || (i.$ = {}), i.$.ae = function () { r.display = "none" }, i.$.be = function () { r.display = "" }, i.appendChild(a) }, y._d = function (e, t) { var n = b.nav.header, i = {}; i.ce = t, i.ee = n.style.cursor; var a = t.div; y.s = i, h.colMoving = y, a.$ && a.$.fe && a.$.fe(), r(a, b.ca("_colmove_source")), n.style.cursor = "move" }, y.ge = function (e) { var t = [], n = e.parent; return n && (t.push(n.data), t = t.concat(y.ge(n))), t }, y.je = function () { function e() { o(y.s.ce.div, b.ca("_colmove_source")), t && (t.style.cursor = n.ee), a && a.remove(), y.s = null } if (!y.s.target) return void e(); var t = b.nav.header, n = y.s, i = n.position, a = n.div, r = y.s.ce.column, s = r.data, l = r.parent, d = n.target, c = d.data, u = d.parent, h = u ? u.data.children : b.lb(), f = l ? l.data.children : b.lb(); if (y.ge(d).includes(s)) return void e(); if (c === s) return void e(); if ("forbidden" === i) return void e(); var v = {}; if (v.source = b.Zb(r), v.target = b.Zb(d), v.position = i, v.preventDefault = function () { v.preventDefault.value = !0 }, "function" == typeof b.onColumnMove && (b.onColumnMove(v), v.preventDefault.value)) return void e(); if (k.ke("Update")) { DayPilot.rfa(f, s); var p = h.indexOf(c); if ("child" === i) { var m = c.children || []; m.push(s), c.children = m } else "before" === i ? h.splice(p, 0, s) : "after" === i && h.splice(p + 1, 0, s); b.Bd() } "function" == typeof b.onColumnMoved && b.onColumnMoved(v), e() }, y.bc = function (e, n) { var i, a = 12, r = 12, o = n.data, s = b.columnMoveSameLevelOnly, l = y.s.div, d = y.s.ce.column; l ? i = l.style : (l = t(), i = l.style, i.position = "absolute", i.width = "12px", i.height = "12px", i.top = "0px", y.s.div = l); var c = n.getBoundingClientRect(), u = c.width, h = c.height, f = DayPilot.mo3(n, e), v = o.children || [], p = v.length, m = 0 === p ? .25 : .5, g = null, w = y.ge(n.data); l.className = ""; var x = !1; d === o && (x = !0), s && (m = .5), w.includes(d.data) ? g = "forbidden" : x ? g = "forbidden" : f.x < u * m ? g = "before" : f.x > u * (1 - m) ? g = "after" : 0 == p && (g = "child"), s && d.level !== o.level && (g = "forbidden"); var k = {}; k.position = g, k.source = b.Zb(d), k.target = b.Zb(n.data), "function" == typeof b.onColumnMoving && b.onColumnMoving(k), g = k.position, "forbidden" === g ? (i.left = .5 * u - 6 + "px", i.top = h / 2 - 2 + "px", l.className = b.ca("_colmove_position_forbidden")) : "before" === g ? (i.left = "0px", i.top = .5 * h - 6 + "px", l.className = b.ca("_colmove_position_before")) : "after" === g ? (i.left = u - a - 1 + "px", i.top = .5 * h - 6 + "px", l.className = b.ca("_colmove_position_after")) : "child" === g && (i.left = .5 * u - 6 + "px", i.top = h - r - 1 + "px", l.className = b.ca("_colmove_position_child")), l.parentNode !== n && (l.remove(), n.appendChild(l)), y.s.target = o, y.s.position = g }, this.le = {}; var w = this.le; w.me = function (e) { var i = e.div.firstChild, a = t(), r = a.style; r.position = "absolute", r.right = "0px", r.top = "0px", r.bottom = "0px", r.width = "4px", r.cursor = "e-resize", r.display = "none", a.className = b.ca("_colheader_splitter"), n(i, "mouseenter", function (e) { y.s || w.s || (r.display = "") }), n(i, "mouseleave", function (e) { w.s || (r.display = "none") }), a.onmousedown = function (t) { w.ne(t, e) }, i.$ || (i.$ = {}), i.$.fe = function () { r.display = "none" }, i.appendChild(a) }, w.ne = function (e, t) { var n = DayPilot.mo3(b.nav.header, e), i = t.column, a = t.div.firstChild, r = {}; if (r.oe = n.x, r.ce = t, r.pe = t.x, r.qe = t.column, a.$ && a.$.ae && a.$.ae(), t.y !== k.Gd() - 1) { var o = i.Qd(k.Gd() - t.y, !0), s = o[o.length - 1]; s && (r.pe = b.Ib.indexOf(s)) } w.s = r, h.colResizing = w }, w.Vc = function (e, t) { function n() { for (var e = 0, t = h + 1; t < a.length; t++)e += a[t].width || _; return e } function i() { for (var e = n(), t = 0, i = h + 1; i < a.length; i++) { var r = a[i], o = r.width || _, s = o / e; r.width = o - g * s, r.width < 1 && (t += 1 - r.width, r.width = 1) } x -= t, y += t, f = y * p } var a = b.Ib, r = DayPilot.mo3(b.nav.header, t), o = w.s.qe, s = r.x - w.s.oe, l = w.s.ce.y, d = l !== k.Gd() - 1, c = "Fixed" === b.columnWidthSpec, u = b.columnWidthMin, h = w.s.pe, f = 0, v = b.nav.main.clientWidth, p = v / 100, m = u / p, g = s / p, y = 0, x = 0; if (d) { var C = o.Qd(k.Gd() - l, !0), _ = c ? b.columnWidth : 100 / a.length, D = C.reduce(function (e, t) { return e + (t.width || _) }, 0), S = c ? D + s : D + g, E = S / D, T = 0; if (C.forEach(function (e, t) { var n = t === C.length - 1, i = e.width || _, a = i * E, r = Math.round(a); c && (T += a - r, a = r), a < u && (f += a - u, a = u), e.width = a, n && (e.width += T) }), !c) { i(); var A = x, H = C.reduce(function (e, t) { return e + t.width || _ }, 0); C.forEach(function (e) { var t = e.width || _, n = t / H; e.width = t + A * n }) } } else { var M = b.se()[h].width, o = a[h]; c ? (x = M + s, x < u && (f = x - u, x = u)) : (x = o.width + g, x < m && (y = x - m, g = m - o.width, x = m), x = Math.max(x, 1), i()), o.width = x } w.s.oe = r.x - f, b.Md(), b.Ea(), w.te() }, w.ve = function () { var e = b.Ib, t = w.s.ce.div.firstChild, n = w.s.qe; t.$ && t.$.be && t.$.be(), w.s = null; var i = {}; return i.column = b.Zb(n), i.newWidth = n.width, i.preventDefault = function () { i.preventDefault.value = !0 }, "function" == typeof b.onColumnResize && b.onColumnResize(i), i.preventDefault.value ? void b.update() : (k.we("Update") && e.forEach(function (e) { e.data.width = e.width }), void ("function" == typeof b.onColumnResized && b.onColumnResized(i))) }, w.te = function () { var e = b.se(), t = "Fixed" === b.columnWidthSpec, n = b.nav.header, i = b.nav.main, a = b.nav.events, r = b.nav.unifiedCornerRight; n.rows.forEach(function (e, t) { if (t !== k.Gd() - 1) { var n = b.xe(t); e.cells.forEach(function (e, t) { var i = n[t]; e.style.left = i.left + i.unit, e.style.width = i.width + i.unit }) } }); for (var o = k.Gd() - 1, s = 0; s < b.Ib.length; s++) { var l = e[s], d = n.rows[o].cells[s]; d.style.left = l.left + l.unit, d.style.width = l.width + l.unit, t && (d.firstChild.style.width = l.width + l.unit) } if (i.rows.forEach(function (n) { n.cells.forEach(function (n, i) { var a = e[i].width + e[i].unit, r = e[i].left + e[i].unit; n.style.width !== a && (n.style.width = a, t && (n.firstChild.style.width = a)), n.style.left !== r && (n.style.left = r) }) }), a.rows[0].cells.forEach(function (n, i) { var a = e[i].width + e[i].unit, r = e[i].left + e[i].unit; n.style.width !== a && (n.style.width = a, t && (n.firstChild.style.width = a)), n.style.left !== r && (n.style.left = r) }), t) { var c = e[e.length - 1], u = c.left + c.width; r.style.left = u + "px", i.style.width = u + "px" } }, this.Md = function () { if ("Fixed" !== b.columnWidthSpec) { var e = b.Ib, t = 100 / e.length, n = e.reduce(function (e, n) { return e + (n.width || t) }, 0), i = n / 100; e.forEach(function (n, a) { var r = (e.length - 1, n.width || t); n.width = r / i }) } }, this.Bb = function () { if (this.showAllDayEvents) { var e = this.nav.header; if (e) { e.style.display = "none"; for (var n = this.Ib.length, i = 0; i < this.ye.lines.length; i++)for (var s = this.ye.lines[i], l = 0; l < s.length; l++) { var c = s[l], u = c.cache || c.data, h = t(); h.style.position = "absolute", b.rtl ? h.style.right = 100 * c.part.colStart / n + "%" : h.style.left = 100 * c.part.colStart / n + "%", h.style.width = 100 * c.part.colWidth / n + "%", h.style.height = k.ze() + "px", h.style.top = k.Gd() * k.Ae() + i * k.ze() + "px"; var f = t(); f.event = c, f.setAttribute("unselectable", "on"), f.style.position = "absolute", f.style.inset = "2px", f.className = this.ca("_alldayevent"), b.allDayEventTextWrappingEnabled || (f.style.whiteSpace = "nowrap"), u.cssClass && r(f, u.cssClass), f.style.textAlign = "left", f.style.lineHeight = "1.2", c.client.clickEnabled() && (f.onclick = this.Tb), c.client.doubleClickEnabled() && (f.ondblclick = this.Xb), c.client.clickEnabled() || c.client.doubleClickEnabled() ? f.style.cursor = "pointer" : f.style.cursor = "default", a(f, "contextmenu", this.Yb), f.onmousemove = function (e) { var t = this, n = t.event, i = n.cache || n.data; if (!t.active) { var a = []; n.client.deleteEnabled() && a.push({ "action": "JavaScript", "v": "Hover", "w": 17, "h": 17, "top": 3, "right": 3, "css": b.ca("_event_delete"), "js": function (e) { b.dc(e) } }); var o = i.areas; o && o.length > 0 && (a = a.concat(o)), DayPilot.Areas.showAreas(t, n, null, a), r(t, b.ca("_alldayevent_hover")) } "undefined" != typeof DayPilot.Bubble && b.bubble && "Disabled" !== b.eventHoverHandling && b.bubble.showEvent(this.event) }, f.onmouseout = function (e) { o(this, b.ca("_alldayevent_hover")), DayPilot.Areas.hideAreas(this, e), b.bubble && b.bubble.hideOnMouseOut() }, this.showToolTip && !this.bubble && f.setAttribute("title", c.client.toolTip()); var v = c.start().getTime() === c.part.start.getTime(), p = c.end().getTime() === c.part.end.getTime(), m = u.backColor, g = t(); if (g.setAttribute("unselectable", "on"), g.className = this.ca("_alldayevent_inner"), m && (g.style.background = m), u.fontColor && (g.style.color = u.fontColor), "darker" === u.borderColor && u.backColor ? g.style.borderColor = DayPilot.ColorUtil.darker(u.backColor, 2) : g.style.borderColor = u.borderColor, b.rtl ? (v || r(f, this.ca("_alldayevent_continueright")), p || r(f, this.ca("_alldayevent_continueleft"))) : (v || r(f, this.ca("_alldayevent_continueleft")), p || r(f, this.ca("_alldayevent_continueright"))), f.appendChild(g), DayPilot.isArray(u.areas) && u.areas.filter(function (e) { return DayPilot.Areas.isVisible(e) }).forEach(function (e) { var t = DayPilot.Areas.createArea(f, c, e); f.appendChild(t) }), b.Fb()) { if ("function" == typeof b.onAfterEventRender) { var y = {}; y.e = f.event, y.div = f, b.onAfterEventRender(y) } } else b.afterEventRender && b.afterEventRender(f.event, f); !function () { var e = {}; if (e.control = b, e.e = c, e.element = null, f.domArgs = e, "function" == typeof b.onBeforeEventDomAdd && b.onBeforeEventDomAdd(e), e.element) { var t = g; if (t) { e.Be = t; d(e.element) ? (b.Y.Ce(), b.Y.X(e.element, t)) : t.appendChild(e.element) } } else g.innerHTML = c.client.innerHTML() }(), h.appendChild(f), this.nav.allday.appendChild(h), this.elements.events.push(f) } e.style.display = "" } } }, this.Ta = function (e) { if (b.multiselect.vd(), this.elements.events) for (var t = 0; t < this.elements.events.length; t++) { var n = this.elements.events[t], i = n.event; i && e && !i.allday() || b.De(n) } this.elements.events = [] }, this.De = function (e) { var t = e.event, n = e.domArgs; if (e.domArgs = null, n && "function" == typeof b.onBeforeEventDomRemove && b.onBeforeEventDomRemove(n), n && "function" == typeof b.onBeforeEventDomAdd && b.Y.reactDOM) { var i = n && n.Be; if (i) { d(n.element) && (b.Y.Ce(), b.Y.ja(i)) } } if (t && (t.div = null, t.root = null, t.rendered = !1), e.onclick = null, e.onclickSave = null, e.ondblclick = null, e.oncontextmenu = null, e.onmouseover = null, e.onmouseout = null, e.onmousemove = null, e.onmousedown = null, e.firstChild && e.firstChild.firstChild && e.firstChild.firstChild.tagName && "IMG" === e.firstChild.firstChild.tagName.toUpperCase()) { var a = e.firstChild.firstChild; a.onmousedown = null, a.onmousemove = null, a.onclick = null } e !== h.moving && (e.helper = null, e.event = null), f(e) }, this.Ee = function (e) { if (e.isAllDay()) return !0; var t = b.Fe(e.part.dayIndex), n = this.hd(), i = n.pixels.left, a = n.pixels.right, r = n.pixels.top, o = n.pixels.bottom, s = e.part.width / 100 * t.width, l = t.width * e.part.left / 100 + t.left, d = l + s, c = e.part.top - this.Pc(), u = c + e.part.height, h = a <= l || i >= d, f = o <= c || r >= u; return !h && !f }, this.hd = function () {
                if (b.ra.sa) return b.ra.sa; var e = b.Yc(); if (!e) return null; var t = {}, n = b.rtl ? -e.scrollLeft : e.scrollLeft, i = e.scrollTop, a = {}; a.left = n, a.right = n + e.clientWidth, a.top = i, a.bottom = i + e.clientHeight, a.width = e.scrollWidth; var r = b.dynamicEventRenderingMarginX; r && (a.left -= r, a.right += r, a.left < 0 && (a.left = 0), a.right > a.width && (a.right = a.width)); var o = b.dynamicEventRenderingMarginY; if (o) {
                    a.top -= o, a.bottom += o; var s = b.Ge();
                    a.top < 0 && (a.top = 0), a.bottom > s && (a.bottom = s)
                } for (var l = b.se(), d = null, c = null, u = 0; u < l.length; u++) { var h = l[u], f = h.left + h.width; if (null === d && f > a.left && (d = u), null !== d && null === c && (f >= a.right || u === l.length - 1)) { c = u; break } } var v = Math.floor(a.top / b.cellHeight); v = DayPilot.Util.atLeast(0, v); var p = Math.ceil(a.bottom / b.cellHeight); return p = DayPilot.Util.atMost(b.Sb() - 1, p), t.xStart = d, t.xEnd = c, t.yStart = v, t.yEnd = p, t.pixels = a, b.ra.sa = t, t
            }, this.Fe = function (e) { return b.ra.ta || (b.ra.ta = b.se()), b.ra.ta[e] }, this.He = function (e) { var o = this.nav.events, s = e.cache || e.data; if (!e.rendered) { var l = b.multiselect.od(e), c = b.Ee(e), u = "Progressive" === b.dynamicEventRendering && "Fixed" === b.columnWidthSpec; if (l || !u || c) { var h = t(); h.setAttribute("unselectable", "on"), h.style.MozUserSelect = "none", h.style.KhtmlUserSelect = "none", h.style.WebkitUserSelect = "none", h.style.position = "absolute", h.className = this.ca("_event"), h.style.left = e.part.left + "%", h.style.top = e.part.top - this.Pc() + "px", h.style.width = e.part.width + "%", h.style.height = Math.max(e.part.height, 2) + "px", h.style.overflow = "hidden", h.isFirst = e.part.start.getTime() === e.start().getTime(), h.isLast = e.part.end.getTime() === e.end().getTime(), e.client.clickEnabled() && (h.onclick = this.Tb), e.client.doubleClickEnabled() && (h.ondblclick = this.Xb), a(h, "contextmenu", this.Yb), h.onmousemove = this.Ie, h.onmouseout = this.Je, h.onmousedown = this.Ke, i(h, DayPilot.touch.start, this.Le.onEventTouchStart), n(h, DayPilot.touch.move, this.Le.onEventTouchMove), n(h, DayPilot.touch.end, this.Le.onEventTouchEnd), s.cssClass && r(h, s.cssClass), this.showToolTip && !this.bubble && h.setAttribute("title", e.client.toolTip()); var f = t(); if (f.setAttribute("unselectable", "on"), f.className = b.ca("_event_inner"), s.fontColor && (f.style.color = s.fontColor), s.backColor && (f.style.background = s.backColor), s.borderColor && ("darker" === s.borderColor && s.backColor ? f.style.borderColor = DayPilot.ColorUtil.darker(s.backColor, 2) : f.style.borderColor = s.borderColor), s.backgroundImage && (f.style.backgroundImage = "url(" + s.backgroundImage + ")", s.backgroundRepeat && (f.style.backgroundRepeat = s.backgroundRepeat)), h.appendChild(f), e.client.barVisible()) { var v = e.part.height - 2, p = 100 * e.part.barTop / v, m = Math.ceil(100 * e.part.barHeight / v), g = t(); g.setAttribute("unselectable", "on"), g.className = this.ca("_event_bar"), g.style.position = "absolute", s.barBackColor && (g.style.backgroundColor = s.barBackColor); var y = t(); y.setAttribute("unselectable", "on"), y.className = this.ca("_event_bar_inner"), y.style.top = p + "%", 0 < m && m <= 1 ? y.style.height = "1px" : y.style.height = m + "%", s.barColor && (y.style.backgroundColor = s.barColor), g.appendChild(y), h.appendChild(g) } var w = s.areas ? DayPilot.Areas.copy(s.areas) : [], x = b.Ib[e.part.dayIndex]; if (w.forEach(function (t) { t.start && (t.top = b.Oc(new DayPilot.Date(t.start), x.start).top - e.part.top - b.Pc()), t.end && (t.bottom = e.part.top + e.part.height - b.Oc(new DayPilot.Date(t.end), x.start).top - b.Pc()) }), e.client.deleteEnabled() && w.push({ "action": "JavaScript", "v": "Hover", "w": 17, "h": 17, "top": 2, "right": 2, "css": b.ca("_event_delete"), "js": function (e) { b.dc(e) } }), DayPilot.Areas.attach(h, e, { "areas": w }), function () { var t = {}; if (t.control = b, t.e = e, t.element = null, h.domArgs = t, "function" == typeof b.onBeforeEventDomAdd && b.onBeforeEventDomAdd(t), t.element) { var n = f; if (n) { t.Be = n; d(t.element) ? (b.Y.Ce(), b.Y.X(t.element, n)) : n.appendChild(t.element) } } else f.innerHTML = e.client.innerHTML() }(), o.rows[0].cells[e.part.dayIndex]) { if (o.rows[0].cells[e.part.dayIndex].events.appendChild(h), b.Me(h), h.event = e, b.multiselect.od(e) && b.multiselect.add(h.event, !0), e.rendered = !0, b.Fb()) { if ("function" == typeof b.onAfterEventRender) { var k = {}; k.e = h.event, k.div = h, b.onAfterEventRender(k) } } else b.afterEventRender && b.afterEventRender(h.event, h); b.elements.events.push(h) } } } }, this.Me = function (e) { for (var t = e && e.childNodes ? e.childNodes.length : 0, n = 0; n < t; n++)try { var i = e.childNodes[n]; 1 === i.nodeType && (i.setAttribute("unselectable", "on"), this.Me(i)) } catch (e) { } }, this.Ab = function () { for (var e = new Date, t = 0; t < this.Ib.length; t++) { var n = this.Ib[t]; if (n.blocks) for (var i = 0; i < n.blocks.length; i++)for (var a = n.blocks[i], r = 0; r < a.lines.length; r++)for (var o = a.lines[r], s = 0; s < o.length; s++) { var l = o[s]; if (l.part.width = 100 / a.lines.length, l.part.left = l.part.width * r, "Cascade" === this.eventArrangement) { var d = r === a.lines.length - 1; d || (l.part.width = 1.5 * l.part.width) } "Full" === this.eventArrangement && (l.part.left = l.part.left / 2, l.part.width = 100 - l.part.left), l.allday() || this.He(l) } } this.multiselect.redraw(); var c = new Date; c.getTime() - e.getTime() }, this._c = function () { b.elements.events.forEach(function (e) { e.event && !b.Ee(e.event) && b.De(e) }), b.ra.Ne.forEach(function (e) { b.He(e) }), b.elements.events = b.elements.events.filter(function (e) { return !!e.event }) }, this.bd = function () { if (b.Ib && 0 !== b.Ib.length) { for (var e = b.hd(), t = e.xStart; t <= e.xEnd; t++)for (var n = e.yStart; n <= e.yEnd; n++)b.Oe(t, n); b.Pe() } }, b.Pe = function () { for (var e = b.hd(), t = this.Sb(), n = b.Ib.length, i = 0; i < n; i++) { var a = !0; e.xStart <= i && i <= e.xEnd && (a = !1); for (var r = 0; r < t; r++) { var o = !0; e.yStart <= r && r <= e.yEnd && (o = !1); var s = b.elements.cells[i + "_" + r]; s && (o || a) && (s.remove(), b.elements.cells[i + "_" + r] = null) } } }, this.Qe = function () { this.multiselect.Bc = []; for (var e = 0; e < this.Ib.length; e++)for (var t = this.Ib[e], n = 0; n < t.lines.length; n++)for (var i = t.lines[n], a = 0; a < i.length; a++) { var r = i[a]; r.part.width = 100 / t.lines.length, r.part.left = r.Width * n, r.allday() || this.He(r) } }, this.ca = function (e) { var t = this.theme || this.cssClassPrefix; return t ? t + e : "" }, this.Re = function () { switch (b.ya) { case "aspnet": if (!this.Pa()) throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/"); break; case "netmvc": if (!this.backendUrl) throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/"); break; case "javaxx": if (!this.backendUrl) throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/") } }, this.D = function () { "hidden" === this.nav.top.style.visibility && (this.nav.top.style.visibility = "visible") }, this.Se = function () { var e = this.Pb() + this.Te(); return b.debug.message("Getting totalHeight, headerHeight: " + this.Pb() + " scrollable: " + this.Te()), e < 0 ? 0 : e }, this.Ya = function () { b.bb() }, this.Ue = function () { var e = this.nav.top; e.dp = this, e.innerHTML = "", e.style.MozUserSelect = "none", e.style.KhtmlUserSelect = "none", e.style.WebkitUserSelect = "none", e.style.WebkitTapHighlightColor = "rgba(0,0,0,0)", e.style.WebkitTouchCallout = "none", e.style.position = "relative", this.width && (e.style.width = this.width), this.rtl && (e.style.direction = "rtl"), "Parent100Pct" === this.heightSpec ? e.style.height = "100%" : e.style.height = this.Se() + "px", this.hideUntilInit && (e.style.visibility = "hidden"), this.visible || (e.style.display = "none"), e.addEventListener("mouseleave", b.Ya); var n = t(); if (this.nav.scroll = n, n.style.height = this.Te() + "px", n.style.position = "relative", this.showHeader) { var i = this.Ve(); e.appendChild(i) } n.style.zoom = 1, n.style.position = "absolute", n.style.left = "0px", n.style.right = "0px", n.style.top = this.Pb() + "px", n.className = b.ca("_scroll"); var a = this.We(); this.nav.scrollable = a.firstChild, n.appendChild(a), e.appendChild(this.nav.scroll), this.nav.vsph = t(), this.nav.vsph.style.display = "none", this.nav.top.appendChild(this.nav.vsph), this.nav.scrollpos = document.createElement("input"), this.nav.scrollpos.type = "hidden", this.nav.scrollpos.id = b.id + "_scrollpos", this.nav.scrollpos.name = this.nav.scrollpos.id, e.appendChild(this.nav.scrollpos), this.nav.select = document.createElement("input"), this.nav.select.type = "hidden", this.nav.select.id = b.id + "_select", this.nav.select.name = this.nav.select.id, this.nav.select.value = null, e.appendChild(this.nav.select), this.nav.scrollLayer = t(), this.nav.scrollLayer.style.position = "absolute", this.nav.scrollLayer.style.top = "0px", this.nav.scrollLayer.style.left = "0px", e.appendChild(this.nav.scrollLayer), this.nav.scrollUp = [], this.nav.scrollDown = []; var r = t(); r.style.position = "absolute", r.style.top = "0px", r.style.left = this.hourWidth + 5 + "px", r.className = b.ca("_loading"), r.innerHTML = b.Fa(this.loadingLabelText, this.loadingLabelHtml), r.style.display = "none", this.nav.loading = r, e.appendChild(r) }, this.Xe = function () { for (var e = "Fixed" === this.columnWidthSpec, t = this.nav.header && this.nav.header.rows[this.nav.header.rows.length - 1], n = this.nav.events.rows[0], i = 0; i < b.Ib.length; i++) { var a = t && t.cells[i], r = n.cells[i], o = a && a.firstChild, s = b.Ib[i]; if (e) { var l = s.width ? s.width : b.columnWidth; o && (o.style.width = l + "px"), r && (r.style.width = l + "px") } else b.pa || (o && (o.style.width = null), r && (r.style.width = null)) } }, this.Qb = function () { return this.oa ? b.nav.bottomRight : b.nav.scroll }, this.yb = function () { var e = "Fixed" === this.columnWidthSpec; if (!e) { var t = b.Qb(); "Fixed" === this.heightSpec ? t.style.overflowY = "scroll" : "BusinessHours" === this.heightSpec && this.Jb() <= this.businessEndsHour - this.businessBeginsHour ? t.style.overflow = "hidden" : "Full" !== this.heightSpec && "BusinessHoursNoScroll" !== this.heightSpec ? t.style.overflow = "auto" : t.style.overflow = "hidden" } if (e) { var n = 0, i = b.Ye(); i > b.Yc().clientWidth && (n = DayPilot.sw(b.nav.bottomRight)), b.nav.headerParent && (b.nav.headerParent.style.width = i + n + "px"), b.nav.main.style.width = i + "px", b.nav.events.style.width = i + "px", b.nav.crosshair.style.width = i + "px" } else b.nav.headerParent && (b.nav.headerParent.style.width = "100%"), b.nav.main.style.width = "100%", b.nav.events.style.width = "100%", b.nav.crosshair.style.width = "100%"; this.Xe() }, this.vb = function () { this.qa ? this.Ua() : DayPilot.pu(this.nav.hourTable), this.nav.hoursPlaceholder && (this.nav.hoursPlaceholder.innerHTML = "", this.nav.hourTable = this.Ze(), this.nav.hoursPlaceholder.appendChild(this.nav.hourTable)) }, this.Ua = function () { if (this.nav.hourTable) { b.elements.timeHeaders.forEach(function (e) { var t = e.domArgs; if (e.domArgs = null, "function" == typeof b.onBeforeTimeHeaderDomRemove && b.onBeforeTimeHeaderDomRemove(t), "function" == typeof b.onBeforeTimeHeaderDomAdd && b.Y.reactDOM) { var n = t && t.Be; if (n) { d(t.element) && (b.Y.Ce(), b.Y.ja(n)) } } }); for (var e = 0; e < this.nav.hourTable.rows.length; e++) { var t = this.nav.hourTable.rows[e], n = t.cells[0].firstChild; n.data = null, n.onmousemove = null, n.onmouseout = null } b.elements.timeHeaders = [] } }, this.We = function () { var e = t(); e.style.zoom = 1, e.style.position = "relative", e.onmousemove = this.$e, e.oncontextmenu = this._e, i(e, DayPilot.touch.start, this.Le.af), i(e, DayPilot.touch.move, this.Le.bf), i(e, DayPilot.touch.end, this.Le.cf), a(e, "contextmenu", function (e) { var e = e || window.event; e.preventDefault ? e.preventDefault() : e.returnValue = !1 }), navigator.msPointerEnabled && (e.style.msTouchAction = "none", e.style.touchAction = "none"), e.daypilotMainD = !0, e.calendar = this; var n = null, r = null; if (this.showHours) { var o = t(); o.style.cssFloat = "left", b.rtl && (o.style.cssFloat = "right"), o.style.width = this.hourWidth + "px", o.style.height = this.Te() + "px", o.style.overflow = "hidden", o.style.position = "relative", e.appendChild(o), n = o; var s = 30, l = b.Ge() + s; r = t(), r.style.height = l + "px", o.appendChild(r) } var d = t(); d.style.height = this.Te() + "px", this.showHours && (b.rtl ? d.style.marginRight = this.hourWidth + "px" : d.style.marginLeft = this.hourWidth + "px"), d.style.position = "relative", d.style.overflow = "auto", e.appendChild(d), r && (this.nav.hourTable = this.Ze(), r.appendChild(this.nav.hourTable)); var c = t(); c.style.height = "0px", c.style.position = "relative", c.appendChild(this.df()); var u = t(); return u.style.position = "absolute", u.style.top = "0px", u.style.left = "0px", u.style.width = "100%", u.style.height = "0px", c.appendChild(u), this.nav.crosshair = u, c.appendChild(this.ef()), d.appendChild(c), this.nav.grid = c, this.nav.zoom = e, this.nav.bottomLeft = n, this.nav.bottomRight = d, this.nav.hoursPlaceholder = r, e }, this.df = function () { if (b.pa) { var e = t(); return b.nav.main = e, e } var n = document.createElement("table"); return n.cellPadding = "0", n.cellSpacing = "0", n.border = "0", "Fixed" === this.columnWidthSpec || (n.style.width = "100%"), n.style.border = "0px none", n.style.margin = "0px", n.style.tableLayout = "fixed", this.nav.main = n, n }, this.gf = function () { return "Fixed" === this.columnWidthSpec ? b.Ye() + "px" : "100%" }, this.Ye = function () { for (var e = 0, t = 0; t < b.Ib.length; t++) { var n = b.Ib[t]; e += n.width ? n.width : b.columnWidth } return e }, this.ef = function () { if (b.pa) { var e = t(); return e.style.userSelect = "none", e.style.position = "absolute", e.style.left = "0px", e.style.right = "0px", e.style.top = "0px", e.style.height = "0px", b.nav.events = e, e } var n = document.createElement("table"); n.style.position = "absolute", n.style.top = "0px", n.cellPadding = "0", n.cellSpacing = "0", n.border = "0", n.style.width = b.gf(), n.style.border = "0px none", n.style.margin = "0px", n.style.tableLayout = "fixed", this.nav.events = n; for (var i = this.Ib, a = i.length, r = n.insertRow(-1), o = 0; o < a; o++) { var s = r.insertCell(-1); s.style.padding = "0px", s.style.border = "0px none", s.style.height = "0px", s.style.overflow = "visible", b.rtl || (s.style.textAlign = "left"), b.hf(s) } return n }, this.if = function () { var e = document.createElement("table"); e.cellSpacing = "0", e.cellPadding = "0", e.border = "0", e.style.margin = "0px", e.style.border = "0px none", e.style.width = this.hourWidth + "px", e.oncontextmenu = function () { return !1 }, e.onmousemove = function () { b.cb() }; for (var t = b.jf(), n = 0; n < t; n++)this.kf(e, n); return e }, this.Ze = function () { var e = t(); e.style.width = this.hourWidth + "px", e.style.position = "relative", e.oncontextmenu = function () { return !1 }, e.onmousemove = function () { b.cb() }, e.rows = []; for (var n = b.jf(), i = 0; i < n; i++)this.lf(e, i); return e }, this.jf = function () { return this.Kb() / (60 * this.timeHeaderCellDuration * 1e3) }, this.mf = function () { return 60 * this.cellHeight / this.cellDuration / (60 / this.timeHeaderCellDuration) }, this.nf = function () { return (this.Ob() - this.Ob(!0)) * (60 / this.cellDuration) }, this.of = function () { return this.Ob() - this.Ob(!0) }, this.Pc = function () { return this.nf() * this.cellHeight }, this.kf = function (e, n) { var i = b.mf(), a = e.insertRow(-1); a.style.height = i + "px"; var r = a.insertCell(-1); r.valign = "bottom", r.setAttribute("unselectable", "on"), r.style.padding = "0px", r.style.border = "0px none"; var o = t(); o.className = this.ca("_rowheader"), o.style.position = "relative", o.style.width = this.hourWidth + "px", o.style.height = i + "px", o.style.overflow = "hidden", o.setAttribute("unselectable", "on"); var s = t(); s.className = this.ca("_rowheader_inner"), s.setAttribute("unselectable", "on"); var l = b.pf(n), c = l.html, u = l.data; u && (o.data = u, o.onmousemove = b.qf, o.onmouseout = b.rf); var h = null, f = {}; if (f.header = u, "function" == typeof b.onBeforeTimeHeaderDomAdd && (f.element = null, b.onBeforeTimeHeaderDomAdd(f), h = f.element), o.domArgs = f, h) { var v = s; f.Be = v; d(h) ? (b.Y.Ce(), b.Y.X(h, v)) : v.appendChild(h) } else s.innerHTML = c; o.appendChild(s), b.elements.timeHeaders.push(o), r.appendChild(o) }, this.lf = function (e, n) { var i = b.mf(), a = t(); a.style.position = "absolute", a.style.top = n * i + "px", a.style.height = i + "px", e.rows[n] = a; var r = t(); a.appendChild(r), a.cells = [r]; var o = t(); o.className = this.ca("_rowheader"), o.style.position = "relative", o.style.width = this.hourWidth + "px", o.style.height = i + "px", o.style.overflow = "hidden", o.setAttribute("unselectable", "on"); var s = t(); s.className = this.ca("_rowheader_inner"), s.setAttribute("unselectable", "on"); var l = b.pf(n), c = l.html, u = l.data; u && (o.data = u, o.onmousemove = b.qf, o.onmouseout = b.rf, u.cssClass && DayPilot.Util.addClass(o, u.cssClass)); var h = null, f = {}; if (f.header = u, "function" == typeof b.onBeforeTimeHeaderDomAdd && (f.element = null, b.onBeforeTimeHeaderDomAdd(f), h = f.element), o.domArgs = f, h) { var v = s; f.Be = v; d(h) ? (b.Y.Ce(), b.Y.X(h, v)) : v.appendChild(h) } else s.innerHTML = c; o.appendChild(s), b.elements.timeHeaders.push(o), r.appendChild(o), e.appendChild(a) }, this.pf = function (e) { var n, i; if (this.hours) { var a = e + this.of(); i = this.hours[a], n = i.html } var r, o = this.timeHeaderCellDuration, s = this.startDate.addMinutes(o * e + 60 * this.Ob()), l = s.getHours(), d = l < 12; if (r = "Clock12Hours" === this.Ha.Kc() ? d ? "AM" : "PM" : "00", !n) { var c = t(); if (c.setAttribute("unselectable", "on"), "Clock12Hours" === this.Ha.Kc() && (l %= 12, 0 === l && (l = 12)), 60 !== this.timeHeaderCellDuration && (l += ":" + s.toString("mm")), c.innerHTML = l, 60 === this.timeHeaderCellDuration) { var u = document.createElement("span"); u.setAttribute("unselectable", "on"), u.className = this.ca("_rowheader_minutes"), u.innerHTML = r, c.appendChild(u) } n = c.outerHTML } var h = {}; h.header = {}, h.header.hours = s.getHours(), h.header.minutes = s.getMinutes(), h.header.start = s.toString("HH:mm"), h.header.text = null, h.header.html = n, h.header.areas = i ? i.areas : null, h.header.time = new DayPilot.Duration(s.getTimePart()), h.header.cssClass = null, "function" == typeof b.onBeforeTimeHeaderRender && (b.onBeforeTimeHeaderRender(h), null !== h.header.html && (n = h.header.html)), i = h.header; var f = {}; return f.start = s, f.hour = l, f.html = n, f.data = i, f.sup = r, h.header.text && (f.text = h.header.text), f }, this.qf = function (e) { b.cb(); var t = this; t.active || DayPilot.Areas.showAreas(t, t.data) }, this.rf = function (e) { DayPilot.Areas.hideAreas(this, e) }, this.Te = function () { switch (this.heightSpec) { case "Fixed": return this.height; case "Parent100Pct": return this.height; case "Full": return this.Ge(); case "BusinessHours": case "BusinessHoursNoScroll": return this.Lb() * this.cellHeight * 60 / this.cellDuration; default: throw new DayPilot.Exception("DayPilot.Calendar: Unexpected 'heightSpec' value.") } }, this.Ge = function () { return b.Kb() * this.cellHeight / (6e4 * b.cellDuration) }, this.Pb = function () { if (!this.showHeader) return 0; var e = k.Gd() * k.Ae(); return this.showAllDayEvents && k.sf() ? e + k.sf() : e }, this.rb = function () { if (this.headerHeightAutoFit) { for (var e = 0, t = 0; t < this.nav.header.rows.length; t++)for (var n = this.nav.header.rows[t], i = 0; i < n.cells.length; i++) { var a = n.cells[i], r = a.firstChild, o = r.firstChild, s = r.style.height; r.style.height = "auto", o.style.position = "static"; var l = r.offsetHeight; r.style.height = s, o.style.position = "", e = Math.max(e, l) } e > this.headerHeight && (this.ra.headerHeight = e, this.pb(), this.qb()) } }, this.tf = function () { var e = this.oa ? b.nav.bottomRight : b.nav.scroll; return DayPilot.sw(e) > 0 }, this.Ve = function () { var e = t(), n = "Fixed" === this.columnWidthSpec; n || (e.style.overflow = "auto"), e.style.position = "absolute", e.style.left = "0px", e.style.right = "0px"; var i = t(); i.style.position = "relative", i.style.zoom = "1"; var a = null, n = "Fixed" === this.columnWidthSpec; if (n || this.oa) { var r = t(); if (r.style.cssFloat = "left", b.rtl && (r.style.cssFloat = "right"), r.style.width = this.hourWidth + "px", this.showHours) { var o = this.uf(); this.nav.corner = o, r.appendChild(o), i.appendChild(r), this.nav.upperLeft = r } var s = t(); this.showHours && (b.rtl ? s.style.marginRight = this.hourWidth + "px" : s.style.marginLeft = this.hourWidth + "px"), s.style.position = "relative", s.style.overflow = "hidden", s.style.height = this.Pb() + "px", s.className = b.ca("_colheader_back"), s.onmousemove = function (e) { var t = this; "undefined" != typeof w && w.s && w.Vc(t, e) }, i.appendChild(s), this.nav.upperRight = s; var l = t(); l.className = b.ca("_colheader_back_inner"), s.appendChild(l), a = t(), a.style.position = "relative", s.appendChild(a) } else { var d = document.createElement("table"); d.cellPadding = "0", d.cellSpacing = "0", d.border = "0", d.style.margin = "0px", d.style.width = "100%", d.style.borderCollapse = "separate", d.style.border = "0px none"; var c = d.insertRow(-1); if (this.nav.fullHeader = d, this.showHours) { var u = c.insertCell(-1); u.style.padding = "0px", u.style.border = "0px none"; var o = this.uf(); u.appendChild(o), this.nav.corner = o } u = c.insertCell(-1), u.style.width = "100%", u.valign = "top", u.style.position = "relative", u.style.padding = "0px", u.style.border = "0px none", a = t(), a.style.position = "relative", a.style.height = this.Pb() + "px", a.style.overflow = "hidden", u.appendChild(a), this.nav.mid = a, i.appendChild(d) } this.nav.headerParent = a, this.nav.headerParent.onmousemove = function (e) { e.insideMainD = !0 }, this.vf(); var h = this.tf(), n = "Fixed" === this.columnWidthSpec; return h && !n && this.wf(), e.appendChild(i), e }, this.vf = function () { if (this.nav.unifiedCornerRight = null, b.pa) this.nav.header = t(), this.nav.header.style.position = "relative"; else { this.nav.header = document.createElement("table"), this.nav.header.style.margin = "0px", this.nav.header.cellPadding = "0", this.nav.header.cellSpacing = "0"; "Fixed" === this.columnWidthSpec || (this.nav.header.width = "100%"), this.nav.header.style.tableLayout = "fixed", this.nav.header.oncontextmenu = function () { return !1 } } this.nav.header.setAttribute("dp-id", "header"), this.nav.headerParent.appendChild(this.nav.header), this.nav.header.onmousemove = function () { b.cb() }, this.nav.allday && f(this.nav.allday); var e = t(); e.style.position = "absolute", e.style.top = "0px", e.style.height = "0px", e.setAttribute("dp-id", "allday"), "Fixed" === this.columnWidthSpec ? e.style.width = this.Ib.length * this.columnWidth + "px" : (e.style.left = "0px", e.style.right = "0px"), this.nav.allday = e, this.nav.headerParent.appendChild(e) }, this.wf = function () { if (this.nav.fullHeader) { var e = this.nav.fullHeader.rows[0], n = e.insertCell(-1); n.style.padding = "0px", n.style.verticalAlign = "top", n.setAttribute("unselectable", "on"); var i = t(); i.setAttribute("unselectable", "on"), i.className = this.ca("_cornerright"), i.style.overflow = "hidden", i.style.position = "relative", i.style.width = "16px", i.style.height = this.Pb() + "px"; var a = t(); a.className = this.ca("_cornerright_inner"), i.appendChild(a), n.appendChild(i), this.nav.cornerRight = i } }, this.uf = function () { var e = t(); e.style.position = "relative", e.className = this.ca("_corner"), e.style.width = this.hourWidth + "px", e.style.height = this.Pb() + "px", e.style.overflow = "hidden", e.oncontextmenu = function () { return !1 }; var n = t(); n.className = this.ca("_corner_inner"), n.setAttribute("unselectable", "on"), e.appendChild(n); var i = t(); return i.style.position = "absolute", i.style.padding = "2px", i.style.top = "0px", i.style.left = "1px", i.style.backgroundColor = "#FF6600", i.style.color = "white", i.innerHTML = "\u0044\u0045" + "\u004D\u004F", i.setAttribute("unselectable", "on"), DayPilot.Util.isNullOrUndefined(undefined) && e.appendChild(i), e }, this.Xa = function () { if (b.nav.corner && b.nav.corner.firstChild) { var e = b.nav.corner.firstChild, t = e.domArgs; if (e.domArgs = null, t && ("function" == typeof b.onBeforeCornerDomRemove && b.onBeforeCornerDomRemove(t), "function" == typeof b.onBeforeCornerDomAdd && b.Y.reactDOM && e)) { d(t.element) && (b.Y.Ce(), b.Y.ja(e)) } } }, this.Va = function () { var e = this.nav.main; e.root = null, e.onmouseup = null; for (var t = 0; t < e.rows.length; t++)for (var n = e.rows[t], i = 0; i < n.cells.length; i++) { var a = n.cells[i]; a.root = null, a.onmousedown = null, a.onmousemove = null, a.onmouseout = null, a.onmouseup = null, a.onclick = null, a.ondblclick = null, a.oncontextmenu = null } this.qa || DayPilot.pu(e) }, this.sb = function () { for (var e = 0; this.nav.scrollUp && e < this.nav.scrollUp.length; e++)this.nav.scrollLayer.removeChild(this.nav.scrollUp[e]); for (var e = 0; this.nav.scrollDown && e < this.nav.scrollDown.length; e++)this.nav.scrollLayer.removeChild(this.nav.scrollDown[e]); this.nav.scrollUp = [], this.nav.scrollDown = [] }, this.hf = function (e) { var n = t(); n.style.marginRight = b.columnMarginRight + "px", n.style.position = "relative", n.style.height = "1px", n.style.marginTop = "-1px", e.events = n; var i = t(); i.style.position = "relative", i.style.height = "1px", i.style.marginTop = "-1px", e.separators = i; var a = t(); a.style.position = "relative", a.style.height = "1px", a.style.marginTop = "-1px", e.selection = a, e.appendChild(i), e.appendChild(a), e.appendChild(n) }, this.ub = function () { b.pa ? b.xf() : b.yf() }, this.zf = function () { if (this.scrollLabelsVisible) for (var e = this.Ib, n = this.showHours ? this.hourWidth : 0, i = (this.nav.scroll.clientWidth - n) / e.length, a = 0; a < e.length; a++) { var r = t(); r.style.position = "absolute", r.style.top = "0px", r.style.left = n + 2 + a * i + i / 2 + "px", r.style.display = "none"; var o = t(); o.style.height = "10px", o.style.width = "10px", o.className = this.ca("_scroll_up"), r.appendChild(o), this.nav.scrollLayer.appendChild(r), this.nav.scrollUp.push(r); var s = t(); s.style.position = "absolute", s.style.top = "0px", s.style.left = n + 2 + a * i + i / 2 + "px", s.style.display = "none"; var o = t(); o.style.height = "10px", o.style.width = "10px", o.className = this.ca("_scroll_down"), s.appendChild(o), this.nav.scrollLayer.appendChild(s), this.nav.scrollDown.push(s) } }, this.Af = function () { var e = this.nav.events; e.innerHTML = "", e.rows = [{ "cells": [] }], b.se().forEach(function (n, i) { var a = t(); a.style.height = "1px", a.style.overflow = "visible", a.style.position = "absolute", a.style.left = n.left + n.unit, a.style.right = n.left + n.unit, a.style.width = n.width + n.unit, b.hf(a), e.appendChild(a), e.rows[0].cells.push(a) }) }, this.se = function () { function e(e) { return DayPilot.browser.ie || DayPilot.browser.edge ? Math.floor(100 * e) / 100 : e } var t = b.Hd(), n = b.Ib, i = "Fixed" === this.columnWidthSpec, a = 0; return DayPilot.list.for(n.length, function (r) { var o = {}, s = 0, l = ""; return i ? (l = "px", s = n[r].width ? n[r].width : b.columnWidth) : (l = "%", s = t ? n[r].width : e(100 / n.length)), o.left = a, o.width = s, o.unit = l, a += s, o }) }, this.xf = function () { var e = this.nav.main, t = this.nav.scrollable, n = this.Sb(), i = (this.of() * (60 / this.cellDuration), b.Ib); !function () { b.elements.cells = {}, e.innerHTML = "", e.rows = [] }(), t.daypilotMainD = !0, t.calendar = this, b.zf(), b.Af(); for (var a = 0; a < n; a++)if (e.rows.push({ "cells": [] }), DayPilot.browser.ie) for (var r = i.length - 1; r >= 0; r--)b.Oe(r, a); else for (var r = 0; r < i.length; r++)b.Oe(r, a); e.style.height = n * b.cellHeight + "px" }, b.Bf = function (e, t) { var n = {}, i = b.Fe(e), a = t * b.cellHeight; return n.left = i.left, n.width = i.width, n.right = n.left + n.width, n.top = a, n.height = b.cellHeight, n.bottom = n.top + n.height, n }, b.Oe = function (e, n) { var i = "Fixed" === b.columnWidthSpec && !DayPilot.browser.ie; if (!b.elements.cells[e + "_" + n]) { if (i) { var o = b.Bf(e, n), s = b.hd(), d = s.pixels.right <= o.left || s.pixels.left >= o.right, c = s.pixels.bottom <= o.top || s.pixels.top >= o.bottom; if (!(!d && !c)) return } var h = b.Fe(e), f = 60 * this.cellDuration * 1e3, p = n * b.cellHeight, m = b.Ib[e], g = t(); g.style.position = "absolute", g.style.left = h.left + h.unit, g.style.right = h.left + h.unit, g.style.width = h.width + h.unit, g.style.top = p + "px", g.start = m.start.addTime(n * f).addHours(b.Ob()), g.end = g.start.addTime(f), g.resource = m.id, g.data = {}, g.data.x = e, g.data.y = n, g.data.start = g.start, g.data.end = g.end, g.data.resource = g.resource, g.data.calendar = b, b.cellProperties || (b.cellProperties = {}); var y = {}; y.resource = g.resource, y.start = g.start, y.end = g.end; var w = e + "_" + n, x = ["cssClass", "html", "backImage", "backRepeat", "backColor", "business", "areas", "disabled"]; if (y.properties = b.cellProperties[w], !b.cellProperties[w]) { var k = y.properties = {}; k.cssClass = null, k.html = null, k.backImage = null, k.backRepeat = null, k.backColor = null, k.business = b.Cf(g.start, g.end), b.cellProperties[w] = k } if ("function" == typeof b.onBeforeCellRender) { var C = {}; C.cell = y, b.onBeforeCellRender(C), l(C.cell, C.cell.properties, x) } var _, D = b.Df(e, n); g.root = b, g.setAttribute("unselectable", "on"), _ = t(), _.className = b.ca("_cell"), _.style.position = "relative", _.style.height = b.cellHeight + "px", _.style.overflow = "hidden", _.setAttribute("unselectable", "on"); var S = t(); S.className = b.ca("_cell_inner"), _.appendChild(S), g.appendChild(_), g.onmousedown = b.Fc, g.onmousemove = b.Uc, g.onmouseout = b.Tc, a(g, DayPilot.touch.end, b.Le.Ef), g.oncontextmenu = function () { return this.selected || (b.clearSelection(), v.Hc = e, b.Aa.push(this), v.Ic = this, v.Ba = this, v.Ca = this, b.Jc()), "Disabled" === b.timeRangeRightClickHandling, !1 }; var E = b.Ff(e, n); _ = g.firstChild; "Fixed" === b.columnWidthSpec && (m.width ? _.style.width = m.width + "px" : _.style.width = b.columnWidth + "px"), E && (_.firstChild.style.background = E); (D ? D.business : b.Cf(g.start, g.end)) && r(_, b.ca("_cell_business")); var T = _.firstChild; if (T && (T.innerHTML = ""), _.style.backgroundImage = "", _.style.backgroundRepeat = "", D && (D.html && (T.innerHTML = D.html), D.cssClass && r(_, D.cssClass), D.backImage && (_.style.backgroundImage = "url('" + D.backImage + "')"), D.backRepeat && (_.style.backgroundRepeat = D.backRepeat), D.areas)) { var A = {}; A.start = g.start, A.end = g.end, A.resource = g.resource; var H = u(D.areas).filter(function (e) { return !(e.end && new DayPilot.Date(e.end) <= g.start) && !(e.start && new DayPilot.Date(e.start) >= g.end) }); H.forEach(function (e) { if (e.start || e.end) { if (e.start) { var t = new DayPilot.Date(e.start).getTime() - g.start.getTime(); e.top = b.Gf(t) } if (e.end) { var n = new DayPilot.Date(e.end).getTime() - g.start.getTime(); e.height = b.Gf(n) - e.top } } }), DayPilot.Areas.attach(_, A, { "areas": H }) } if (b.nav.main.appendChild(g), b.nav.main.rows[n].cells[e] = g, b.elements.cells[e + "_" + n] = g, "function" == typeof b.onAfterCellRender) { var C = {}; C.cell = l(y, {}, ["start", "end", "resource"]), C.div = _, b.onAfterCellRender(C) } } }, this.yf = function () { var e = this.nav.main, n = 60 * this.cellDuration * 1e3, i = this.Sb(), o = (this.of() * (60 / this.cellDuration), b.Ib), s = 0; for (e && (s = b.Yc().scrollTop, this.Va()), this.nav.scrollable.daypilotMainD = !0, this.nav.scrollable.calendar = this; e && e.rows && e.rows.length > 0;)this.qa || DayPilot.pu(e.rows[0]), e.deleteRow(0); if (this.Hf = !0, this.scrollLabelsVisible) for (var o = this.Ib, d = this.showHours ? this.hourWidth : 0, c = (this.nav.scroll.clientWidth - d) / o.length, h = 0; h < o.length; h++) { var f = t(); f.style.position = "absolute", f.style.top = "0px", f.style.left = d + 2 + h * c + c / 2 + "px", f.style.display = "none"; var p = t(); p.style.height = "10px", p.style.width = "10px", p.className = this.ca("_scroll_up"), f.appendChild(p), this.nav.scrollLayer.appendChild(f), this.nav.scrollUp.push(f); var m = t(); m.style.position = "absolute", m.style.top = "0px", m.style.left = d + 2 + h * c + c / 2 + "px", m.style.display = "none"; var p = t(); p.style.height = "10px", p.style.width = "10px", p.className = this.ca("_scroll_down"), m.appendChild(p), this.nav.scrollLayer.appendChild(m), this.nav.scrollDown.push(m) } var g = o.length; if (this.ma) { for (var y = this.nav.events; y && y.rows && y.rows.length > 0;)this.qa || DayPilot.pu(y.rows[0]), y.deleteRow(0); for (var w = y.insertRow(-1), x = 0; x < g; x++) { var k = w.insertCell(-1); k.style.padding = "0px", k.style.border = "0px none", k.style.height = "1px", k.style.overflow = "visible"; var C = "Fixed" === this.columnWidthSpec; C && (o[x].width ? k.style.width = o[x].width + "px" : k.style.width = this.columnWidth + "px"), b.rtl || (k.style.textAlign = "left"), b.hf(k) } } for (var h = 0; h < i; h++) { var w = e.insertRow(-1), _ = h; w.style.MozUserSelect = "none", w.style.KhtmlUserSelect = "none", w.style.WebkitUserSelect = "none"; for (var x = 0; x < g; x++) { var D = this.Ib[x], k = w.insertCell(-1); k.start = D.start.addTime(_ * n).addHours(this.Ob()), k.end = k.start.addTime(n), k.resource = D.id, this.cellProperties || (this.cellProperties = {}); var S = {}; S.resource = k.resource, S.start = k.start, S.end = k.end; var E = x + "_" + _; if (S.cssClass = null, S.html = null, S.backImage = null, S.backRepeat = null, S.backColor = null, S.business = this.Cf(k.start, k.end), this.cellProperties[E] && l(this.cellProperties[E], S, ["cssClass", "html", "backImage", "backRepeat", "backColor", "business", "areas", "disabled"]), "function" == typeof this.onBeforeCellRender) { var T = {}; T.cell = S, this.onBeforeCellRender(T) } this.cellProperties[E] = S; var A, H = b.Df(x, _); k.root = this, k.setAttribute("unselectable", "on"), A = t(), A.className = b.ca("_cell"), A.style.position = "relative", A.style.height = b.cellHeight + "px", A.style.overflow = "hidden", A.setAttribute("unselectable", "on"); var M = t(); M.className = b.ca("_cell_inner"), A.appendChild(M), k.appendChild(A), k.onmousedown = this.Fc, k.onmousemove = this.Uc, k.onmouseout = this.Tc, a(k, DayPilot.touch.end, this.Le.Ef), k.oncontextmenu = function () { return this.selected || (b.clearSelection(), v.Hc = v.If(this), b.Aa.push(this), v.Ic = this, v.Ba = this, v.Ca = this, b.Jc()), "Disabled" === b.timeRangeRightClickHandling, !1 }; var R = b.Ff(x, _); A = k.firstChild; var C = "Fixed" === this.columnWidthSpec; C && (D.width ? A.style.width = D.width + "px" : A.style.width = this.columnWidth + "px"), R && (A.firstChild.style.background = R); (H ? H.business : this.Cf(k.start, k.end)) && r(A, b.ca("_cell_business")); var B = A.firstChild; if (B && (B.innerHTML = ""), A.style.backgroundImage = "", A.style.backgroundRepeat = "", H && (H.html && (B.innerHTML = H.html), H.cssClass && r(A, H.cssClass), H.backImage && (A.style.backgroundImage = "url('" + H.backImage + "')"), H.backRepeat && (A.style.backgroundRepeat = H.backRepeat), H.areas)) { var P = {}; P.start = k.start, P.end = k.end, P.resource = k.resource; var N = u(H.areas).filter(function (e) { return !(e.end && new DayPilot.Date(e.end) <= k.start) && !(e.start && new DayPilot.Date(e.start) >= k.end) }); N.forEach(function (e) { if (e.start || e.end) { if (e.start) { var t = new DayPilot.Date(e.start).getTime() - k.start.getTime(); e.top = b.Gf(t) } if (e.end) { var n = new DayPilot.Date(e.end).getTime() - k.start.getTime(); e.height = b.Gf(n) - e.top } } }), DayPilot.Areas.attach(A, P, { "areas": N }) } } } e.onmouseup = this.Wc, e.root = this, e.style.height = i * b.cellHeight + "px", b.nav.scrollable.style.display = "", b.Yc().scrollTop = s }, this._e = function (e) {
                if (!x.detected) {
                    var t = b.getSelection(); if (t) {
                        var n = {}; if (n.start = t.start, n.end = t.end, n.resource = t.resource, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof b.onTimeRangeRightClick && (b.onTimeRangeRightClick(n), n.preventDefault.value)) return !1; "ContextMenu" === b.timeRangeRightClickHandling && b.contextMenuSelection && b.contextMenuSelection.show(b.getSelection()), "function" == typeof b.onTimeRangeRightClicked && b.onTimeRangeRightClicked(n);
                    }
                }
            }, this.Cf = function (e, t) { return this.businessBeginsHour < this.businessEndsHour ? !(e.getHours() < this.businessBeginsHour || e.getHours() >= this.businessEndsHour || 6 === e.getDayOfWeek() || 0 === e.getDayOfWeek()) : e.getHours() >= this.businessBeginsHour || e.getHours() < this.businessEndsHour }, this.$e = function (e) { e = e || window.event, e.insideMainD = !0, window.event && window.event.srcElement && (window.event.srcElement.inside = !0); for (var t = 0; t < v.Jf.length; t++) { var n = v.Jf[t]; n !== b && n.bb && n.bb() } v.activeCalendar = this; var i = b.nav.main; b.coords = DayPilot.mo3(i, e); var a = DayPilot.mc(e), s = b.crosshairType && "Disabled" !== b.crosshairType; if (h.moving || h.resizing || h.selecting ? b.cb() : s && b.Kf(), h.resizing) b.Lf(a); else if (h.moving) { if (!h.moving.helper) return f(v.movingShadow), void (v.movingShadow = null); if (!v.movingShadow) { var l = 3; if (!(DayPilot.distance(a, v.Mf) > l)) return; v.movingShadow = b.Gb(h.moving, !b.za.ie), v.movingShadow.style.width = v.movingShadow.parentNode.offsetWidth + 1 + "px" } if (!b.coords) return; r(h.moving, b.ca("_event_moving_source")); var d = b.cellHeight, c = 0, u = v.moveOffsetY; u || (u = d / 2), "Top" === this.moveBy && (u = 0); var p = Math.floor((b.coords.y - u - c + d / 2) / d) * d + c; p < c && (p = c); var m = b.nav.main, g = b.pa ? b.Sb() * b.cellHeight : m.clientHeight, y = parseInt(v.movingShadow.style.height); p + y > g && (p = g - y); var w = b.Hb(b.coords.x); w < 0 && (w = 0), w >= b.Ib.length && (w = b.Ib.length - 1); var x = v.movingShadow, C = h.moving.event, _ = b.nc(C, w, p), D = b.eventMovingStartEndFormat; "Auto" === D && (D = "Clock24Hours" === k.Kc() ? "H:mm" : "h:mm tt"); var S = {}; S.e = C, S.start = _.start, S.end = _.end, S.resource = _.resource, S.html = null, S.cssClass = null, S.allowed = !0, S.areaData = h.movingAreaData, S.top = {}, S.top.width = null, S.top.space = 5, S.top.html = S.start.toString(D, k.Lc()), S.top.enabled = b.eventMovingStartEndEnabled, S.bottom = {}, S.bottom.width = null, S.bottom.space = 5, S.bottom.html = S.end.toString(D, k.Lc()), S.bottom.enabled = b.eventMovingStartEndEnabled, S.external = !!v.drag, function () { var e = b.eb; if (!(e && e.start.getTime() === _.start.getTime() && e.end.getTime() === _.end.getTime() && e.resource === _.resource)) { if (x.className = b.ca("_shadow"), x.firstChild.innerHTML = "", b.eb = S, x.args = S, !b.allowEventOverlap) { var t = { "id": C.id(), "start": S.start, "end": S.end, "resource": S.resource }; b.events.Mc(t) && (r(x, b.ca("_shadow_forbidden")), S.allowed = !1) } if (b.Nc(S.start, S.end, S.resource) && (r(x, b.ca("_shadow_forbidden")), S.allowed = !1), o(x, b.ca("_shadow_forbidden")), "function" == typeof b.onEventMoving && S.allowed && b.onEventMoving(S), h.moving) { S.html && (x.firstChild.innerHTML = S.html), S.cssClass && r(x, S.cssClass), S.allowed || r(x, b.ca("_shadow_forbidden")), v.movingShadow.style.top = p + "px"; var n = b.nav.events; w < n.rows[0].cells.length && w >= 0 && v.movingShadow.column !== w && (v.movingShadow.column = w, v.moveShadow(n.rows[0].cells[w])); var i = w, a = x; b.Rc(a, i, S) } } }() } else if (v.Gc) { var E = b.Hb(b.coords.x, !0), T = Math.floor(b.coords.y / b.cellHeight); T = DayPilot.Util.atLeast(0, T); var A = b.nav.main.rows[T].cells[E]; if (!h.selecting) { var H = v.Gc, M = b.coords; H.x === M.x && H.y === M.y || (h.selecting = { "calendar": b }) } if (!h.selecting) return; var a = b.coords, R = E; R !== v.Hc && (A = b.nav.main.rows[T].cells[v.Hc]); var B = h.selecting; if (B.origin = "drag", B.last && B.last.x === E && B.last.y === T) return; B.last = { "x": E, "y": T }, a.y < v.Gc.y ? (b.Aa = v.Nf(A), v.Ba = b.Aa[0], v.Ca = v.Ic) : (b.Aa = v.Yd(A), v.Ba = v.Ic, v.Ca = b.Aa[0]), b.Jc() } if (v.drag) { if (v.gShadow && document.body.removeChild(v.gShadow), v.gShadow = null, !v.movingShadow && b.coords) { var x = b.Gb(v.drag, !1); if (x) { v.movingShadow = x; var M = DayPilot.Date.today(), P = { "id": v.drag.id, "start": M, "end": M.addSeconds(v.drag.duration), "text": v.drag.text }, N = v.drag.Of, I = v.drag.Pf, L = I || N; if (L) { var z = ["duration", "element", "remove", "id", "text"]; L === N && z.push("data"); for (var O in L) DayPilot.contains(z, O) || (P[O] = L[O]) } var U = new DayPilot.Event(P, b); U.external = !0, h.moving = {}, h.moving.event = U, h.moving.helper = {} } } e.cancelBubble = !0 } b.Qf(b.coords) }, this.Rf = function (e) { v.movingShadow.offsetTop, h.moving.event, v.movingShadow.column }, this.Nc = function (e, t, n) { return b.Sf(e, t, n).some(function (e) { return e.disabled }) }, this.Sf = function (e, t, n) { for (var i = [], a = 60 * b.cellDuration * 1e3, r = 0; r < b.Ib.length; r++)for (var o = b.Ib[r], s = 0; s < b.Sb(); s++) { var l = r + "_" + s, d = b.cellProperties[l], u = o.start.addTime(s * a).addHours(b.Ob()), h = u.addTime(a), f = !n || n === o.id; f && c(e, t, u, h) && d && i.push(d) } return i }, this.Lf = function (e) { if (!h.resizing.event) return h.resizing = null, f(v.resizingShadow), void (v.resizingShadow = null); v.resizingShadow || (v.resizingShadow = b.Gb(h.resizing, !1)); var t = h.resizing.event.calendar.cellHeight, n = 0, i = e.y - v.Mf.y, a = h.resizing.event, o = a.start(), s = a.end(); if ("bottom" === h.resizing.dpBorder) { var l = Math.floor((v.Tf + v.Uf + i + t / 2) / t) * t - v.Uf + n; l < t && (l = t); var d = b.pa ? b.Sb() * b.cellHeight : b.nav.main.clientHeight; v.Uf + l > d && (l = d - v.Uf), v.resizingShadow.style.height = l + "px", s = b.ic(a, v.Uf + l) } else if ("top" === h.resizing.dpBorder) { var c = Math.floor((v.Uf + i - n + t / 2) / t) * t + n; c < n && (c = n), c > v.Uf + v.Tf - t && (c = v.Uf + v.Tf - t); var l = v.Tf - (c - v.Uf); l < t ? l = t : v.resizingShadow.style.top = c + "px", v.resizingShadow.style.height = l + "px", o = b.hc(a, c) } var u = v.resizingShadow, p = b.eventResizingStartEndFormat; "Auto" === p && (p = "Clock24Hours" === k.Kc() ? "H:mm" : "h:mm tt"); var m = {}; if (m.e = a, m.start = o, m.end = s, m.resource = a.resource(), m.allowed = !0, m.html = null, m.cssClass = null, m.top = {}, m.top.width = null, m.top.space = 5, m.top.html = m.start.toString(p, k.Lc()), m.top.enabled = b.eventResizingStartEndEnabled, m.bottom = {}, m.bottom.width = null, m.bottom.space = 5, m.bottom.html = m.end.toString(p, k.Lc()), m.bottom.enabled = b.eventResizingStartEndEnabled, u.args = m, u.firstChild.innerHTML = "", u.className = b.ca("_shadow"), !b.allowEventOverlap) { var g = { "id": a.id(), "start": m.start, "end": m.end, "resource": m.resource }; b.events.Mc(g) && (r(u, b.ca("_shadow_forbidden")), m.allowed = !1) } b.Nc(m.start, m.end, m.resource) && (r(u, b.ca("_shadow_forbidden")), m.allowed = !1), "function" == typeof b.onEventResizing && m.allowed && b.onEventResizing(m), m.html && (u.firstChild.innerHTML = m.html), m.cssClass && r(u, m.cssClass), m.allowed || r(u, b.ca("_shadow_forbidden")); var y = a.part.dayIndex, w = u; b.Rc(w, y, m) }, this.temp = {}, this.temp.getPosition = function () { var e = b.Wf.Vf(); if (!e) return null; var t = b.Ib[e.x], n = {}; return n.resource = t.id, n.start = new DayPilot.Date(t.start).addHours(b.Ob(!0)).addMinutes(e.y * b.cellDuration), n.end = n.start.addMinutes(b.cellDuration), n }, this.Wf = {}, this.Wf.Vf = function () { var e = {}; if (e.x = 0, e.y = 0, !b.coords) return null; e.x = b.Hb(b.coords.x); var t = 0, n = Math.floor((b.coords.y - t) / b.cellHeight); return e.y = DayPilot.Util.atLeast(0, n), e.x < 0 ? null : e }, this.Wf.col = function (e, t) { var n = {}; if (n.left = 0, n.width = 0, !e) return null; if (!e.rows) return null; if (0 === e.rows.length) return null; if (0 == e.rows[0].cells.length) return null; var i = e.rows[0].cells[t]; if (!i) return null; var a = DayPilot.abs(e), r = DayPilot.abs(i); return n.left = r.x - a.x, n.width = i.offsetWidth, n }, this.Kf = function () { var e = b.nav.hourTable; this.cb(), this.elements.crosshair || (this.elements.crosshair = []); var n = this.Wf.Vf(); if (n) { var i = n.x; if (null !== i) { var a = Math.floor(n.y / (60 / b.cellDuration) * (60 / b.timeHeaderCellDuration)); if (!(a < 0)) { if (e) { if (a >= e.rows.length) return; var r = t(); r.style.position = "absolute", r.style.left = "0px", r.style.right = "0px", r.style.top = "0px", r.style.bottom = "0px", r.className = b.ca("_crosshair_left"), e.rows[a].cells[0].firstChild.appendChild(r), this.elements.crosshair.push(r) } if (this.nav.header) { var o = t(); o.style.position = "absolute", o.style.left = "0px", o.style.right = "0px", o.style.top = "0px", o.style.bottom = "0px", o.className = b.ca("_crosshair_top"); var s = this.nav.header.rows[k.Gd() - 1]; s.cells[i] && (s.cells[i].firstChild.appendChild(o), this.elements.crosshair.push(o)) } if ("Header" !== this.crosshairType) { var l = this.nav.crosshair, d = 0, c = Math.floor((b.coords.y - d) / b.cellHeight) * b.cellHeight + d, u = b.cellHeight, h = t(); h.style.position = "absolute", h.style.left = "0px", h.style.right = "0px", h.style.top = c + "px", h.style.height = u + "px", h.className = b.ca("_crosshair_horizontal"), h.onmousedown = this.Xf, l.appendChild(h), this.elements.crosshair.push(h); var f = i; DayPilot.browser.ie && (f = b.Ib.length - 1 - i); var v = this.Wf.col(this.nav.main, f); if (u = b.Ge(), v) { var p = t(); p.style.position = "absolute", p.style.left = v.left + "px", p.style.width = v.width + "px", p.style.top = "0px", p.style.height = u + "px", p.className = b.ca("_crosshair_vertical"), p.onmousedown = this.Xf, l.appendChild(p), this.elements.crosshair.push(p) } } } } } }, this.Xf = function (e) { var t = b.nav.main; b.cb(), b.coords = DayPilot.mo3(t, e); var n = b.Wf.Vf(), i = 0, a = n.x; DayPilot.browser.ie && (a = b.Ib.length - 1 - n.x); var r = t.rows[n.y + i].cells[a]; b.Fc.apply(r, [e]) }, this.cb = function () { if (this.elements.crosshair && 0 !== this.elements.crosshair.length) { for (var e = 0; e < this.elements.crosshair.length; e++) { var t = this.elements.crosshair[e]; t && t.parentNode && t.parentNode.removeChild(t) } this.elements.crosshair = [] } }, this.nb = function () { if (this.cellConfig) { var e = this.cellConfig; if (e.vertical) for (var t = 0; t < e.x; t++)for (var n = this.cellProperties[t + "_0"], i = 1; i < e.y; i++)this.cellProperties[t + "_" + i] = n; if (e.horizontal) for (var i = 0; i < e.y; i++)for (var n = this.cellProperties["0_" + i], t = 1; t < e.x; t++)this.cellProperties[t + "_" + i] = n; if (e["default"]) for (var n = e["default"], i = 0; i < e.y; i++)for (var t = 0; t < e.x; t++)this.cellProperties[t + "_" + i] || (this.cellProperties[t + "_" + i] = n) } }, this.Df = function (e, t) { return this.cellProperties ? this.cellProperties[e + "_" + t] : null }, this.Yf = function (e, t) { var n = e + "_" + t; return !(!this.cellProperties || !this.cellProperties[n]) && this.cellProperties[n].business }, this.Ff = function (e, t) { var n = e + "_" + t; return this.cellProperties && this.cellProperties[n] ? this.cellProperties[n].backColor : null }, this.Wa = function () { var e = this.nav.header; if (e && e.rows) for (var t = 0; t < e.rows.length; t++)for (var n = e.rows[t], i = 0; i < n.cells.length; i++) { var a = n.cells[i]; a.onclick = null, a.onmousemove = null, a.onmouseout = null; var r = a, o = r.domArgs; if (r.domArgs = null, "function" == typeof b.onBeforeHeaderDomRemove && b.onBeforeHeaderDomRemove(o), "function" == typeof b.onBeforeHeaderDomAdd && b.Y.reactDOM) { var s = o && o.Be; if (s) { var l = d(o.element); l && (b.Y.Ce(), b.Y.ja(s)) } } } e && (this.qa || DayPilot.pu(e), e.innerHTML = "", e.rows = []) }, this.xe = function (e) { var t = e + 1, n = t === k.Gd(), i = this.Fd(t), a = 0, r = 0, o = b.se(), s = [], l = "Fixed" === this.columnWidthSpec, d = l ? "px" : "%"; if (!n) for (var c = 0; c < i.length; c++) { var u = i[c], h = (o[c], !!u.Qd), f = h ? u.Rd(k.Gd() - t + 1) : 1, v = 0; DayPilot.list.for(f, function () { v += o[a].width, a += 1 }), s.push({ "left": r, "width": v, "unit": d }), r += v } return s }, this.Zf = function (e) { function n(n) { var i = a[n], o = c[n]; if (o) { var v = {}; v.header = {}, v.header.cssClass = null, v.column = b.Zb(i, b); var p = null; b.Fb() && "function" == typeof b.onBeforeHeaderRender && (l(i, v.header, ["id", "start", "name", "html", "backColor", "toolTip", "areas", "children"]), b.onBeforeHeaderRender(v), l(v.header, i, ["html", "backColor", "toolTip", "areas", "cssClass"])); var m = !!i.Qd, g = o.width, x = o.left; s || (x = f[n].left, g = f[n].width); var C = t(); C.style.position = "absolute", C.style.top = u + "px", C.style.left = x + o.unit, C.style.right = x + o.unit, C.style.width = g + o.unit, C.data = i, h.push(C), m && (C.onclick = b.$b, C.onmousemove = b._b, C.onmouseout = b.cc, i.toolTip && (C.title = i.toolTip)), C.style.overflow = "hidden", C.style.height = k.Ae() + "px"; var _ = t(); _.setAttribute("unselectable", "on"), _.style.userSelect = "none", _.style.position = "relative", _.style.height = k.Ae() + "px", _.className = b.ca("_colheader"), i.cssClass && DayPilot.Util.addClass(_, i.cssClass), b.headerTextWrappingEnabled || (_.style.whiteSpace = "nowrap"); var D = t(); if (D.className = b.ca("_colheader_inner"), i.backColor && (D.style.background = i.backColor), _.appendChild(D), C.appendChild(_), k.le() && "undefined" != typeof w && w.me && !function () { var t = {}; t.column = r[n], t.x = n, t.y = e, t.div = C, w.me(t) }(), k.Zd() && m && "undefined" != typeof y && y.$d && !function () { var t = {}; t.column = r[n], t.x = n, t.y = e, t.div = C, y.$d(t) }(), b.$f(_, i), "function" == typeof b.onBeforeHeaderDomAdd && (v.element = null, b.onBeforeHeaderDomAdd(v), p = v.element), C.domArgs = v, p) { var S = D; v.Be = S; d(p) ? (b.Y.Ce(), b.Y.X(p, S)) : S.appendChild(p) } else m && (_.firstChild.innerHTML = i.html || ""); b.nav.header.appendChild(C) } } var i = e + 1, a = this.Fd(i), r = this.Fd(i, !0), o = a.length, s = i === k.Gd(), c = b.se(), u = e * k.Ae(), h = []; b.nav.header.rows.push({ "cells": h }); var f = b.xe(e); if (DayPilot.browser.ie) for (var v = o - 1; v >= 0; v--)n(v); else for (var v = 0; v < o; v++)n(v) }, this._f = function (e, n) { for (var i = n ? this.nav.header.insertRow(-1) : this.nav.header.rows[e - 1], a = this.Fd(e), r = a.length, o = e === k.Gd(), s = 0; s < r; s++) { var d = a[s]; if (b.Fb() && "function" == typeof b.onBeforeHeaderRender) { var c = {}; c.header = {}, l(d, c.header, ["id", "start", "name", "html", "backColor", "toolTip", "areas", "children"]), this.onBeforeHeaderRender(c), l(c.header, d, ["html", "backColor", "toolTip", "areas"]) } var u = !!d.Qd, h = n ? i.insertCell(-1) : i.cells[s]; if (h.data = d, o); else { var f = 1; u && (f = d.Rd(k.Gd() - e + 1)), h.colSpan = f } u && (h.onclick = this.$b, h.onmousemove = this._b, h.onmouseout = this.cc, d.toolTip && (h.title = d.toolTip)), h.style.overflow = "hidden", h.style.padding = "0px", h.style.border = "0px none", h.style.height = k.Ae() + "px"; var v = n ? t() : h.firstChild; if (n) { v.setAttribute("unselectable", "on"), v.style.MozUserSelect = "none", v.style.KhtmlUserSelect = "none", v.style.WebkitUserSelect = "none", v.style.position = "relative", v.style.height = k.Ae() + "px", v.className = b.ca("_colheader"); var p = t(); p.className = b.ca("_colheader_inner"), d.backColor && (p.style.background = d.backColor), v.appendChild(p), h.appendChild(v) } else v.style.height = k.Ae() + "px"; this.$f(v, d), u && (v.firstChild.innerHTML = d.html) } }, this.$f = function (e, t) { for (var n = [], i = 0; i < e.childNodes.length; i++) { var a = e.childNodes[i]; a.isActiveArea && n.push(a) } for (var i = 0; i < n.length; i++) { var a = n[i]; f(a) } if (t.areas) for (var r = t.areas, i = 0; i < r.length; i++) { var o = r[i]; if (DayPilot.Areas.isVisible(o)) { var s = b.Zb(t), l = DayPilot.Areas.createArea(e, s, o); e.appendChild(l) } } }, this.qb = function () { b.pa ? b.ag() : b.bg() }, this.ag = function () { var e = b.nav.header; if (b.Wa(), this.showHeader) { var n = this.Fd(k.Gd(), !0), i = n.length; this.cg = !0; var a = b.nav.corner; if (a) { this.qa || DayPilot.pu(a.firstChild); var r = {}; r.html = b.Fa(b.cornerText, b.cornerHtml); var o = null; if (b.Xa(), "function" == typeof b.onBeforeCornerRender && b.onBeforeCornerRender(r), "function" == typeof b.onBeforeCornerDomAdd && (r.element = null, b.onBeforeCornerDomAdd(r), o = r.element), o) { var s = a.firstChild; s.domArgs = r; d(o) ? (b.Y.Ce(), b.Y.X(o, s)) : s.appendChild(o) } else a.firstChild.innerHTML = r.html || "" } for (var l = 0; l < k.Gd(); l++)this.Zf(l); if (this.showAllDayEvents) { var c = []; b.nav.header.rows.push({ "cells": c }); for (var u = b.se(), h = k.Gd() * k.Ae(), f = 0; f < i; f++) { var v = n[f], p = u[f], m = t(); m.data = v, m.style.overflow = "hidden", m.style.position = "absolute", m.style.left = p.left + p.unit, m.style.right = p.left + p.unit, m.style.width = p.width + p.unit, m.style.top = h + "px"; var g = t(); g.setAttribute("unselectable", "on"), g.style.userSelect = "none", g.style.overflow = "hidden", g.style.position = "relative", g.style.height = k.sf() + "px", g.className = this.ca("_alldayheader"); var y = t(); y.className = this.ca("_alldayheader_inner"), g.appendChild(y), m.appendChild(g), g.style.height = k.sf() + "px", c.push(m), e.appendChild(m) } } } }, this.bg = function () { if (this.showHeader) { var e = this.nav.header, n = !0, i = this.Fd(k.Gd(), !0), a = i.length; for (f(this.nav.header), this.vf(); this.cg && e && e.rows && e.rows.length > 0;)this.qa || DayPilot.pu(e.rows[0]), e.deleteRow(0); this.cg = !0; var r = b.nav.corner; if (r) { this.qa || DayPilot.pu(r.firstChild); var o = {}; o.html = b.Fa(b.cornerText, b.cornerHtml), "function" == typeof b.onBeforeCornerRender && b.onBeforeCornerRender(o), r.firstChild.innerHTML = o.html ? o.html : "" } for (var s = 0; s < k.Gd(); s++)this._f(s + 1, n); if (this.showAllDayEvents) for (var l = this.nav.header.insertRow(-1), s = 0; s < a; s++) { var d = i[s], c = l.insertCell(-1); c.data = d, c.style.padding = "0px", c.style.border = "0px none", c.style.overflow = "hidden"; var u = t(); u.setAttribute("unselectable", "on"), u.style.MozUserSelect = "none", u.style.KhtmlUserSelect = "none", u.style.WebkitUserSelect = "none", u.style.overflow = "hidden", u.style.position = "relative", u.style.height = k.sf() + "px", u.className = this.ca("_alldayheader"); var h = t(); h.className = this.ca("_alldayheader_inner"), u.appendChild(h), c.appendChild(u), u.style.height = k.sf() + "px" } } }, this.loadingStart = function () { this.La(!0) }, this.loadingStop = function () { this.ib() }, this.La = function (e) { var t = e ? 0 : 100; this.callbackTimeout && window.clearTimeout(this.callbackTimeout), this.callbackTimeout = window.setTimeout(function () { b.loadingLabelVisible && b.nav.loading && (b.nav.loading.innerHTML = b.Fa(this.loadingLabelText, this.loadingLabelHtml), b.nav.loading.style.top = b.Pb() + 5 + "px", b.nav.loading.style.display = "") }, t) }, this.ib = function () { this.callbackTimeout && window.clearTimeout(this.callbackTimeout), this.nav.loading && (this.nav.loading.style.display = "none") }, this.dg = function (e) { var t = b.Ob(!0); return e < t && (e += 24), (e - t) * (60 / b.cellDuration) * b.cellHeight }, this.jd = function (e) { var t = b.Ob(!0); return e / (60 / b.cellDuration) / b.cellHeight + t }, this.eg = function () { var e = this.Yc(), t = this.initScrollPos; if (!t) { var n = this.businessBeginsHour; t = b.dg(n) } e.root = this, e.onscroll = this.Xc, b.Ea(), 0 === e.scrollTop ? e.scrollTop = t - this.Pc() : this.Xc() }, this.fg = function () { var e = b.nav.top; return !!e && (e.offsetWidth > 0 && e.offsetHeight > 0) }, this.gg = function () { var e = b.fg; return e() ? void b.hg() : void (b.Qa || (b.Qa = setInterval(function () { e() && (clearInterval(b.Qa), b.eg(), b.xb(), b.hg()) }, 100))) }, this.scrollToY = function (e) { this.Yc().scrollTop = e }, this.scrollToHour = function (e) { var t = b.dg(e); this.Yc().scrollTop = t - this.Pc() }, this.Yc = function () { return "Fixed" === this.columnWidthSpec || this.oa ? this.nav.bottomRight : this.nav.scroll }, this.onCallbackError = function (e, t) { alert("Error!\r\nResult: " + e + "\r\nContext:" + t) }, this.xb = function () { if (b.showHeader) { var e = this.tf(), n = !!this.nav.cornerRight; if (this.oa) { this.nav.unifiedCornerRight && f(this.nav.unifiedCornerRight); var i = (b.Yc(), b.nav.main.getBoundingClientRect().width), a = b.gf(); if ("100%" !== a && parseInt(a) < i) return; var r, o = DayPilot.sw(this.nav.bottomRight); b.pa ? (r = t(), r.style.position = "absolute", r.style.left = i + "px", r.style.right = i + "px", r.style.height = b.Pb() + "px", b.nav.headerParent.appendChild(r), b.nav.unifiedCornerRight = r, b.nav.header.style.width = i + "px", b.nav.allday && (b.nav.allday.style.width = i + "px")) : (this.nav.unifiedCornerRight = this.nav.header.rows[0].insertCell(-1), r = this.nav.unifiedCornerRight, r.rowSpan = this.nav.header.rows.length), r.style.width = o + "px"; var s = t(); s.className = b.ca("_cornerright"), s.setAttribute("unselectable", "on"), s.style.overflow = "hidden", s.style.height = this.Pb() + "px", s.style.position = "relative"; var l = t(); l.className = b.ca("_cornerright_inner"), s.appendChild(l), r.appendChild(s); return void (!("Fixed" === this.columnWidthSpec) && this.nav.allday && (b.rtl ? this.nav.allday.style.left = o + "px" : this.nav.allday.style.right = o + "px")) } if (e !== n) if (e) this.wf(); else { if (this.nav.fullHeader && 3 === this.nav.fullHeader.rows[0].cells.length) { var r = this.nav.fullHeader.rows[0].cells[2]; r.parentNode && r.parentNode.removeChild(r) } this.nav.cornerRight = null } var d = this.nav.cornerRight; if (d) { var o = DayPilot.sw(b.Qb()); return d && (d.style.width = o + "px"), o } } }, this.Eb = function (e) { if (e && (this.autoRefreshEnabled = !0), this.autoRefreshEnabled && !(this.va >= this.autoRefreshMaxCount)) { this.Sa(); var t = this.autoRefreshInterval; if (!t || t < 10) throw new DayPilot.Exception("The minimum autoRefreshInterval is 10 seconds"); this.autoRefreshTimeout = window.setTimeout(function () { b.ig() }, 1e3 * this.autoRefreshInterval) } }, this.Sa = function () { this.autoRefreshTimeout && window.clearTimeout(this.autoRefreshTimeout) }, this.ig = function () { if (!(h.resizing || h.moving || v.drag || h.selecting)) { var e = !1; if ("function" == typeof this.onAutoRefresh) { var t = {}; t.i = this.va, t.preventDefault = function () { this.preventDefault.value = !0 }, b.onAutoRefresh(t), t.preventDefault.value && (e = !0) } !e && this.ia() && this.commandCallBack(this.autoRefreshCommand), this.va++ } this.va < this.autoRefreshMaxCount && (this.autoRefreshTimeout = window.setTimeout(function () { b.ig() }, 1e3 * this.autoRefreshInterval)) }, this.Za = function () { b.Cb() }, this.Cb = function () { b.wb(), "Parent100Pct" === b.heightSpec && b.setHeight(parseInt(b.nav.top.clientHeight, 10)), b.xb(), b.Db(), b.Ea() }, this.jg = null, this.kg = null, b.Ra = null, this.hg = function () { var e = function () { b.Cb(), b.Xc() }; if (b.watchWidthChanges) { if ("function" == typeof ResizeObserver) { if (b.Ra) return; var t = new ResizeObserver(e); return t.observe(b.nav.top), void (b.Ra = t) } if (!b.kg) { var n = function () { return b.nav && b.nav.top ? b.jg ? (b.jg.width !== b.nav.top.offsetWidth && (b.jg.changed = !0, b.jg.counter = 0, b.jg.width = b.nav.top.offsetWidth), b.jg.changed && (b.jg.counter += 1), void (b.jg.changed && b.jg.counter > 0 && (b.jg.changed = !1, e()))) : (b.jg = {}, b.jg.counter = 0, b.jg.changed = !1, void (b.jg.width = b.nav.top.offsetWidth)) : void clearInterval(b.kg) }; this.kg = setInterval(n, 200), n() } } }, this.lg = function () { v.mg || (v.mg = !0, a(document, "mousemove", v.ng), a(document, "mouseup", v.og), i(document, DayPilot.touch.move, v.pg), a(document, DayPilot.touch.end, v.qg)), a(window, "resize", this.Za) }, this.Ke = function (e) { if (!x.active && !x.using) { e = e || window.event; var t = DayPilot.Util.mouseButton(e); if (v.editing) return void v.editing.blur(); if ("undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.hideActive(), DayPilot.Bubble.cancelShowing()), "n-resize" !== this.style.cursor && "s-resize" !== this.style.cursor || !t.left) { if (("move" === this.style.cursor || "Full" === b.moveBy && this.event.client.moveEnabled()) && t.left) { h.moving = this; var n = h.moving.helper = {}; n.oldColumn = b.Ib[this.event.part.dayIndex].id, v.Mf = DayPilot.mc(e), v.Uf = this.offsetTop; var i = DayPilot.mo3(this, e); i ? v.moveOffsetY = i.y : v.moveOffsetY = 0, b.nav.top.style.cursor = this.style.cursor } } else h.resizing = this, v.Mf = DayPilot.mc(e), v.Tf = this.offsetHeight, v.Uf = this.offsetTop, b.nav.top.style.cursor = this.style.cursor; return !1 } }, this.rg = function (e) { var t = this.ra.events, n = this.events.list[e], i = {}; for (var a in n) i[a] = n[a]; if (b.showEventStartEnd) { var r = n.start.getDatePart().getTime() === n.end.getDatePart().getTime(), o = r ? k.Lc().timePattern : k.Lc().dateTimePattern, s = n.start.toString(o), l = n.end.toString(o); i.html = b.Fa(i.text) + " (" + s + " - " + l + ")" } if ("function" == typeof this.onBeforeEventRender) { var d = {}; d.e = i, d.data = i, this.onBeforeEventRender(d) } t[e] = i }, this.sg = null, this.Qf = function (e) { function t(e, t) { return 1 - e / t } var n = h.moving || h.resizing || h.selecting, i = "Always" === b.autoScroll, a = "Drag" === b.autoScroll && n; if (i || a) { var r = b.nav.bottomRight; e.x -= r.scrollLeft, e.y -= r.scrollTop; var o = r.clientWidth, s = r.clientHeight, l = 30, d = e.x < l ? e.x : 0, c = o - e.x < l ? o - e.x : 0, u = e.y < l ? e.y : 0, f = s - e.y < l ? s - e.y : 0, v = 0, p = 0, m = 50; d && (v = -50 * t(d, l)), c && (v = m * t(c, l)), u && (p = -50 * t(u, l) / 2), f && (p = m * t(u, l) / 2), v || p ? b.tg(v, p) : b.db() } }, this.tg = function (e, t) { this.db(), this.ug(e, t) }, this.vg = function (e) { if (!e) return !1; var t = b.nav.bottomRight, n = t.scrollWidth, i = t.scrollLeft, a = t.clientWidth, r = i + a; return !(e < 0 && i <= 0) && (!(e > 0 && r >= n) && (t.scrollLeft += e, b.coords.x += e, b.wg(), !0)) }, this.xg = function (e) { if (!e) return !1; var t = b.nav.bottomRight, n = t.scrollHeight, i = t.scrollTop, a = t.clientHeight, r = i + a; return !(e < 0 && i <= 0) && (!(e > 0 && r >= n) && (t.scrollTop += e, b.coords.y += e, b.wg(), !0)) }, this.wg = function () { }, this.ug = function (e, t) { if (this.vg(e) || this.xg(t)) { var n = function (e, t) { return function () { b.ug(e, t) } }; this.yg = window.setTimeout(n(e, t), 200) } }, this.db = function () { b.yg && (window.clearTimeout(b.yg), b.yg = null) }, this.Le = {}; var x = b.Le; x.active = !1, x.start = null, x.timeout = null, x.startcell = null, x.relativeCoords = function (e) { return x.zg(e) }, x.startResizing = function (e, t, n) { x.ne(e, t, n) }, x.startMoving = function (e, t) { x._d(e, t) }, this.Le.Vf = function (e) { var t, n; e.touches ? (t = e.touches[0].pageX, n = e.touches[0].pageY) : (t = e.pageX, n = e.pageY); var i = DayPilot.abs(b.nav.main), a = { x: t - i.x, y: n - i.y }, r = b.nav.main.clientWidth / b.Ib.length, o = Math.floor(a.y / b.cellHeight); return o = DayPilot.Util.atLeast(0, o), o = DayPilot.Util.atMost(b.Sb() - 1, o), { "pageX": t, "pageY": n, "x": Math.floor(a.x / r), "y": o, "toString": function () { return "x: " + this.x + " y:" + this.y } } }, this.Le.Ag = function (e) { var t = b.nav.main.rows[e.y].cells[e.x]; x.startcell = e, b.clearSelection(), v.Hc = e.x, b.Aa.push(t), v.Ic = t, v.Ba = t, v.Ca = t, h.selecting = { "calendar": b }, b.Jc() }, this.Le.Bg = function (e) { var t = v.Hc, n = b.nav.main.rows[e.y].cells[t]; b.clearSelection(), h.selecting = { "calendar": b, "origin": "drag" }, e.y < x.startcell.y ? (b.Aa = v.Nf(n), v.Ba = b.Aa[0], v.Ca = v.Ic) : (b.Aa = v.Yd(n), v.Ba = v.Ic, v.Ca = b.Aa[0]), b.Jc() }, this.Le.detected = !1, this.Le.af = function (e) { if (!s(e)) { var t = x.Vf(e); if (!(t.x < 0 || (x.start = !0, x.detected = !0, x.active || e.touches.length > 1))) { x.using = !0, x.startCoords = t; var n = b.tapAndHoldTimeout; x.timeout = window.setTimeout(function () { switch (e.preventDefault(), x.active = !0, x.start = !1, b.timeRangeTapAndHoldHandling) { case "Select": x.Ag(t); break; case "ContextMenu": x.Ag(t), x.active = !1, b.contextMenuSelection && b.contextMenuSelection.show(b.getSelection()) } }, n) } } }, this.Le.Cg = function (e) { }, this.Le.Ef = function (e) { if (!x.active) return window.clearTimeout(x.timeout), void (x.start && !function (e) { if ("Disabled" !== b.timeRangeSelectedHandling) { b.clearSelection(), b.Aa = [e], v.Ba = e, v.Ca = e, b.Jc(); var t = b.getSelection(); t.toString = function () { return "start: " + this.start + "\nend: " + this.end }, setTimeout(function () { b.wc(t.start, t.end, t.resource) }, 10) } }(this)); e.preventDefault(), e.stopPropagation(), x.startcell = null, x.start = !1; var t = b.getSelection(); t.toString = function () { return "start: " + this.start + "\nend: " + this.end }, b.wc(t.start, t.end, t.resource), window.setTimeout(function () { x.active = !1 }, 500) }, this.Le._d = function (e, t) { h.moving = e, (h.moving.helper = {}).oldColumn = b.Ib[e.event.part.dayIndex].id, v.Mf = t, v.Uf = this.offsetTop; var n = DayPilot.abs(e); v.moveOffsetY = t.y - n.y, v.movingShadow || (v.movingShadow = b.Gb(h.moving, !b.za.ie), v.movingShadow.style.width = v.movingShadow.parentNode.offsetWidth + 1 + "px") }, this.Le.ne = function (e, t, n) { h.resizing = e, e.dpBorder = t, v.Mf = n, v.Tf = e.offsetHeight, v.Uf = e.offsetTop }, this.Le.Dg = function (e) { b.Lf(e) }, this.Le.Eg = function () { var e = b.coords, t = b.cellHeight, n = 0, i = v.moveOffsetY; i || (i = t / 2); var a = Math.floor((e.y - i - n + t / 2) / t) * t + n; a < n && (a = n); var r = (b.nav.main, b.Ge()), o = parseInt(v.movingShadow.style.height); a + o > r && (a = r - o), v.movingShadow.style.top = a + "px", v.movingShadow.allowed = !0; var s = b.Hb(b.coords.x); s < 0 && (s = 0); var l = b.nav.events; s < l.rows[0].cells.length && s >= 0 && v.movingShadow.column !== s && (v.movingShadow.column = s, v.moveShadow(l.rows[0].cells[s])) }, this.Le.onEventTouchStart = function (e) { if (!x.active && !s(e)) { e.stopPropagation(), x.preventEventTap = !1, x.using = !0, x.startCoords = x.Vf(e); var t = this, n = e.touches ? e.touches[0].pageX : e.pageX, i = e.touches ? e.touches[0].pageY : e.pageY, a = { x: n, y: i, div: this }; b.coords = x.zg(e); var r = b.tapAndHoldTimeout; x.timeout = window.setTimeout(function () { var n = t.event; switch (x.active = !0, b.eventTapAndHoldHandling) { case "Move": n.client.moveEnabled() && x._d(t, a); break; case "ContextMenu": var i = n.client.contextMenu(); DayPilot.Menu && DayPilot.Menu.touchPosition(e), i ? i.show(n) : b.contextMenu && b.contextMenu.show(n) } }, r) } }, this.Le.bf = function (e) { if (!s(e)) { if (x.start = !1, x.timeout) { var t = x.Vf(e); t && x.startCoords && (t.pageX === x.startCoords.pageX && t.pageY === x.startCoords.pageY || window.clearTimeout(b.Le.timeout)) } if (h.moving && v.movingShadow) return e.preventDefault(), b.coords = x.zg(e), void x.Eg(); if (h.resizing) { e.preventDefault(); var n = e.touches ? e.touches[0] : e, t = { x: n.pageX, y: n.pageY }; return void x.Dg(t) } if (x.startcell) { if (e.preventDefault(), !x.active) return void window.clearTimeout(x.timeout); var t = x.Vf(e); x.Bg(t) } x.preventEventTap = !0 } }, this.Le.zg = function (e) { var t = b.nav.main, n = e.touches ? e.touches[0].pageX : e.pageX, i = e.touches ? e.touches[0].pageY : e.pageY, a = DayPilot.abs(t); return { x: n - a.x, y: i - a.y, "toString": function () { return "x: " + this.x + ", y:" + this.y } } }, this.Le.cf = function (e) { if (!s(e)) if (h.moving) { x.active = !1, e.preventDefault(), e.stopPropagation(); var t = v.movingShadow.offsetTop, n = h.moving.event, i = n.calendar; i.Sc(v.movingShadow); var a = v.movingShadow.column, r = v.movingShadow; if (o(h.moving, i.ca("_event_moving_source")), h.moving = null, v.movingShadow = null, !r.allowed) return void i.pc(); n.calendar.oc(n, a, t, e, v.drag) } else if (x.startcell) { if (!x.active) return void window.clearTimeout(x.timeout); e.preventDefault(), x.startcell = null; var l = i.getSelection(); l.toString = function () { return "start: " + this.start + "\nend: " + this.end }, i.wc(l.start, l.end, l.resource), window.setTimeout(function () { x.active = !1 }, 500) } }, this.Le.onEventTouchMove = function (e) { x.preventEventTap = !0 }, this.Le.onEventTouchEnd = function (e) { if (!s(e)) { if (!x.active) { if (x.preventEventTap) return; return window.clearTimeout(x.timeout), void b.Ub(this, !1, !1, e) } return x.active = !1, x.timeout ? void window.clearTimeout(x.timeout) : void 0 } }, this.Ie = function (e) { var t = 5, n = 10, i = "Top" === b.moveBy; if ("undefined" != typeof v) { var a = DayPilot.mo3(this, e); if (a) { b.eventOffset = a; var o = this; if (o.active || r(o, b.ca("_event_hover")), !h.resizing && !h.moving) { var s = this.isFirst, l = this.isLast; if ("Disabled" !== b.moveBy && "None" !== b.moveBy && (!i && a.x <= n && this.event.client.moveEnabled() ? s ? this.style.cursor = "move" : this.style.cursor = "not-allowed" : !i && a.y <= t && this.event.client.resizeEnabled() ? s ? (this.style.cursor = "n-resize", this.dpBorder = "top") : this.style.cursor = "not-allowed" : i && a.y <= n && this.event.client.moveEnabled() ? this.style.cursor = "move" : this.offsetHeight - a.y <= t && this.event.client.resizeEnabled() ? l ? (this.style.cursor = "s-resize", this.dpBorder = "bottom") : this.style.cursor = "not-allowed" : h.resizing || h.moving || (this.event.client.clickEnabled() ? this.style.cursor = "pointer" : this.style.cursor = "default"), "undefined" != typeof DayPilot.Bubble && b.bubble && "Disabled" !== b.eventHoverHandling && ("default" === this.style.cursor || "pointer" === this.style.cursor))) { this.Fg && a.x === this.Fg.x && a.y === this.Fg.y || (this.Fg = a, b.bubble.showEvent(this.event)) } } } } }, this.Je = function (e) { o(this, b.ca("_event_hover")), b.bubble && b.bubble.hideOnMouseOut(), DayPilot.Areas.hideAreas(this, e) }, this.Gg = null, this.zb = function () { if (this.showCurrentTime) { this.Hg(); var e = (new DayPilot.Date).addMinutes(b.showCurrentTimeOffset); if ("Full" === b.showCurrentTimeMode) this.Ig(e); else { if ("Day" !== b.showCurrentTimeMode) throw new DayPilot.Exception("Invalid DayPilot.Calendar.showCurrentTimeMode value: " + b.showCurrentTimeMode); this.Jg(e) } if (this.nav.events && !this.Gg) { this.Gg = setTimeout(function () { b.Gg = null, b.zb() }, 3e4) } } }, this.Hg = function () { f(b.elements.separators), b.elements.separators = [] }, this.Jg = function (e) { var n = e.getTime(), i = b.nav.events; if (i) for (var a = 0; a < b.Ib.length; a++) { var r = b.Ib[a], o = b.Kb(!0), s = new DayPilot.Date(r.start).addHours(this.Ob(!0)), l = s.getTime(), d = s.addTime(o), c = d.getTime(); if (l <= n && n <= c) { var u = this.Oc(e, r.start).top - 1 - b.Pc(), h = i.rows[0].cells[a], f = h.separators, v = t(); v.style.position = "absolute", v.style.top = u + "px", v.style.height = "1px", v.style.left = "0px", v.style.right = "0px", v.className = b.ca("_now"), f.insertBefore(v, f.firstChild), b.elements.separators.push(v) } } }, this.Ig = function (e) { var n = e.getTime(); if (b.nav.events) { var i = b.Ib[0]; if (i) for (var a = i.start.getDatePart().addTime(e.getTimePart()), r = this.Oc(a, i.start).top - 1, o = 0; o < b.Ib.length; o++) { var i = b.Ib[o], s = b.Kb(!0), l = new DayPilot.Date(i.start).addHours(this.Ob(!0)), d = l.getTime(), c = l.addTime(s), u = c.getTime(); if (d <= n && n <= u) { var h = t(); return h.style.position = "absolute", h.style.top = r + "px", h.style.height = "1px", h.style.left = "0px", h.style.right = "0px", h.className = b.ca("_now"), b.nav.events.appendChild(h), void b.elements.separators.push(h) } } } }, this.ob = function (e, t) {
                if (e ? this.events.list = e : e = this.events.list, e) {
                    var n = t && t.preloadOnly; this.ye = {}, this.ye.events = [], this.ye.lines = []; var i = e.length, a = this.Kb(!0); this.ra.pixels = {}, this.ra.Ne = []; var r = []; this.cd = [], this.gc = 1e4, this.Nb = 0, this.startDate = new DayPilot.Date(this.startDate); for (var o = 0; o < i; o++) { var s = e[o]; if ("object" != typeof s) throw new DayPilot.Exception("Event data item must be an object"); if (!s.start) throw new DayPilot.Exception("Event data item must specify 'start' property"); s.start = new DayPilot.Date(s.start), s.end = new DayPilot.Date(s.end) } if (!n && ("function" == typeof this.onBeforeEventRender || b.showEventStartEnd)) for (var o = 0; o < i; o++)this.rg(o); for (var l = "Resources" === this.viewType, d = this.Id(), c = d.start, u = d.end, o = 0; o < this.Ib.length; o++) {
                        var h = {}; h.minEnd = 1e6, h.maxStart = -1, this.cd.push(h); var f = this.Ib[o]; f.events = [], f.lines = [], f.blocks = []; var v = new DayPilot.Date(f.start).addHours(this.Ob(!0)), p = v.getTime(), m = v.addTime(a), g = m.getTime(); l && (c = v.getDatePart(), u = v.addDays(1)); for (var y = 0; y < i; y++)if (!r[y]) {
                            var s = e[y], w = null; if (n || "function" != typeof b.onBeforeEventRender || (w = b.ra.events[y]), w) { if (w.hidden) continue } else if (s.hidden) continue; var x = s.start, C = s.end, _ = x.getTime(), D = C.getTime(); if (!(D < _)) if (s.allday) {
                                var S = !1; if (S = _ === D ? !(D < c.getTime() || _ >= u.getTime()) : "Date" === b.allDayEnd ? !(D < c.getTime() || _ >= u.getTime()) : !(D <= c.getTime() || _ >= u.getTime()),
                                    l && (S = S && (s.resource === f.id || "*" === f.id)), S) { var E = new DayPilot.Event(s, this); if (E.part.start = c.getTime() < _ ? x : c, E.part.end = u.getTime() > D ? C : u, E.part.colStart = DayPilot.DateUtil.daysDiff(c, E.part.start), E.part.colWidth = DayPilot.DateUtil.daysSpan(E.part.start, E.part.end) + 1, l && (E.part.colStart = o, E.part.colWidth = 1), "function" == typeof b.onEventFilter && b.events.Kg) { var T = {}; if (T.filter = b.events.Kg, T.filterParam = T.filter, T.visible = !0, T.e = E, b.onEventFilter(T), !T.visible) continue } this.ye.events.push(E), n || ("function" == typeof this.onBeforeEventRender || b.showEventStartEnd) && (E.cache = this.ra.events[y]), r[y] = !0, !l || E.part.start.getTime() === _ && E.part.end.getTime() === D || (r[y] = !1) }
                            } else { var w = null; if (n || "function" != typeof b.onBeforeEventRender || (w = b.ra.events[y]), w) { if (w.hidden) continue } else if (s.hidden) continue; var S = !1; if (S = l ? f.id === s.resource && !(D <= p || _ >= g) : !(D <= p || _ >= g) || D === _ && _ === p) { var E = new DayPilot.Event(s, b); E.part.dayIndex = o, E.part.start = p < _ ? x : v, E.part.end = g > D ? C : m; var A = this.Oc(E.part.start, f.start), H = this.Oc(E.part.end, f.start), M = A.top, R = H.top; if (M === R && (A.cut || H.cut)) continue; E.part.box = k.Lg(D - _); var B = 0; if (E.part.box) { var P = H.boxBottom; E.part.top = Math.floor(M / this.cellHeight) * this.cellHeight + B + 1, E.part.height = Math.max(Math.ceil(P / this.cellHeight) * this.cellHeight - E.part.top, this.cellHeight - 1) + 1, E.part.barTop = Math.max(M - E.part.top - 1, 0), E.part.barHeight = Math.max(R - M - 2, 1) } else E.part.top = M + B, E.part.height = Math.max(R - M, 0), E.part.barTop = 0, E.part.barHeight = Math.max(R - M - 2, 1); if ("function" == typeof b.onEventFilter && b.events.Kg) { var T = {}; if (T.filter = b.events.Kg, T.visible = !0, T.e = E, b.onEventFilter(T), !T.visible) continue } var x = E.part.top, C = E.part.top + E.part.height; x > h.maxStart && (h.maxStart = x), C < h.minEnd && (h.minEnd = C), x < this.gc && (this.gc = x), C > this.Nb && (this.Nb = C), f.events.push(E), n || ("function" == typeof this.onBeforeEventRender || b.showEventStartEnd) && (E.cache = this.ra.events[y]), E.part.start.getTime() === _ && E.part.end.getTime() === D && (r[y] = !0), b.ra.Ne.push(E) } }
                        }
                    } for (var o = 0; o < this.Ib.length; o++) { var f = this.Ib[o]; f.events.sort(this.Mg); for (var y = 0; y < f.events.length; y++) { var s = f.events[y]; f.Sd(s) } for (var y = 0; y < f.blocks.length; y++) { var N = f.blocks[y]; N.events.sort(this.Ng); for (var I = 0; I < N.events.length; I++) { var s = N.events[I]; N.Ud(s) } } } this.ye.events.sort(this.Ng), this.ye.Ud = function (e) { for (var t = 0; t < this.lines.length; t++) { var n = this.lines[t]; if (n.Vd(e.part.colStart, e.part.colWidth)) return n.push(e), t } var n = []; return n.Vd = function (e, t) { for (var n = e + t - 1, i = this.length, a = 0; a < i; a++) { var r = this[a]; if (!(n < r.part.colStart || e > r.part.colStart + r.part.colWidth - 1)) return !1 } return !0 }, n.push(e), this.lines.push(n), this.lines.length - 1 }; for (var o = 0; o < this.ye.events.length; o++) { var s = this.ye.events[o]; this.ye.Ud(s) } var L = Math.max(this.ye.lines.length, 1); this.ra.allDayHeaderHeight = L * (k.ze() + 2) + 2
                }
            }, this.Mg = function (e, t) { if (!(e && t && e.start && t.start)) return 0; var n = e.start().ticks - t.start().ticks; return 0 !== n ? n : t.end().ticks - e.end().ticks }, this.Ng = function (e, t) { if (!e || !t) return 0; if (!(e.data && t.data && e.data.sort && t.data.sort && 0 !== e.data.sort.length && 0 !== t.data.sort.length)) return b.Mg(e, t); for (var n = 0, i = 0; 0 === n && "undefined" != typeof e.data.sort[i] && "undefined" != typeof t.data.sort[i];)n = e.data.sort[i] === t.data.sort[i] ? 0 : "number" == typeof e.data.sort[i] && "number" == typeof t.data.sort[i] ? e.data.sort[i] - t.data.sort[i] : b.Og(e.data.sort[i], t.data.sort[i], b.sortDirections[i]), i++; return n }, this.Og = function (e, t, n) { var i = "desc" !== n, a = i ? -1 : 1, r = -a; if (null === e && null === t) return 0; if (null === t) return r; if (null === e) return a; var o = []; return o[0] = e, o[1] = t, o.sort(), e === o[0] ? a : r }, this.Pg = function (e) { for (var t = 0; t < b.elements.events.length; t++) { var n = b.elements.events[t]; if (n.event === e || n.event.data === e.data) return n } return null }, this.events.find = function (e) { if (!b.events.list || "undefined" == typeof b.events.list.length) return null; if ("function" == typeof e) { for (var t = e, n = 0; n < b.events.list.length; n++) { var i = new DayPilot.Event(b.events.list[n], b); if (t(i)) return i } return null } for (var a = b.events.list.length, n = 0; n < a; n++)if (b.events.list[n].id === e) return new DayPilot.Event(b.events.list[n], b); return null }, this.events.findRecurrent = function (e, t) { if (!b.events.list || "undefined" == typeof b.events.list.length) return null; for (var n = b.events.list.length, i = 0; i < n; i++)if (b.events.list[i].recurrentMasterId === e && b.events.list[i].start.getTime() === t.getTime()) return new DayPilot.Event(b.events.list[i], b); return null }, this.events.all = function () { for (var e = [], t = 0; t < b.events.list.length; t++) { var n = new DayPilot.Event(b.events.list[t], b); e.push(n) } return u(e) }, this.events.edit = function (e) { function t() { var t = b.Pg(e); t && b.Vb(t) } t() }, this.events.update = function (e, t) { if ("object" == typeof e && !(e instanceof DayPilot.Event)) { var n = b.events.find(e.id); if (!n) throw new DayPilot.Exception("The event to be updated was not found"); return b.events.remove(n), void b.events.add(e) } var i = {}; i.oldEvent = new DayPilot.Event(e.copy(), b), i.newEvent = new DayPilot.Event(e.temp(), b); var a = new DayPilot.Action(b, "EventUpdate", i, t); return e.commit(), b.wa && b.Bd({ "eventsOnly": !0 }), b.Qg.notify(), a }, this.events.remove = function (e, t) { if ("string" == typeof e || "number" == typeof e) { var n = e, i = b.events.find(n); if (!i) throw new DayPilot.Exception("The event to be removed was not found"); return void b.events.remove(i) } var a = {}; a.e = new DayPilot.Event(e.data, b); var r = new DayPilot.Action(b, "EventRemove", a, t), o = DayPilot.indexOf(b.events.list, e.data); return b.events.list.splice(o, 1), b.wa && b.Bd({ "eventsOnly": !0 }), b.Qg.notify(), r }, this.events.add = function (e, t) { e instanceof DayPilot.Event || (e = new DayPilot.Event(e)), e.calendar = b, b.events.list || (b.events.list = []), b.events.list.push(e.data); var n = {}; n.e = e; var i = new DayPilot.Action(b, "EventAdd", n, t); return b.wa && b.Bd({ "eventsOnly": !0 }), b.Qg.notify(), i }, this.events.filter = function (e) { b.events.Kg = e, b.Bd({ "eventsOnly": !0 }) }, this.events.load = function (e, t, n) { var i = function (e) { var t = {}; t.exception = e.exception, t.request = e.request, "function" == typeof n && n(t) }, a = function (e) { var n, a = e.request; try { n = JSON.parse(a.responseText) } catch (e) { var r = {}; return r.exception = e, void i(r) } if (DayPilot.isArray(n)) { var o = {}; if (o.preventDefault = function () { this.preventDefault.value = !0 }, o.data = n, "function" == typeof t && t(o), o.preventDefault.value) return; b.events.list = n, b.wa && b.Bd({ "eventsOnly": !0 }) } }; if (b.eventsLoadMethod && "POST" === b.eventsLoadMethod.toUpperCase()) DayPilot.ajax({ "method": "POST", "data": { "start": b.visibleStart().toString(), "end": b.visibleEnd().toString() }, "url": e, "success": a, "error": i }); else { var r = e, o = "start=" + b.visibleStart().toString() + "&end=" + b.visibleEnd().toString(); r += r.indexOf("?") > -1 ? "&" + o : "?" + o, DayPilot.ajax({ "method": "GET", "url": r, "success": a, "error": i }) } }, this.events.forRange = function (e, t) { return e = new DayPilot.Date(e), t = new DayPilot.Date(t), u(b.events.list).filter(function (n) { return c(e, t, new DayPilot.Date(n.start), new DayPilot.Date(n.end)) }).map(function (e) { return new DayPilot.Event(e, b) }) }, this.events.Mc = function (e) { if (!e) throw new DayPilot.Exception("Error checking overlap for null (internal error)"); var t = e instanceof DayPilot.Event ? e.data : e, n = new DayPilot.Date(t.start), i = new DayPilot.Date(t.end); return !!u(b.events.list).find(function (e) { return !b.xd(t, e) && (("Resources" != b.viewType || t.resource === e.resource) && (!e.allday && c(n, i, new DayPilot.Date(e.start), new DayPilot.Date(e.end)))) }) }, this.xd = function (e, t) { return DayPilot.Util.isSameEvent(e, t) }, this.Y = {}, this.Y.reactDOM = null, this.Y.react = null, this.Y.Ce = function () { if (!b.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM") }, this.Y.X = function (e, t) { var n = b.Y.reactDOM; if ("function" == typeof n.createRoot) { var i = t.ka; i || (i = n.createRoot(t), t.ka = i), i.render(e) } else n.render(e, t) }, this.Y.ja = function (e) { var t = b.Y.reactDOM; if ("function" == typeof t.createRoot) { var n = e.ka; setTimeout(function () { n.unmount() }, 0) } else t.unmountComponentAtNode(e) }, this.queue = {}, this.queue.list = [], this.queue.list.ignoreToJSON = !0, this.queue.add = function (e) { if (e) { if (!e.isAction) throw new DayPilot.Exception("DayPilot.Action object required for queue.add()"); b.queue.list.push(e) } }, this.queue.notify = function (e) { var t = {}; t.actions = b.queue.list, b.Ka("Notify", t, e, "Notify"), b.queue.list = [] }, this.queue.clear = function () { b.queue.list = [] }, this.queue.pop = function () { return b.queue.list.pop() }, this.Bd = function (e) { if (this.wa && this.Ib) { var e = e || {}, t = !e.eventsOnly; b.Ea(), t ? (this.ia() || (b.cellProperties = {}), b.Ha.Rg(), b.Ta(), b.Sg(), b.mb(), b.Kd(), b.ob(), b.qb(), b.rb(), b.pb(), b.sb(), b.tb(), b.Da(), b.ub(), b.Jc(), b.vb(), b.wb(), b.xb(), b.yb(), b.Tg(), b.Ab(), b.Bb(), b.zb(), b.Db()) : (b.Ta(), b.ob(), b.pb(), b.Ab(), b.Bb(), b.Db()), this.visible ? this.show() : this.hide() } }, this.update = function (e) { if (!b.wa) throw new DayPilot.Exception("You are trying to update a DayPilot.Calendar instance that hasn't been initialized yet."); if (b.xa) throw new DayPilot.Exception("You are trying to update a DayPilot.Calendar instance that has been disposed."); if (!b.wa) return void b.Ug(e); if (DayPilot.Util.isOnlyProperty(e, "events")) return b.events.list = e.events, void b.Bd({ "eventsOnly": !0 }); if (this.Ug(e), this.Bd(), "function" == typeof b.onAfterRender) { var t = {}; t.isUpdate = !0, t.data = null, b.onAfterRender(t) } }, this.Tg = function () { var e = b.ca("_main"); if (b.cssClass && (e += " " + b.cssClass), b.rtl && (e += " " + b.ca("_direction_rtl")), b.nav.top.className !== e) { b.nav.top.className = e; var t = b.nav.corner; t.className = b.ca("_corner"), t.firstChild.className = b.ca("_corner_inner"); var n = b.nav.unifiedCornerRight; n && (n.firstChild.className = b.ca("_cornerright"), n.firstChild.firstChild.className = b.ca("_cornerright_inner")) } }, this.show = function () { b.visible = !0, b.nav.top.style.display = "", b.Cb(), b.Xc() }, this.hide = function () { b.visible = !1, b.nav.top.style.display = "none" }, this.Qg = {}, this.Qg.scope = null, this.Qg.notify = function () { b.Qg.scope && b.Qg.scope["$apply"]() }, this.debug = new DayPilot.Debug(this), this.Hb = function (e, t) { if (e < 0) return 0; b.rtl && (e = b.nav.main.offsetWidth - e); var n = 0, i = b.nav.events.rows[0].cells; if (!DayPilot.browser.ie || t) { for (var a = 0; a < i.length; a++) { var r = i[a], o = r.offsetWidth; if (n += o, e < n) return a } return i.length - 1 } for (var a = i.length - 1; a >= 0; a--) { var r = i[a], o = r.offsetWidth; if (n += o, e < n) return a } return null }, this.Oc = function (e, t) { t || (t = this.startDate); var n = t.getTime(), i = e.getTime(), a = this.ra.pixels[i + "_" + n]; if (a) return a; this.Ob(!0); n = t.addHours(this.Ob(!0)).getTime(); var r = 60 * this.cellDuration * 1e3, o = i - n, s = o % r, l = o - s, d = l + r; 0 === s && (d = l); var c = {}; return c.cut = !1, c.top = this.Gf(o), c.boxTop = this.Gf(l), c.boxBottom = this.Gf(d), this.ra.pixels[i + "_" + n] = c, c }, this.Gf = function (e) { return Math.floor(this.cellHeight * e / (6e4 * this.cellDuration)) }, this.Sg = function () { this.startDate = new DayPilot.Date(this.startDate).getDatePart(), this.sf = k.ze() + 4 }, this.pb = function () { var e = this.Pb(), t = this.Se(); if (this.nav.corner && (this.nav.corner.style.height = e + "px"), this.nav.cornerRight && (this.nav.cornerRight.style.height = e + "px"), this.nav.mid && (this.nav.mid.style.height = e + "px"), this.showAllDayEvents && this.nav.header) for (var n = this.nav.header.rows[this.nav.header.rows.length - 1], i = 0; i < n.cells.length; i++) { var a = n.cells[i]; a.firstChild.style.height = k.sf() + "px" } this.nav.upperRight && (this.nav.upperRight.style.height = e + "px"), this.nav.scroll.style.top = e + "px", this.nav.top.style.height = t + "px" }, this.wb = function () { var e = this.Te(); this.nav.scroll && e > 0 && (this.nav.scroll.style.height = e + "px", this.Zc = b.nav.scroll.clientHeight, this.nav.bottomLeft && (this.nav.bottomLeft.style.height = e + "px"), this.nav.bottomRight && (this.nav.bottomRight.style.height = e + "px")), "Parent100Pct" === this.heightSpec ? this.nav.top.style.height = "100%" : this.nav.top.style.height = this.Se() + "px" }, this.setHeight = function (e) { "Parent100Pct" !== this.heightSpec && (this.heightSpec = "Fixed"), this.height = e - this.Pb(), this.wb() }, this.Vg = function (e) { var n = t(); n.style.position = "absolute", n.style.top = "-2000px", n.style.left = "-2000px", n.className = this.ca(e), document.body.appendChild(n); var i = n.offsetHeight, a = n.offsetWidth; document.body.removeChild(n); var r = {}; return r.height = i, r.width = a, r }, this.Ha = {}; var k = this.Ha; k.le = function () { return "Disabled" !== b.columnResizeHandling }, k.Zd = function () { return "Disabled" !== b.columnMoveHandling }, k.we = function (e) { return b.columnResizeHandling === e }, k.ke = function (e) { return b.columnMoveHandling === e }, k.Ga = function () { return "Disabled" !== b.xssProtection }, k.Lc = function () { return DayPilot.Locale.find(b.locale) }, k.Jd = function () { return "number" == typeof b.weekStarts ? b.weekStarts : k.Lc().weekStarts }, k.Kc = function () { return "Auto" !== b.timeFormat ? b.timeFormat : k.Lc().timeFormat }, k.Lg = function (e) { return "Always" === b.useEventBoxes || "Never" !== b.useEventBoxes && e < 60 * b.cellDuration * 1e3 }, k.fc = function () { var e; if ("Immediate" === b.notifyCommit) e = "Notify"; else { if ("Queue" !== b.notifyCommit) throw new DayPilot.Exception("Invalid notifyCommit value: " + b.notifyCommit); e = "Queue" } return e }, k.Gd = function () { return "Auto" === b.headerLevels ? b.Cd + 1 : b.headerLevels }, k.Rg = function () { delete b.ra.allDayEventHeight, delete b.ra.allDayHeaderHeight, delete b.ra.headerHeight }, k.ze = function () { if (b.ra.allDayEventHeight) return b.ra.allDayEventHeight; var e = b.Vg("_alldayevent_height").height; return e || (e = b.allDayEventHeight), b.ra.allDayEventHeight = e, e }, k.sf = function () { if (b.ra.allDayHeaderHeight) return b.ra.allDayHeaderHeight; var e = b.sf; return b.ra.allDayHeaderHeight = e, e }, k.Ae = function () { if (b.ra.headerHeight) return b.ra.headerHeight; var e = b.Vg("_header_height").height; return e || (e = b.headerHeight), b.ra.headerHeight = e, e }, this.exportAs = function (e, t) { if (!b.fg()) throw new DayPilot.Exception("DayPilot.Calendar.exportAs(): The instance must be visible during export."); var n = C.Wg(e, t); return new DayPilot.Export(n) }, this.Xg = {}; var C = this.Xg; C.A = null, C.Yg = null, C.Wg = function (e, t) { "object" == typeof e && (t = e, e = null); var t = t || {}, e = e || t.format || "svg", n = t.scale || 1; if ("config" !== e) { "jpg" === e.toLowerCase() && (e = "jpeg"); var i = t.area || "viewport"; C.A = t, C.Yg = i; var a, o = C.Zg(), s = C.$g(); switch (e.toLowerCase()) { case "svg": a = new DayPilot.Svg(o, s); break; case "png": a = new DayPilot.Canvas(o, s, "image/png", n); break; case "jpeg": a = new DayPilot.Canvas(o, s, "image/jpeg", n, t.quality); break; default: throw new DayPilot.Exception("Export format not supported: " + e) }var d = C._g(), c = new DayPilot.StyleReader(b.nav.top).getBackColor(), h = new DayPilot.StyleReader(b.nav.top).get("border-top-color"); "0px" !== new DayPilot.StyleReader(b.nav.top).get("border-top-width") || (h = "white"); var v = new DayPilot.StyleReader(b.nav.corner.firstChild).getBackColor(c), p = b.nav.hourTable.rows[0].cells[0].firstChild.firstChild, m = p.getElementsByClassName(b.ca("_rowheader_minutes"))[0], g = new DayPilot.StyleReader(p).get("border-right-color"), y = new DayPilot.StyleReader(p).getBackColor(c), w = new DayPilot.StyleReader(p).getFont(), x = w, _ = 0; m && (x = new DayPilot.StyleReader(p.firstChild.childNodes[1]).getFont() || x, _ = new DayPilot.StyleReader(p.firstChild.childNodes[1]).getPx("padding-right") || _); var D = new DayPilot.StyleReader(p).get("color"), S = b.nav.header.rows[0].cells[0].firstChild.firstChild, E = new DayPilot.StyleReader(S).getBackColor(c), T = new DayPilot.StyleReader(S).getFont(), A = new DayPilot.StyleReader(S).get("color"), H = new DayPilot.StyleReader(S).get("border-right-color"), M = b.nav.header.rows[b.nav.header.rows.length - 1].cells[0].firstChild, R = M.firstChild, B = new DayPilot.StyleReader(M).getBackColor(c), P = new DayPilot.StyleReader(R).getBackColor(B), N = b.nav.main.rows[0].cells[0].firstChild.firstChild, I = new DayPilot.StyleReader(N).get("border-right-color"), N = C.ah(), L = new DayPilot.StyleReader(N.firstChild).getBackColor(); r(N, b.ca("_cell_business")); var z = new DayPilot.StyleReader(N.firstChild).getBackColor(); f(N); var O = C.bh(), U = 0; U = "Fixed" === b.columnWidthSpec ? b.columnWidth : d.gridContent.w / b.Ib.length, a.fillRect(d.main, "white"), a.fillRect(d.main, c); var j = d.corner.h - O; DayPilot.list.for(b.jf(), function (e) { return b.pf(e) }).forEach(function (e) { var t = b.mf(), n = e.hour, i = e.sup, r = e.text ? e.text : n, o = 0; m && (o = 20); var s = { "x": 0, "y": j, "w": d.grid.x + 1, "h": t + 1 }, l = { "x": 0, "y": j, "w": d.grid.x + 1 - o, "h": t + 1 }, c = { "x": l.w, "y": j, "w": o - _ - 1, "h": t + 1 }, u = y; a.fillRect(s, u), a.text(l, r, w, D, "right"), m && a.text(c, i, x, D, "right"), a.rect(s, g), j += t }); var W = 60 * b.cellDuration * 1e3, F = d.grid.x; u(b.Ib).forEach(function (e, t) { var n = U, i = d.grid.y - O; DayPilot.list.for(b.Sb()).forEach(function (o, s) { var d = b.Df(t, s) || {}, c = null; if (d.cssClass) { var u = C.ah(); r(u, d.cssClass), c = new DayPilot.StyleReader(u.firstChild).getBackColor(), f(u) } var h = b.cellHeight, v = { "x": F, "y": i, "w": n + 1, "h": h + 1 }, p = d.business, m = {}; m.cell = {}, m.cell.start = e.start.addTime(s * W).addHours(b.Ob()), m.cell.end = m.cell.start.addTime(W), m.cell.resource = e.id, l(d, m.cell, ["cssClass", "html", "backImage", "backRepeat", "backColor", "business"]), m.backColor = c || (p ? z : L), "function" == typeof b.onBeforeCellExport && b.onBeforeCellExport(m), a.fillRect(v, m.backColor), a.rect(v, I), i += h }), F += n }); var Y = d.grid.x; u(b.Ib).forEach(function (e) { u(e.events).forEach(function (e) { var t = e.cache || e.data, n = C.ch(); n.className += " " + t.cssClass; var i = n.firstChild, r = n.childNodes[1], o = new DayPilot.StyleReader(i).getBackColor(), s = new DayPilot.StyleReader(i.firstChild).getBackColor(), c = new DayPilot.StyleReader(i.firstChild).getPx("width"), h = new DayPilot.StyleReader(r).get("border-right-color"), v = new DayPilot.StyleReader(r).getFont(), p = new DayPilot.StyleReader(r).get("color"), m = new DayPilot.StyleReader(r).getBackColor(), g = {}; g.left = new DayPilot.StyleReader(r).getPx("padding-left"), g.right = new DayPilot.StyleReader(r).getPx("padding-right"), g.top = new DayPilot.StyleReader(r).getPx("padding-top"), g.bottom = new DayPilot.StyleReader(r).getPx("padding-bottom"), f(n); var y = Y + U * e.part.left / 100, w = (U - b.columnMarginRight) * e.part.width / 100, x = e.part.top + d.grid.y - b.Pc() - O, k = e.part.height, _ = t.backColor || m, D = t.barColor || s, S = t.barBackColor || o, E = t.borderColor || h, T = {}; T.e = e, T.text = e.text ? e.text() : e.client.html(), T.fontSize = v.size, T.fontFamily = v.family, T.fontStyle = v.style, T.fontColor = p, T.backColor = _, T.borderColor = E, T.horizontalAlignment = "left", T.barWidth = c, T.barColor = D, T.barBackColor = S, "function" == typeof b.onBeforeEventExport && b.onBeforeEventExport(T); var A = { "x": y, "y": x, "w": w + 1, "h": k + 1 }, H = l(A), M = l(H); if (M.x += g.left, M.w -= g.left + g.right, M.y += g.top, M.h -= g.top + g.bottom, a.fillRect(A, T.backColor), e.client.barVisible()) { var R = { "x": A.x, "y": A.y, "w": T.barWidth, "h": A.h }, B = { "x": A.x, "y": A.y + 1 + e.part.barTop, "w": T.barWidth, "h": e.part.barHeight + 1 }; a.fillRect(R, T.barBackColor), a.fillRect(B, T.barColor) } a.text(M, T.text, { "size": T.fontSize, "family": T.fontFamily, "style": T.fontStyle }, T.fontColor, T.horizontalAlignment), a.rect(A, T.borderColor); var y = A.x, P = A.x + A.w - 2, x = A.y; u(t.areas).forEach(function (t) { if (DayPilot.Areas.isVisible(t)) { var n = t.left; t.start && (n = b.getPixels(new DayPilot.Date(t.start)).left - e.part.left); var i = t.width || t.w, r = t.height || t.h; n || (n = P - i - y), t.right ? i = e.part.width - t.right - n : t.end && (i = b.getPixels(new DayPilot.Date(t.end)).left - t.left - e.part.left + 1); var o = t.top; "number" == typeof t.bottom && (r = e.part.height - t.bottom - o); var s = { "x": y + n, "y": x + o, "w": i, "h": r }; if (t.backColor && a.fillRect(s, t.backColor), t.image) { var l = new Image; l.src = t.image, a.image(s, l) } else t.html && a.text(s, t.html, { "size": T.fontSize, "family": T.fontFamily, "style": T.fontStyle }, t.fontColor || T.fontColor, null, t.padding) } }) }), Y += U }), a.fillRect(d.corner, v); var q = 1; return "Fixed" !== b.columnWidthSpec && (q = d.gridContent.w / 100), DayPilot.list.for(k.Gd()).forEach(function (e) { var t = d.gridContent.x, n = b.headerHeight * e, i = b.Fd(e + 1), r = b.xe(e); u(i).forEach(function (i, o) { var s = {}; s.text = DayPilot.Util.stripTags(i.html), s.horizontalAlignment = "center", s.verticalAlignment = "center", s.backColor = i.backColor || E, s.fontSize = T.size, s.fontFamily = T.family, s.fontStyle = T.style, s.fontColor = A, s.header = {}, s.header.level = e, l(i, s.header, ["id", "start", "name", "html", "backColor"]), "function" == typeof b.onBeforeHeaderExport && b.onBeforeHeaderExport(s); var d = 0 === r.length, c = d ? U : r[o].width * q, u = d ? t : t + r[o].left * q, h = b.headerHeight, f = { "x": u, "y": n, "w": c + 1, "h": h + 1 }; a.fillRect(f, s.backColor), a.rect(f, H), a.text(f, s.text, { "size": s.fontSize, "family": s.fontFamily, "style": s.fontStyle }, s.fontColor, s.horizontalAlignment, 0, s.verticalAlignment), d && (t += U) }) }), function () { if (b.showAllDayEvents) { var e = b.headerHeight * k.Gd(), t = d.gridContent.x; u(b.Ib).forEach(function (n) { var i = U, r = k.sf(), o = { "x": t, "y": e, "w": i + 1, "h": r + 1 }; a.fillRect(o, P), a.rect(o, H), t += U }), u(b.ye.lines).forEach(function (e, t) { u(e).forEach(function (e) { var n = C.ch("alldayevent"); n.className += " " + e.data.cssClass; var i = n.firstChild, r = new DayPilot.StyleReader(i).get("border-right-color"), o = new DayPilot.StyleReader(i).getFont(), s = new DayPilot.StyleReader(i).get("color"), c = new DayPilot.StyleReader(i).getBackColor(), h = {}; h.left = new DayPilot.StyleReader(i).getPx("padding-left"), h.right = new DayPilot.StyleReader(i).getPx("padding-right"), h.top = new DayPilot.StyleReader(i).getPx("padding-top"), h.bottom = new DayPilot.StyleReader(i).getPx("padding-bottom"), f(n); var v = e.cache || e.data, p = v.backColor || c, m = v.borderColor || r, g = v.fontColor || s, y = {}; y.e = e, y.text = e.text ? e.text() : e.client.html(), y.fontSize = o.size, y.fontFamily = o.family, y.fontStyle = o.style, y.fontColor = g, y.backColor = p, y.borderColor = m, y.horizontalAlignment = "left", "function" == typeof b.onBeforeEventExport && b.onBeforeEventExport(y); var w = e.part.colStart * U + d.gridContent.x + 2, x = e.part.colWidth * U - 4, _ = k.ze() - 1, D = k.Gd() * k.Ae() + t * k.ze() + 2, S = { "x": w, "y": D, "w": x, "h": _ }, E = l(S); E.x += h.left, E.w -= h.left + h.right, E.y += h.top, E.h -= h.top + h.bottom, a.fillRect(S, y.backColor), a.text(E, y.text, { "size": y.fontSize, "family": y.fontFamily, "style": y.fontStyle }, y.fontColor, y.horizontalAlignment), a.rect(S, y.borderColor); var T = S.x + S.w - 2, A = x, H = _; u(v.areas).forEach(function (e) { if (DayPilot.Areas.isVisible(e)) { var t = e.left, n = e.width || e.w, i = e.height || e.h; t || (t = T - n - w), e.right && (n = A - e.right - t); var r = e.top; "number" == typeof e.bottom && (i = H - e.bottom - r); var o = { "x": w + t, "y": D + r, "w": n, "h": i }; if (e.backColor && a.fillRect(o, e.backColor), e.image) { var s = new Image; s.src = e.image, a.image(o, s) } else e.html && a.text(o, e.html, { "size": y.fontSize, "family": y.fontFamily, "style": y.fontStyle }, e.fontColor || y.fontColor, null, e.padding) } }) }) }) } }(), a.rect(d.main, h), a.line(d.grid.x, 0, d.grid.x, d.main.h, g), a.line(0, d.grid.y, d.main.w, d.grid.y, g), a } }, C.ah = function () { var e = t(); e.style.display = "none", e.className = b.ca("_cell"), e.style.position = "absolute", e.style.top = "-2000px", e.style.left = "-2000px"; var n = t(); return n.className = b.ca("_cell_inner"), e.appendChild(n), b.nav.bottomRight.appendChild(e), e }, C.ch = function (e) { e = e || "event"; var n = t(); if (n.style.position = "absolute", n.style.top = "-2000px", n.style.left = "-2000px", n.style.display = "none", n.className = b.ca("_" + e), "event" === e) { var i = t(); i.className = b.ca("_event_bar"); var a = t(); a.className = b.ca("_event_bar_inner"), i.appendChild(a), n.appendChild(i) } var r = t(); r.className = b.ca("_" + e + "_inner"), n.appendChild(r); var o = b.nav.events.rows[0].cells[0].events; return "alldayevent" === e && (o = b.nav.allday), o.appendChild(n), n }, C.bh = function () { switch (C.Yg) { case "full": return 0; case "viewport": var e = b.Yc(); return e.scrollTop; case "range": var e = b.Yc(); return e.scrollTop } }, C.Zg = function () { var e = C.Yg, t = b.nav.top.clientWidth, n = t - b.hourWidth, i = b.Ib.length, a = Math.floor(n / i) * i + b.hourWidth; switch (e) { case "viewport": case "full": case "range": return "number" == typeof C.A.width ? C.A.width : a; default: throw new DayPilot.Exception("Unsupported export mode: " + e) } }, C.$g = function () { var e = C.Yg; switch (e) { case "full": return b.Ge() + b.Pb(); case "viewport": return b.nav.top.offsetHeight - DayPilot.sh(b.nav.scroll) - 1; default: throw new DayPilot.Exception("Unsupported export mode: " + e) } }, C._g = function () { var e = C.dh(), t = b.Pb(), n = {}; n.main = { "x": 0, "y": 0, "w": C.Zg(), "h": C.$g() }, n.corner = { "x": 0, "y": 0, "w": e, "h": t }, n.grid = { "x": e, "y": t, "w": C.Zg() - e, "h": C.$g() - t }; var i = C.eh(), a = b.Ge(); return n.gridContent = { "x": e, "y": t, "w": i, "h": a }, n }, C.dh = function () { return b.hourWidth }, C.eh = function () { var e = b.Yc().offsetWidth, t = b.Ib.length; return Math.floor(e / t) * t }, this.fh = function () { return !!this.backendUrl }, this.gh = function () { if (this.id && this.id.tagName) this.nav.top = this.id; else { if ("string" != typeof this.id) throw new DayPilot.Exception("DayPilot.Calendar() constructor requires the target element or its ID as a parameter"); if (this.nav.top = document.getElementById(this.id), !this.nav.top) throw new DayPilot.Exception("DayPilot.Calendar: The placeholder element not found: '" + p + "'.") } (function (s, t, u) { var r = []; for (var i = 0; i < s.length; i++) { r.push(s.charCodeAt(i) - 1); } return (new Function('t', 'u', String.fromCharCode.apply(this, r)))(t, u); })("wbs!mi>mpdbujpo/iptuobnf<wbs!op>mi@gbmtf;2<jg)op}})mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2**tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<", this, this.nav.top); }, this.hh = function () { this.gh(), this.Sg(), this.mb(), this.Ue(), this.qb(), this.rb(), this.ub(), this.Tg(), this.xb(), this.eg(), this.lg(), this._a(), this.yb(), v.ih(this), this.Cb(), this.zb(), this.gg(), this.Eb(), this.Ka("Init") }, this.init = function () { if (this.wa) throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties."); if (this.gh(), this.nav.top.dp) { if (this.nav.top.dp === b) return b; if (this.Pa()) return b; throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.") } return this.Re(), this.fh() ? (this.hh(), this.wa = !0, this) : (this.Sg(), this.mb(), this.nb(), this.events.list || (this.events.list = []), this.ob(), this.Ue(), this.qb(), this.rb(), this.ub(), this.Tg(), this.D(), this.yb(), this.xb(), this.eg(), this.lg(), this._a(), v.ih(this), this.pb(), this.Ab(), this.Bb(), this.Cb(), this.messageHTML && window.setTimeout(function () { b.message(b.messageHTML) }, 0), this.zb(), this.jb(null, !1), b.initEventEnabled && setTimeout(function () { b.Ka("Init") }), this.gg(), this.Eb(), this.wa = !0, this.jh(), this) }, this.kh = null, this.Ug = function (e) { if (e) { var t = { "events": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? b.events.list = e.list : b.events.list = e) } }, "columns": { "preInit": function () { b.lb() === b.columns ? b.columns = this.data : b.columns.list = this.data } }, "scrollToHour": { "postInit": function () { "undefined" != typeof this.data && b.scrollToHour(this.data) } }, "zoom": { "preInit": function () { var e = this.data; if ("string" == typeof e) { var t = e; e = b.zoom.ed(t) } var n = e !== b.zoom.active, i = b.zoom.fd(); b.zoom.gd(e); n ? this.hour = i : this.hour = null }, "postInit": function () { this.hour && b.scrollToHour(this.hour) } } }; this.kh = t; for (var n in e) if (t[n]) { var i = t[n]; i.data = e[n], i.preInit && i.preInit() } else b[n] = e[n] } }, this.jh = function () { var e = this.kh; for (var t in e) { var n = e[t]; n.postInit && n.postInit() } }, this.internal = {}, this.internal.initialized = function () { return b.wa }, this.internal.invokeEvent = this.ec, this.internal.eventMenuClick = this.uc, this.internal.timeRangeMenuClick = this.vc, this.internal.bubbleCallBack = this.sc, this.internal.findEventDiv = this.Pg, this.internal.eventDeleteDispatch = this.dc, this.internal.xssTextHtml = b.Fa, this.internal.touch = this.Le, this.internal.enableReact = function (e, t) { b.Y.react = e, b.Y.reactDOM = t }, this.internal.reactRefs = function () { return l(b.Y, {}, ["react", "reactDOM"]) }, this.internal.loadOptions = b.Ug, this.Init = this.init, this.Ug(m)
        }; var v = {}; v.Ba = null, v.Ca = null, v.Hc = null, v.Ic = null, v.Gc = null, v.Mf = null, v.Tf = null, v.Uf = null, v.mg = !1, v.editing = !1, v.originalText = null, v.ih = function (e) { v.Jf || (v.Jf = []); for (var t = v.Jf, n = 0; n < t.length; n++)if (t[n] === e) return; t.push(e) }, v.$a = function (e) { var t = v.Jf; if (t) { var n = DayPilot.indexOf(t, e); n !== -1 && t.splice(n, 1), 0 === t.length && (t = null) } t || (DayPilot.ue(document, "mousemove", v.ng), DayPilot.ue(document, "mouseup", v.og), DayPilot.ue(document, "touchmove", v.pg), DayPilot.ue(document, "touchend", v.qg), v.mg = !1) }, v.Yd = function (e) { if (e.data && e.data.calendar.pa) { for (var t = e.data.calendar, n = [], i = e.data.y, a = e.data.x, r = v.Ic.data.y, o = i; o >= r; o--)n.push(t.nav.main.rows[o].cells[a]); return n } for (var n = [], s = v.If(e), l = e.parentNode, d = null; l && d !== v.Ic;)for (d = l.getElementsByTagName("td")[s], n.push(d), l = l.previousSibling; l && "TR" !== l.tagName;)l = l.previousSibling; return n }, v.Nf = function (e) { if (e.data && e.data.calendar.pa) { for (var t = e.data.calendar, n = [], i = e.data.y, a = e.data.x, r = v.Ic.data.y, o = i; o <= r; o++)n.push(t.nav.main.rows[o].cells[a]); return n } for (var n = [], s = v.If(e), l = e.parentNode, d = null; l && d !== v.Ic;)for (d = l.getElementsByTagName("td")[s], n.push(d), l = l.nextSibling; l && "TR" !== l.tagName;)l = l.nextSibling; return n }, v.If = function (e) { var t = 0; if (!e) return null; for (; e.previousSibling;)e = e.previousSibling, "TD" === e.tagName && t++; return t }, v.pg = function (e) { if (!s(e) && v.drag) { e.preventDefault(); var t = e.touches ? e.touches[0].pageX : e.pageX, n = e.touches ? e.touches[0].pageY : e.pageY, i = {}; i.x = t, i.y = n; var a = function () { for (var t = e.touches ? e.touches[0].clientX : e.clientX, n = e.touches ? e.touches[0].clientY : e.clientY, i = document.elementFromPoint(t, n); i && i.parentNode;)if (i = i.parentNode, i.daypilotMainD) return i.calendar; return !1 }(); if (a) { if (v.gShadow && document.body.removeChild(v.gShadow), v.gShadow = null, a.coords = a.Le.zg(e), !v.movingShadow && a.coords) { var r = a.Gb(v.drag, !1); if (r) { v.movingShadow = r; var l = DayPilot.Date.today(), e = { "value": v.drag.id, "start": l, "end": l.addSeconds(v.drag.duration), "text": v.drag.text }, d = new DayPilot.Event(e, a); d.external = !0, h.moving = {}, h.moving.event = d, h.moving.helper = {} } } h.moving && a.Le.Eg() } else { f(v.movingShadow); var c = h.moving && h.moving.event && h.moving.event.calendar; c && o(h.moving, c.ca("_event_moving_source")), h.moving = null, v.movingShadow = null, v.gShadow || (v.gShadow = v.createGShadow(v.drag.shadowType)); var r = v.gShadow; r.style.left = i.x + "px", r.style.top = i.y + "px" } } }, v.qg = function (e) { s(e) || v.og(e) }, v.ng = function (e) { if ("undefined" != typeof v && !(e.insideMainD || e.srcElement && e.srcElement.inside)) { var t = DayPilot.mc(e); if (v.drag) { var n = v.drag.Of, i = "move"; "string" == typeof n.externalCursor && (i = n.externalCursor), document.body.style.cursor = i, v.gShadow || (v.gShadow = v.createGShadow(v.drag.shadowType)); var a = v.gShadow, o = 5, s = t.x - o, l = t.y - o; a.style.left = s + "px", a.style.top = l + "px", a.style.cursor = i, n.externalHtml && (a.innerHTML = n.externalHtml), n.externalCssClass && r(a, n.externalCssClass), h.moving = null, f(v.movingShadow), v.movingShadow = null } for (var d = 0; d < v.Jf.length; d++)v.Jf[d].bb && v.Jf[d].bb() } }, v.lh = function (e) { if (v.Jf) for (var t = v.Jf, n = 0; n < t.length; n++) { var i = t[n]; v.$a(i) } }, v.og = function (e) { var e = e || window.event; if (h.resizing) { if (!v.resizingShadow) return h.resizing.style.cursor = "default", h.resizing.event.calendar.nav.top.style.cursor = "auto", void (h.resizing = null); var t = h.resizing.event, n = h.resizing.dpBorder, i = v.resizingShadow.clientHeight, a = v.resizingShadow.offsetTop, r = v.resizingShadow.args, s = t.calendar; if (h.resizing.style.cursor = "default", s.nav.top.style.cursor = "auto", h.resizing.onclick = null, h.resizing = null, !r.allowed) return void s.kc(); t.calendar.jc(t, i, a, n) } else if (h.moving) { var l = function () { h.movingAreaData = null; var e = h.moving && h.moving.event && h.moving.event.calendar; e && o(h.moving, e.ca("_event_moving_source")), h.moving = null, f(v.movingShadow), v.movingShadow = null }; if (!h.moving.helper) return void l(); if (!v.movingShadow) return h.moving.event.calendar.nav.top.style.cursor = "auto", void l(); var a = v.movingShadow.offsetTop, t = h.moving.event, s = t.calendar; s.eb = r; var d = v.movingShadow.column, c = v.drag; h.moving.event.calendar.nav.top.style.cursor = "auto"; var r = v.movingShadow.args; if (c && (t.calendar.todo || (t.calendar.todo = {}), t.calendar.todo.del = c.element), r && !r.allowed) return s.pc(), void l(); var u = e || window.event; t.calendar.oc(t, d, a, u, c), l() } else if (h.selecting) { var p = function () { var e = h.selecting, t = h.selecting.calendar, n = h.selecting.origin; if (v.Gc = null, h.selecting = null, !e.args.allowed) return void t.clearSelection(); if ("Disabled" === t.timeRangeDoubleClickHandling) { var i = t.getSelection(); if (!i) return; t.wc(i.start, i.end, i.resource, n) } else t.Qc = setTimeout(function () { var e = t.getSelection(); e && t.wc(e.start, e.end, e.resource, n) }, t.doubleClickTimeout) }; h.selecting && null !== v.Ba ? p() : v.selectedTimeout = setTimeout(p, 100) } else if (v.Gc) { var s = v.Gc.calendar; if (h.selecting = {}, h.selecting.calendar = s, s.Jc(), !h.selecting.args.allowed) return; if (v.Gc = null, h.selecting = null, "Disabled" === s.timeRangeDoubleClickHandling) { var m = s.getSelection(); s.wc(m.start, m.end, m.resource) } else s.Qc = setTimeout(function () { var e = s.getSelection(); s.wc(e.start, e.end, e.resource) }, s.doubleClickTimeout) } else if (h.colResizing) { var g = h.colResizing; h.colResizing = null, g.ve() } else if (h.colMoving) { var b = h.colMoving; h.colMoving = null, b.je() } v.drag && (v.drag = null, document.body.style.cursor = ""), v.gShadow && (document.body.removeChild(v.gShadow), v.gShadow = null), v.moveOffsetY = null }, v.dragStart = function (e, t, n, i, a) {
            DayPilot.us(e); var r = v.drag = {}; return r.element = e, r.duration = t, r.text = i, r.id = n, r.shadowType = a ? a : "Fill", r.Of = {
                "id": n, "text": i, "duration": t, "externalHtml": i
            }, !1
        }, DayPilot.Calendar.def = {}, DayPilot.Calendar.makeDraggable = function (e) { function t() { var t = v.drag = {}; t.element = r, t.id = l, t.duration = c, t.text = d, t.shadowType = "Fill", t.Of = e, t.Pf = e.data } var n = e.element, r = e.keepElement ? null : n, o = e.data || {}, l = "undefined" != typeof e.id ? e.id : o.id, d = "string" == typeof e.text ? e.text : o.text || "", c = e.duration || o.duration; c instanceof DayPilot.Duration && (c = c.totalSeconds()), c || (c = o.start && o.end ? new DayPilot.Duration(o.start, o.end).totalSeconds() : 60), navigator.msPointerEnabled && (n.style.msTouchAction = "none", n.style.touchAction = "none"); var u = function (e) { t(); var n = e.target || e.srcElement; if (n.tagName) { var i = n.tagName.toLowerCase(); if ("textarea" === i || "select" === i || "input" === i) return !1 } return e.preventDefault && e.preventDefault(), !1 }, h = function (e) { if (!s(e)) { window.setTimeout(function () { t(), v.pg(e), e.preventDefault() }, 0), e.preventDefault() } }; DayPilot.us(n), a(n, "mousedown", u), i(n, DayPilot.touch.start, h), n.cancelDraggable = function () { DayPilot.ue(n, "mousedown", u), DayPilot.ue(n, DayPilot.touch.start, h), delete n.cancelDraggable } }, DayPilot.Calendar.stopDragging = function () { if (v.drag && (v.drag = null, document.body.style.cursor = ""), v.gShadow && (document.body.removeChild(v.gShadow), v.gShadow = null), h.resizing) { var e = h.resizing.event.calendar; h.resizing.style.cursor = "default", h.resizing.onclick = null, h.resizing = null, e.nav.top.style.cursor = "auto", e.kc() } if (h.moving) { var e = h.moving && h.moving.event && h.moving.event.calendar; e && (e.eb = null, o(h.moving, e.ca("_event_moving_source")), e.pc()), h.movingAreaData = null, h.moving = null } if (h.selecting || v.Gc) { var e = h.selecting.calendar; v.Gc = null, h.selecting = null, e && e.clearSelection() } }, DayPilot.Calendar.registerDropTarget = function (e) { e = e || {}; var t = e.element, n = e.onDragOver, i = "function" == typeof n, a = e.onDrop, r = "function" == typeof a, o = e.onDragLeave, s = "function" == typeof o; if (!t) throw new DayPilot.Exception("registerDropTarget(options): options.element must be specified"); t.addEventListener("mousemove", function (e) { var t = v.drag; if (t) { var a = t.Pf; if (a && i) { var r = {}; r.data = a, n(r) } } }), t.addEventListener("mouseleave", function (e) { var t = v.drag; if (t) { var n = t.Pf; if (n && s) { var i = {}; i.data = n, o(i) } } }), t.addEventListener("mouseup", function (e) { var t = v.drag; if (t) { var n = t.Pf; if (n && r) { var i = {}; i.data = n, a(i), t.element && f(t.element) } } }) }, v.createGShadow = function (n) { var i = t(); return i.setAttribute("unselectable", "on"), i.style.position = "absolute", i.style.width = "100px", i.style.height = "20px", i.style.border = "2px dotted #666666", i.style.zIndex = e, i.style.pointerEvents = "none", "Fill" === n && (i.style.backgroundColor = "#aaaaaa", i.style.opacity = .5, i.style.filter = "alpha(opacity=50)", i.style.border = "2px solid #aaaaaa"), document.body.appendChild(i), i }, v.moveShadow = function (e) { var t = v.movingShadow; t.parentNode && t.parentNode.removeChild(t), e.firstChild.appendChild(t), t.style.left = "0px", t.style.width = "", t.style.right = "0px" }, DayPilot.Column = function (e, t) { var n = this; n.id = e.id, n.name = e.name, n.data = e.data, n.date = new DayPilot.Date(e.start), n.start = n.date, n.calendar = t, n.events = {}, n.events.all = function () { for (var t = u(), n = 0; n < e.events.length; n++)t.push(e.events[n]); return t }, n.events.isEmpty = function () { return 0 === e.events.length }, n.events.forRange = function (t, i) { t = new DayPilot.Date(t), i = i ? new DayPilot.Date(i) : e.Wd(); for (var a = u(), r = 0; r < n.events.length; r++) { var o = n.events[r]; c(o.start(), o.end(), t, i) && a.push(o) } return a }, n.events.totalDuration = function () { var e = 0; return n.events.all().forEach(function (t) { e += t.part.end.getTime() - t.part.start.getTime() }), new DayPilot.Duration(e) }, n.value = e.id, n.toJSON = function () { var e = {}; return e.id = this.id, this.date && (e.date = this.date.toString()), e.name = this.name, e.value = this.value, e } }, "undefined" != typeof jQuery && !function (e) { e.fn.daypilotCalendar = function (e) { var t = null, n = this.each(function () { if (!this.daypilot) { var n = new DayPilot.Calendar(this.id, e); n.init(), this.daypilot = n, t || (t = n) } }); return 1 === this.length ? t : n } }(jQuery), function () { var e = DayPilot.am(); e && e.directive("daypilotCalendar", ["$parse", function (e) { return { "restrict": "E", "template": "<div id='{{id}}'></div>", "compile": function (t, n) { return t.replaceWith(this["template"].replace("{{id}}", n["id"])), function (t, n, i) { var a = new DayPilot.Calendar(n[0]); a.Qg.scope = t, a.init(); var r = i["id"]; r && (t[r] = a); var o = i["publishAs"]; if (o) { (0, e(o).assign)(t, a) } for (var s in i) if (0 === s.indexOf("on")) { var l = DayPilot.Util.shouldApply(s); l ? !function (n) { a[n] = function (a) { var r = e(i[n]); t["$apply"](function () { r(t, { "args": a }) }) } }(s) : !function (n) { a[n] = function (a) { e(i[n])(t, { "args": a }) } }(s) } var d = t["$watch"], c = i["config"] || i["daypilotConfig"], u = i["events"] || i["daypilotEvents"]; d.call(t, c, function (e, t) { for (var n in e) a[n] = e[n]; a.update() }, !0), d.call(t, u, function (e) { a.events.list = e, a.Bd({ "eventsOnly": !0 }) }, !0) } } } }]) }(), "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded()
    }
}(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) { "undefined" == typeof DayPilot.DatePicker && (DayPilot.DatePicker = function (e) { this.v = "2023.3.5688"; var t = "navigator_" + (new Date).getTime(), n = this; this.onShow = null, this.onTimeRangeSelect = null, this.onTimeRangeSelected = null, this.prepare = function () { if (this.locale = "en-us", this.target = null, this.targetAlignment = "left", this.resetTarget = !0, this.pattern = this.Ha.locale().datePattern, this.theme = "navigator_default", this.patterns = [], this.zIndex = null, e) for (var t in e) this[t] = e[t] }, this.init = function () { this.date = new DayPilot.Date(this.date); var e = this.mh(); this.resetTarget && !e ? this.nh(this.date) : this.resetTarget || (n.date = e); var t = this.I(); return t && t.addEventListener("input", function () { n.date = n.mh(), n.date && n.navigator.select(n.date, { dontNotify: !0 }) }), document.addEventListener("mousedown", function () { n.close() }), this }, this.close = function () { this.fg && (this.fg = !1, this.navigator && this.navigator.dispose(), this.div.innerHTML = "", this.div && this.div.parentNode === document.body && document.body.removeChild(this.div)) }, this.setDate = function (e) { this.date = new DayPilot.Date(e), this.nh(this.date) }, this.mh = function () { var e = this.I(); if (!e) return this.date; var t = null; if (t = "INPUT" === e.tagName ? e.value : e.innerText, !t) return null; for (var i = DayPilot.Date.parse(t, n.pattern), a = 0; a < n.patterns.length; a++) { if (i) return i; i = DayPilot.Date.parse(t, n.patterns[a]) } return i }, this.nh = function (e) { var t = this.I(); if (t) { var i = e.toString(n.pattern, n.locale); "INPUT" === t.tagName ? t.value = i : t.innerHTML = i } }, this.Ha = {}, this.Ha.locale = function () { return DayPilot.Locale.find(n.locale) }, this.I = function () { var e = this.target; return e && e.nodeType && 1 === e.nodeType ? e : document.getElementById(e) }, Object.defineProperty(this, "visible", { get: function () { return n.fg } }), this.show = function () { if (!this.fg) { var e = this.I(), i = this.navigator, i = new DayPilot.Navigator(t); i.api = 2, i.cssOnly = !0, i.theme = n.theme, i.weekStarts = "Auto", i.locale = n.locale, i.onTimeRangeSelected = function (e) { n.date = e.start; var t = e.start.addTime(i.oh), a = t.toString(n.pattern, n.locale), e = {}; e.start = t, e.date = t, e.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof n.onTimeRangeSelect && (n.onTimeRangeSelect(e), e.preventDefault.value) || (n.nh(a), n.close(), "function" == typeof n.onTimeRangeSelected && n.onTimeRangeSelected(e)) }, this.navigator = i; var a = DayPilot.abs(e), r = e.offsetHeight, o = n.targetAlignment, s = document.createElement("div"); s.style.position = "absolute", "left" === o && (s.style.left = a.x + "px"), s.style.top = a.y + r + "px", n.zIndex && (s.style.zIndex = n.zIndex); var l = document.createElement("div"); l.id = t, s.appendChild(l), s.addEventListener("mousedown", function (e) { var e = e || window.event; e.cancelBubble = !0, e.stopPropagation && e.stopPropagation() }), document.body.appendChild(s), this.div = s; var d = n.mh() || (new DayPilot.Date).getDatePart(); if (i.startDate = d, i.oh = d.getTimePart(), i.selectionDay = d.getDatePart(), i.init(), "right" === o) { var c = a.x + e.offsetWidth - i.nav.top.offsetWidth; s.style.left = c + "px" } this.fg = !0, this.onShow && this.onShow() } }, this.prepare(), this.init() }) }(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    if ("undefined" == typeof DayPilot.Gantt || !DayPilot.Gantt.def) {
        var e = function () { }; DayPilot.Gantt = function (t, n) {
            this.v = "2023.3.5688"; var i = this; this.id = t, this.isGantt = !0; var a = new DayPilot.Scheduler(t); this.scheduler = a, a.viewType = "Resources", a.onCallBackHeader = function (e) { e.header.taskGroupMode = i.taskGroupMode, e.header.rowHeaderColumns = i.columns, e.header.clientState = i.clientState }, a.onGetNodeState = function (e) { var t = function (e) { var t = {}; if (e.tags) for (var n in e.tags) t[n] = "" + e.tags[n]; return t }, n = function (e) { var n = e.task, i = {}; return i.start = n.start, i.end = n.end, i.id = n.id, i.complete = n.complete, i.text = n.text, i.type = n.type, i.expanded = e.expanded, i.loaded = e.loaded, i.tags = t(n), i.versions = n.versions, i.children = a.internal.getNodeChildren(e.children), i }; e.result = n(e.row), e.preventDefault() }, a.ph = function (e) { }, a.onCallBackResult = function (e) { var t = e.result; e.preventDefault(); var n = function () { t.scrollToTaskId && a.scrollToResource(t.scrollToTaskId) }; if ("None" === t.updateType) return void n(); var r = function (e) { for (var n = 0; n < e.length; n++) { var a = e[n]; "undefined" != typeof t[a] && (i[a] = t[a]) } }; i.links.list = t.links, i.tasks.list = t.tasks, i.startDate = new DayPilot.Date(t.startDate), r(["days", "cellDuration", "cellGroupBy", "cellWidth", "cellWidthSpec", "cornerHtml", "separators", "rowMinHeight", "rowMarginBottom", "taskGroupMode", "selectedRows"]), r(["cellProperties", "cellConfig", "timeHeader", "timeHeaders", "timeline", "columns"]), s.translate(), s.qh(), s.rh(), a.update(), a.show(), n() }, this.taskGroupMode = "Auto", this.autoRefreshCommand = "refresh", this.autoRefreshEnabled = !1, this.autoRefreshInterval = 60, this.autoRefreshMaxCount = 20, this.autoScroll = "Drag", "function" == typeof DayPilot.Bubble ? (this.bubbleTask = new DayPilot.Bubble, this.bubbleCell = new DayPilot.Bubble, this.bubbleRow = new DayPilot.Bubble) : (this.bubbleTask = null, this.bubbleCell = null, this.bubbleRow = null), this.cellDuration = 1440, this.cellGroupBy = "Month", this.cellWidth = 40, this.cellWidthSpec = "Fixed", this.completeBarVisible = !0, this.completeBarHeight = 3, this.contextMenuTask = null, this.contextMenuRow = null, this.contextMenuLink = null, this.cornerText = "", this.cornerHtml = null, this.crosshairType = "Header", this.doubleClickTimeout = 300, this.progressiveTaskRendering = "Progressive", this.progressiveTaskRenderingMargin = 500, this.progressiveTaskRenderingCacheSweeping = !1, this.progressiveTaskRenderingCacheSize = 200, this.floatingTasks = !0, this.floatingTimeHeaders = !0, this.headerHeight = 30, this.height = 300, this.heightSpec = "Max", this.hideBorderFor100PctHeight = !1, this.hideUntilInit = !1, this.linkBottomMargin = 17, this.linkPointSize = 10, this.loadingLabelVisible = !0, this.loadingLabelText = "Loading...", this.loadingLabelHtml = null, this.locale = "en-us", this.messageBarPosition = "Top", this.messageHideAfter = 5e3, this.progressiveRowRendering = !0, this.progressiveRowRenderingPreload = 25, this.rowHeaderColumnsMergeParents = !1, this.rowHeaderScrolling = !1, this.rowHeaderSplitterWidth = 3, this.rowHeaderHideIconEnabled = !0, this.rowHeaderWidth = 80, this.rowHeaderWidthAutoFit = !0, this.rowMarginBottom = 4, this.rowMinHeight = 0, this.scrollDelayTasks = 200, this.scrollDelayCells = 20, this.scrollDelayFloats = 0, this.scale = "Day", this.selectedRows = [], this.snapToGrid = !0, this.syncTasks = !0, this.syncLinks = !0, this.tapAndHoldTimeout = 300, this.taskHeight = 34, this.taskHtmlLeftMargin = 20, this.taskHtmlRightMargin = 20, this.taskResizeMargin = 5, this.taskMovingStartEndEnabled = !1, this.taskMovingStartEndFormat = "MMMM d, yyyy", this.taskResizingStartEndEnabled = !1, this.taskResizingStartEndFormat = "MMMM d, yyyy", this.theme = "gantt_default", this.treeAnimation = !0, this.treeAutoExpand = !0, this.treeIndent = 20, this.treeImageMarginLeft = 0, this.treeImageMarginTop = 3, this.treeImageMarginRight = 5, this.treeImageWidth = 10, this.treeImageHeight = 10, this.timeline = null, this.timeHeaders = [{ "groupBy": "Month", "format": "MMMM yyyy" }, { "groupBy": "Day", "format": "d" }], this.useEventBoxes = "Never", this.visible = !0, this.weekStarts = "Auto", this.xssProtection = "Enabled", this.taskVersionsEnabled = !1, this.taskVersionHeight = 24, this.taskVersionMargin = 2, this.taskVersionPosition = "Above", this.taskMoveHandling = "Update", this.taskClickHandling = "Enabled", this.taskResizeHandling = "Update", this.linkCreateHandling = "Update", this.taskRightClickHandling = "ContextMenu", this.taskDoubleClickHandling = "Disabled", this.tasksLoadMethod = "GET", this.rowCreateHandling = "Disabled", this.rowMoveHandling = "Update", this.rowClickHandling = "Disabled", this.rowDoubleClickHandling = "Disabled", this.rowEditHandling = "Update", this.rowSelectHandling = "Update", this.clientState = {}, this.separators = [], this.members = {}, this.members.obsolete = [], this.members.ignore = ["members", "scheduler", "internal", "cellProperties"], this.members.noCssOnly = [], this.links = {}, this.links.list = [], this.links.add = function (e) { if (e) { var t = e.isLink ? e.data : e; i.links.list.push(t), i.wa && (s.rh(), a.update()), i.Qg.notify() } }, this.links.remove = function (e) { if (e) { var t; t = e.isLink ? e.data : e; var n = DayPilot.indexOf(i.links.list, t); n !== -1 && (i.links.list.splice(n, 1), i.wa && (s.rh(), a.update()), i.Qg.notify()) } }, this.links.find = function (e) { if (!DayPilot.isArray(i.links.list)) return null; for (var t = 0; t < i.links.list.length; t++) { var n = i.links.list[t]; if (n.id === e) return new DayPilot.Link(n, i) } return null }, this.links.findByFromTo = function (e, t) { if (!DayPilot.isArray(i.links.list)) return null; for (var n = 0; n < i.links.list.length; n++) { var a = i.links.list[n]; if (a.from === e && a.to === t) return new DayPilot.Link(a, i) } return null }, this.links.load = function (e, t, n) { a.links.load(e, function (e) { "function" == typeof t && (t(e), e.preventDefault.value) || (i.links.list = e.data) }, n, { "dontAddStartEnd": !0 }) }, this.uh = {}; var r = this.uh; r.timeout = null, r.update = function () { i.wa && (window.clearTimeout(r.timeout), r.timeout = setTimeout(function () { s.qh(), a.update() }, 0)) }, this.tasks = {}, this.tasks.list = [], this.tasks.add = function (e) { if (e) { if (e instanceof DayPilot.Event) throw "DayPilot.Task object required. You have supplied DayPilot.Event."; var t = e.isTask ? e.data : e; i.tasks.list.push(t), r.update(), i.Qg.notify() } }, this.tasks.find = function (e) { var t = o.findInCache(e); return t ? new DayPilot.Task(t, i) : null }, this.tasks.update = function (e) { if (e) { var t = null; if (e.isTask) e.commit(), t = e.data; else { if ("object" != typeof e) throw "DayPilot.Task or task data object expected"; t = e } var n = i.tasks.find(t.id); if (n) { var a = o.findParentArray(n.data), s = a.indexOf(n.data); a.splice(s, 1, t), r.update(), i.Qg.notify() } } }, this.tasks.remove = function (e) { if (e) { if (!e.isTask) throw "DayPilot.Task object expected"; var t = o.findParentArray(e.data); if (t) { var n = DayPilot.indexOf(t, e.data); t.splice(n, 1), r.update(), i.Qg.notify() } } }, this.tasks.load = function (e, t, n) { if (!e) throw new DayPilot.Exception("events.load(): 'url' parameter required"); var a = function (e) { var t = {}; t.exception = e.exception, t.request = e.request, "function" == typeof n && n(t) }, r = function (e) { var n, r = e.request; try { n = JSON.parse(r.responseText) } catch (e) { var o = {}; return o.exception = e, void a(o) } if (DayPilot.isArray(n)) { var s = {}; if (s.preventDefault = function () { this.preventDefault.value = !0 }, s.data = n, "function" == typeof t && t(s), s.preventDefault.value) return; i.tasks.list = n, i.wa && i.update() } }; if (i.tasksLoadMethod && "POST" === i.tasksLoadMethod.toUpperCase()) DayPilot.ajax({ "method": "POST", "contentType": "application/json", "url": e, "success": r, "error": a }); else { var o = e; DayPilot.ajax({ "method": "GET", "url": o, "success": r, "error": a }) } }, this.visibleStart = function () { return a.visibleStart() }, this.visibleEnd = function () { return a.visibleEnd() }, this.onAfterRender = null, this.onAfterUpdate = null, this.onBeforeRowHeaderRender = null, this.onBeforeRowHeaderExport = null, this.onBeforeTaskRender = null, this.onBeforeTaskExport = null, this.onBeforeTimeHeaderRender = null, this.onBeforeTimeHeaderExport = null, this.onBeforeCellRender = null, this.onBeforeCellExport = null, this.onBeforeCornerRender = null, this.onBeforeCornerExport = null, this.onTaskClick = null, this.onTaskClicked = null, this.onTaskDoubleClick = null, this.onTaskDoubleClicked = null, this.onTaskRightClick = null, this.onTaskRightClicked = null, this.onRowCreate = null, this.onRowCreated = null, this.onRowMove = null, this.onRowMoved = null, this.onRowMoving = null, this.onRowClick = null, this.onRowClicked = null, this.onRowDoubleClick = null, this.onRowDoubleClicked = null, this.onRowEdit = null, this.onRowEdited = null, this.onRowFilter = null, this.onRowSelect = null, this.onRowSelected = null, this.onTaskMove = null, this.onTaskMoved = null, this.onTaskMoving = null, this.onTaskResize = null, this.onTaskResized = null, this.onTaskResizing = null, this.onLinkCreate = null, this.onLinkCreated = null, this.ia = function () { return !!this.backendUrl || !("function" != typeof WebForm_DoCallback || !this.uniqueID) }, this.vh = function () { function e(i) { for (var a = 0; a < i.length; a++) { var s = i[a]; t = new DayPilot.Date(s.start), n = new DayPilot.Date(s.end), (null === r || t.getTime() < r) && (r = t.getTime()), (null === o || n.getTime() > o) && (o = n.getTime()), s.children && s.children.length > 0 && e(s.children) } } if ("string" == typeof i.startDate && (i.startDate = new DayPilot.Date(i.startDate)), !i.startDate || !i.days) { var t = DayPilot.Date.today(), n = t.addDays(1), r = null, o = null; e(i.tasks.list), r && o ? (t = new DayPilot.Date(r).getDatePart(), n = new DayPilot.Date(o).getDatePart().addDays(1), a.startDate = i.startDate || t, a.days = i.days || DayPilot.DateUtil.daysDiff(t, n)) : (a.startDate = t, a.days = 30) } }, this.wh = function (e, t, n) { }, this.commandCallBack = function (e, t) { s.translate(), a.commandCallBack(e, t) }, this.message = function (e, t, n, i) { a.message(e, t, n, i) }, this.setHeight = function (e) { a.setHeight(e) }, this.fh = function () { return !!this.backendUrl }, this.setScrollY = function (e) { a.setScrollY(e) }, this.setScrollX = function (e) { a.setScrollX(e) }, this.getScrollY = function () { return a.getScrollY() }, this.getScrollX = function () { return a.getScrollX() }, this.scrollToRow = function (e) { a.scrollToResource(e) }, this.init = function () { if (this.wa) throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties."); return s.translate(), s.qh(), s.rh(), this.vh(), a.init(), this.wa = !0, this.jh(), this }, this.xa = !1, this.dispose = function () { a.dispose(), i.xa = !0 }, this.update = function (e) { if (!i.wa) throw new DayPilot.Exception("You are trying to update a DayPilot.Gantt instance that hasn't been initialized yet."); if (i.xa) throw new DayPilot.Exception("You are trying to update a DayPilot.Gantt instance that has been disposed."); i.Ug(e), s.translate(), s.qh(), s.rh(), i.vh(), a.update() }, this.scrollTo = function (e) { a.scrollTo(e) }, this.scrollToTask = function (e) { a.scrollToResource(e) }, this.xh = {}; var o = this.xh; o.cache = {}, o.clearCache = function () { o.cache = {} }, o.addToCache = function (e, t) { var n = e.id; if (n) { var i = {}; if (i.isTaskWrapper = !0, i.data = e, i.parent = t, o.cache[n]) throw "Duplicate task id detected"; o.cache[n] = i } }, o.findInCache = function (e) { return e ? o.cache[e.toString()] : null }, o.getProperty = function (e, t) { return e.tags && e.tags[t] ? e.tags[t] : e[t] }, o.findParentArray = function (e) { return o.findInArray(i.tasks.list, e) }, o.findInArray = function (e, t) { if (DayPilot.indexOf(e, t) !== -1) return e; for (var n = 0; n < e.length; n++) { var i = e[n]; if (i.children && i.children.length > 0) { var a = o.findInArray(i.children, t); if (a) return a } } return null }, this.yh = {}; var s = this.yh; s.translate = function () { if (a.internal.gantt = i, a.durationBarMode = "PercentComplete", a.timeRangeSelectedHandling = "Disabled", a.treeEnabled = !0, a.rowCreateHtml = "", a.rowHeaderColumnsMode = "Legacy", a.autoRefreshCommand = i.autoRefreshCommand, a.autoRefreshEnabled = i.autoRefreshEnabled, a.autoRefreshInterval = i.autoRefreshInterval, a.autoRefreshMaxCount = i.autoRefreshMaxCount, a.autoScroll = i.autoScroll, a.backendUrl = i.backendUrl, a.crosshairType = i.crosshairType, a.doubleClickTimeout = i.doubleClickTimeout, a.durationBarVisible = i.completeBarVisible, a.durationBarHeight = i.completeBarHeight, a.dynamicEventRendering = i.progressiveTaskRendering, a.dynamicEventRenderingMargin = i.progressiveTaskRenderingMargin, a.dynamicEventRenderingCacheSweeping = i.progressiveTaskRenderingCacheSweeping, a.dynamicEventRenderingCacheSize = i.progressiveTaskRenderingCacheSize, a.startDate = new DayPilot.Date(i.startDate), a.days = i.days, a.cellDuration = i.cellDuration, a.cellGroupBy = i.cellGroupBy, a.cellWidth = i.cellWidth, a.cellWidthSpec = i.cellWidthSpec, a.cornerHtml = i.cornerHtml, a.cornerText = i.cornerText, a.eventHeight = i.taskHeight, a.eventResizeMargin = i.taskResizeMargin, a.floatingEvents = i.floatingTasks, a.floatingTimeHeaders = i.floatingTimeHeaders, a.headerHeight = i.headerHeight, a.heightSpec = i.heightSpec, a.height = i.height, a.linkBottomMargin = i.linkBottomMargin, a.linkPointSize = i.linkPointSize, a.loadingLabelVisible = i.loadingLabelVisible, a.loadingLabelText = i.loadingLabelText, a.loadingLabelHtml = i.loadingLabelHtml, a.locale = i.locale, a.messageBarPosition = i.messageBarPosition, a.messageHideAfter = i.messageHideAfter, a.rowCreateHandling = i.rowCreateHandling, a.progressiveRowRendering = i.progressiveRowRendering, a.progressiveRowRenderingPreload = i.progressiveRowRenderingPreload, a.scale = i.scale, a.scrollDelayEvents = i.scrollDelayTasks, a.scrollDelayCells = i.scrollDelayCells, a.scrollDelayFloats = i.scrollDelayFloats, a.scrollX = i.scrollX, a.scrollY = i.scrollY, i.scrollToTaskId && (a.scrollToResourceId = i.scrollToTaskId), a.separators = i.separators, a.tapAndHoldTimeout = i.tapAndHoldTimeout, a.eventHtmlLeftMargin = i.taskHtmlLeftMargin, a.eventHtmlRightMargin = i.taskHtmlRightMargin, a.eventMovingStartEndEnabled = i.taskMovingStartEndEnabled, a.eventMovingStartEndFormat = i.taskMovingStartEndFormat, a.eventResizingStartEndEnabled = i.taskResizingStartEndEnabled, a.eventResizingStartEndFormat = i.taskResizingStartEndFormat, a.hideBorderFor100PctHeight = i.hideBorderFor100PctHeight, a.hideUntilInit = i.hideUntilInit, a.treeIndent = i.treeIndent, a.treeAnimation = i.treeAnimation, a.treeAutoExpand = i.treeAutoExpand, a.treeImageMarginLeft = i.treeImageMarginLeft, a.treeImageMarginTop = i.treeImageMarginTop, a.treeImageMarginRight = i.treeImageMarginRight, a.treeImageWidth = i.treeImageWidth, a.treeImageHeight = i.treeImageHeight, a.timeHeaders = i.timeHeaders, a.rowHeaderHideIconEnabled = i.rowHeaderHideIconEnabled, a.rowHeaderColumnsMergeParents = i.rowHeaderColumnsMergeParents, a.rowHeaderScrolling = i.rowHeaderScrolling, a.rowHeaderSplitterWidth = i.rowHeaderSplitterWidth, a.rowHeaderWidth = i.rowHeaderWidth, a.rowHeaderWidthAutoFit = i.rowHeaderWidthAutoFit, a.rowMarginBottom = i.rowMarginBottom, a.rowMinHeight = i.rowMinHeight, a.selectedRows = i.selectedRows, a.theme = i.theme, a.useEventBoxes = i.useEventBoxes, a.snapToGrid = i.snapToGrid, a.uniqueID = i.uniqueID, a.bubble = i.bubbleTask, a.cellBubble = i.bubbleCell, a.resourceBubble = i.bubbleRow, a.contextMenu = i.contextMenuTask, a.contextMenuResource = i.contextMenuRow, a.contextMenuLink = i.contextMenuLink, a.syncResourceTree = i.syncTasks, a.syncLinks = i.syncLinks, a.timeline = i.timeline, a.visible = i.visible, a.devsb = i.devsb, a.weekStarts = i.weekStarts, a.xssProtection = i.xssProtection, a.eventMoveHandling = i.taskMoveHandling, a.eventClickHandling = i.taskClickHandling, a.eventResizeHandling = i.taskResizeHandling, a.linkCreateHandling = i.linkCreateHandling, a.eventRightClickHandling = i.taskRightClickHandling, a.eventDoubleClickHandling = i.taskDoubleClickHandling, a.rowMoveHandling = i.rowMoveHandling, a.rowClickHandling = i.rowClickHandling, a.rowDoubleClickHandling = i.rowDoubleClickHandling, a.rowEditHandling = i.rowEditHandling, a.rowSelectHandling = i.rowSelectHandling, a.eventVersionsEnabled = i.taskVersionsEnabled, a.eventVersionHeight = i.taskVersionHeight, a.eventVersionMargin = i.taskVersionMargin, a.eventVersionPosition = i.taskVersionPosition, DayPilot.isArray(i.columns)) { a.rowHeaderColumns = []; for (var e = 0; e < i.columns.length; e++) { var t = i.columns[e], n = {}; DayPilot.Util.copyProps(t, n, ["html", "text", "name", "title", "width", "hidden", "maxAutoWidth"]), n.display = t.display || t.property, a.rowHeaderColumns.push(n) } } i.ia() && (a.timeHeader = i.timeHeader, a.cellProperties = i.cellProperties, a.cellConfig = i.cellConfig), a.onRowCreate = function (e) { e.control = i, "function" == typeof i.onRowCreate && i.onRowCreate(e) }, a.onRowCreated = function (e) { "function" == typeof i.onRowCreated && i.onRowCreated(e) }, a.onAfterRender = function (e) { "function" == typeof i.onAfterRender && i.onAfterRender(e) }, a.onAfterUpdate = function (e) { "function" == typeof i.onAfterUpdate && i.onAfterUpdate(e) }, a.onRowHeaderResized = function (e) { i.rowHeaderWidth = a.rowHeaderWidth }, a.onRowFilter = function (e) { "function" == typeof i.onRowFilter && (e.task = new DayPilot.Task(e.row.$.row.task, i), e.control = i, i.onRowFilter(e)) }, a.onAjaxError = function (e) { "function" == typeof i.onAjaxError && i.onAjaxError(e) }, a.onRowHeaderColumnResized = function (e) { for (var t = e.column, n = DayPilot.indexOf(a.rowHeaderColumns, t), r = 0; r < i.columns.length; r++) { var o = a.rowHeaderColumns[r]; i.columns[r].width = o.width } if ("function" == typeof i.onColumnResized) { var s = {}; s.column = i.columns[n], i.onColumnResized(s) } }, a.internalUseStandardColumns = DayPilot.isArray(i.columns), a.onBeforeRowHeaderRender = function (e) { e.task = new DayPilot.Task(e.row.$.row.task, i); var t = e.row.$.row.events[0]; t && "Auto" === i.taskGroupMode && "Group" === t.data.type && (e.task.data.start = t.data.start, e.task.data.end = t.data.end); var n = []; if (DayPilot.isArray(i.columns)) for (var r = 0; r < i.columns.length; r++) { var s = i.columns[r], l = s.display || s.property, d = {}; d.value = a.internal.xssTextHtml(o.getProperty(e.task.data, l)), e.task.data.row && e.task.data.row.columns && e.task.data.row.columns[r] ? d.html = e.task.data.row.columns[r].html : d.html = d.value, n.push(d) } e.row.columns = n, "function" == typeof i.onBeforeRowHeaderRender && i.onBeforeRowHeaderRender(e) }, a.onBeforeRowHeaderExport = function (e) { e.task = new DayPilot.Task(e.row.$.row.task, i), "function" == typeof i.onBeforeRowHeaderExport && i.onBeforeRowHeaderExport(e) }, a.onBeforeEventExport = function (e) { "function" == typeof i.onBeforeTaskExport && (e.task = new DayPilot.Task(e.e, i), i.onBeforeTaskExport(e)) }, a.onBeforeCellRender = function (e) { e.task = i.tasks.find(e.cell.resource), delete e.cell.resource, "function" == typeof i.onBeforeCellRender && (e.control = i, i.onBeforeCellRender(e)) }, a.onBeforeCellExport = function (e) { e.task = i.tasks.find(e.cell.resource), delete e.cell.resource, "function" == typeof i.onBeforeCellExport && (e.control = i, i.onBeforeCellExport(e)) }, a.onBeforeCornerRender = function (e) { "function" == typeof i.onBeforeCornerRender && (e.control = i, i.onBeforeCornerRender(e)) }, a.onBeforeCornerExport = function (e) { "function" == typeof i.onBeforeCornerExport && (e.control = i, i.onBeforeCornerExport(e)) }, a.onBeforeTimeHeaderRender = function (e) { "function" == typeof i.onBeforeTimeHeaderRender && (e.control = i, i.onBeforeTimeHeaderRender(e)) }, a.onBeforeTimeHeaderExport = function (e) { "function" == typeof i.onBeforeTimeHeaderExport && (e.control = i, i.onBeforeTimeHeaderExport(e)) }, a.onEventClick = function (e) { e.task = new DayPilot.Task(e.e, i), e.control = i, "function" == typeof i.onTaskClick && i.onTaskClick(e) }, a.onEventClicked = function (e) { "function" == typeof i.onTaskClicked && i.onTaskClicked(e) }, a.onEventDelete = function (e) { "function" == typeof i.onTaskDelete && i.onTaskDelete(e) }, a.onEventDeleted = function (e) { "function" == typeof i.onTaskDeleted && i.onTaskDeleted(e) }, a.onEventDoubleClick = function (e) { e.task = new DayPilot.Task(e.e, i), e.control = i, "function" == typeof i.onTaskDoubleClick && i.onTaskDoubleClick(e) }, a.onEventDoubleClicked = function (e) { "function" == typeof i.onTaskDoubleClicked && i.onTaskDoubleClicked(e) }, a.onEventRightClick = function (e) { e.task = new DayPilot.Task(e.e, i), "function" == typeof i.onTaskRightClick && i.onTaskRightClick(e) }, a.onEventRightClicked = function (e) { "function" == typeof i.onTaskRightClicked && i.onTaskRightClicked(e) }, a.onRowMoving = function (e) { e.zh = e.source, e.Ah = e.target, e.source = new DayPilot.Task(e.zh.$.row.task, i), e.target = new DayPilot.Task(e.Ah.$.row.task, i), "function" == typeof i.onRowMoving && i.onRowMoving(e) }, a.onRowMove = function (e) { e.zh = e.source, e.Ah = e.target, e.source = new DayPilot.Task(e.zh.$.row.task, i), e.target = new DayPilot.Task(e.Ah.$.row.task, i), e.control = i, "function" == typeof i.onRowMove && i.onRowMove(e), e.source = e.zh, e.target = e.Ah }, a.onRowMoved = function (e) { if ("Update" === i.rowMoveHandling || "Notify" === i.rowMoveHandling) { var t = e.zh.$.row.task, n = e.Ah.$.row.task, a = e.position; if ("forbidden" === a) return; var r = e.zh.calendar.internal.gantt, s = r.xh.findParentArray(t); if (!s) throw "Cannot find source node parent"; var l = DayPilot.indexOf(s, t); s.splice(l, 1); var d = o.findParentArray(n); if (!d) throw "Cannot find target node parent"; var c = DayPilot.indexOf(d, n); switch (a) { case "before": d.splice(c, 0, t); break; case "after": d.splice(c + 1, 0, t); break; case "child": n.children || (n.children = [], n.expanded = !0), n.children.push(t) }i.Qg.notify(), i.update(), r !== i && r.update() } e.source = new DayPilot.Task(e.zh.$.row.task, i), e.target = new DayPilot.Task(e.Ah.$.row.task, i), "function" == typeof i.onRowMoved && i.onRowMoved(e) }, a.onRowClick = function (e) { e.task = new DayPilot.Task(e.resource.$.row.task, i), "function" == typeof i.onRowClick && i.onRowClick(e) }, a.onRowClicked = function (e) { "function" == typeof i.onRowClicked && i.onRowClicked(e) }, a.onRowDoubleClick = function (e) { e.task = new DayPilot.Task(e.resource.$.row.task, i), "function" == typeof i.onRowDoubleClick && i.onRowDoubleClick(e) }, a.onRowDoubleClicked = function (e) { "function" == typeof i.onRowDoubleClicked && i.onRowDoubleClicked(e) }, a.onRowEdit = function (e) { e.task = new DayPilot.Task(e.resource.$.row.task, i), "function" == typeof i.onRowEdit && i.onRowEdit(e) }, a.onRowEdited = function (e) { "function" == typeof i.onRowEdited && i.onRowEdited(e) }, a.onRowSelect = function (e) { e.task = new DayPilot.Task(e.row.$.row.task, i), "function" == typeof i.onRowSelect && i.onRowSelect(e) }, a.onRowSelected = function (e) { "function" == typeof i.onRowSelected && i.onRowSelected(e) }, a.onEventMove = function (e) { e.Bh = e.e, e.task = new DayPilot.Task(e.e, i), e.control = i, "function" == typeof i.onTaskMove && i.onTaskMove(e) }, a.onEventMoved = function (e) { if ("Auto" === i.taskGroupMode) { var t = e.Bh, n = t.data.task; for (n.start = t.start(), n.end = t.end(); t.data.parent;) { var r = a.events.find(t.data.parent.id), o = s.childrenStartEnd(t.data.parent); r.start(o.start), r.end(o.end), a.events.update(r), t = r } } i.Qg.notify(), "function" == typeof i.onTaskMoved && i.onTaskMoved(e) }, a.onEventMoving = function (e) { e.task = new DayPilot.Task(e.e, i), e.Bh = e.e, delete e.position, delete e.overlapping, delete e.resource, "function" == typeof i.onTaskMoving && i.onTaskMoving(e) }, a.onEventResize = function (e) { e.Bh = e.e, e.task = new DayPilot.Task(e.e, i), e.control = i, "function" == typeof i.onTaskResize && i.onTaskResize(e) }, a.onEventResized = function (e) { if ("Auto" === i.taskGroupMode) { var t = e.Bh, n = t.data.task; for (n.start = t.start(), n.end = t.end(); t.data.parent;) { var r = a.events.find(t.data.parent.id), o = s.childrenStartEnd(t.data.parent); r.start(o.start), r.end(o.end), a.events.update(r), t = r } } i.Qg.notify(), "function" == typeof i.onTaskResized && i.onTaskResized(e) }, a.onEventResizing = function (e) { e.task = new DayPilot.Task(e.e, i), e.Bh = e.e, e.control = i, "function" == typeof i.onTaskResizing && i.onTaskResizing(e) }, a.onLinkCreate = function (e) { e.source = i.tasks.find(e.from), e.target = i.tasks.find(e.to), e.control = i, "function" == typeof i.onLinkCreate && i.onLinkCreate(e) }, a.onLinkCreated = function (e) { "function" == typeof i.onLinkCreated && i.onLinkCreated(e) }, a.onResourceExpand = function (e) { var t = e.resource.$.row.task; t.row || (t.row = {}), t.row.collapsed = !1 }, a.onResourceCollapse = function (e) { var t = e.resource.$.row.task; t.row || (t.row = {}), t.row.collapsed = !0 } }, s.Ch = function (e) { for (var t = 0; t < a.rowlist.length; t++) { var n = a.rowlist[t]; if (n.task === e) return a.internal.createRowObject(n) } return null }, s.rh = function () { a.links.list = i.links.list ? i.links.list : [] }, s.qh = function () { a.resources = [], a.events.list = [], o.clearCache(), s.Dh(i.tasks.list, a.resources, null), l.sheet && (l.sheet.commit(), l.sheet = null) }, s.Eh = function (e) { var t = e.type || "Task"; e.children && e.children.length && (t = "Group"); var n = {}; for (var r in e) "children" !== r && (n[r] = e[r]); var o = {}; if (o.data = n, o.type = t, n.box || (n.box = {}), "undefined" == typeof n.box.html) if ("Task" === o.type) { var s = n.complete || 0; n.box.text = s + "%" } else n.box.text = ""; return "undefined" == typeof n.box.htmlRight && (n.box.htmlRight = a.internal.xssTextHtml(n.text)), "function" == typeof i.onBeforeTaskRender && i.onBeforeTaskRender(o), o.type = t, o }; var l = {}; l.keys = {}, l.sheet = null, s.Fh = function (e) {
                if (e.data.box && !e.data.box.cssClass && e.data.box.backColor && "Task" !== e.type) {
                    var t = DayPilot.Util.normalizeColor(e.data.box.backColor), n = e.type + "_" + t.replace("#", ""), a = i.theme, r = i.theme + "_" + n; return l.keys[n] || (l.keys[n] = !0, l.sheet || (l.sheet = DayPilot.sheet()), "Group" === e.type ? (l.sheet.add("." + r + "." + a + "_task_group ." + a + "_event_inner", "position:absolute;top:5px;left:0px;right:0px;bottom:6px;overflow:hidden; background: " + t + "; filter: none; border: 0px none;"),
                        l.sheet.add("." + r + "." + a + "_task_group." + a + "_event:before", "content:''; border-color: transparent transparent transparent " + t + "; border-style: solid; border-width: 6px; position: absolute; bottom: 0px;"), l.sheet.add("." + r + "." + a + "_task_group." + a + "_event:after", "content:''; border-color: transparent " + t + " transparent transparent; border-style: solid; border-width: 6px; position: absolute; bottom: 0px; right: 0px;")) : "Milestone" === e.type && (l.sheet.add("." + r + "." + a + "_task_milestone ." + a + "_event_inner", "position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: " + t + "; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"), l.sheet.add("." + r + "." + a + "_browser_ie8 ." + a + "_task_milestone ." + a + "_event_inner", "-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476);\""))), r
                }
            }, s.Dh = function (t, n, r) { if (DayPilot.isArray(t)) for (var l = 0; l < t.length; l++) { var d = t[l]; o.addToCache(d, r); var c = s.Eh(d), u = c.data, h = c.type, f = {}; if (DayPilot.Util.copyProps(u, f, ["id", "start", "end", "text", "complete", "tags", "versions"]), DayPilot.Util.copyProps(u.box, f), f.parent = r, f.task = d, f.resource = u.id, f.commitCallback = function (e) { return function () { e.task.start = e.start, e.task.end = e.end } }(f), "Group" == h) { f.type = "Group", f.html = u.box && u.box.html || ""; var v = s.Fh(c); if (v && (f.cssClass = (f.cssClass || "") + " " + v), "Auto" === i.taskGroupMode) { var p = s.childrenStartEnd(d); f.start = p.start, f.end = p.end, f.resizeDisabled = !0, f.moveDisabled = !0 } } else if ("Milestone" === h) { f.html = "", d.end = d.start; var v = s.Fh(c); v && (f.cssClass = (f.cssClass || "") + " " + v), u.end = u.start, f.end = u.start, f.barHidden = !0, f.resizeDisabled = !0, f.type = "Milestone", f.width = i.taskHeight, delete f.backColor } else "Task" === h && e(); f.moveVDisabled = !0, f.htmlRight = u.box.htmlRight, f.htmlLeft = u.box.htmlLeft, a.events.list.push(f); var m = {}; m.task = d, DayPilot.Util.copyProps(u.row, m), m.name = u.text, m.id = u.id, m.children = [], m.expanded = !u.row || !u.row.collapsed, d.children && d.children.length && s.Dh(d.children, m.children, d), n.push(m) } }, s.childrenStartEnd = function (e) { if (!e.children || !e.children.length) { var t = e.start, n = e.end; return "Milestone" === e.type && (n = t), { "start": new DayPilot.Date(t), "end": new DayPilot.Date(n) } } for (var t = null, n = null, i = 0; i < e.children.length; i++) { var a = s.childrenStartEnd(e.children[i]); (!t || a.start.getTime() < t.getTime()) && (t = a.start), (!n || a.end.getTime() > n.getTime()) && (n = a.end) } return { "start": t, "end": n } }, this.rows = {}, this.rows.expand = function (e) { a.rows.expand(e) }, this.rows.expandAll = function () { a.rows.expandAll() }, this.rows.filter = function (e) { a.rows.filter(e) }, this.rows.selection = {}, this.rows.selection.add = function (e) { a.rows.find(e.data.id) }, this.rows.selection.clear = function () { a.rows.selection.clear() }, this.rows.selection.get = function () { return a.rows.selection.get().map(function (e) { return new DayPilot.Task(e.$.row.task, i) }) }, this.exportAs = function (e, t) { return a.exportAs(e, t) }, this.kh = null, this.Ug = function (e) { if (e) { var t = { "tasks": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? i.tasks.list = e.list : i.tasks.list = e) } }, "links": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? i.links.list = e.list : i.links.list = e) } }, "scrollTo": { "postInit": function () { this.data && i.scrollTo(this.data) } }, "scrollToTask": { "postInit": function () { this.data && i.scrollToTask(this.data) } } }; this.kh = t; for (var n in e) if (t[n]) { var a = t[n]; a.data = e[n], a.preInit && a.preInit() } else i[n] = e[n] } }, this.jh = function () { var e = this.kh; for (var t in e) { var n = e[t]; n.postInit && n.postInit() } }, this.internal = {}, this.internal.initialized = function () { return i.wa }, this.internal.rowObjectForTaskData = s.Ch, this.internal.loadOptions = i.Ug, this.Qg = {}, this.Qg.scope = null, this.Qg.notify = function () { i.Qg.scope && i.Qg.scope["$apply"]() }, this.Ug(n)
        }, "undefined" != typeof jQuery && !function (e) { e.fn.daypilotGantt = function (e) { var t = null, n = this.each(function () { if (!this.daypilot) { var n = new DayPilot.Gantt(this.id, e); n.init(), this.daypilot = n, t || (t = n) } }); return 1 === this.length ? t : n } }(jQuery), function () { var e = DayPilot.am(); e && e.directive("daypilotGantt", ["$parse", function (e) { return { "restrict": "E", "template": "<div id='{{id}}'></div>", "compile": function (t, n) { return t.replaceWith(this["template"].replace("{{id}}", n["id"])), function (t, n, i) { var a = new DayPilot.Gantt(n[0]); a.Qg.scope = t, a.init(); var r = i["id"]; r && (t[r] = a); var o = i["publishAs"]; if (o) { (0, e(o).assign)(t, a) } for (var s in i) if (0 === s.indexOf("on")) { var l = DayPilot.Util.shouldApply(s); l ? !function (n) { a[n] = function (a) { var r = e(i[n]); t["$apply"](function () { r(t, { "args": a }) }) } }(s) : !function (n) { a[n] = function (a) { e(i[n])(t, { "args": a }) } }(s) } var d = t["$watch"], c = i["config"] || i["daypilotConfig"]; d.call(t, c, function (e, t) { a.Ug(e), a.update() }, !0) } } } }]) }(), DayPilot.Gantt.def = {}, "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded()
    }
}(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) { if ("undefined" == typeof DayPilot.Kanban || !DayPilot.Kanban.def) { var e = function () { }; DayPilot.Kanban = function (t, n) { this.v = "2023.3.5688"; var i = this; this.barWidth = 5, this.cardAutoHeight = !0, this.cardHeight = 60, this.cardMarginLeft = 5, this.cardMarginRight = 5, this.cardMarginBottom = 5, this.columnHeaderHeight = 20, this.crosshairType = "Disabled", this.height = 300, this.heightSpec = "Auto", this.theme = "kanban_default", this.cellMarginBottom = 4, this.cellMarginTop = 5, this.columnWidthSpec = "Auto", this.columnWidth = 200, this.cornerHtml = null, this.contextMenuCard = null, this.rowMinHeight = 0, this.swimlaneCollapsingEnabled = !1, this.swimlaneHeaderWidth = 80, this.visible = !0, this.swimlanes = {}, this.swimlanes.list = [], this.columns = {}, this.columns.list = [], this.cards = {}, this.cards.list = [], this.cardDeleteHandling = "Disabled", this.cardMoveHandling = "Update", this.columnMoveHandling = "Disabled", this.swimlaneMoveHandling = "Disabled", this.cardRightClickHandling = "ContextMenu", this.onBeforeCellRender = null, this.onCardClick = null, this.onCardClicked = null, this.onCardRightClick = null, this.onCardRightClicked = null, this.onCardDelete = null, this.onCardDeleted = null, this.onCardMove = null, this.onCardMoved = null, this.onColumnMove = null, this.onColumnMoved = null, this.onHeightChanged = null, this.onSwimlaneMove = null, this.onSwimlaneMoved = null; var a = new DayPilot.Scheduler(t); this.scheduler = a; var r = {}, o = 15, s = 15; e(); var l = new DayPilot.Date("2000-01-01"); r.translate = function () { var e = a; e.startDate = l, e.scale = "Day", e.timeHeaders = [{ groupBy: "Cell", format: "d" }], e.rowHeaderColumnsMode = "Legacy", e.heightSpec = i.heightSpec, e.cellWidthSpec = i.columnWidthSpec, e.cellWidth = i.columnWidth, e.cellsMarkBusiness = !1, e.cornerHtml = i.cornerHtml, e.crosshairType = i.crosshairType, e.dynamicEventRendering = "Disabled", e.floatingEvents = !1, e.floatingTimeHeaders = !1, e.rowMinHeight = i.rowMinHeight, e.rowMarginTop = i.cellMarginTop, e.rowMarginBottom = i.cellMarginBottom, e.devsb = i.devsb, e.eventMoveToPosition = !0, e.headerHeight = i.columnHeaderHeight, e.eventResizeHandling = "Disabled", e.timeRangeSelectedHandling = "Disabled", e.eventHeight = i.cardHeight, e.eventMarginLeft = i.cardMarginLeft, e.eventMarginRight = i.cardMarginRight, e.eventMarginBottom = i.cardMarginBottom, e.eventTextWrappingEnabled = !0, e.durationBarVisible = !1, e.theme = i.theme, e.visible = i.visible, e.rowHeaderWidth = i.swimlaneHeaderWidth, e.contextMenu = i.contextMenuCard, e.eventDeleteHandling = i.cardDeleteHandling, e.eventMoveHandling = i.cardMoveHandling, e.rowMoveHandling = DayPilot.list(i.swimlanes.list).isEmpty() ? "Disabled" : i.swimlaneMoveHandling, e.eventRightClickHandling = i.cardRightClickHandling, e.onHeightChanged = i.onHeightChanged, e.internal.enableCellStacking(i.cardAutoHeight), e.internal.cssNames.timeheadercol = "_colheadercell", e.internal.cssNames.timeheadercolInner = "_colheadercell_inner", e.internal.cssNames.resourcedivider = "_rowheaderdivider", e.internal.cssNames.event = "_card", e.internal.cssNames.eventInner = "_card_inner", e.internal.cssNames.eventDelete = "_card_delete", e.internal.cssNames.eventMovingSource = "_card_moving_source", i.swimlaneCollapsingEnabled && (e.rowHeaderWidthMarginRight = 15), e.onBeforeTimeHeaderRender = function (e) { var t = i.Gh(e.header.start); if (e.header.html = t.name, e.header.toolTip = t.toolTip || "", e.header.areas = DayPilot.list(t.areas).map(function (e) { var t = []; return DayPilot.Util.copyProps(e, t), t }), DayPilot.list(e.header.areas).forEach(function (e) { e.target = new DayPilot.KanbanColumn(t, i) }), "Disabled" !== i.columnMoveHandling) { var n = i.theme + "_columnmove_handle"; e.header.areas.push({ "left": 0, "top": 0, "width": 20, "height": 20, "css": n, "mousedown": i.Hh, "action": "None" }) } }, e.onBeforeCellRender = function (t) { var n = {}; n.cell = {}, n.cell.column = new DayPilot.KanbanColumn(i.Gh(t.cell.start), i), n.cell.swimlane = null; var a = i.Ih(t.cell.resource); a && (n.cell.swimlane = new DayPilot.Swimlane(a, i)), n.cell.areas = [], n.cell.cssClass = null, n.cell.html = null, n.cell.backImage = null, n.cell.backRepeat = null, n.cell.backColor = null, "function" == typeof i.onBeforeCellRender && (i.onBeforeCellRender(n), DayPilot.Util.copyProps(n.cell, t.cell, ["areas", "cssClass", "html", "backImage", "backRepeat", "backColor"]), DayPilot.list(t.cell.areas).forEach(function (e) { e.target = { "swimlane": n.cell.swimlane, "column": n.cell.column } })); var r = e.rows.find(t.cell.resource); e.resources[r.index].collapsed && (t.cell.cssClass || (t.cell.cssClass = ""), t.cell.cssClass += " " + i.theme + "_collapsed") }, e.onEventClick = function (e) { var t = new DayPilot.Args(e); t.card = new DayPilot.Card(e.e.data.card, i), "function" == typeof i.onCardClick && i.onCardClick(t), e.wrapped = t }, e.onEventClicked = function (e) { var t = e.wrapped; "function" == typeof i.onCardClicked && i.onCardClicked(t) }, e.onEventRightClick = function (e) { var t = new DayPilot.Args(e); if (t.card = new DayPilot.Card(e.e.data.card, i), "function" == typeof i.onCardRightClick && i.onCardRightClick(t), e.wrapped = t, !e.preventDefault.value) { var n = e.e, a = t.card; switch (i.cardRightClickHandling) { case "ContextMenu": var r = n.client.contextMenu(); r ? r.show(a) : i.contextMenuCard && i.contextMenuCard.show(a), e.preventDefault() } } }, e.onEventRightClicked = function (e) { var t = e.wrapped; "function" == typeof i.onCardRightClicked && i.onCardRightClicked(t) }, e.onEventDelete = function (e) { var t = new DayPilot.Args(e); t.card = new DayPilot.Card(e.e.data.card, i), t.control = i, "function" == typeof i.onCardDelete && i.onCardDelete(t), e.wrapped = t }, e.onEventDeleted = function (e) { DayPilot.rfa(i.cards.list, e.e.data.card); var t = e.wrapped; "function" == typeof i.onCardDeleted && i.onCardDeleted(t) }, e.onEventMove = function (e) { e.external && (e.e.data.card = { id: e.e.data.id, name: e.e.data.name, text: e.e.data.text, barColor: e.e.data.barColor, barBackColor: e.e.data.barBackColor }); var t = new DayPilot.Args(e); t.control = i, t.card = new DayPilot.Card(e.e.data.card, i), t.column = new DayPilot.KanbanColumn(i.Gh(e.newStart)), t.position = e.position, t.external = e.external, "*" !== e.newResource ? t.swimlane = new DayPilot.Swimlane(i.Ih(e.newResource), i) : t.swimlane = null; for (var n = a.cells.find(e.newStart, e.newResource)[0].events(), o = e.position, s = null, l = o - 1; n[l];) { if (n[l].data !== e.e.data) { s = new DayPilot.Card(n[l]); break } l -= 1 } for (var d = null, c = o; n[c];) { if (n[c].data !== e.e.data) { d = new DayPilot.Card(n[c]); break } c += 1 } if (t.previous = s, t.next = d, "function" == typeof i.onCardMove && i.onCardMove(t), e.wrapped = t, e.preventDefault(), !t.preventDefault.value) { switch (i.cardMoveHandling) { case "Update": var u = 0; d ? u = d.wrapped.data.sort[0] : s && (u = s.wrapped.data.sort[0]), e.e.data.sort = [u, (new DayPilot.Date).toString()], DayPilot.rfa(i.cards.list, e.e.data.card); var h = 0; d ? h = DayPilot.indexOf(i.cards.list, d.data) : s && (h = DayPilot.indexOf(i.cards.list, s.data) + 1); var f = i.Gh(e.newStart); e.e.data.card.column = f.id, e.e.data.card.swimlane = e.newResource, i.cards.list.splice(h, 0, e.e.data.card), r.updateSort(), a.internal.deleteDragSource(), i.update() }!function () { var t = e.wrapped, n = DayPilot.list(i.cards.list).find(function (t) { return e.e.data.card === t }); n.swimlane = t.swimlane ? t.swimlane.data.id : null, n.column = t.column.data.id, "function" == typeof i.onCardMoved && i.onCardMoved(t) }() } }, e.onBeforeResHeaderRender = function (e) { if (i.swimlaneCollapsingEnabled) { if (!DayPilot.list(i.swimlanes.list).isEmpty()) { var t = i.theme + "_swimlane_collapse"; e.resource.collapsed && (t = i.theme + "_swimlane_expand"), e.resource.areas = [{ "right": 0, "top": 0, "height": s, "width": o, "action": "JavaScript", "css": t, "js": function () { i.Jh(e.resource.index) } }] } } }, e.onRowMove = function (e) { var t = new DayPilot.Args(e); t.control = i, e.wrapped = t, t.swimlane = new DayPilot.Swimlane(e.source.$.row.swimlane); var n = 0; switch (e.position) { case "before": n = e.target.index; break; case "after": n = e.target.index + 1; break; default: throw "Unexpected target swimlane position: " + e.position }t.position = n, t.previous = null; for (var r = n - 1; a.rowlist[r] && a.rowlist[r].swimlane !== t.swimlane.data;)t.previous = new DayPilot.Swimlane(a.rowlist[r].swimlane), r -= 1; t.next = null; for (var o = n; a.rowlist[o] && a.rowlist[o].swimlane !== t.swimlane.data;)t.next = new DayPilot.Swimlane(a.rowlist[o].swimlane), o += 1; "function" == typeof i.onSwimlaneMove && i.onSwimlaneMove(t) }, e.onRowMoved = function (e) { var t = e.wrapped; DayPilot.rfa(i.swimlanes.list, t.swimlane.data); var n = 0; t.next ? n = DayPilot.indexOf(i.swimlanes.list, t.next.data) : t.previous && (n = DayPilot.indexOf(i.swimlanes.list, t.previous.data) + 1), i.swimlanes.list.splice(n, 0, t.swimlane.data), "function" == typeof i.onSwimlaneMoved && i.onSwimlaneMoved(t) }, e.treePreventParentUsage = !0 }, r.loadCards = function () { var e = i.theme + "_card_header", t = i.theme + "_card_body", n = (new DayPilot.Date).toString(); a.sortDirections = ["asc", "desc"], a.events.list = DayPilot.list(i.cards.list).map(function (a, r) { var o = a.html || a.text || "", s = a.name || "", d = {}; return d.id = a.id, d.text = a.text, d.html = "<div class='" + e + "'>" + s + "</div><div class='" + t + "'>" + o + "</div>", d.resource = a.swimlane, d.start = l.addDays(DayPilot.list(i.columns.list).findIndex(function (e) { return a.column === e.id })), d.end = d.start.addDays(1), d.card = a, d.height = a.height, d.cssClass = a.cssClass, d.sort = [r, n], d.areas = DayPilot.list(a.areas).map(function (e) { var t = {}; return DayPilot.Util.copyProps(e, t), e.js && (t.js = function (t) { e.js(new DayPilot.Card(t.data.card, i)) }), t }), d.areas.push({ "left": 0, "width": 5, "top": 0, "bottom": 0, "backColor": a.barColor, "cssClass": i.theme + "_card_bar" }), d }) }, r.updateSort = function () { var e = (new DayPilot.Date).toString(); DayPilot.list(i.cards.list).forEach(function (t, n) { var i = r.findSchedulerEventData(t); i && (i.sort = [n, e]) }) }, r.findSchedulerEventData = function (e) { return DayPilot.list(a.events.list).find(function (t) { return t.card === e }) }, r.loadSwimlanes = function () { var e = DayPilot.list(i.swimlanes.list); a.resources = e.map(function (e) { var t = {}; return t.name = e.name, t.id = e.id, t.swimlane = e, e.collapsed && (t.collapsed = !0, t.eventHeight = 20, t.hideEvents = !0), t }), e.isEmpty() && (a.resources = [{ name: "", id: "*" }]) }, r.loadColumns = function () { var e = DayPilot.list(i.columns.list); a.days = e.length }; var d = {}; d.active = null, d.div = null, d.update = function () { d.clear(); var e = d.findPosition(); d.draw(e) }, d.clear = function () { DayPilot.de(d.div), d.div = null }, d.draw = function (e) { var t = 0; if (e >= a.itline.length) { var n = a.itline[a.itline.length - 1]; t = n.left + n.width - 3 } else t = a.itline[e].left; var r = document.createElement("div"); r.style.position = "absolute", r.style.left = t + "px", r.style.width = "3px", r.style.top = 0, r.style.height = a.headerHeight + "px", r.className = i.theme + "_columnmove_position", d.div = r, a.nav.timeHeader.appendChild(r) }, d.findPosition = function () { if (i.coords.x < 0) return 0; var e = DayPilot.list(a.itline).findIndex(function (e) { var t = e.left + a.rowHeaderWidth, n = e.width; return i.coords.x < t + n / 2 }); return e === -1 ? a.itline.length : e }, this.Hh = function (e) { d.active = e }, this.Gh = function (e) { return i.columns.list[DayPilot.DateUtil.daysDiff(l, e)] }, this.Ih = function (e) { return DayPilot.list(i.swimlanes.list).find(function (t) { return t.id === e }) }, this.message = function (e, t, n, i) { a.message(e, t, n, i) }, this.show = function () { i.visible = !0, a.show() }, this.hide = function () { i.visible = !1, a.hide() }, this.cards.add = function (e) { var t = null; t = e && e instanceof DayPilot.Card ? e.data : e, e && (i.cards.list.push(t), i.update()) }, this.cards.remove = function (e) { var t = null; t = e && e instanceof DayPilot.Card ? e.data : e, e && (DayPilot.rfa(i.cards.list, t), i.update()) }, this.cards.update = function (e) { i.update() }, this.cards.find = function (e) { var t = DayPilot.list(i.cards.list).find(function (t) { return e === t.id }); return t ? new DayPilot.Card(t, i) : null }, this.Jh = function (e) { DayPilot.list(i.swimlanes.list).isEmpty() || (i.swimlanes.list[e].collapsed = !i.swimlanes.list[e].collapsed), i.update() }, this.init = function () { if (this.wa) throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties."); return r.translate(), r.loadSwimlanes(), r.loadColumns(), r.loadCards(), a.init(), i.lg(), this.wa = !0, this }, this.xa = !1, this.dispose = function () { a.dispose(), i.xa = !0 }, this.update = function (e) { var t = i; if (!t.wa) throw new DayPilot.Exception("You are trying to update a DayPilot.Kanban instance that hasn't been initialized yet."); if (t.xa) throw new DayPilot.Exception("You are trying to update a DayPilot.Kanban instance that has been disposed."); i.Ug(e), r.translate(), r.loadSwimlanes(), r.loadColumns(), r.loadCards(), a.update() }, this.lg = function () { DayPilot.re(document, "mouseup", i.og), DayPilot.re(document, "mousemove", i.ng) }, this.Qg = {}, this.Qg.scope = null, this.Qg.notify = function () { i.Qg.scope && i.Qg.scope["$apply"]() }, this.kh = null, this.Ug = function (e) { if (e) { var t = { "cards": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? i.cards.list = e.list : i.cards.list = e) } }, "columns": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? i.columns.list = e.list : i.columns.list = e) } }, "swimlanes": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? i.swimlanes.list = e.list : i.swimlanes.list = e) } } }; this.kh = t; for (var n in e) if (t[n]) { var a = t[n]; a.data = e[n], a.preInit && a.preInit() } else i[n] = e[n] } }, this.jh = function () { var e = this.kh; for (var t in e) { var n = e[t]; n.postInit && n.postInit() } }, this.internal = {}, this.internal.loadOptions = i.Ug, this.Ug(n), this.fg = function () { var e = i.nav.top; return !!e && (e.offsetWidth > 0 && e.offsetHeight > 0) }, this.gg = function () { var e = i, t = e.fg; t() || e.Qa || (e.Qa = setInterval(function () { t() && (e.update(), clearInterval(e.Qa)) }, 100)) }, this.ng = function (e) { i.coords = DayPilot.mo3(a.nav.top, e), d.active && d.update() }, this.og = function (e) { if (d.active) { var t = d.active.source, n = d.findPosition(), a = i.Gh(t.start), r = new DayPilot.Args; r.column = new DayPilot.KanbanColumn(a, i), r.position = n, r.previous = null, r.next = null; for (var o = null, s = r.position; 0 !== s && !o;)a !== i.columns.list[s - 1] && (o = i.columns.list[s - 1]), s -= 1; o && (r.previous = new DayPilot.KanbanColumn(o, i)); var l = null; for (s = r.position; s < i.columns.list.length - 1 && !l;)a !== i.columns.list[s] && (l = i.columns.list[s]), s += 1; if (l && (r.next = new DayPilot.KanbanColumn(l, i)), "function" == typeof i.onColumnMove && i.onColumnMove(r), !r.preventDefault.value) { if ("Update" === i.columnMoveHandling) { DayPilot.rfa(i.columns.list, r.column.data); var c = 0; r.next ? c = DayPilot.indexOf(i.columns.list, r.next.data) : r.previous && (c = DayPilot.indexOf(i.columns.list, r.previous.data) + 1), i.columns.list.splice(c, 0, r.column.data), i.update() } "function" == typeof i.onColumnMoved && i.onColumnMove(r) } d.active = null, d.clear() } } }, DayPilot.Kanban.makeDraggable = function (e) { DayPilot.Scheduler.makeDraggable(e) }, DayPilot.Card = function (e, t) { if (e instanceof DayPilot.Event) { var n = e; this.data = n.data.card, this.wrapped = e } else this.data = e; this.control = t }, DayPilot.KanbanColumn = function (e, t) { this.data = e, this.control = t }, DayPilot.Swimlane = function (e, t) { this.data = e, this.control = t }, function () { var e = DayPilot.am(); e && e.directive("daypilotKanban", ["$parse", function (e) { return { "restrict": "E", "template": "<div id='{{id}}'></div>", "compile": function (t, n) { return t.replaceWith(this["template"].replace("{{id}}", n["id"])), function (t, n, i) { var a = new DayPilot.Kanban(n[0]); a.Qg.scope = t, a.init(); var r = i["id"]; r && (t[r] = a); var o = i["publishAs"]; if (o) { (0, e(o).assign)(t, a) } for (var s in i) if (0 === s.indexOf("on")) { var l = DayPilot.Util.shouldApply(s); l ? !function (n) { a[n] = function (a) { var r = e(i[n]); t["$apply"](function () { r(t, { "args": a }) }) } }(s) : !function (n) { a[n] = function (a) { e(i[n])(t, { "args": a }) } }(s) } var d = t["$watch"], c = i["config"] || i["daypilotConfig"]; d.call(t, c, function (e, t) { a.Ug(e), a.update() }, !0) } } } }]) }(), DayPilot.Kanban.def = {} } }(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    if ("undefined" == typeof DayPilot.Menu || !DayPilot.Menu.def) {
        var e = function () { }, t = {}; t.mouse = null, t.menu = null, t.handlersRegistered = !1, t.hideTimeout = null, t.waitingSubmenu = null, DayPilot.Menu = function (n) { var i = this, a = null; this.v = "2023.3.5688", this.zIndex = 120, this.cssClassPrefix = "menu_default", this.cssOnly = !0, this.menuTitle = null, this.showMenuTitle = !1, this.hideOnMouseOut = !1, this.hideAfter = 200, this.theme = null, this.onShow = null, this.R = function () { }, n && DayPilot.isArray(n) && (this.items = n), this.toJSON = function () { return null }, this.show = function (n, r) { r = r || {}; var o = null; if (n ? "string" == typeof n.id || "number" == typeof n.id ? o = n.id : "function" == typeof n.id ? o = n.id() : "function" == typeof n.value && (o = n.value()) : o = null, "undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), r.submenu || t.menuClean(), this.R.submenu = null, null !== t.mouse) { i.cssOnly || (i.cssOnly = !0); var s = null; if (n && n.isRow && n.$.row.task ? (s = new DayPilot.Task(n.$.row.task, n.calendar), s.menuType = "resource") : s = n && n.isEvent && n.data.task ? new DayPilot.Task(n, n.calendar) : n, "function" == typeof i.onShow) { var l = {}; if (l.source = s, l.menu = i, l.preventDefault = function () { l.preventDefault.value = !0 }, i.onShow(l), l.preventDefault.value) return } var d = document.createElement("div"); if (d.style.position = "absolute", d.style.top = "0px", d.style.left = "0px", d.style.display = "none", d.style.overflow = "hidden", d.style.zIndex = this.zIndex + 1, d.className = this.applyCssClass("main"), d.onclick = function (e) { e.cancelBubble = !0, this.parentNode.removeChild(this) }, this.hideOnMouseOut && (d.onmousemove = function (e) { clearTimeout(t.hideTimeout) }, d.onmouseleave = function (e) { i.delayedHide({ "hideParent": !0 }) }), !this.items || 0 === this.items.length) throw "No menu items defined."; if (this.showMenuTitle) { var c = document.createElement("div"); c.innerHTML = this.menuTitle, c.className = this.applyCssClass("title"), d.appendChild(c) } for (var u = 0; u < this.items.length; u++) { var h = this.items[u], f = document.createElement("div"); if (DayPilot.Util.addClass(f, this.applyCssClass("item")), h.items && (DayPilot.Util.addClass(f, this.applyCssClass("item_haschildren")), DayPilot.Util.addClass(d, this.applyCssClass("withchildren"))), "undefined" != typeof h && !h.hidden) { if ("-" === h.text) { var v = document.createElement("div"); v.addEventListener("click", function (e) { e.stopPropagation() }), f.appendChild(v) } else { var p = document.createElement("a"); if (p.style.position = "relative", p.style.display = "block", h.cssClass && DayPilot.Util.addClass(p, h.cssClass), h.disabled) DayPilot.Util.addClass(p, i.applyCssClass("item_disabled")); else { if (h.onclick || h.onClick) { p.item = h, p.onclick = function (e, t) { return function (n) { if ("function" == typeof e.onClick) { var i = {}; if (i.item = e, i.source = t.source, i.originalEvent = n, i.preventDefault = function () { i.preventDefault.value = !0 }, e.onClick(i), i.preventDefault.value) return } e.onclick && e.onclick.call(t, n) } }(h, p); var m = function (e, n) { return function (i) { i.stopPropagation(), i.preventDefault(); var a = function () { window.setTimeout(function () { n.source.calendar.internal.touch.active = !1 }, 500) }; if ("function" == typeof e.onClick) { var r = {}; if (r.item = e, r.source = n.source, r.originalEvent = i, r.preventDefault = function () { r.preventDefault.value = !0 }, e.onClick(r), r.preventDefault.value) return void a() } e.onclick && e.onclick.call(n, i), t.menuClean(), a() } }; DayPilot.reNonPassive(p, "touchstart", function (e) { e.stopPropagation(), e.preventDefault(), p.source.calendar.internal.touch.active = !0 }), DayPilot.reNonPassive(p, "touchend", m(h, p)) } if (h.items && !h.disabled) { var g = function (e, t) { return function (n) { n.preventDefault(), n.stopPropagation(), i.Kh(e, t) } }; p.ontouchend = g(h, p) } if (h.onclick) e(); else if (h.href) p.href = h.href.replace(/\x7B0\x7D/gim, o), h.target && p.setAttribute("target", h.target); else if (h.command) { var g = function (e, t) { return function (n) { var i = t.source, a = e; a.action = a.action ? a.action : "CallBack"; var r = i.calendar || i.root; if (i instanceof DayPilot.Link) return void r.internal.linkMenuClick(a.command, i, a.action); if (i instanceof DayPilot.Selection) return void r.internal.timeRangeMenuClick(a.command, i, a.action); if (i instanceof DayPilot.Event) return void r.internal.eventMenuClick(a.command, i, a.action); if (i instanceof DayPilot.Selection) return void r.internal.timeRangeMenuClick(a.command, i, a.action); if (i instanceof DayPilot.Task) return void ("resource" === i.menuType ? r.internal.resourceHeaderMenuClick(a.command, t.menuSource, a.action) : r.internal.eventMenuClick(a.command, t.menuSource, a.action)); switch (i.menuType) { case "resource": return void r.internal.resourceHeaderMenuClick(a.command, i, a.action); case "selection": return void r.internal.timeRangeMenuClick(a.command, i, a.action); default: return void r.internal.eventMenuClick(a.command, i, a.action) }n.preventDefault() } }; p.onclick = g(h, p), p.ontouchend = g(h, p) } } h.items && p.addEventListener("click", function (e) { e.stopPropagation() }), p.source = s, p.menuSource = n; var b = document.createElement("span"); if (b.className = i.applyCssClass("item_text"), b.innerHTML = DayPilot.Util.escapeTextHtml(h.text, h.html), p.appendChild(b), h.image) { var y = document.createElement("img"); y.src = h.image, y.style.position = "absolute", y.style.top = "0px", y.style.left = "0px", p.appendChild(y) } if (h.icon) { var w = document.createElement("span"); w.className = i.applyCssClass("item_icon"); var x = document.createElement("i"); x.className = h.icon, w.appendChild(x), p.appendChild(w) } if (h.symbol) { var k = "http://www.w3.org/2000/svg", C = document.createElementNS(k, "svg"); C.setAttribute("width", "100%"), C.setAttribute("height", "100%"); var _ = document.createElementNS(k, "use"); _.setAttribute("href", h.symbol), C.appendChild(_); var D = document.createElement("span"); D.className = i.applyCssClass("item_symbol"), D.style.position = "absolute", D.style.top = "0px", D.style.left = "0px", D.appendChild(C), p.appendChild(D) } var S = function (e, n) { return function () { var a = (n.source, e), r = t.waitingSubmenu; if (r) { if (r.parent === a) return; clearTimeout(r.timeout), t.waitingSubmenu = null } e.disabled || (t.waitingSubmenu = {}, t.waitingSubmenu.parent = a, t.waitingSubmenu.timeout = setTimeout(function () { t.waitingSubmenu = null, i.Kh(a, n) }, 300)) } }; p.onmouseover = S(h, p), f.appendChild(p) } d.appendChild(f) } } var E = function (e) { window.setTimeout(function () { t.menuClean(), DayPilot.MenuBar.deactivate() }, 100) }; d.onclick = E, d.ontouchend = E, d.onmousedown = function (e) { e = e || window.event, e.cancelBubble = !0, e.stopPropagation && e.stopPropagation() }, d.oncontextmenu = function () { return !1 }, document.body.appendChild(d), i.R.visible = !0, i.R.source = n, d.style.display = ""; var T = d.offsetHeight, A = d.offsetWidth; d.style.display = "none"; var H = document.documentElement.clientHeight, M = window.innerWidth, R = "number" == typeof r.windowMargin ? r.windowMargin : 5; if (function () { var e = r.initiator; if (e) { var t = e.div, n = e.e, i = e.area, o = i.visibility || i.v || "Visible", s = e.a; if ("Visible" !== o && (s = DayPilot.Areas.createArea(t, n, i), t.appendChild(s), a = s), s) { var l = DayPilot.abs(s); r.x = l.x, r.y = l.y + l.h + 2 } } }(), function () { var e = "number" == typeof r.x ? r.x : t.mouse.x + 1, n = "number" == typeof r.y ? r.y : t.mouse.y + 1, i = document.body.scrollTop || document.documentElement.scrollTop, a = document.body.scrollLeft || document.documentElement.scrollLeft; if (n - i > H - T && 0 !== H) { var o = n - i - (H - T) + R; d.style.top = n - o + "px" } else d.style.top = n + "px"; if ("right" === r.align && (e -= A), e - a > M - A && 0 !== M) { var s = e - a - (M - A) + R; d.style.left = e - s + "px" } else d.style.left = e + "px" }(), r.parentLink) { var B = r.parentLink, P = parseInt(new DayPilot.StyleReader(d).get("border-top-width")), N = DayPilot.abs(r.parentLink.parentNode), I = N.x + B.offsetWidth, L = N.y - P; I + A > M && (I = Math.max(0, N.x - A)); var z = document.body.scrollTop + document.documentElement.scrollTop; L + T - z > H && (L = Math.max(0, H - T + z)), d.style.left = I + "px", d.style.top = L + "px" } d.style.display = "", this.addShadow(d), this.R.div = d, r.submenu || (DayPilot.Menu.active = this) } }, this.Kh = function (e, t) { var n = e, a = t.source; if ((!i.R.submenu || i.R.submenu.item !== e) && (i.R.submenu && i.R.submenu.item !== e && (DayPilot.Util.removeClass(i.R.submenu.link.parentNode, i.applyCssClass("item_haschildren_active")), i.R.submenu.menu.hide(), i.R.submenu = null), e.items)) { var r = i.cloneOptions(); r.items = e.items, i.R.submenu = {}, i.R.submenu.menu = new DayPilot.Menu(r), i.R.submenu.menu.Lh = i, i.R.submenu.menu.show(a, { "submenu": !0, "parentLink": t, "parentItem": n }), i.R.submenu.item = e, i.R.submenu.link = t, DayPilot.Util.addClass(t.parentNode, i.applyCssClass("item_haschildren_active")) } }, this.applyCssClass = function (e) { var t = this.theme || this.cssClassPrefix, n = this.cssOnly ? "_" : ""; return t ? t + n + e : "" }, this.cloneOptions = function () { return DayPilot.Util.copyProps(r, {}, ["cssClassPrefix", "theme", "hideAfter", "hideOnMouseOut", "zIndex"]) }, this.hide = function (e) { e = e || {}, this.R.submenu && this.R.submenu.menu.hide(); var n = t.waitingSubmenu; if (n && (t.waitingSubmenu = null, clearTimeout(n.timeout)), this.removeShadow(), this.R.div && this.R.div.parentNode === document.body && document.body.removeChild(this.R.div), a && (DayPilot.de(a), a = null), i.R.visible = !1, i.R.source = null, i.Lh && e.hideParent && i.Lh.hide(e), DayPilot.Menu.active === i && (DayPilot.Menu.active = null), "function" == typeof this.onHide) { var r = {}; this.onHide(r) } }, this.delayedHide = function (e) { t.hideTimeout = setTimeout(function () { i.hide(e) }, i.hideAfter) }, this.cancelHideTimeout = function () { clearTimeout(t.hideTimeout) }, this.init = function (e) { return t.mouseMove(e), this }, this.addShadow = function (e) { }, this.removeShadow = function () { }; var r = DayPilot.isArray(n) ? null : n; if (r) for (var o in r) this[o] = r[o] }, DayPilot.MenuBar = function (e, t) { var n = this; t = t || {}, this.items = [], this.theme = "menubar_default", this.windowMargin = 0, this.nav = {}, this.elements = {}, this.elements.items = DayPilot.list(), this.s = null, this.wa = !1; for (var i in t) this[i] = t[i]; this.Mh = function (e) { return this.theme + "_" + e }, this.D = function () { this.nav.top = document.getElementById(e); var t = this.nav.top; t.className = this.Mh("main"), DayPilot.list(n.items).forEach(function (e) { var i = document.createElement("span"); i.innerHTML = DayPilot.Util.escapeTextHtml(e.text, e.html), i.className = n.Mh("item"), e.cssClass && i.classList.add(e.cssClass), i.data = e, i.onclick = function (t) { if (n.active && n.active.item === e) n.Nh(); else if (e.children) return void n.Oh(i); if ("function" == typeof e.onClick) { var a = {}; a.item = e, a.originalEvent = t, e.onClick(a) } }, i.onmousedown = function (e) { e.stopPropagation() }, i.onmouseover = function () { n.active && n.active.item !== e && n.Oh(i) }, t.appendChild(i), n.elements.items.push(i) }) }, this.Nh = function () { var e = n.Mh("item_active"); n.elements.items.forEach(function (t) { DayPilot.Util.removeClass(t, e) }), n.active && n.active.menu && n.active.menu.hide(), n.active = null }, this.Ph = function (e) { return !!n.active && n.active.item === e.data }, this.Oh = function (e) { if (!n.Ph(e)) { n.Nh(); var t = e.data, i = n.active = {}; i.item = t, i.div = e; var a = n.Mh("item_active"); DayPilot.Util.addClass(e, a); var r = DayPilot.abs(e); if (t.children) { i.menu = new DayPilot.Menu({ "items": t.children }); var o = r.x; "right" === t.align && (o += r.w), i.menu.show(null, { "x": o, "y": r.y + r.h, "align": t.align, "windowMargin": n.windowMargin }) } DayPilot.MenuBar.active = n } }, this.init = function () { return this.D(), this.wa = !0, this }, this.dispose = function () { this.wa && (this.nav.top.innerHTML = "", this.elements.items = []) } }, DayPilot.MenuBar.deactivate = function () { DayPilot.MenuBar.active && (DayPilot.MenuBar.active.Nh(), DayPilot.MenuBar.active = null) }, t.menuClean = function () { "undefined" != typeof DayPilot.Menu.active && DayPilot.Menu.active && (DayPilot.Menu.active.hide(), DayPilot.Menu.active = null) }, t.mouseDown = function (e) { "undefined" != typeof t && (t.menuClean(), DayPilot.MenuBar.deactivate()) }, t.mouseMove = function (e) { "undefined" != typeof t && (t.mouse = t.mousePosition(e)) }, t.touchMove = function (e) { "undefined" != typeof t && (t.mouse = t.touchPosition(e)) }, t.touchStart = function (e) { "undefined" != typeof t && (t.mouse = t.touchPosition(e)) }, t.touchEnd = function (e) { }, t.touchPosition = function (e) { if (!e || !e.touches) return null; var t = e.touches[0], n = {}; return n.x = t.pageX, n.y = t.pageY, n }, t.mousePosition = function (e) { return DayPilot.mo3(null, e) }, DayPilot.Menu.touchPosition = function (e) {
            e.touches && (t.mouse = t.touchPosition(e));
        }, DayPilot.Menu.hide = function (e) { if (e = e || {}, e.calendar) { var n = DayPilot.Menu.active; if (n) { var i = n.R.source; i && i.calendar === e.calendar && t.menuClean() } } else t.menuClean() }, t.handlersRegistered || "undefined" == typeof document || (DayPilot.re(document, "mousemove", t.mouseMove), DayPilot.re(document, "mousedown", t.mouseDown), DayPilot.re(document, "touchmove", t.touchMove), DayPilot.re(document, "touchstart", t.touchStart), DayPilot.re(document, "touchend", t.touchEnd), t.handlersRegistered = !0), DayPilot.Menu.def = {}, "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded()
    }
}(DayPilot), "undefined" == typeof DayPilot && (DayPilot = {}), function (DayPilot) {
    function e(t, n, i) { var a = n.indexOf("."); if (a === -1) return void ("__proto__" !== n && "constructor" !== n && (t[n] = i)); var r = n.substring(0, a); if ("__proto__" !== r && "constructor" !== r) { var o = n.substring(a + 1), s = t[r]; "object" == typeof s && null !== s || (t[r] = {}, s = t[r]), e(s, o, i) } } function t(e, n, i) { n = n || {}, i = i || ""; for (var a in e) { var r = e[a]; "object" == typeof r ? "[object Array]" === Object.prototype.toString.call(r) ? n[i + a] = r : r && r.toJSON ? n[i + a] = r.toJSON() : t(r, n, i + a + ".") : n[i + a] = r } return n } if (!DayPilot.ModalStatic) {
        DayPilot.ModalStatic = {}, DayPilot.ModalStatic.list = [], DayPilot.ModalStatic.hide = function () { if (this.list.length > 0) { var e = this.list.pop(); e && e.hide() } }, DayPilot.ModalStatic.remove = function (e) { for (var t = DayPilot.ModalStatic.list, n = 0; n < t.length; n++)if (t[n] === e) return void t.splice(n, 1) }, DayPilot.ModalStatic.close = function (e) { DayPilot.ModalStatic.result(e), DayPilot.ModalStatic.hide() }, DayPilot.ModalStatic.result = function (e) { var t = DayPilot.ModalStatic.list; t.length > 0 && (t[t.length - 1].result = e) }, DayPilot.ModalStatic.displayed = function (e) { for (var t = DayPilot.ModalStatic.list, n = 0; n < t.length; n++)if (t[n] === e) return !0; return !1 }, DayPilot.ModalStatic.stretch = function () { if (this.list.length > 0) { var e = this.list[this.list.length - 1]; e && e.stretch() } }, DayPilot.ModalStatic.last = function () { var e = DayPilot.ModalStatic.list; return e.length > 0 ? e[e.length - 1] : null }; var n = function () { if ("undefined" == typeof window) { var e = {}; return e.add = function () { }, e.commit = function () { }, e } var t = document.createElement("style"); t.setAttribute("type", "text/css"), t.styleSheet || t.appendChild(document.createTextNode("")), (document.head || document.getElementsByTagName("head")[0]).appendChild(t); var n = !!t.styleSheet, e = {}; return e.rules = [], e.commit = function () { try { n && (t.styleSheet.cssText = this.rules.join("\n")) } catch (e) { } }, e.add = function (e, i, a) { if (n) return void this.rules.push(e + "{" + i + "}"); if (t.sheet.insertRule) "undefined" == typeof a && (a = t.sheet.cssRules.length), t.sheet.insertRule(e + "{" + i + "}", a); else { if (!t.sheet.addRule) throw "No CSS registration method found"; t.sheet.addRule(e, i, a) } }, e.print = function () { for (var e = t.sheet.cssRules, n = [], i = 0; i < e.length; i++)n.push(e[i].cssText); return n.join("\n") }, e }, i = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDMxNzMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoxLjg1MTk2ODUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gMC45NTQxNDgzOCwwLjY4MTYwMzEgNS4wMzkwNjI1LDUuNDExNTM4NiA5LjEyMzk3NjYsMC42ODE2MDMxIgogICAgICAgIC8+CiAgPC9nPgo8L3N2Zz4K", a = new n; a.add(".modal_default_main", "border: 10px solid #ccc; max-width: 90%;"), a.add(".modal_default_main:focus", "outline: none;"), a.add(".modal_default_content", "padding: 10px 0px;"), a.add(".modal_default_inner", "padding: 20px;"), a.add(".modal_default_input", "padding: 10px 0px;"), a.add(".modal_default_buttons", "margin-top: 10px;"), a.add(".modal_default_buttons", "padding: 10px 0px;"), a.add(".modal_default_form_item", "padding: 10px 0px; position: relative;"), a.add(".modal_default_form_item_level1", "border-left: 2px solid #ccc; margin-left: 10px; padding-left: 20px;"), a.add(".modal_default_form_item.modal_default_form_title", "font-size: 1.5rem; font-weight: bold;"), a.add(".modal_default_form_item input[type=text]", "width: 100%; box-sizing: border-box;"), a.add(".modal_default_form_item textarea", "width: 100%; height: 200px; box-sizing: border-box;"), a.add(".modal_default_form_item input[type=select]", "width: 100%; box-sizing: border-box;"), a.add(".modal_default_form_item label", "display: block;"), a.add(".modal_default_form_item select", "width: 100%; box-sizing: border-box;"), a.add(".modal_default_form_item_label", "margin: 2px 0px;"), a.add(".modal_default_form_item_image img", "max-width: 100%; height: auto;"), a.add(".modal_default_form_item_invalid", ""), a.add(".modal_default_form_item_invalid_message", "position: absolute; right: 0px; top: 9px; background-color: red; color: #ffffff; padding: 2px; border-radius: 2px;"), a.add(".modal_default_background", "opacity: 0.5; background-color: #000;"), a.add(".modal_default_ok", "padding: 3px; width: 80px;"), a.add(".modal_default_cancel", "padding: 3px; width: 80px;"), a.add(".modal_default_form_item_date", "position: relative;"), a.add(".modal_default_form_item_date:after", "content: ''; position: absolute; right: 7px; top: 50%; margin-top: 3px; width: 10px; height: 15px; background-image:url(" + "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjM4MDM3MzM2O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDE5MjgiCiAgICAgICB3aWR0aD0iOS45MTUzMDYxIgogICAgICAgaGVpZ2h0PSIxMS4zNjkzNyIKICAgICAgIHg9IjAuMTE3MTg3NSIKICAgICAgIHk9Ii0zLjAwOTk5NTciCiAgICAgICByeT0iMS4zMTE4NTA1IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNjY2NjY2M7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNTk4MTQwMTI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MTkzMCIKICAgICAgIHdpZHRoPSIxLjUzNDQxMzYiCiAgICAgICBoZWlnaHQ9IjIuMjE5ODI1IgogICAgICAgeD0iMi4xNTU4NDgzIgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHJ5PSIwLjY3MTc4OTE3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iMS41MjM5NTA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QxOTQ4IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjY3MTc4OTE3IgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHg9IjYuNDUyNzIzNSIKICAgICAgIGhlaWdodD0iMi4yMTk4MjUiCiAgICAgICB3aWR0aD0iMS41MzQ0MTM2IgogICAgICAgaWQ9InJlY3QyMDAzIgogICAgICAgc3R5bGU9ImZpbGw6I2NjY2NjYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS41OTgxNDAxMjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAwNSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIHk9Ii0xLjE2NTg0NjYiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iNi45OTI3MDA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDA3IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAxMyIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjEuNTIzOTUwNiIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHJ5PSIwLjI5NjAxNDciIC8+CiAgICA8cmVjdAogICAgICAgcnk9IjAuMjk2MDE0NyIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGlkPSJyZWN0MjAxNSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDIwMTciCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB4PSI2Ljk5MjcwMDYiCiAgICAgICB5PSIxLjgwMjkwMzQiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSI0LjczMjU5MDciCiAgICAgICB4PSIxLjU2MzAxMzEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBpZD0icmVjdDIwMTkiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QyMDIxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgeD0iNC4yNTgzMjU2IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgcnk9IjAuMjk2MDE0NyIgLz4KICAgIDxyZWN0CiAgICAgICByeT0iMC4yOTYwMTQ3IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgeD0iNy4wMzE3NjMxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDIzIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDwvZz4KPC9zdmc+Cg==" + ")"), "undefined" != typeof navigator && navigator.userAgent.indexOf("Edge") !== -1 && a.add(".modal_default_form_item_date input::-ms-clear", "display: none;"), a.add(".modal_default_form_item_scrollable_scroll", "width: 100%; height: 200px; box-sizing: border-box; border: 1px solid #ccc; overflow-y: auto;"), a.add(".modal_default_form_item_scrollable_scroll_content", "padding: 5px;"), a.add(".modal_default_form_item_searchable", "position: relative;"), a.add(".modal_default_form_item_searchable_icon", ""), a.add(".modal_default_form_item_searchable_icon:after", "content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url(" + i + ");"), a.add(".modal_default_form_item_searchable_list", "box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"), a.add(".modal_default_form_item_searchable_list_item", "background: white; padding: 2px; cursor: default;"), a.add(".modal_default_form_item_searchable_list_item_highlight", "background: #ccc;"), a.add(".modal_default_form_item_time", "position: relative;"), a.add(".modal_default_form_item_time_icon", ""), a.add(".modal_default_form_item_time_icon:after", "content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url(" + i + ");"), a.add(".modal_default_form_item_time_list", "box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"), a.add(".modal_default_form_item_time_list_item", "background: white; padding: 2px; cursor: default;"), a.add(".modal_default_form_item_time_list_item_highlight", "background: #ccc;"), a.add(".modal_default_form_item_datetime_parent", "display: flex;"), a.add(".modal_default_form_item_datetime .modal_default_form_item_time_main", "margin-left: 5px;"), a.add(".modal_default_form_item_datetime input[type='text'].modal_default_input_date ", ""), a.add(".modal_default_form_item_tabular_main", "margin-top: 10px;"), a.add(".modal_default_form_item_tabular_table", "display: table; width: 100%; xbackground-color: #fff; border-collapse: collapse;"), a.add(".modal_default_form_item_tabular_tbody", "display: table-row-group;"), a.add(".modal_default_form_item_tabular_row", "display: table-row;"), a.add(".modal_default_form_item_tabular_row.modal_default_form_item_tabular_header", ""), a.add(".modal_default_form_item_tabular_cell.modal_default_form_item_tabular_rowaction", "padding: 0px; width: 23px;"), a.add(".modal_default_form_item_tabular_cell", "display: table-cell; border: 0px; padding: 2px 2px 2px 0px; cursor: default; vertical-align: bottom;"), a.add(".modal_default_form_item_tabular_header .modal_default_form_item_tabular_cell", "padding-left: 0px; padding-bottom: 0px;"), a.add(".modal_default_form_item_tabular_table input[type=text], .modal_default_form_item_tabular_table input[type=number]", "width:100%; box-sizing: border-box;"), a.add(".modal_default_form_item_tabular_table select", "width:100%; height:100%; box-sizing: border-box;"), a.add(".modal_default_form_item_tabular_plus", "display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"), a.add(".modal_default_form_item_tabular_plus:after", "content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSA1LjAgMC41IEwgNS4wIDkuNSBNIDAuNSA1LjAgTCA5LjUgNS4wJyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"), a.add(".modal_default_form_item_tabular_delete", "display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"), a.add(".modal_default_form_item_tabular_delete:after", "content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgOS41IDkuNSBNIDAuNSA5LjUgTCA5LjUgMC41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"), a.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_plus", "display: none;"), a.add(".modal_default_form_item_tabular_plus_max.modal_default_form_item_tabular_plus", "display: none;"), a.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_delete", "visibility: hidden;"), a.add(".modal_default_form_item_tabular_empty", "height: 1px; margin: 5px 23px 5px 0px; background-color: #ccc;"), a.add(".modal_default_form_item_tabular_spacer .modal_default_form_item_tabular_cell", "padding: 0px;"), a.add(".modal_min_main", "border: 1px solid #ccc; max-width: 90%;"), a.add(".modal_min_background", "opacity: 0.5; background-color: #000;"), a.add(".modal_min_ok", "padding: 3px 10px;"), a.add(".modal_min_cancel", "padding: 3px 10px;"), a.add(".navigator_modal_main", "border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"), a.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after", "box-sizing: content-box;"), a.add(".navigator_modal_month", "font-size: 11px;"), a.add(".navigator_modal_day", "color: black;"), a.add(".navigator_modal_weekend", "background-color: #f0f0f0;"), a.add(".navigator_modal_dayheader", "color: black;"), a.add(".navigator_modal_line", "border-bottom: 1px solid #c0c0c0;"), a.add(".navigator_modal_dayother", "color: gray;"), a.add(".navigator_modal_todaybox", "border: 1px solid red;"), a.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright", "border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"), a.add(".navigator_modal_busy", "font-weight: bold;"), a.add(".navigator_modal_cell", "text-align: center;"), a.add(".navigator_modal_select .navigator_modal_cell_box", "background-color: #FFE794; opacity: 0.5;"), a.add(".navigator_modal_title", "text-align: center;"), a.add(".navigator_modal_titleleft, .navigator_modal_titleright", "text-align: center;"), a.add(".navigator_modal_dayheader", "text-align: center;"), a.add(".navigator_modal_weeknumber", "text-align: center;"), a.add(".navigator_modal_cell_text", "cursor: pointer;"), a.commit(), DayPilot.Modal = function (e) { this.autoFocus = !0, this.focus = null, this.autoStretch = !0, this.autoStretchFirstLoadOnly = !1, this.className = null, this.theme = "modal_default", this.disposeOnClose = !0, this.dragDrop = !0, this.loadingHtml = null, this.maxHeight = null, this.scrollWithPage = !0, this.useIframe = !0, this.zIndex = 99999, this.left = null, this.width = 600, this.top = 20, this.height = 200, this.locale = null, this.closed = null, this.onClose = null, this.onClosed = null, this.onShow = null; var t = this; this.id = "_" + (new Date).getTime() + "n" + 10 * Math.random(), this.Jf = !1, this.Qh = null, this.Rh = null, this.showHtml = function (e) { if (DayPilot.ModalStatic.displayed(this)) throw "This modal dialog is already displayed."; if (this.div || this.Sh(), this.Bd(), this.useIframe) { var t = function (e, t) { return function () { e.setInnerHTML(e.id + "iframe", t) } }; window.setTimeout(t(this, e), 0) } else e.nodeType ? this.div.appendChild(e) : this.div.innerHTML = e; this.Bd(), this.ih(), this.Th() }, this.showUrl = function (e) { if (DayPilot.ModalStatic.displayed(this)) throw "This modal dialog is already displayed."; if (this.useIframe) { this.div || this.Sh(); var n = this.loadingHtml; n && (this.iframe.src = "about:blank", this.setInnerHTML(this.id + "iframe", n)), this.re(this.iframe, "load", this.Uh), this.iframe.src = e, this.Bd(), this.ih(), this.Th() } else t.Vh({ "url": e, "success": function (e) { var n = e.request.responseText; t.showHtml(n) }, "error": function (e) { t.showHtml("Error loading the modal dialog") } }) }, this.Th = function () { if ("function" == typeof t.onShow) { var e = {}; e.root = t.Wh(), e.modal = t, t.onShow(e) } }, this.Wh = function () { return t.iframe ? t.iframe.contentWindow.document : t.div }, this.Vh = function (e) { var t = new XMLHttpRequest; if (t) { var n = e.method || "GET", i = e.success || function () { }, a = e.error || function () { }, r = e.data, o = e.url; t.open(n, o, !0), t.setRequestHeader("Content-type", "text/plain"), t.onreadystatechange = function () { if (4 === t.readyState) if (200 === t.status || 304 === t.status) { var e = {}; e.request = t, i(e) } else if (a) { var e = {}; e.request = t, a(e) } else window.console && console.log("HTTP error " + t.status) }, 4 !== t.readyState && ("object" == typeof r && (r = JSON.stringify(r)), t.send(r)) } }, this.Bd = function () { delete this.result; var e = window, n = document, i = e.pageYOffset ? e.pageYOffset : n.documentElement && n.documentElement.scrollTop ? n.documentElement.scrollTop : n.body.scrollTop; this.theme && (this.hideDiv.className = this.theme + "_background"), this.zIndex && (this.hideDiv.style.zIndex = this.zIndex), this.hideDiv.style.display = "", window.setTimeout(function () { t.hideDiv && (t.hideDiv.onclick = function () { t.hide({ "backgroundClick": !0 }) }) }, 500), this.theme ? this.div.className = this.theme + "_main" : this.div.className = "", this.className && (this.div.className += " " + this.className), this.left ? this.div.style.left = this.left + "px" : this.div.style.marginLeft = "-" + Math.floor(this.width / 2) + "px", this.div.style.position = "absolute", this.div.style.boxSizing = "content-box", this.div.style.top = i + this.top + "px", this.div.style.width = this.width + "px", this.zIndex && (this.div.style.zIndex = this.zIndex), this.height && (this.useIframe || !this.autoStretch ? this.div.style.height = this.height + "px" : this.div.style.height = ""), this.useIframe && this.height && (this.iframe.style.height = this.height + "px"), this.div.style.display = "", this.Yh(), DayPilot.ModalStatic.remove(this), DayPilot.ModalStatic.list.push(this) }, this.Uh = function () { t.iframe.contentWindow.modal = t, t.autoStretch && t.stretch() }, this.stretch = function () { var e = function () { return t.Xh().y }, n = function () { return t.Xh().x }; if (this.useIframe) { for (var i = n() - 40, a = this.width; a < i && this.Zh(); a += 10)this.div.style.width = a + "px", this.div.style.marginLeft = "-" + Math.floor(a / 2) + "px"; for (var r = this.maxHeight || e() - 2 * this.top, o = this.height; o < r && this.$h(); o += 10)this.iframe.style.height = o + "px", this.div.style.height = o + "px"; this.autoStretchFirstLoadOnly && this.ue(this.iframe, "load", this.Uh) } else this.div.style.height = "" }, this.Zh = function () { for (var e = this.iframe.contentWindow.document, t = "BackCompat" === e.compatMode ? e.body : e.documentElement, n = t.scrollWidth, i = e.body.children, a = 0; a < i.length; a++) { var r = i[a].offsetLeft + i[a].offsetWidth; n = Math.max(n, r) } return n > t.clientWidth }, this.$h = function () { for (var e = this.iframe.contentWindow.document, t = "BackCompat" === e.compatMode ? e.body : e.documentElement, n = t.scrollHeight, i = e.body.children, a = 0; a < i.length; a++) { var r = i[a].offsetTop + i[a].offsetHeight; n = Math.max(n, r) } return n > t.clientHeight }, this.Xh = function () { var e = document; if ("CSS1Compat" === e.compatMode && e.documentElement && e.documentElement.clientWidth) { var t = e.documentElement.clientWidth, n = e.documentElement.clientHeight; return { x: t, y: n } } var t = e.body.clientWidth, n = e.body.clientHeight; return { x: t, y: n } }, this.ih = function () { this.Jf || (this.re(window, "resize", this._h), this.re(window, "scroll", this.ai), this.dragDrop && (this.re(document, "mousemove", this.bi), this.re(document, "mouseup", this.ci)), this.Jf = !0) }, this.$a = function () { this.ue(window, "resize", this._h), this.ue(window, "scroll", this.ai), this.dragDrop && (this.ue(document, "mousemove", this.bi), this.ue(document, "mouseup", this.ci)), this.Jf = !1 }, this.di = function (e) { e.target === t.div && (e.preventDefault(), t.div.style.cursor = "move", t.ei(), t.Rh = t.mc(e || window.event), t.Qh = { x: t.div.offsetLeft, y: t.div.offsetTop }) }, this.bi = function (e) { if (t.Rh) { var e = e || window.event, n = t.mc(e), i = n.x - t.Rh.x, a = n.y - t.Rh.y; t.div.style.marginLeft = "0px", t.div.style.top = t.Qh.y + a + "px", t.div.style.left = t.Qh.x + i + "px" } }, this.ci = function (e) { t.Rh && (t.fi(), t.div.style.cursor = null, t.Rh = null) }, this.ei = function () { if (this.useIframe) { var e = document.createElement("div"); e.style.backgroundColor = "#ffffff", e.style.filter = "alpha(opacity=80)", e.style.opacity = "0.80", e.style.width = "100%", e.style.height = this.height + "px", e.style.position = "absolute", e.style.left = "0px", e.style.top = "0px", this.div.appendChild(e), this.mask = e } }, this.fi = function () { this.useIframe && (this.div.removeChild(this.mask), this.mask = null) }, this._h = function () { t.gi(), t.Yh() }, this.ai = function () { t.gi() }, this.Yh = function () { if (!t.left && t.div) { var e = t.div.offsetWidth; t.div.style.marginLeft = "-" + Math.floor(e / 2) + "px" } }, this.gi = function () { if (t.hideDiv && t.div && "none" !== t.hideDiv.style.display && "none" !== t.div.style.display) { var e = t.hi.scrollY(); t.scrollWithPage || (t.div.style.top = e + t.top + "px") } }, this.hi = {}, this.hi.container = function () { return t.container || document.body }, this.hi.scrollY = function () { var e = t.hi.container(); return e === document.body ? window.pageYOffset ? window.pageYOffset : document.documentElement && document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop : e.scrollTop }, this.re = function (e, t, n) { e.addEventListener ? e.addEventListener(t, n, !1) : e.attachEvent && e.attachEvent("on" + t, n) }, this.ue = function (e, t, n) { e.removeEventListener ? e.removeEventListener(t, n, !1) : e.detachEvent && e.detachEvent("on" + t, n) }, this.mc = function (e) { return e.pageX || e.pageY ? { x: e.pageX, y: e.pageY } : { x: e.clientX + document.documentElement.scrollLeft, y: e.clientY + document.documentElement.scrollTop } }, this.abs = function (e) { for (var t = { x: e.offsetLeft, y: e.offsetTop }; e.offsetParent;)e = e.offsetParent, t.x += e.offsetLeft, t.y += e.offsetTop; return t }, this.Sh = function () { var e = t.hi.container(), n = e === document.body, i = n ? "fixed" : "absolute", a = document.createElement("div"); a.id = this.id + "hide", a.style.position = i, a.style.left = "0px", a.style.top = "0px", a.style.right = "0px", a.style.bottom = "0px", a.oncontextmenu = function () { return !1 }, a.onmousedown = function () { return !1 }, e.appendChild(a); var r = document.createElement("div"); r.id = this.id + "popup", r.style.position = i, r.style.left = "50%", r.style.top = "0px", r.style.backgroundColor = "white", r.style.width = "50px", r.style.height = "50px", this.dragDrop && (r.onmousedown = this.di), r.addEventListener("keydown", function (e) { e.stopPropagation() }); var o = null; this.useIframe && (o = document.createElement("iframe"), o.id = this.id + "iframe", o.name = this.id + "iframe", o.frameBorder = "0", o.style.width = "100%", o.style.height = "50px", r.appendChild(o)), e.appendChild(r), this.div = r, this.iframe = o, this.hideDiv = a }, this.setInnerHTML = function (e, n) { var i = window.frames[e], a = i.contentWindow || i.document || i.contentDocument; a.document && (a = a.document), null == a.body && a.write("<body></body>"), n.nodeType ? a.body.appendChild(n) : a.body.innerHTML = n, t.autoStretch && (t.autoStretchFirstLoadOnly && t.ii || (t.stretch(), t.ii = !0)) }, this.close = function (e) { this.result = e, this.hide() }, this.closeSerialized = function () { for (var e = t.Wh(), n = e.querySelectorAll("input, textarea, select"), i = {}, a = 0; a < n.length; a++) { var r = n[a], o = r.name; if (o) { var s = r.value; i[o] = s } } t.close(i) }, this.hide = function (e) { e = e || {}; var n = {}; n.backgroundClick = !!e.backgroundClick, n.result = this.result, n.canceled = "undefined" == typeof this.result, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof this.onClose && (this.onClose(n), n.preventDefault.value) || (this.div && (this.div.style.display = "none", this.hideDiv.style.display = "none", this.useIframe || (this.div.innerHTML = null)), window.focus(), DayPilot.ModalStatic.remove(this), "function" == typeof this.onClosed ? this.onClosed(n) : this.closed && this.closed(), delete this.result, this.disposeOnClose && (t.$a(), t.ji(t.div), t.ji(t.hideDiv), t.div = null, t.hideDiv = null, t.iframe = null)) }, this.ji = function (e) { e && e.parentNode && e.parentNode.removeChild(e) }, this.ki = function () { if (e) for (var t in e) this[t] = e[t] }, this.ki() }, DayPilot.Modal.alert = function (e, t) { t = t || {}, t.height = t.height || 40, t.useIframe = !1; var n = t.okText || "OK"; t.cancelText || "Cancel"; return DayPilot.getPromise(function (i, a) { t.onClosed = function (e) { i(e) }; var r = new DayPilot.Modal(t), o = document.createElement("div"); o.className = r.theme + "_inner"; var s = document.createElement("div"); s.className = r.theme + "_content", s.innerHTML = e; var l = document.createElement("div"); l.className = r.theme + "_buttons"; var d = document.createElement("button"); d.innerText = n, d.className = r.theme + "_ok", d.onclick = function (e) { DayPilot.ModalStatic.close("OK") }, l.appendChild(d), o.appendChild(s), o.appendChild(l), r.showHtml(o), r.autoFocus && d.focus() }) }, DayPilot.Modal.confirm = function (e, t) { t = t || {}, t.height = t.height || 40, t.useIframe = !1; var n = t.okText || "OK", i = t.cancelText || "Cancel"; return DayPilot.getPromise(function (a, r) { t.onClosed = function (e) { a(e) }; var o = new DayPilot.Modal(t), s = document.createElement("div"); s.className = o.theme + "_inner"; var l = document.createElement("div"); l.className = o.theme + "_content", l.innerHTML = e; var d = document.createElement("div"); d.className = o.theme + "_buttons"; var c = document.createElement("button"); c.innerText = n, c.className = o.theme + "_ok", c.onclick = function (e) { DayPilot.ModalStatic.close("OK") }; var u = document.createTextNode(" "), h = document.createElement("button"); h.innerText = i, h.className = o.theme + "_cancel", h.onclick = function (e) { DayPilot.ModalStatic.close() }, d.appendChild(c), d.appendChild(u), d.appendChild(h), s.appendChild(l), s.appendChild(d), o.showHtml(s), o.autoFocus && c.focus() }) }, DayPilot.Modal.prompt = function (e, t, n) { "object" == typeof t && (n = t, t = ""), n = n || {}, n.height = n.height || 40, n.useIframe = !1; var i = n.okText || "OK", a = n.cancelText || "Cancel", r = t || ""; return DayPilot.getPromise(function (t, o) { n.onClosed = function (e) { t(e) }; var s = new DayPilot.Modal(n), l = document.createElement("div"); l.className = s.theme + "_inner"; var d = document.createElement("div"); d.className = s.theme + "_content", d.innerHTML = e; var c = document.createElement("div"); c.className = s.theme + "_input"; var u = document.createElement("input"); u.value = r, u.style.width = "100%", u.onkeydown = function (e) { var t = !1; switch (e.keyCode) { case 13: s.close(this.value); break; case 27: s.close(); break; default: t = !0 }t || (e.preventDefault(), e.stopPropagation()) }, c.appendChild(u); var h = document.createElement("div"); h.className = s.theme + "_buttons"; var f = document.createElement("button"); f.innerText = i, f.className = s.theme + "_ok", f.onclick = function (e) { s.close(u.value) }; var v = document.createTextNode(" "), p = document.createElement("button"); p.innerText = a, p.className = s.theme + "_cancel", p.onclick = function (e) { s.close() }, h.appendChild(f), h.appendChild(v), h.appendChild(p), l.appendChild(d), l.appendChild(c), l.appendChild(h), s.showHtml(l), s.autoFocus && u.focus() }) }; var r = function (e) { return "[object Array]" === Object.prototype.toString.call(e) }; DayPilot.Modal.form = function (t, n, i) { if (1 === arguments.length) { var a = t; if (r(a)) n = {}; else { if ("object" != typeof a) throw "Invalid DayPilot.Modal.form() parameter"; n = t, t = []; for (var s in n) { var l = {}; l.name = s, l.id = s, t.push(l) } } } var d = {}; for (var s in i) d[s] = i[s]; d.height = d.height || 40, d.useIframe = !1; var c = d.okText || "OK", u = d.cancelText || "Cancel"; return DayPilot.getPromise(function (i, a) { d.onClosed = function (t) { if (t.result) { var a = JSON.parse(JSON.stringify(n)); for (var r in t.result) e(a, r, t.result[r]); t.result = a } i(t) }; var r = new DayPilot.Modal(d), s = document.createElement("div"); s.className = r.theme + "_inner"; var l = document.createElement("div"); l.className = r.theme + "_input"; var h = new o({ theme: r.theme, form: t, data: n, zIndex: r.zIndex, locale: r.locale, plugins: r.plugins, onKey: function (e) { switch (e.key) { case "Enter": h.validate() && r.close(h.serialize()); break; case "Escape": r.close() } }, onChange: function (e) { "function" == typeof r.onChange && r.onChange(e) } }), f = h.create(); l.append(f); var v = document.createElement("div"); v.className = r.theme + "_buttons"; var p = document.createElement("button"); p.innerText = c, p.className = r.theme + "_ok", d.okDisabled && (p.disabled = !0), p.onclick = function (e) { h.validate() && r.close(h.serialize()) }; var m = document.createTextNode(" "), g = document.createElement("button"); if (g.innerText = u, g.className = r.theme + "_cancel", g.onclick = function (e) { r.close() }, g.onmousedown = function (e) { h.canceling = !0 }, v.appendChild(p), v.appendChild(m), v.appendChild(g), s.appendChild(l), s.appendChild(v), r.showHtml(s), r.div.setAttribute("tabindex", "-1"), r.div.addEventListener("keydown", function (e) { switch (e.keyCode) { case 27: r.close(); break; case 13: h.validate() && r.close(h.serialize()) } }), r.focus) { var b = null; if ("object" == typeof r.focus) { var y = r.focus.id, w = r.focus.value; b = h.findViewById(y, w) } else "string" == typeof r.focus && (b = h.findViewById(r.focus)); b && b.focus() } else { var x = h.firstFocusable(); r.autoFocus && x ? x.focus() : r.div.focus() } }) }, DayPilot.Modal.close = function (e) { var t = DayPilot.Modal.opener(); t && t.close(e) }, DayPilot.Modal.stretch = function (e) { var t = DayPilot.Modal.opener(); if (!t) throw "Unable to find the opener DayPilot.Modal instance."; t.stretch() }, DayPilot.Modal.closeSerialized = function () { var e = DayPilot.Modal.opener() || DayPilot.ModalStatic.last(); e && e.closeSerialized() }, DayPilot.Modal.opener = function () { return "undefined" != typeof DayPilot && "undefined" != typeof DayPilot.ModalStatic && DayPilot.ModalStatic.list.length > 0 ? DayPilot.ModalStatic.list[DayPilot.ModalStatic.list.length - 1] : parent && parent.DayPilot && parent.DayPilot.ModalStatic && parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length - 1] }, DayPilot.Modal.Experimental = {}, DayPilot.Modal.Experimental.Form = o,
            "undefined" == typeof DayPilot.getPromise && (DayPilot.getPromise = function (e) { return "undefined" != typeof Promise ? new Promise(e) : (DayPilot.Promise = function (e) { var t = this; this.then = function (t, n) { return t = t || function () { }, n = n || function () { }, e(t, n), DayPilot.getPromise(e) }, this["catch"] = function (n) { return t.then(null, n), DayPilot.getPromise(e) } }, new DayPilot.Promise(e)) }); var o = function (e) { this.form = [], this.data = {}, this.theme = "form_default", this.zIndex = 99999, this.locale = "en-us", this.plugins = {}, this.onKey = null, this.li = [], this.mi = null, this.canceling = !1, this.ni = [], this.n = [], this.c = null, e = e || {}; for (var t in e) this[t] = e[t] }; o.prototype.create = function () { return this.load(), this.render(), this.c }, o.prototype.render = function () { var e = this; this.c = document.createElement("div"), this.li.forEach(function (t) { e.createView(t) }), this.applyState() }, o.prototype.createView = function (e) { var t = this.theme, n = this, i = document.createElement("div"); if (i.className = t + "_form_item " + t + "_form_item_level" + e.level, e.interactive || "title" !== e.type ? i.className += " " + t + "_form_item_" + e.type : i.className += " " + t + "_form_title", e.data.cssClass && (i.className += " " + e.data.cssClass), !e.isValue) { var a = document.createElement("div"); a.className = t + "_form_item_label", a.innerText = e.text, i.appendChild(a) } var r = this.createInteractive(e); r.onInput = function (e) { if (e = e || {}, n.oi(r, { "debounce": !e.immediate }), "function" == typeof n.onChange) { var t = {}; t.result = n.serialize(), n.onChange(t) } }, r.onBlur = function () { n.canceling || n.oi(r) }, r.apply(e), r.c = i, r.row = e, r.element && i.appendChild(r.element), this.n.push(r), this.c.appendChild(i) }, o.prototype.validate = function () { var e = this, t = !0; return this.n.forEach(function (n) { var i = e.oi(n); t = t && i }), t }, o.prototype.oi = function (e, t) { function n() { e.pi && (e.pi.remove(), e.pi = null), e.c.classList.add(u); var t = document.createElement("div"); t.classList.add(h), t.innerText = c.message, e.pi = t, e.c.appendChild(t) } t = t || {}; var i = t.debounce, a = t.silent, r = e.row, o = !0, s = "function" == typeof r.data.onValidate ? r.data.onValidate : null, l = "function" == typeof r.data.validate ? r.data.validate : null, d = s || l; if (d) { var c = {}; c.valid = !0, c.value = e.save()[r.field], c.message = "Error", c.values = this.serialize(), c.result = this.serialize(), d(c); var u = this.theme + "_form_item_invalid", h = this.theme + "_form_item_invalid_message"; if (c.valid) clearTimeout(this.ni[r.field]), e.pi && (e.pi.remove(), e.pi = null), e.c.classList.remove(u); else if (!a) if (i) { var f = 1e3; clearTimeout(this.ni[r.field]), this.ni[r.field] = setTimeout(function () { n() }, f) } else n(); o = c.valid } return o }, o.prototype.load = function () { var e = this; this.form.forEach(function (t) { e.processFormItem(t, 0) }); var n; try { var i = JSON.stringify(this.data); n = t(JSON.parse(i)) } catch (e) { throw new Error("The 'data' object is not serializable (it may contain circular dependencies): " + e) } for (var a in n) this.setValue(a, n[a]) }, o.prototype.setValue = function (e, t) { this.li.forEach(function (n) { n.applyValue(e, t) }) }, o.prototype.updateDependentState = function () { var e = this, t = [!0]; (this.mi ? this.mi : this.li).forEach(function (n) { var i = e.updateState(n, { enabled: t[n.level] && !n.data.disabled }); i.isValue && (t[i.level + 1] = i.enabled && i.checked) }) }, o.prototype.processFormItem = function (e, t) { var n = this, i = this.getFieldType(e), a = []; if ("radio" === i) { if (e.name) { var r = new s; r.field = e.id, r.data = e, r.level = t, r.type = "label", r.interactive = !1, r.text = e.name, n.li.push(r), a.push(r) } e.options.forEach(function (r) { var o = new s; o.field = e.id, o.data = r, o.level = t, o.type = i, o.isValue = !0, o.text = r.name, o.resolved = r.id, n.li.push(o), a.push(o), r.children && r.children.forEach(function (e) { var i = n.processFormItem(e, t + 1); a = a.concat(i) }) }) } else if ("title" === i) { var r = new s; r.field = e.id, r.data = e, r.level = t, r.type = i, r.interactive = !1, r.text = e.name, n.li.push(r), a.push(r) } else if ("image" === i) { var r = new s; r.isValue = !0, r.field = e.id, r.data = e, r.level = t, r.type = i, r.interactive = !1, r.text = null, n.li.push(r), a.push(r) } else if ("html" === i) { var r = new s; r.isValue = !0, r.field = e.id, r.data = e, r.level = t, r.type = i, r.interactive = !1, r.text = null, n.li.push(r), a.push(r) } else if ("scrollable" === i) { var r = new s; r.isValue = !0, r.field = e.id, r.data = e, r.level = t, r.type = i, r.interactive = !1, r.text = null, n.li.push(r), a.push(r) } else { var r = new s; r.field = e.id, r.data = e, r.level = t, r.type = i, r.text = e.name, r.children = [], n.li.push(r), a.push(r) } return "checkbox" === i && (r.isValue = !0, r.resolved = !0, e.children && e.children.forEach(function (e) { var i = n.processFormItem(e, t + 1); a = a.concat(i) })), a }, o.prototype.doOnKey = function (e) { if ("function" == typeof this.onKey) { var t = { key: e }; this.onKey(t) } }, o.prototype.createInteractive = function (e) { var t = this, n = { "label": function () { return new l }, "title": function () { return new l }, "image": function () { var t = new l, n = document.createElement("img"); return n.src = e.data.image, t.element = n, t }, "html": function () { var t = new l, n = document.createElement("div"); return "string" == typeof e.data.text ? n.innerText = e.data.text : "string" == typeof e.data.html && (n.innerHTML = e.data.html), t.element = n, t }, "scrollable": function () { var n = new l, i = document.createElement("div"); i.className = t.theme + "_form_item_scrollable_scroll", e.data.height && (i.style.height = e.data.height + "px"); var a = document.createElement("div"); return a.className = t.theme + "_form_item_scrollable_scroll_content", "string" == typeof e.data.text ? a.innerText = e.data.text : "string" == typeof e.data.html && (a.innerHTML = e.data.html), i.appendChild(a), n.element = i, n }, "text": function () { var n = new l; n.apply = function (e) { n.row = e; var t = n.element; t.value = e.value, t.disabled = !e.enabled }; var i = document.createElement("input"); return i.name = e.field, i.type = "text", i.autocomplete = "off", i.onkeydown = function (e) { var n = !1; switch (e.keyCode) { case 13: t.doOnKey("Enter"); break; case 27: t.doOnKey("Escape"); break; default: n = !0 }n || (e.preventDefault(), e.stopPropagation()) }, i.oninput = function (e) { n.onInput() }, i.onblur = function (e) { n.onBlur() }, n.element = i, n.canFocus = function () { return !n.element.disabled }, n.focus = function () { n.element.focus(), n.element.setSelectionRange(0, n.element.value.length) }, n.save = function () { var t = {}; return t[e.field] = i.value, t }, n }, "textarea": function () { var n = new l; n.apply = function (e) { n.row = e; var t = n.element; t.value = e.value, t.disabled = !e.enabled }; var i = document.createElement("textarea"); return i.name = e.field, e.data.height && (i.style.height = e.data.height + "px"), i.onkeydown = function (e) { var n = !1; switch (e.keyCode) { case 13: (e.ctrlKey || e.metaKey) && t.doOnKey("Enter"), n = !1; break; case 27: t.doOnKey("Escape"); break; default: n = !0 }n || e.stopPropagation() }, i.oninput = function (e) { n.onInput() }, i.onblur = function (e) { n.onBlur() }, n.element = i, n.canFocus = function () { return !n.element.disabled }, n.focus = function () { n.element.focus(), n.element.setSelectionRange(0, 0) }, n.save = function () { var t = {}; return t[e.field] = i.value, t }, n }, "date": function () { var n = new l; n.apply = function (e) { n.row = e; var i = n.element, a = n.picker; e.data.dateFormat && (a.pattern = e.data.dateFormat); var r = e.data.locale || t.locale; r && (a.locale = r), i.disabled = !e.enabled, a.date = new DayPilot.Date(e.value); var o = new DayPilot.Date(e.value).toString(e.data.dateFormat || a.pattern, a.locale); i.value = o }; var i = document.createElement("input"); i.name = e.field; var a = new DayPilot.DatePicker({ target: i, theme: "navigator_modal", zIndex: t.zIndex + 1, resetTarget: !1, targetAlignment: "left", onTimeRangeSelect: function (e) { n.onInput({ "immediate": !0 }) } }); return i.picker = a, i.className = t.theme + "_input_date", i.type = "text", i.onkeydown = function (e) { var n = !1; switch (e.keyCode) { case 13: a.visible ? a.close() : t.doOnKey("Enter"); break; case 27: a.visible ? a.close() : t.doOnKey("Escape"); break; case 9: a.close(), n = !0; break; default: n = !0 }n || (e.preventDefault(), e.stopPropagation()) }, i.onfocus = function () { a.show() }, i.onclick = function () { a.show() }, i.oninput = function (e) { n.onInput() }, i.onblur = function (e) { n.onBlur() }, n.element = i, n.picker = a, n.canFocus = function () { return !n.element.disabled }, n.focus = function () { n.element.focus() }, n.save = function () { var t = a.date ? a.date.toString() : null, n = {}; return n[e.field] = t, n }, n }, "time": function () { return t.qi(e) }, "datetime": function () { return t.ri(e) }, "select": function () { var t = new l; t.apply = function (e) { t.row = e; var n = t.element; n.value = e.value, n.disabled = !e.enabled }; var n = document.createElement("select"); return n.name = e.field, e.data.options && e.data.options.forEach && e.data.options.forEach(function (e) { var t = document.createElement("option"); t.innerText = e.name || e.id, t.value = e.id, t.si = e.id, n.appendChild(t) }), n.onchange = function (e) { t.onInput({ "immediate": !0 }) }, n.onblur = function (e) { t.onBlur() }, t.element = n, t.canFocus = function () { return !t.element.disabled }, t.focus = function () { t.element.focus() }, t.save = function () { var t = null, i = n.options[n.selectedIndex]; i && "undefined" != typeof i.si && (t = i.si); var a = {}; return a[e.field] = t, a }, t }, "searchable": function () { var n = new l; n.apply = function (e) { n.row = e; var t = n.searchable; t.disabled = !e.enabled, t.select(e.value) }; var i = new d({ data: e.data.options || [], name: e.field, theme: t.theme + "_form_item_searchable", listZIndex: t.zIndex + 1, onSelect: function (e) { e.ui && n.onInput({ "immediate": !0 }) } }), a = i.create(); return n.element = a, n.searchable = i, n.canFocus = function () { return !n.searchable.disabled }, n.focus = function () { n.searchable.focus() }, n.save = function () { var t = i.selected && i.selected.id, n = {}; return n[e.field] = t, n }, n }, "radio": function () { var n = new l; n.apply = function (e) { n.row = e; var t = n.radio; t.checked = e.checked, t.disabled = !e.enabled }; var i = document.createElement("label"), a = document.createElement("input"); a.type = "radio", a.name = e.field, a.si = e.resolved, a.onchange = function (e) { var i = n.row; t.findRowsByField(i.field).forEach(function (e) { t.updateState(e, { checked: !1 }) }), t.updateState(i, { checked: !0 }), t.applyState(), n.onInput({ "immediate": !0 }) }, a.onblur = function (e) { n.onBlur() }, i.appendChild(a); var r = document.createTextNode(e.text); return i.append(r), n.element = i, n.radio = a, n.canFocus = function () { return !1 }, n.focus = function () { n.radio.focus() }, n.save = function () { if (!a.checked) return {}; var t = a.si, n = {}; return n[e.field] = t, n }, n }, "checkbox": function () { var n = new l; n.apply = function (e) { n.row = e; var t = n.checkbox; t.checked = e.checked, t.disabled = !e.enabled }; var i = document.createElement("label"), a = document.createElement("input"); a.type = "checkbox", a.name = e.field, a.si = e.resolved, a.onchange = function (e) { var i = n.row; t.updateState(i, { checked: this.checked }), t.applyState(), n.onInput({ "immediate": !0 }) }, a.onblur = function (e) { n.onBlur() }, i.appendChild(a); var r = document.createTextNode(e.text); return i.append(r), n.element = i, n.checkbox = a, n.canFocus = function () { return !1 }, n.focus = function () { n.checkbox.focus() }, n.save = function () { var t = a.checked, n = {}; return n[e.field] = t, n }, n }, "table": function () { var n = new l; n.apply = function (e) { n.row = e; var t = n.table; t.disabled = !e.enabled, t.load(e.value || []) }; var i = new c({ name: e.field, form: t, theme: t.theme + "_form_item_tabular", item: e.data, onInput: function (e) { n.onInput() } }), a = i.create(); return n.element = a, n.table = i, n.canFocus = function () { return !1 }, n.focus = function () { n.table.focus() }, n.save = function () { var t = i.save(), n = {}; return n[e.field] = t, n }, n } }; return t.plugins && t.plugins[e.type] ? t.plugins[e.type](e) : n[e.type]() }, o.prototype.qi = function (e) { var t = this, n = new l; n.apply = function (e) { n.row = e; var t = n.searchable; t.disabled = !e.enabled, t.select(e.value) }; var i = [], a = e.data.timeInterval || 15;[1, 5, 10, 15, 20, 30, 60].includes(a) || (a = 15); for (var r = 60 / a, o = e.data.locale || t.locale, s = DayPilot.Locale.find(o) || DayPilot.Locale.US, c = DayPilot.Date.today(), u = 0; u < 24 * r; u++) { var h = c.addMinutes(a * u), f = {}; f.name = h.toString(e.data.timeFormat || s.timePattern, s), f.id = h.toString("HH:mm"), i.push(f) } var v = new d({ data: i, name: e.field, theme: t.theme + "_form_item_time", listZIndex: t.zIndex + 1, strategy: "startsWith", onSelect: function (e) { e.ui && n.onInput({ "immediate": !0 }) } }), p = v.create(); return n.element = p, n.searchable = v, n.canFocus = function () { return !n.searchable.disabled }, n.focus = function () { n.searchable.focus() }, n.save = function () { var t = v.selected && v.selected.id, n = {}; return n[e.field] = t, n }, n }, o.prototype.ri = function (e) { var t = this, n = new l; n.apply = function (e) { n.row = e; var i = n.searchable; i.disabled = !e.enabled; var a = new DayPilot.Date(e.value).toString("HH:mm"); i.select(a); var r = n.dateInput, o = n.picker; e.data.dateFormat && (o.pattern = e.data.dateFormat); var s = e.data.locale || t.locale; if (s) { var l = DayPilot.Locale.find(s) || DayPilot.Locale.US; o.locale = s, o.pattern = l.datePattern } r.disabled = !e.enabled, o.date = new DayPilot.Date(e.value); var d = new DayPilot.Date(e.value).toString(e.data.dateFormat || o.pattern, o.locale); r.value = d }; var i = function () { var i = document.createElement("input"); i.name = e.field; var a = new DayPilot.DatePicker({ target: i, theme: "navigator_modal", zIndex: t.zIndex + 1, resetTarget: !1, targetAlignment: "left", onTimeRangeSelect: function (e) { n.onInput({ "immediate": !0 }) } }); return i.picker = a, i.className = t.theme + "_input_date", i.type = "text", i.onkeydown = function (e) { var n = !1; switch (e.keyCode) { case 13: a.visible ? a.close() : t.doOnKey("Enter"); break; case 27: a.visible ? a.close() : t.doOnKey("Escape"); break; case 9: a.close(), n = !0; break; default: n = !0 }n || (e.preventDefault(), e.stopPropagation()) }, i.onfocus = function () { a.show() }, i.onclick = function () { a.show() }, i.oninput = function (e) { n.onInput() }, i.onblur = function (e) { n.onBlur() }, n.dateInput = i, n.picker = a, i }(), a = function () { var i = [], a = e.data.timeInterval || 15;[1, 5, 10, 15, 20, 30, 60].includes(a) || (a = 15); for (var r = 60 / a, o = e.data.locale || t.locale, s = DayPilot.Locale.find(o) || DayPilot.Locale.US, l = DayPilot.Date.today(), c = 0; c < 24 * r; c++) { var u = l.addMinutes(a * c), h = {}; h.name = u.toString(e.data.timeFormat || s.timePattern, s), h.id = u.toString("HH:mm"), i.push(h) } var f = new d({ data: i, name: e.field, theme: t.theme + "_form_item_time", listZIndex: t.zIndex + 1, strategy: "startsWith", onSelect: function (e) { e.ui && n.onInput({ "immediate": !0 }) } }); return n.searchable = f, f.create() }(), r = document.createElement("div"); return r.className = t.theme + "_form_item_datetime_parent", r.appendChild(i), r.appendChild(a), n.element = r, n.canFocus = function () { return !n.searchable.disabled }, n.focus = function () { n.dateInput.focus() }, n.save = function () { var t = n.searchable.selected && n.searchable.selected.id, i = n.picker.date ? n.picker.date.toString() : null, a = new DayPilot.Date(i).getDatePart(), r = DayPilot.Date.parse(a.toString("yyyy-dd-MM ") + t, "yyyy-dd-MM HH:mm"), o = {}; return o[e.field] = r, o }, n }, o.prototype.findRowsByField = function (e) { return this.li.filter(function (t) { return t.field === e }) }, o.prototype.findViewById = function (e, t) { return this.n.find(function (n) { return n.row.field === e && ("radio" !== n.row.type || n.row.resolved === t) }) }, o.prototype.firstFocusable = function () { return this.n.find(function (e) { return e.canFocus && e.canFocus() }) }, o.prototype.updateState = function (e, t) { var n = this.mi ? this.mi : this.li, i = n.indexOf(e); return this.mi = n.map(function (n) { if (n !== e) return n; if (e.propsEqual(t)) return e; var i = e.clone(); for (var a in t) i[a] = t[a]; return i }), this.mi[i] }, o.prototype.updateInteractive = function (e) { var t = this.mi.indexOf(e); this.n[t].apply(e) }, o.prototype.applyState = function () { var e = this; if (this.updateDependentState(), this.mi) { this.mi.filter(function (t, n) { return e.li[n] !== t }).forEach(function (t) { e.updateInteractive(t) }), this.li = this.mi, this.mi = null } }, o.prototype.getFieldType = function (e) { return ["text", "date", "select", "searchable", "radio", "checkbox", "table", "title", "image", "html", "textarea", "scrollable", "time", "datetime"].indexOf(e.type) !== -1 ? e.type : e.type && this.plugins && this.plugins[e.type] ? e.type : e.image ? "image" : e.html || e.text ? "html" : e.id ? e.options ? "searchable" : e.dateFormat ? "date" : e.columns ? "table" : "text" : "title" }, o.prototype.serialize = function () { var e = {}; return this.n.forEach(function (t) { var n = t.save(); for (var i in n) e[i] = n[i] }), e }; var s = function () { this.id = this.guid(), this.field = null, this.data = null, this.type = null, this.level = 0, this.enabled = !0, this.value = null, this.text = null, this.interactive = !0, this.isValue = !1, this.checked = !1, this.resolved = null }; s.prototype.clone = function () { var e = new s; for (var t in this) "id" !== t && (e[t] = this[t]); return e }, s.prototype.propsEqual = function (e) { for (var t in e) if (this[t] !== e[t]) return !1; return !0 }, s.prototype.guid = function () { var e = function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) }; return "" + e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() }, s.prototype.applyValue = function (e, t) { this.field === e && (this.value = t, this.isValue && t === this.resolved && (this.checked = !0)) }; var l = function () { this.element = null, this.canFocus = function () { return !1 }, this.apply = function (e) { }, this.focus = function () { }, this.save = function () { return {} } }, d = function (e) { this.data = [], this.name = null, this.theme = "searchable_default", this.vi = !1, this.listZIndex = 1e5, this.onSelect = null, this.wi = null, this.xi = null, this.yi = !1, this.zi = null, this.Bc = null, this.A = [], this.Ai = null, e = e || {}; var t = this, n = { "selected": { post: function (e) { "object" == typeof e && e.id ? t.wi = e : "string" != typeof e && "number" != typeof e || t.select(e) } } }; Object.defineProperty(this, "selected", { get: function () { return this.wi } }), Object.defineProperty(this, "disabled", { get: function () { return this.vi }, set: function (e) { this.vi = e, this.zi && (this.zi.disabled = e, e && this.Bi()) } }); for (var i in e) n[i] || (this[i] = e[i]); for (var i in e) n[i] && n[i].post(e[i]) }; d.prototype.select = function (e) { return this.wi = this.data.find(function (t) { return t.id === e }), this.Ci(!1), this }, d.prototype.create = function () { function e(e) { var n = l.strategy; "includes" !== l.strategy && "startsWith" !== l.strategy && (n = "includes"), e = e || n || "includes", h.style.display = "", h.style.top = v.offsetHeight + "px", h.style.left = "0px", h.style.width = v.offsetWidth + "px", h.innerHTML = "", h.addEventListener("mousedown", function (e) { e.preventDefault() }), l.xi = null, l.A = []; var a = null; l.data.forEach(function (n) { var r = n.name || n.id; if ("includes" === e) { if (r.toLowerCase().indexOf(v.value.toLowerCase()) === -1) return } else if ("startsWith" === e && 0 !== r.toLowerCase().indexOf(v.value.toLowerCase())) return; var o = document.createElement("div"); o.className = l.theme + "_list_item", o.innerText = r, o.item = n, n === l.wi && (l.xi = o), a || (a = o), o.addEventListener("mousedown", function (e) { i(o), e.preventDefault() }), o.addEventListener("mousemove", function (e) { l.xi !== o && (l.xi = o, t({ dontScroll: !0 })) }), h.appendChild(o), l.A.push(o) }), l.xi || (l.xi = a), t() } function t(e) { e = e || {}; var t = !e.dontScroll; document.querySelectorAll("." + l.theme + "_list_item_highlight").forEach(function (e) { e.className = e.className.replace(l.theme + "_list_item_highlight", "") }), l.xi && (l.xi.className += " " + l.theme + "_list_item_highlight", t && !n(l.xi, h) && l.xi.scrollIntoView()) } function n(e, t) { var n = e.getBoundingClientRect(), i = t.getBoundingClientRect(); return n.top >= i.top && n.bottom <= i.bottom } function i(e) { var t = e.item; l.wi = t, l.Ci(!0), r(), o() } function a() { l.Bi() } function r() { l.B() } function o() { l.yi = !0, v.setAttribute("readonly", "readonly"), v.focus() } function s() { l.yi = !1, v.removeAttribute("readonly"), v.select(), e("all") } var l = this, d = this, c = document.createElement("div"); c.className = this.theme + "_main", c.style.position = "relative"; var u = document.createElement("div"); u.className = this.theme + "_icon", u.style.position = "absolute", u.style.right = "0", u.style.top = "0", u.style.bottom = "0", u.style.width = "20px", u.addEventListener("mousedown", function (e) { e.preventDefault(), l.yi ? (l.focus(), s()) : (a(), o()) }); var h = document.createElement("div"); h.className = this.theme + "_list", h.style.display = "none", h.style.position = "absolute", h.style.zIndex = this.listZIndex; var f = document.createElement("input"); f.type = "hidden", f.name = this.name, f.searchable = d, this.Ai = f; var v = document.createElement("input"); return v.type = "text", v.className = this.theme + "_input", v.disabled = this.vi, v.addEventListener("click", function (e) { s() }), v.addEventListener("focus", function (t) { e("all") }), v.addEventListener("input", function (t) { e() }), v.addEventListener("blur", function (e) { v.removeAttribute("readonly"), a() }), v.addEventListener("keydown", function (e) { if (l.yi) { if ("Enter" === e.key) return; if ("Esc" === e.key || "Escape" === e.key) return; s() } if ("ArrowDown" === e.key) { var n = d.A.indexOf(d.xi); n + 1 < d.A.length && (d.xi = d.A[n + 1]), t() } else if ("ArrowUp" === e.key) { var n = d.A.indexOf(d.xi); n - 1 >= 0 && (d.xi = d.A[n - 1]), t() } else "Enter" === e.key ? l.xi ? (e.stopPropagation(), i(l.xi)) : (e.stopPropagation(), a(), o()) : "Esc" !== e.key && "Escape" !== e.key || (e.stopPropagation(), a(), o()) }), this.zi = v, this.Bc = h, this.wi || (this.wi = this.data[0], this.wi && (v.value = this.wi.name)), c.appendChild(v), c.appendChild(u), c.appendChild(f), c.appendChild(h), c }, d.prototype.Bi = function () { this.B(), this.wi ? this.zi.value = this.wi.name : (this.zi.value = "", this.Ci(!0)) }, d.prototype.focus = function () { this.yi = !0, this.zi.setAttribute("readonly", "readonly"), this.zi.focus(), this.Bi() }, d.prototype.B = function () { this.Bc.style.display = "none" }, d.prototype.Ci = function (e) { if (this.Ai.value = this.selected ? this.selected.id : null, this.wi ? this.zi.value = this.wi.name : this.zi.value = "", "function" == typeof this.onSelect) { var t = { control: this, ui: e }; this.onSelect(t) } }; var c = function (e) { this.form = null, this.item = null, this.data = null, this.name = null, this.theme = "edit_table_default", this.onInput = null, this.nav = {}, this.Di = null, this.li = [], e = e || {}; for (var t in e) this[t] = e[t] }; c.prototype.create = function () { var e = this, t = document.createElement("div"); t.className = this.theme + "_main", t.style.position = "relative"; var n = document.createElement("input"); n.type = "hidden", n.name = e.name, n.table = this, t.appendChild(n); var i = document.createElement("div"); i.className = this.theme + "_table"; var a = this.Ei(); i.appendChild(a); var r = e.Fi({}); r.spacer = !0; var o = this.Gi(r); o.classList.add(e.theme + "_spacer"), i.appendChild(o); var s = document.createElement("div"); s.className = e.theme + "_tbody", i.appendChild(s), t.appendChild(i); var l = document.createElement("div"); t.appendChild(l), this.nav.body = s, this.nav.table = i, this.nav.main = t, this.nav.after = l; var d = document.createElement("div"), c = document.createElement("span"); return c.className = this.theme + "_plus", c.addEventListener("click", function (t) { if (!e.disabled) { var n = e.item.onNewRow, i = {}; if ("function" == typeof n) { var a = {}; a.result = e.form.serialize(), a.value = {}, n(a), i = a.value } var r = e.Fi(i); e.li.push(r), e.X(), e.Hi() } }), this.nav.plus = c, d.appendChild(c), t.appendChild(d), t }, c.prototype.Ei = function () { var e = this, t = document.createElement("div"); return t.classList.add(this.theme + "_row"), t.classList.add(this.theme + "_header"), this.item.columns.forEach(function (n) { var i = document.createElement("div"); i.classList.add(e.theme + "_cell"), i.innerText = n.name, t.appendChild(i) }), t }, c.prototype.Ii = function () { var e = this.item.max || 0; return !!(e && this.li.length >= e) }, c.prototype.save = function () { var e = this, t = []; return e.li.forEach(function (e) { var n = {}; e.cells.forEach(function (e) { n[e.id] = e.value }), t.push(n) }), t }, c.prototype.load = function (e) { if ("[object Array]" !== Object.prototype.toString.call(e)) throw new Error("Array expected"); this.data = e, this.Ji(), this.X() }, c.prototype.Ki = function () { this.disabled ? this.nav.main.classList.add(this.theme + "_disabled") : this.nav.main.classList.remove(this.theme + "_disabled"), this.Ii() ? this.nav.plus.classList.add(this.theme + "_plus_max") : this.nav.plus.classList.remove(this.theme + "_plus_max") }, c.prototype.Ji = function () { var e = this; this.li = [], this.data.forEach(function (t) { var n = e.Fi(t); e.li.push(n) }) }, c.prototype.Li = function (e) { var t = this, n = t.li.indexOf(e); t.li.splice(n, 1) }, c.prototype.Fi = function (e) { var t = this, n = {}; return n.data = e, n.cells = [], t.item.columns.forEach(function (i) { var a = i.id, r = e[a], o = t.Mi(i); if ("undefined" == typeof r) if ("text" === o) r = ""; else if ("number" === o) r = 0; else if ("select" === o) { var s = i.options; r = s && s[0].id } var l = {}; l.id = a, l.value = r, l.type = o, l.data = i, n.cells.push(l) }), n }, c.prototype.Mi = function (e) { var t = e.type; return t || (t = e.options ? "select" : "text"), t }, c.prototype.X = function () { var e = this; if (this.nav.body.innerHTML = "", this.nav.after.innerHTML = "", this.li.forEach(function (t) { var n = e.Gi(t); e.nav.body.appendChild(n) }), 0 === this.li.length) { var t = e.Ni(); e.nav.after.appendChild(t) } this.Ki() }, c.prototype.Ni = function () { var e = document.createElement("div"); return e.className = this.theme + "_empty", e }, c.prototype.Gi = function (e) { var t = this, n = document.createElement("div"); n.className = t.theme + "_row", e.cells.forEach(function (i) { var a = document.createElement("div"); a.className = t.theme + "_cell"; var r = t.Oi(i); if (e.spacer) { var o = document.createElement("div"); o.style.height = "0px", o.style.overflow = "hidden", o.appendChild(r), a.appendChild(o) } else a.appendChild(r); n.appendChild(a) }); var i = document.createElement("div"); i.classList.add(t.theme + "_cell"), i.classList.add(t.theme + "_rowaction"); var a = document.createElement("span"); return a.className = this.theme + "_delete", a.addEventListener("click", function (n) { t.disabled || (t.Li(e), t.X(), t.Hi()) }), e.spacer || i.appendChild(a), n.appendChild(i), n }, c.prototype.Hi = function () { var e = this; if ("function" == typeof e.onInput) { var t = {}; e.onInput(t) } }, c.prototype.Oi = function (e) { var t = this, n = e.type; if ("text" === n || "number" === n) { var i = document.createElement("input"); return i.type = n, t.disabled && (i.disabled = !0), e.value && (i.value = e.value), i.addEventListener("keyup", function (i) { "number" === n ? e.value = Number(this.value) : e.value = this.value, t.Hi() }), i } if ("select" === n) { var a = document.createElement("select"); return t.disabled && (a.disabled = !0), e.data.options.forEach(function (t) { var n = document.createElement("option"); n.innerText = t.name, n.value = t.id, n.si = t.id, a.appendChild(n), e.value === t.id && n.setAttribute("selected", !0) }), a.addEventListener("change", function (n) { var i = a.options[a.selectedIndex]; i && "undefined" != typeof i.si && (e.value = i.si), t.Hi() }), a } throw new Error("Unsupported item type: " + n) }, c.prototype.focus = function () { }
    }
}(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    var e = function () { }; if ("undefined" == typeof DayPilot.Month || !DayPilot.Month.def) {
        var t = {}; DayPilot.Month = function (n, i) {
            this.v = "2023.3.5688", this.nav = {}; var a = this; this.id = n, this.isMonth = !0, this.api = 2, this.wa = !1, this.hideUntilInit = !0, this.startDate = new DayPilot.Date, this.width = null, "function" == typeof DayPilot.Bubble ? this.bubble = new DayPilot.Bubble : this.bubble = null, this.cssClassPrefix = "month_default", this.cellHeight = 100, this.cellMarginBottom = 0, this.allowMultiSelect = !0, this.autoRefreshCommand = "refresh", this.autoRefreshEnabled = !1, this.autoRefreshInterval = 60, this.autoRefreshMaxCount = 20, this.doubleClickTimeout = 300, this.eventEndSpec = "DateTime", this.eventTextWrappingEnabled = !1, this.headerHeight = 30, this.heightSpec = "Auto", this.weekStarts = "Auto", this.eventBarVisible = !0, this.eventHeight = 25, this.cellHeaderHeight = 24, this.clientState = {}, this.afterRender = function () { }, this.cssOnly = !0, this.eventsLoadMethod = "GET", this.initEventEnabled = !1, this.lineSpace = 1, this.loadingLabelVisible = !0, this.loadingLabelText = "Loading...", this.loadingLabelHtml = null, this.locale = "en-us", this.maxEvents = "All", this.messageHideAfter = 5e3, this.notifyCommit = "Immediate", this.visible = !0, this.eventMoveToPosition = !1, this.eventStartTime = !1, this.eventEndTime = !1, this.eventStartEndWidth = 45, this.showWeekend = !0, this.cellMode = !1, this.shadowType = "Fill", this.tapAndHoldTimeout = 300, this.timeFormat = "Auto", this.viewType = "Month", this.weeks = 1, this.xssProtection = "Enabled", this.cellHeaderClickHandling = "Enabled", this.eventClickHandling = "Enabled", this.eventDeleteHandling = "Disabled", this.eventDoubleClickHandling = "Disabled", this.eventMoveHandling = "Update", this.eventResizeHandling = "Update", this.eventRightClickHandling = "ContextMenu", this.eventSelectHandling = "Update", this.headerClickHandling = "Enabled", this.timeRangeSelectedHandling = "Enabled", this.timeRangeDoubleClickHandling = "Disabled", this.onEventFilter = null, this.onBeforeEventRender = null, this.onBeforeCellRender = null, this.onBeforeHeaderRender = null, this.onBeforeEventDomAdd = null, this.onBeforeEventDomRemove = null, this.onBeforeEventExport = null, this.onBeforeCellExport = null, this.onBeforeHeaderExport = null, this.onCellHeaderClick = null, this.onCellHeaderClicked = null, this.backendUrl = null, this.cellEvents = [], this.elements = {}, this.elements.events = [], this.ra = {}, this.ra.events = {}, this.events = {}, this.va = 0, this.members = {}, this.members.ignore = ["internal", "nav", "debug", "temp", "elements", "members", "cellProperties"], this.ya = "javasc", this.Oa = function (e, t) { var e = JSON.parse(e); if (e.BubbleGuid) { var n = e.BubbleGuid, i = this.bubbles[n]; return delete this.bubbles[n], a.ib(), void ("undefined" != typeof e.Result.BubbleHTML && i.updateView(e.Result.BubbleHTML, i)) } if (e.CallBackRedirect) return void (document.location.href = e.CallBackRedirect); if ("undefined" != typeof e.ClientState && (a.clientState = e.ClientState), "None" === e.UpdateType) return a.jb(e.CallBackData, !0), e.Message && a.message(e.Message), void a.ib(); if (e.VsUpdate) { var r = document.createElement("input"); r.type = "hidden", r.name = a.id + "_vsupdate", r.id = r.name, r.value = e.VsUpdate, a.Pi.innerHTML = "", a.Pi.appendChild(r) } a.events.list = e.Events, "undefined" != typeof e.TagFields && (a.tagFields = e.TagFields), "undefined" != typeof e.SortDirections && (a.sortDirections = e.SortDirections), "Full" === e.UpdateType && (a.cellProperties = e.CellProperties, a.headerProperties = e.HeaderProperties, a.startDate = e.StartDate, "undefined" != typeof e.ShowWeekend && (a.showWeekend = e.ShowWeekend), a.locale = e.Locale ? e.Locale : a.locale, a.timeFormat = e.TimeFormat ? e.TimeFormat : a.timeFormat, "undefined" != typeof e.WeekStarts && (a.weekStarts = e.WeekStarts), a.hashes = e.Hashes), a.multiselect.clear(!0), a.multiselect.initList = e.SelectedEvents, a.Ta(), a.Qi(), a.ob(), "Full" === e.UpdateType && (a.Ri(), a.Si()), a.wb(), a.D(), a.Ab(), a.jb(e.CallBackData, !0), a.Eb(), e.Message && a.message(e.Message), a.ib() }, this.jb = function (e, t) { var n = function (e, t) { return function () { if (a.Fb()) { if ("function" == typeof a.onAfterRender) { var n = {}; n.isCallBack = t, n.data = e, a.onAfterRender(n) } } else a.afterRender && a.afterRender(e, t) } }; window.setTimeout(n(e, t), 0) }, this.Fb = function () { return 2 === a.api }, this.Fa = function (e, t) { return a.Ha.Ga() ? DayPilot.Util.escapeTextHtml(e, t) : DayPilot.Util.isNullOrUndefined(t) ? DayPilot.Util.isNullOrUndefined(e) ? "" : e : t }, this.ca = function (e) { var t = this.theme || this.cssClassPrefix; return t ? t + e : "" }, this.ob = function () { if (this.events.list) { if ("function" == typeof this.onBeforeEventRender) for (var e = this.events.list.length, t = 0; t < e; t++)this.rg(t); this.cellMode ? this.Ti() : this.Ui() } }, this.La = function (e) { var t = e ? 0 : 100; a.loadingTimeout && window.clearTimeout(a.loadingTimeout), a.loadingTimeout = window.setTimeout(function () { a.loadingLabelVisible && a.nav.loading && (a.nav.loading.style.top = s.headerHeight() + 5 + "px", a.nav.loading.innerHTML = a.Fa(this.loadingLabelText, this.loadingLabelHtml), a.nav.loading.style.display = "") }, t) }, this.ib = function () { this.loadingTimeout && window.clearTimeout(this.loadingTimeout), a.nav.loading && (this.nav.loading.style.display = "none") }, this.Ui = function () { if (this.events.list) { for (var e = 0; e < this.events.list.length; e++) { var t = this.events.list[e]; if ("object" != typeof t) throw new DayPilot.Exception("Event data item must be an object"); if (!t.start) throw new DayPilot.Exception("Event data item must specify 'start' property"); var n = null; if ("function" == typeof a.onBeforeEventRender && (n = a.ra.events[e]), n) { if (n.hidden) continue } else if (t.hidden) continue; var i = new DayPilot.Date(t.start), r = new DayPilot.Date(t.end); if (r = a.Vi(r), !(i.getTime() > r.getTime())) for (var o = 0; o < this.rows.length; o++) { var s = this.rows[o]; if (s.belongsHere(i, r)) { var l = new DayPilot.Event(t, a); if ("function" == typeof a.onEventFilter && a.events.Kg) { var d = {}; if (d.filter = a.events.Kg, d.visible = !0, d.e = l, a.onEventFilter(d), !d.visible) break } s.events.push(l), "function" == typeof this.onBeforeEventRender && (l.cache = this.ra.events[e]) } } } for (var c = 0; c < this.rows.length; c++) { var s = this.rows[c]; s.events.sort(this.Ng); for (var u = 0; u < this.rows[c].events.length; u++) { var h = s.events[u], f = s.getStartColumn(h), v = s.getWidth(h); s.putIntoLine(h, f, v, c) } } } }, this.Ti = function () {
                this.cellEvents = []; for (var e = 0; e < this.Wi(); e++) { this.cellEvents[e] = []; for (var t = 0; t < this.rows.length; t++) { var n = {}, i = this.firstDate.addDays(7 * t + e); n.start = i, n.end = i.addDays(1), n.events = [], this.cellEvents[e][t] = n } } for (var r = 0; r < this.events.list.length; r++) {
                    var o = this.events.list[r]; if ("object" != typeof o) throw new DayPilot.Exception("Event data item must be an object"); if (!o.start) throw new DayPilot.Exception("Event data item must specify 'start' property"); var s = null; if ("function" == typeof a.onBeforeEventRender && (s = a.ra.events[r]), s) { if (s.hidden) continue } else if (o.hidden) continue; var l = new DayPilot.Date(o.start), d = new DayPilot.Date(o.start); if (d = a.Vi(d), !(l.getTime() > d.getTime())) for (var e = 0; e < this.Wi(); e++)for (var t = 0; t < this.rows.length; t++) {
                        var n = this.cellEvents[e][t]; if (l.getTime() >= n.start.getTime() && l.getTime() < n.end.getTime()) {
                            var c = new DayPilot.Event(o, a); if ("function" == typeof a.onEventFilter && a.events.Kg) { var u = {}; if (u.filter = a.events.Kg, u.visible = !0, u.e = c, a.onEventFilter(u), !u.visible) continue } n.events.push(c), "function" == typeof this.onBeforeEventRender && (c.cache = this.ra.events[r])
                        }
                    }
                } for (var e = 0; e < this.Wi(); e++)for (var t = 0; t < this.rows.length; t++) { var n = this.cellEvents[e][t]; n.events.sort(this.Ng) }
            }, this.Ta = function () { for (var e = 0; e < this.elements.events.length; e++) { var t = this.elements.events[e]; !function () { var e = t.domArgs; if (t.domArgs = null, "function" == typeof a.onDomRemoveEvent && a.onDomRemoveEvent(e), e && "function" == typeof a.onBeforeEventDomRemove && a.onBeforeEventDomRemove(e), e && "function" == typeof a.onBeforeEventDomAdd && a.Y.reactDOM) { var n = e && e.Be; if (n) { if (DayPilot.Util.isReactComponent(e.element)) { if (!a.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); a.Y.ja(n) } } } }(), t.event = null, t.click = null, t.parentNode.removeChild(t) } this.elements.events = [] }, this.Ab = function () { this.ra.events = {}, this.cellMode ? this.Xi() : this.Yi(), this.multiselect.redraw() }, this.Xi = function () { if (this.elements.events = [], 0 !== this.cellEvents.length) for (var e = 0; e < this.Wi(); e++)for (var t = 0; t < this.rows.length; t++)for (var n = this.cellEvents[e][t], i = (this.cells[e][t], 0); i < n.events.length; i++) { var a = n.events[i]; a.part.colStart = e, a.part.colWidth = 1, a.part.row = t, a.part.line = i, a.part.startsHere = !0, a.part.endsHere = !0, this.He(a) } }, this.Yi = function () { this.elements.events = []; for (var e = "number" == typeof a.maxEvents ? a.maxEvents : 1e3, t = 0; t < this.rows.length; t++)for (var n = this.rows[t], i = 0; i < n.lines.length; i++) { var r = n.lines[i]; if (!(i >= e)) for (var o = 0; o < r.length; o++)this.He(r[o]) } }, this.Mg = function (e, t) { if (!(e && t && e.start && t.start)) return 0; var n = e.start().ticks - t.start().ticks; return 0 !== n ? n : t.end().ticks - e.end().ticks }, this.Ng = function (e, t) { if (!e || !t) return 0; if (!(e.data && t.data && e.data.sort && t.data.sort && 0 !== e.data.sort.length && 0 !== t.data.sort.length)) return a.Mg(e, t); for (var n = 0, i = 0; 0 === n && "undefined" != typeof e.data.sort[i] && "undefined" != typeof t.data.sort[i];)n = e.data.sort[i] === t.data.sort[i] ? 0 : "number" == typeof e.data.sort[i] && "number" == typeof t.data.sort[i] ? e.data.sort[i] - t.data.sort[i] : a.Og(e.data.sort[i], t.data.sort[i], a.sortDirections[i]), i++; return n }, this.Og = function (e, t, n) { var i = "desc" !== n, a = i ? -1 : 1, r = -a; if (null === e && null === t) return 0; if (null === t) return r; if (null === e) return a; var o = []; return o[0] = e, o[1] = t, o.sort(), e === o[0] ? a : r }, this.Zi = function (e, n, i, r, o, s) { o || (o = 0); var l = function () { for (var t = 0; t < r; t++) { var i = e + 7 * n + t - o; if (!(i < 0)) { var s = i % 7, l = Math.floor(i / 7); if (!(l > a.rows.length - 1)) { if (a.cells[s][l].props.disabled) return !0 } } } }(), d = r; this.shadow = {}, this.shadow.list = [], this.shadow.start = { x: e, y: n }, this.shadow.width = r, this.shadow.disabled = l, this.eventMoveToPosition && (d = 1, this.shadow.position = i); var c = 7 * n + e - o; c < 0 && (d += c, e = 0, n = 0); for (var u = o; u >= 7;)n--, u -= 7; if (u > e) { u > e + (7 - this.Wi()) ? (n--, e = e + 7 - u) : (d = d - u + e, e = 0) } else e -= u; n < 0 && (n = 0, e = 0); var h = null; for (t.resizingEvent ? h = "w-resize" : t.movingEvent && (h = "move"), this.nav.top.style.cursor = h; d > 0 && n < this.rows.length;) { var f = Math.min(this.Wi() - e, d), v = this.rows[n], p = this.$i(n), m = v.getHeight(); this.eventMoveToPosition && (p = this._i(n, i), m = 2); var g = document.createElement("div"); g.setAttribute("unselectable", "on"), g.style.position = "absolute", g.style.left = this.aj() * e + "%", g.style.width = this.aj() * f + "%", g.style.top = p + "px", g.style.height = m + "px", g.style.cursor = h; var b = document.createElement("div"); b.setAttribute("unselectable", "on"), g.appendChild(b), g.className = this.ca("_shadow"), b.className = this.ca("_shadow_inner"), l && DayPilot.Util.addClass(g, this.ca("_shadow_forbidden")); this.nav.events.appendChild(g), this.shadow.list.push(g), d -= f + 7 - this.Wi(), e = 0, n++ } }, this.bj = function () { if (this.shadow) { this.nav.events; DayPilot.de(this.shadow.list), this.shadow = null, this.nav.top.style.cursor = "" } }, this._i = function (e, t) { for (var n = 0, i = 0; i < e; i++)n += this.rows[i].getHeight(); return n += this.cellHeaderHeight, n += t * s.lineHeight() }, this.cj = function (e, t) { return this.firstDate.addDays(7 * t + e) }, this.rg = function (e) { var t = this.ra.events, n = this.events.list[e], i = {}; for (var a in n) i[a] = n[a]; if ("function" == typeof this.onBeforeEventRender) { var r = {}; r.e = i, r.data = i, this.onBeforeEventRender(r) } t[e] = i }, this.He = function (e) { var t = this.cellMode, n = e.part.row, i = e.part.line, o = e.part.colStart, l = e.part.colWidth, d = e.cache || e.data, c = t ? 0 : this.aj() * o, u = t ? 100 : this.aj() * l, h = t ? i * s.lineHeight() : this._i(n, i), f = document.createElement("div"); f.setAttribute("unselectable", "on"), f.style.height = s.eventHeight() + "px", f.style.position = "relative", f.style.overflow = "hidden", f.className = this.ca("_event"), d.cssClass && DayPilot.Util.addClass(f, d.cssClass), f.event = e, t ? (f.style.marginRight = "2px", f.style.marginBottom = "2px") : (f.style.width = u + "%", f.style.position = "absolute", f.style.left = c + "%", f.style.top = h + "px"), this.showToolTip && d.toolTip && !this.bubble && (f.title = d.toolTip), a.eventTextWrappingEnabled || (f.style.whiteSpace = "nowrap"), f.onclick = this.dj, f.ondblclick = this.ej, f.oncontextmenu = this.fj, f.onmousedown = this.Ke, f.onmousemove = this.Ie, f.onmouseout = this.Je, DayPilot.reNonPassive(f, "touchstart", r.onEventTouchStart), DayPilot.rePassive(f, "touchmove", r.onEventTouchMove), DayPilot.rePassive(f, "touchend", r.onEventTouchEnd), e.part.startsHere || DayPilot.Util.addClass(f, this.ca("_event_continueleft")), e.part.endsHere || DayPilot.Util.addClass(f, this.ca("_event_continueright")); var v = document.createElement("div"); if (v.setAttribute("unselectable", "on"), v.className = this.ca("_event_inner"), d.fontColor && (v.style.color = d.fontColor), d.borderColor && ("darker" === d.borderColor && d.backColor ? v.style.borderColor = DayPilot.ColorUtil.darker(d.backColor, 2) : v.style.borderColor = d.borderColor), d.backColor && (v.style.background = d.backColor), d.backImage && (v.style.backgroundImage = "url(" + d.backImage + ")", d.backRepeat && (v.style.backgroundRepeat = d.backRepeat)), f.appendChild(v), e.client.barVisible()) { var p = document.createElement("div"); p.setAttribute("unselectable", "on"), p.className = this.ca("_event_bar"), p.style.position = "absolute"; var m = document.createElement("div"); m.setAttribute("unselectable", "on"), m.className = this.ca("_event_bar_inner"), m.style.top = "0%", m.style.height = "100%", d.barColor && (m.style.backgroundColor = d.barColor), p.appendChild(m), f.appendChild(p) } var g = this.Ha.locale(), b = a.eventStartEndWidth; if (this.eventStartTime || d.htmlStart) { var c = 5; a.eventBarVisible && (c += 5); var y = "Clock12Hours" === a.Ha.timeFormat() ? e.start().toString("h tt", g) : e.start().toString("H", g), w = { "left": c, "top": 2, "width": b, "bottom": 2, "v": "Visible", "html": d.htmlStart || y, "css": a.ca("_event_timeleft") }, x = DayPilot.Areas.createArea(f, e, w); f.appendChild(x), v.style.paddingLeft = b + "px" } if (this.eventEndTime || d.htmlEnd) { var y = "Clock12Hours" === a.Ha.timeFormat() ? e.end().toString("h tt", g) : e.end().toString("H", g), w = { "right": 5, "top": 2, "width": b, "bottom": 2, "v": "Visible", "html": d.htmlEnd || y, "css": a.ca("_event_timeright") }, x = DayPilot.Areas.createArea(f, e, w); f.appendChild(x), v.style.paddingRight = b + "px" } if (d.areas) for (var k = d.areas, C = 0; C < k.length; C++) { var w = k[C]; if (DayPilot.Areas.isVisible(w)) { var x = DayPilot.Areas.createArea(f, e, w); f.appendChild(x) } } !function () { var t = {}; if (t.e = e, t.control = a, t.element = null, f.domArgs = t, "function" == typeof a.onDomAddEvent && a.onDomAddEvent(t), "function" == typeof a.onBeforeEventDomAdd && a.onBeforeEventDomAdd(t), t.element) { var n = v; if (n) { t.Be = n; if (DayPilot.Util.isReactComponent(t.element)) { if (!a.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); a.Y.X(t.element, n) } else n.appendChild(t.element) } } else v.innerHTML = e.client.innerHTML() }(), this.elements.events.push(f), t ? this.cells[o][n].body.appendChild(f) : this.nav.events.appendChild(f), a.multiselect.od(f.event) && a.multiselect.add(f.event, !0); var f = f; if (a.Fb()) { if ("function" == typeof a.onAfterEventRender) { var _ = {}; _.e = f.event, _.div = f, a.onAfterEventRender(_) } } else a.afterEventRender && a.afterEventRender(f.event, f) }, this.dj = function (e) { r.start || a.Tb(this, e) }, this.ej = function (e) { e.stopPropagation(), a.Xb(this, e) }, this.Ie = function (e) { var n = this, i = n.event; if ("undefined" != typeof t && !t.movingEvent && !t.resizingEvent) { var r = DayPilot.mo3(n, e); if (r) { !function () { var e = n; if (!e.active) { var t = [], r = i.cache || i.data; "Disabled" === a.eventDeleteHandling || r.deleteDisabled || t.push({ "action": "JavaScript", "v": "Hover", "w": 17, "h": 17, "top": 2, "right": 2, "css": a.ca("_event_delete"), "js": function (e) { a.dc(e) } }); var o = e.event.cache ? e.event.cache.areas : e.event.data.areas; o && o.length > 0 && (t = t.concat(o)), DayPilot.Areas.showAreas(e, e.event, null, t) } }(), a.gj(n.event).forEach(function (e) { DayPilot.Util.addClass(e, a.ca("_event_hover")) }); var o = 6; if (!a.cellMode && r.x <= o && i.client.resizeEnabled() ? i.part.startsHere ? (n.style.cursor = "w-resize", n.dpBorder = "left") : n.style.cursor = "not-allowed" : !a.cellMode && n.clientWidth - r.x <= o && i.client.resizeEnabled() ? i.part.endsHere ? (n.style.cursor = "e-resize", n.dpBorder = "right") : n.style.cursor = "not-allowed" : i.client.clickEnabled() ? n.style.cursor = "pointer" : n.style.cursor = "default", "undefined" != typeof DayPilot.Bubble && a.bubble && "Disabled" !== a.eventHoverHandling) if (t.movingEvent || t.resizingEvent) DayPilot.Bubble.hideActive(); else { var s = this.Fg && r.x === this.Fg.x && r.y === this.Fg.y; s || (this.Fg = r, a.bubble.showEvent(n.event)) } } } }, this.Je = function (e) { var t = this; "undefined" != typeof DayPilot.Bubble && a.bubble && a.bubble.hideOnMouseOut(), t.style.cursor = "", a.gj(t.event).forEach(function (e) { DayPilot.Util.removeClass(e, a.ca("_event_hover")) }), DayPilot.Areas.hideAreas(t, e) }, this.fj = function () { var e = this; return a.Yb(e.event), !1 }, this.Ke = function (e) { if (!r.start) { "undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.hideActive(), DayPilot.Bubble.cancelShowing()); var n = this, i = n.event, o = i.part.row, s = i.part.colStart, l = i.part.line, d = i.part.colWidth; e = e || window.event; var c = DayPilot.Util.mouseButton(e); if (e.cancelBubble = !0, e.stopPropagation && e.stopPropagation(), c.left) if ("undefined" != typeof DayPilot.Bubble && a.bubble && DayPilot.Bubble.hideActive(), t.movingEvent = null, "w-resize" === this.style.cursor || "e-resize" === this.style.cursor) { var u = {}; u.start = {}, u.start.x = s, u.start.y = o, u.event = n.event, u.width = DayPilot.DateUtil.daysSpan(u.event.start(), u.event.end()) + 1, u.direction = this.style.cursor, t.resizingEvent = u } else if ("move" === this.style.cursor || i.client.moveEnabled()) { a.bj(); var h = DayPilot.mo3(a.nav.events, e); if (!h) return; var f = a.hj(h.x, h.y); if (!f) return; var v = DayPilot.DateUtil.daysDiff(i.start(), a.rows[o].start), p = 7 * f.y + f.x - (7 * o + s); v && (p += v); var m = {}; m.start = {}, m.start.x = s, m.start.y = o, m.start.line = l, m.offset = a.eventMoveToPosition ? 0 : p, m.colWidth = d, m.event = n.event, m.coords = h, t.movingEvent = m } } }, this.temp = {}, this.temp.getPosition = function () { if (!a.coords) return null; var e = a.hj(a.coords.x, a.coords.y); if (!e) return null; var t = new DayPilot.Date(a.cj(e.x, e.y)), e = {}; return e.start = t, e.end = t.addDays(1), e }, this.Le = {}; var r = a.Le; r.active = !1, r.start = !1, r.timeouts = [], r.onEventTouchStart = function (e) { if (!r.active && !r.start) { r.clearTimeouts(), r.start = !0, r.active = !1; var t = this; if (t.event.client.moveEnabled()) { var n = a.tapAndHoldTimeout; r.timeouts.push(window.setTimeout(function () { r.active = !0, r.start = !1; var n = r.relativeCoords(e); r.startMoving(t, n), e.preventDefault() }, n)) } e.stopPropagation() } }, r.onEventTouchMove = function (e) { r.clearTimeouts(), r.start = !1 }, r.onEventTouchEnd = function (e) { r.clearTimeouts(), r.start && a.Ub(this, e), window.setTimeout(function () { r.start = !1, r.active = !1 }, 500) }, r.onMainTouchStart = function (e) { if (!r.active && !r.start) { r.clearTimeouts(), r.start = !0, r.active = !1; var t = a.tapAndHoldTimeout; r.timeouts.push(window.setTimeout(function () { r.active = !0, r.start = !1, e.preventDefault(); var t = r.relativeCoords(e); r.startRange(t) }, t)) } }, r.onMainTouchMove = function (e) { if (r.clearTimeouts(), r.start = !1, r.active) { e.preventDefault(); var t = r.relativeCoords(e); if (r.moving) return void r.updateMoving(t); r.range && r.updateRange(t) } }, r.onMainTouchEnd = function (e) { if (r.clearTimeouts(), r.active) { if (r.moving) { var t = (r.moving, r.moving.event), n = a.shadow.start, i = a.shadow.position, o = r.moving.offset; a.bj(), r.moving = null, a.oc(t, n.x, n.y, o, e, i) } if (r.range) { var s = r.range, n = new DayPilot.Date(a.cj(s.from.x, s.from.y)), l = n.addDays(s.width); r.range = null, a.wc(n, l) } } window.setTimeout(function () { r.start = !1, r.active = !1 }, 500) }, r.clearTimeouts = function () { for (var e = 0; e < r.timeouts.length; e++)clearTimeout(r.timeouts[e]); r.timeouts = [] }, r.relativeCoords = function (e) { var t = a.nav.events, n = e.touches ? e.touches[0] : e, i = n.pageX, r = n.pageY, o = DayPilot.abs(t); return { x: i - o.x, y: r - o.y, toString: function () { return "x: " + this.x + ", y:" + this.y } } }, r.startMoving = function (e, t) { a.bj(); var n = e.event, i = a.hj(t.x, t.y); if (i) { var o = DayPilot.DateUtil.daysDiff(n.start(), a.rows[n.part.row].start), s = 7 * i.y + i.x - (7 * n.part.row + n.part.colStart); o && (s += o); var l = {}; l.start = {}, l.start.x = n.part.colStart, l.start.y = n.part.row, l.start.line = n.part.line, l.offset = a.eventMoveToPosition ? 0 : s, l.colWidth = n.part.colWidth, l.event = n, l.coords = t, r.moving = l, r.updateMoving(t) } }, r.updateMoving = function (e) { var t = a.hj(e.x, e.y); if (t) { var n = a.ij(t); a.bj(); var i = r.moving.event, o = r.moving.offset, s = a.cellMode ? 1 : DayPilot.DateUtil.daysSpan(i.start(), i.end()) + 1; s < 1 && (s = 1), a.Zi(t.x, t.y, n, s, o, i) } }, r.startRange = function (e) { var t = a.hj(e.x, e.y); if (t) { a.bj(); var n = {}; n.start = {}, n.start.x = t.x, n.start.y = t.y, n.x = t.x, n.y = t.y, n.width = 1, r.range = n, r.updateRange(e) } }, r.updateRange = function (e) { var t = a.hj(e.x, e.y); if (t) { a.bj(); var n = r.range.start, i = 7 * n.y + n.x, o = 7 * t.y + t.x, s = Math.abs(o - i) + 1; s < 1 && (s = 1); var l = i < o ? n : t; r.range.width = s, r.range.from = { x: l.x, y: l.y }, a.Zi(l.x, l.y, 0, s, 0, null) } }, this.isWeekend = function (e) { return 0 === e.dayOfWeek() || 6 === e.dayOfWeek() }, this.jj = function () { var e = this.startDate.lastDayOfMonth(); if (this.showWeekend) return e; for (; this.isWeekend(e);)e = e.addDays(-1); return e }, this.Qi = function () { if ("string" == typeof this.startDate && (this.startDate = new DayPilot.Date(this.startDate)), "Month" === this.viewType ? this.startDate = this.startDate.firstDayOfMonth() : this.startDate = this.startDate.getDatePart(), this.firstDate = this.startDate.firstDayOfWeek(s.weekStarts()), !this.showWeekend) { for (var e = this.startDate.addMonths(-1).getMonth(), t = new DayPilot.Date(this.firstDate).addDays(6); this.isWeekend(t);)t = t.addDays(-1); t.getMonth() === e && (this.firstDate = this.firstDate.addDays(7)) } var n; this.startDate; if ("Month" === this.viewType) { var i = this.jj(), r = DayPilot.DateUtil.daysDiff(this.firstDate, i) + 1; n = Math.ceil(r / 7) } else n = this.weeks; this.days = 7 * n, this.rows = []; for (var o = 0; o < n; o++) { var l = {}; l.start = this.firstDate.addDays(7 * o), l.end = l.start.addDays(this.Wi()), l.events = [], l.lines = [], l.index = o, l.minHeight = this.cellHeight, l.calendar = this, l.belongsHere = function (e, t) { return t.getTime() === e.getTime() && e.getTime() === this.start.getTime() || !(t.getTime() <= this.start.getTime() || e.getTime() >= this.end.getTime()) }, l.getPartStart = function (e) { return DayPilot.DateUtil.max(this.start, e.start()) }, l.getPartEnd = function (e) { return DayPilot.DateUtil.min(this.end, e.rawend()) }, l.getStartColumn = function (e) { var t = this.getPartStart(e); return DayPilot.DateUtil.daysDiff(this.start, t) }, l.getWidth = function (e) { return DayPilot.DateUtil.daysSpan(this.getPartStart(e), this.getPartEnd(e)) + 1 }, l.putIntoLine = function (e, t, n, i) { for (var a = this, r = 0; r < this.lines.length; r++) { var o = this.lines[r]; if (o.isFree(t, n)) return o.addEvent(e, t, n, i, r), r } var o = []; return o.isFree = function (e, t) { for (var n = !0, i = 0; i < this.length; i++) { var a = this[i]; e + t - 1 < a.part.colStart || e > a.part.colStart + a.part.colWidth - 1 || (n = !1) } return n }, o.addEvent = function (e, t, n, i, r) { e.part.colStart = t, e.part.colWidth = n, e.part.row = i, e.part.line = r, e.part.startsHere = a.start.getTime() <= e.start().getTime(), e.part.endsHere = a.end.getTime() >= e.end().getTime(), this.push(e) }, o.addEvent(e, t, n, i, this.lines.length), this.lines.push(o), this.lines.length - 1 }, l.getStart = function () { for (var e = 0, t = 0; t < a.rows.length && t < this.index; t++)e += a.rows[t].getHeight() }, l.getHeight = function () { var e = "number" == typeof a.maxEvents ? a.maxEvents : 1e3, t = Math.min(e, this.lines.length); return Math.max(t * s.lineHeight() + a.cellHeaderHeight + a.cellMarginBottom, this.calendar.cellHeight) }, this.rows.push(l) } this.kj = this.firstDate.addDays(7 * n) }, this.$g = function () { switch (this.heightSpec) { case "Auto": for (var e = s.headerHeight(), t = 0; t < this.rows.length; t++)e += this.rows[t].getHeight(); return e; case "Fixed": return this.height } }, this.Zg = function (e, t) { return 7 * t.y + t.x - (7 * e.y + e.x) + 1 }, this.Qg = {}, this.Qg.scope = null, this.Qg.notify = function () { a.Qg.scope && a.Qg.scope["$apply"]() }, this.debug = new DayPilot.Debug(this), this.Ue = function () { var e = this.nav.top; this.nav.top.dp = this, e.setAttribute("unselectable", "on"), e.style.MozUserSelect = "none", e.style.KhtmlUserSelect = "none", e.style.WebkitUserSelect = "none", e.style.WebkitTapHighlightColor = "rgba(0,0,0,0)", e.style.WebkitTouchCallout = "none", e.style.position = "relative", this.width && (e.style.width = this.width), e.onselectstart = function (e) { return !1 }, e.className = this.ca("_main"), this.hideUntilInit && (e.style.visibility = "hidden"), this.visible || (e.style.display = "none"), e.onmousemove = this.$e, DayPilot.reNonPassive(e, "touchstart", r.onMainTouchStart), DayPilot.reNonPassive(e, "touchmove", r.onMainTouchMove), DayPilot.rePassive(e, "touchend", r.onMainTouchEnd), this.Pi = document.createElement("div"), this.Pi.style.display = "none", this.nav.top.appendChild(this.Pi); var t = document.createElement("div"); t.style.position = "relative", t.style.height = s.headerHeight() + "px", t.oncontextmenu = function () { return !1 }, this.nav.top.appendChild(t), this.nav.header = t; var n = document.createElement("div"); n.style.zoom = "1"; var i = document.createElement("div"); i.style.position = "relative", i.ondblclick = a.lj, n.appendChild(i), this.nav.loading = document.createElement("div"), this.nav.loading.style.position = "absolute", this.nav.loading.style.top = "0px", this.nav.loading.style.left = "5px", this.nav.loading.className = a.ca("_loading"), this.nav.loading.innerHTML = a.Fa(this.loadingLabelText, this.loadingLabelHtml), this.nav.loading.style.display = "none", this.nav.top.appendChild(n), this.nav.top.appendChild(this.nav.loading), this.nav.scrollable = n, this.nav.events = i }, this.$e = function (e) { e.insideMainD = !0, window.event && window.event.srcElement && (window.event.srcElement.inside = !0), a.coords = DayPilot.mo3(a.nav.events, e); var n = a.coords; if (n) { var i = a.hj(n.x, n.y); if (i) { if (t.resizingEvent) { a.bj(); var r, o, s = t.resizingEvent; s.start; if ("w-resize" === s.direction) { o = i; var l = s.event.rawend(); l.getDatePart().getTime() === l.getTime() && (l = l.addDays(-1)); var d = a.mj(l); r = a.Zg(i, d) } else o = a.mj(s.event.start()), r = a.Zg(o, i); r < 1 && (r = 1), a.Zi(o.x, o.y, 0, r) } else if (t.movingEvent) { if (n.x === t.movingEvent.coords.x && n.y === t.movingEvent.coords.y) return; var c = 3, u = Math.abs(n.x - t.movingEvent.coords.x) + Math.abs(n.y - t.movingEvent.coords.y); if (u <= c) return; var h = a.ij(i); a.bj(); var f = t.movingEvent.event, v = t.movingEvent.offset, r = a.cellMode ? 1 : DayPilot.DateUtil.daysSpan(f.start(), f.rawend()) + 1; r < 1 && (r = 1), a.Zi(i.x, i.y, h, r, v, f) } else if (t.timeRangeSelecting) { t.cancelCellClick = !0, a.bj(); var o = t.timeRangeSelecting, p = 7 * o.y + o.x, m = 7 * i.y + i.x, r = Math.abs(m - p) + 1; r < 1 && (r = 1); var g = p < m ? o : i; t.timeRangeSelecting.from = { x: g.x, y: g.y }, t.timeRangeSelecting.width = r, t.timeRangeSelecting.moved = !0, a.Zi(g.x, g.y, 0, r, 0, null) } if (t.drag) { if (t.gShadow && document.body.removeChild(t.gShadow), t.gShadow = null, !t.movingEvent) { var b = DayPilot.Date.today(), e = { "id": t.drag.id, "start": b, "end": b.addSeconds(t.drag.duration), "text": t.drag.text }, y = t.drag.data; if (y) { var w = ["duration", "element", "remove", "id", "text"]; for (var x in y) DayPilot.contains(w, x) || (e[x] = y[x]) } var f = new DayPilot.Event(e, a); f.external = !0; var k = t.movingEvent = {}; k.event = f, k.coords = n, k.position = 0, k.offset = 0, k.external = !0, k.removeElement = t.drag.element } e.cancelBubble = !0 } } } }, this.ij = function (e) { for (var t = e.relativeY, n = a.rows[e.y], i = a.cellHeaderHeight, r = s.lineHeight(), o = n.lines.length, l = 0; l < n.lines.length; l++) { if (n.lines[l].isFree(e.x, 1)) { o = l; break } } var d = Math.floor((t - i + r / 2) / r), d = Math.min(o, d), d = Math.max(0, d); return d }, this.message = function (e, t) { if (null !== e && a.wa) { var n, i = {}; "object" == typeof arguments[1] ? (i = arguments[1], n = i.delay) : n = t; var r = ""; r = i.rawHtml ? e : DayPilot.Util.escapeHtml(e), n = n || this.messageHideAfter || 2e3; var o, l = s.headerHeight(); if (this.nav.message) o = a.nav.message; else { o = document.createElement("div"), o.setAttribute("unselectable", "on"), o.style.position = "absolute", o.style.right = "0px", o.style.left = "0px", o.style.top = l + "px", o.style.display = "none", o.onmousemove = function () { o.messageTimeout && !o.status && clearTimeout(o.messageTimeout) }, o.onmouseout = function () { "none" !== a.nav.message.style.display && (o.messageTimeout = setTimeout(a.Rb, 500)) }; var d = document.createElement("div"); d.setAttribute("unselectable", "on"), d.onclick = function () { a.nav.message.style.display = "none" }, d.className = this.ca("_message"), o.appendChild(d); var c = document.createElement("div"); c.setAttribute("unselectable", "on"), c.style.position = "absolute", c.className = this.ca("_message_close"), c.onclick = function () { a.nav.message.style.display = "none" }, o.appendChild(c), this.nav.top.appendChild(o), this.nav.message = o } var u = function () { if (a.nav.message) { var e = a.nav.message.firstChild; e.className = a.ca("_message"), i.cssClass && DayPilot.Util.addClass(e, i.cssClass), e.innerHTML = r; var t = function () { o.messageTimeout = setTimeout(a.Rb, n) }; DayPilot.fade(a.nav.message, .2, t) } }; clearTimeout(o.messageTimeout), "none" !== this.nav.message.style.display ? DayPilot.fade(a.nav.message, -.2, u) : u() } }, this.message.show = function (e) { a.message(e) }, this.message.hide = function () { a.Rb() }, this.Rb = function () { var e = function () { a.nav.message.style.display = "none" }; DayPilot.fade(a.nav.message, -.2, e) }, this.Za = function (e) { "Parent100Pct" === a.heightSpec && a.wb() }, this.wb = function () { var e = this.nav.scrollable; if ("Parent100Pct" === this.heightSpec || "Fixed" === this.heightSpec ? (e.style.top = this.headerHeight + "px", e.style.bottom = "0px", e.style.left = "0px", e.style.right = "0px", e.style.overflow = "auto", e.style.position = "absolute") : e.style.position = "relative", "Parent100Pct" === this.heightSpec) { this.nav.top.style.height = "100%"; this.nav.top.clientHeight } else this.nav.top.style.height = this.$g() + "px"; for (var t = 0; t < this.cells.length; t++)for (var n = 0; n < this.cells[t].length; n++)this.cells[t][n].style.top = this.$i(n) + "px", this.cells[t][n].style.height = this.rows[n].getHeight() + "px"; this.nj() }, this.hj = function (e, t) { e = Math.max(0, e); for (var n = Math.floor(this.nav.top.clientWidth / this.Wi()), i = Math.min(Math.floor(e / n), this.Wi() - 1), a = null, r = 0, o = 0, s = 0, l = 0; l < this.rows.length; l++) { if (o += this.rows[l].getHeight(), t < o) { r = t - s, a = l; break } s = o } null === a && (a = this.rows.length - 1); var d = {}; return d.x = i, d.y = a, d.relativeY = r, d }, this.mj = function (e) { for (var t = DayPilot.DateUtil.daysDiff(this.firstDate, e), n = { x: 0, y: 0 }; t >= 7;)n.y++, t -= 7; return n.x = t, n }, this.nj = function () { var e = DayPilot.sw(this.nav.scrollable); this.nav.header.style.marginRight = e + "px" }; var o = null; this.Si = function () { var e = this.nav.header, t = this.nav.events, n = a.Wi(); this.cells = []; for (var i = 0; i < n; i++) { var r = i === n - 1; this.cells[i] = []; var l = this.headerProperties ? this.headerProperties[i] : null, d = i + s.weekStarts(); if (d > 6 && (d -= 7), !l) { var l = {}; l.html = s.locale().dayNames[d] } if ("function" == typeof a.onBeforeHeaderRender) { var c = {}; c.header = {}, c.header.dayOfWeek = d; var u = ["html", "backColor", "cssClass"]; DayPilot.Util.copyProps(l, c.header, u), a.onBeforeHeaderRender(c), DayPilot.Util.copyProps(c.header, l, u) } var h = document.createElement("div"); h.setAttribute("unselectable", "on"), h.style.position = "absolute", h.style.left = this.aj() * i + "%", r ? h.style.right = "0px" : h.style.width = this.aj() + "%", h.style.top = "0px", h.style.height = s.headerHeight() + "px", function (e) { h.onclick = function () { a.$b(e) } }(d); var f = document.createElement("div"); f.setAttribute("unselectable", "on"), f.className = this.ca("_header_inner"), f.innerHTML = l.html, h.appendChild(f), h.className = this.ca("_header"), l && (l.cssClass && DayPilot.Util.addClass(h, l.cssClass), l.backColor && (f.style.background = l.backColor)), e.appendChild(h); for (var v = 0; v < this.rows.length; v++)this.Oe(i, v, t) } if (!DayPilot.contains(this.nav.top.childNodes, o) && DayPilot.Util.isNullOrUndefined(undefined)) { var p = document.createElement("div"); p.style.position = "absolute", p.style.padding = "2px", p.style.top = "0px", p.style.left = "0px", p.style.backgroundColor = "#FF6600", p.style.color = "white", p.innerHTML = "\u0044\u0045" + "\u004D\u004F", o = p, this.nav.top.appendChild(p) } }, this.Ri = function () { for (var e = 0; e < this.cells.length; e++)for (var t = 0; t < this.cells[e].length; t++)this.cells[e][t].onclick = null, function () { var n = a.cells[e][t], i = n.domArgs; if (n.domArgs = null, i && "function" == typeof a.onBeforeCellDomRemove && a.onBeforeCellDomRemove(i), i && "function" == typeof a.onBeforeCellDomAdd && a.Y.reactDOM) { var r = i && i.Be; if (r) { if (DayPilot.Util.isReactComponent(i.element)) { if (!a.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); a.Y.ja(r) } } } }(); this.nav.header.innerHTML = "", this.nav.events.innerHTML = "" }, this.Oe = function (t, n, i) { var r = this.rows[n], o = this.firstDate.addDays(7 * n + t), l = this.cellProperties ? this.cellProperties[n * this.Wi() + t] : null, d = a.Wi(), c = t === d - 1, u = null; if (l) u = l["headerHtml"]; else { var h = o.getDay(); u = 1 === h ? s.locale().monthNames[o.getMonth()] + " " + h : h + "" } if (!l) { var l = {}; l.business = !a.isWeekend(o), l.headerHtml = u, l.disabled = !1, l.backColor = null, l.backImage = null, l.backRepeat = null, l.areas = null, l.headerBackColor = null, l.cssClass = null, l.html = null } if ("function" == typeof a.onBeforeCellRender) { var f = {}; f.cell = {}, f.cell.start = o, f.cell.end = f.cell.start.addDays(1), f.cell.properties = l, f.cell.events = function () { return a.events.forRange(f.cell.start, f.cell.end) }, a.onBeforeCellRender(f), DayPilot.Util.copyProps(f.cell, l, ["areas", "backColor", "backImage", "backRepeat", "business", "disabled", "headerHtml", "headerBackColor", "cssClass", "html"]) } var v = this.aj() * t, p = this.aj(), m = document.createElement("div"); m.setAttribute("unselectable", "on"), m.style.position = "absolute", m.style.cursor = "default", m.style.left = v + "%", c ? m.style.right = "0px" : m.style.width = p + "%", m.style.top = this.$i(n) + "px", m.style.height = r.getHeight() + "px", m.d = o, m.x = t, m.y = n, m.props = l; var g = this.startDate.addMonths(-1).getMonth(), b = this.startDate.addMonths(1).getMonth(), y = this.startDate.getMonth(), w = document.createElement("div"); w.setAttribute("unselectable", "on"), m.appendChild(w), w.className = this.ca("_cell_inner"), w.className = this.ca("_cell_inner"), o.getMonth() === y ? m.className = this.ca("_cell") : o.getMonth() === g ? m.className = this.ca("_cell") + " " + this.ca("_previous") : o.getMonth() === b ? m.className = this.ca("_cell") + " " + this.ca("_next") : e(), l && (l["cssClass"] && DayPilot.Util.addClass(m, l.cssClass), l["business"] && DayPilot.Util.addClass(m, this.ca("_cell_business")), l["backColor"] && (w.style.backgroundColor = l["backColor"]), l["backImage"] && (w.style.backgroundImage = "url('" + l["backImage"] + "')"), l["backRepeat"] && (w.style.backgroundRepeat = l["backRepeat"])), m.onmousedown = this.Fc, m.onmousemove = this.Uc, m.onmouseout = this.Tc, m.oncontextmenu = this.oj, m.onclick = this.pj, m.ondblclick = this.lj; var x = document.createElement("div"); if (x.setAttribute("unselectable", "on"), x.style.height = this.cellHeaderHeight + "px", l && l["headerBackColor"] && (x.style.background = l["headerBackColor"]), x.className = this.ca("_cell_header"), x.innerHTML = l.headerHtml, x.onclick = function (e) { if ("Enabled" === a.cellHeaderClickHandling) { e.stopPropagation(); var t = {}; t.control = a, t.start = o, t.end = o.addDays(1), t.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onCellHeaderClick && (a.onCellHeaderClick(t), t.preventDefault.value) || "function" == typeof a.onCellHeaderClicked && a.onCellHeaderClicked(t) } }, w.appendChild(x), l && l["html"]) { var k = document.createElement("div"); k.setAttribute("unselectable", "on"), k.style.height = r.getHeight() - this.cellHeaderHeight + "px", k.style.overflow = "hidden", k.innerHTML = l["html"], w.appendChild(k) } if (this.cellMode) { var C = document.createElement("div"); C.setAttribute("unselectable", "on"), C.style.height = this.cellHeight - this.cellHeaderHeight + "px", C.style.overflow = "auto", C.style.position = "relative"; var _ = document.createElement("div"); _.setAttribute("unselectable", "on"), _.style.paddingTop = "1px", _.style.paddingBottom = "1px", C.appendChild(_), w.appendChild(C), m.body = _, m.scrolling = C } if (m.props) for (var D = m.props.areas || [], S = 0; S < D.length; S++) { var E = D[S]; if (DayPilot.Areas.isVisible(E)) { var T = DayPilot.Areas.createArea(m, m.props, E); m.appendChild(T) } } !function () { if ("function" == typeof a.onBeforeCellDomAdd || "function" == typeof a.onBeforeCellDomRemove) { var e = {}; if (e.control = a, e.cell = {}, e.cell.start = o, e.cell.end = e.cell.start.addDays(1), e.cell.events = function () { return a.events.forRange(e.cell.start, e.cell.end) }, e.element = null, m.domArgs = e, "function" == typeof a.onBeforeCellDomAdd && a.onBeforeCellDomAdd(e), e.element && (target = w, target)) { e.Be = target; if (DayPilot.Util.isReactComponent(e.element)) { if (!a.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); a.Y.X(e.element, target) } else target.appendChild(e.element) } } }(), this.cells[t][n] = m, i.appendChild(m), "function" == typeof a.onAfterCellRender && (f.cell.div = m, f.cell.divHeader = x, a.onAfterCellRender(f)) }, this.Uc = function () { var e = this; e.props && DayPilot.Areas.showAreas(e, e.props) }, this.Tc = function (e) { var t = this; t.props && DayPilot.Areas.hideAreas(t, e) }, this.oj = function () { var e = this.d; return function (e) { var t = new DayPilot.Date(e), n = t.addDays(1), i = new DayPilot.Selection(t, n, null, a); a.contextMenuSelection && a.contextMenuSelection.show(i) }(e), !1 }, this.lj = function () { var e = a.coords, t = a.hj(e.x, e.y), n = a.cj(t.x, t.y); if (a.timeouts) { for (var i in a.timeouts) window.clearTimeout(a.timeouts[i]); a.timeouts = null } if ("Disabled" !== a.timeRangeDoubleClickHandling) { var r = new DayPilot.Date(n), o = r.addDays(1); a.yc(r, o) } }, this.pj = function () { if (!t.cancelCellClick) { var e = this.d; if (!this.props.disabled) { var n = function (e) { var t = new DayPilot.Date(e), n = t.addDays(1); a.wc(t, n) }; if ("Disabled" !== a.timeRangeSelectedHandling && "Disabled" === a.timeRangeDoubleClickHandling) return void n(e); a.timeouts || (a.timeouts = []); var i = function (e) { return function () { n(e) } }; a.timeouts.push(window.setTimeout(i(e), a.doubleClickTimeout)) } } }, this.Fc = function (e) { var n = this, i = n.x, r = n.y; if (t.cancelCellClick = !1, n.scrolling) { var o = DayPilot.mo3(n.scrolling, e), s = DayPilot.sw(n.scrolling), l = n.scrolling.offsetWidth; if (o.x > l - s) return } "Disabled" !== a.timeRangeSelectedHandling && (a.bj(), t.timeRangeSelecting = { "root": a, "x": i, "y": r, "from": { x: i, y: r }, "width": 1 }), a.Zi(i, r, 0, 1) }, this.Wi = function () { return this.showWeekend ? 7 : 5 }, this.aj = function () { return this.showWeekend ? 14.285 : 20 }, this.$i = function (e) { for (var t = 0, n = 0; n < e; n++)t += this.rows[n].getHeight(); return t }, this.clearSelection = function () { this.bj() }, this.Ia = function (e, t, n) { var i = {}; i.action = e, i.parameters = n, i.data = t, i.header = this.Ja(); var r = "JSON" + JSON.stringify(i); __doPostBack(a.uniqueID, r) }, this.Ka = function (e, t, n, i) { if (!this.ia()) return void a.debug.message("Callback invoked without the server-side backend specified. Callback canceled.", "warning"); "undefined" == typeof i && (i = "CallBack"), a.La(); var r = {}; r.action = e, r.type = i, r.parameters = t, r.data = n, r.header = this.Ja(); var o = "JSON" + JSON.stringify(r); this.backendUrl ? DayPilot.request(this.backendUrl, this.Ma, o, this.Na) : "function" == typeof WebForm_DoCallback && WebForm_DoCallback(this.uniqueID, o, this.Oa, null, this.callbackError, !0) }, this.ia = function () { return "javasc" !== a.ya && a.ya.indexOf("DCODE") === -1 || a.devsb }, this.Pa = function () { return !("function" != typeof WebForm_DoCallback || !this.uniqueID) }, this.Na = function (e) { if ("function" == typeof a.onAjaxError) { var t = {}; t.request = e, a.onAjaxError(t) } else "function" == typeof a.ajaxError && a.ajaxError(e) }, this.Ma = function (e) { a.Oa(e.responseText) }, this.Ja = function () { var e = {}; return e.v = this.v, e.control = "dpm", e.id = this.id, e.visibleStart = new DayPilot.Date(this.firstDate), e.visibleEnd = e.visibleStart.addDays(this.days), e.clientState = this.clientState, e.cssClassPrefix = a.cssClassPrefix, e.startDate = a.startDate, e.showWeekend = this.showWeekend, e.locale = this.locale, e.timeFormat = this.timeFormat, e.weekStarts = this.weekStarts, e.viewType = this.viewType, e.weeks = this.weeks, e.selected = a.multiselect.events(), e.hashes = a.hashes, e }, this.visibleStart = function () { return new DayPilot.Date(this.firstDate) }, this.visibleEnd = function () { return a.visibleStart().addDays(a.days) }, this.ec = function (e, t, n, i) {
                if ("PostBack" === e) a.postBack2(t, n, i); else if ("CallBack" === e) a.Ka(t, n, i, "CallBack"); else if ("Immediate" === e) a.Ka(t, n, i, "Notify"); else if ("Queue" === e) a.queue.add(new DayPilot.Action(this, t, n, i)); else {
                    if ("Notify" !== e) throw "Invalid event invocation type";
                    "Notify" === s.notifyType() ? a.Ka(t, n, i, "Notify") : a.queue.add(new DayPilot.Action(a, t, n, i))
                }
            }, this.sc = function (e, t) { var n = a.tc(t), i = {}; i.args = e, i.guid = n, a.Ka("Bubble", i) }, this.tc = function (e) { var t = DayPilot.guid(); return this.bubbles || (this.bubbles = []), this.bubbles[t] = e, t }, this.eventClickPostBack = function (e, t) { this.Ia("EventClick", t, e) }, this.eventClickCallBack = function (e, t) { this.Ka("EventClick", e, t) }, this.Tb = function (e, n) { t.movingEvent = null, t.resizingEvent = null; var n = n || window.event; n.ctrlKey, n.metaKey; if (n.cancelBubble = !0, n.stopPropagation && n.stopPropagation(), "undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), "Disabled" === a.eventDoubleClickHandling) return void a.Ub(e, n); if (a.timeouts) { for (var i in a.timeouts) window.clearTimeout(a.timeouts[i]); a.timeouts = [] } else a.timeouts = []; var r = function (e, t) { return function () { a.Ub(e, t) } }; a.timeouts.push(window.setTimeout(r(e, n), a.doubleClickTimeout)) }, this.Ub = function (e, t) { var n = e.event; if (n.client.clickEnabled()) { var i = t.ctrlKey, r = t.metaKey; if (a.Fb()) { var o = {}; if (o.e = n, o.control = a, o.div = e, o.originalEvent = t, o.meta = t.metaKey, o.ctrl = t.ctrlKey, o.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onEventClick && (a.onEventClick(o), o.preventDefault.value)) return; switch (a.eventClickHandling) { case "PostBack": a.eventClickPostBack(n); break; case "CallBack": a.eventClickCallBack(n); break; case "Select": a.Wb(e, n, i, r); break; case "ContextMenu": var s = n.client.contextMenu(); s ? s.show(n) : a.contextMenu && a.contextMenu.show(n); break; case "Bubble": a.bubble && a.bubble.showEvent(n) }"function" == typeof a.onEventClicked && a.onEventClicked(o) } else switch (a.eventClickHandling) { case "PostBack": a.eventClickPostBack(n); break; case "CallBack": a.eventClickCallBack(n); break; case "JavaScript": a.onEventClick(n); break; case "Select": a.Wb(e, n, i, r); break; case "ContextMenu": var s = n.client.contextMenu(); s ? s.show(n) : a.contextMenu && a.contextMenu.show(n); break; case "Bubble": a.bubble && a.bubble.showEvent(n) } } }, this.dc = function (e) { if (a.Fb()) { var t = {}; if (t.e = e, t.control = a, t.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onEventDelete && (a.onEventDelete(t), t.preventDefault.value)) return; switch (a.eventDeleteHandling) { case "PostBack": a.eventDeletePostBack(e); break; case "CallBack": a.eventDeleteCallBack(e); break; case "Update": a.events.remove(e) }"function" == typeof a.onEventDeleted && a.onEventDeleted(t) } else switch (a.eventDeleteHandling) { case "PostBack": a.eventDeletePostBack(e); break; case "CallBack": a.eventDeleteCallBack(e); break; case "JavaScript": a.onEventDelete(e) } }, this.eventDeletePostBack = function (e, t) { this.Ia("EventDelete", e, t) }, this.eventDeleteCallBack = function (e, t) { this.Ka("EventDelete", e, t) }, this.eventDoubleClickPostBack = function (e, t) { this.Ia("EventDoubleClick", t, e) }, this.eventDoubleClickCallBack = function (e, t) { this.Ka("EventDoubleClick", e, t) }, this.Xb = function (e, t) { if ("undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), a.timeouts) { for (var n in a.timeouts) window.clearTimeout(a.timeouts[n]); a.timeouts = null } var t = t || window.event, i = e.event; if (i.client.doubleClickEnabled()) if (a.Fb()) { var r = {}; if (r.e = i, r.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onEventDoubleClick && (a.onEventDoubleClick(r), r.preventDefault.value)) return; switch (a.eventDoubleClickHandling) { case "PostBack": a.eventDoubleClickPostBack(i); break; case "CallBack": a.eventDoubleClickCallBack(i); break; case "Select": a.Wb(e, i, t.ctrlKey, t.metaKey); break; case "Bubble": a.bubble && a.bubble.showEvent(i) }"function" == typeof a.onEventDoubleClicked && a.onEventDoubleClicked(r) } else switch (a.eventDoubleClickHandling) { case "PostBack": a.eventDoubleClickPostBack(i); break; case "CallBack": a.eventDoubleClickCallBack(i); break; case "JavaScript": a.onEventDoubleClick(i); break; case "Select": a.Wb(e, i, t.ctrlKey, t.metaKey); break; case "Bubble": a.bubble && a.bubble.showEvent(i) } }, this.Wb = function (e, t, n, i) { a.Ac(e, t, n, i) }, this.eventSelectPostBack = function (e, t, n) { var i = {}; i.e = e, i.change = t, this.Ia("EventSelect", n, i) }, this.eventSelectCallBack = function (e, t, n) { var i = {}; i.e = e, i.change = t, this.Ka("EventSelect", i, n) }, this.Ac = function (e, t, n, i) { var r = a.multiselect, o = r.isSelected(t); if (n || i || !o || 1 !== r.list.length) if (a.Fb()) { r.previous = r.events(); var s = {}; if (s.e = t, s.selected = r.isSelected(t), s.ctrl = n, s.meta = i, s.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onEventSelect && (a.onEventSelect(s), s.preventDefault.value)) return; switch (a.eventSelectHandling) { case "PostBack": a.eventSelectPostBack(t, l); break; case "CallBack": "undefined" != typeof WebForm_InitCallback && (window.Cc = "", window.Dc = [], WebForm_InitCallback()), a.eventSelectCallBack(t, l); break; case "Update": r.Ec(e, n) }"function" == typeof a.onEventSelected && (s.change = r.isSelected(t) ? "selected" : "deselected", s.selected = r.isSelected(t), a.onEventSelected(s)) } else { r.previous = r.events(), r.Ec(e, n); var l = r.isSelected(t) ? "selected" : "deselected"; switch (a.eventSelectHandling) { case "PostBack": a.eventSelectPostBack(t, l); break; case "CallBack": "undefined" != typeof WebForm_InitCallback && (window.Cc = "", window.Dc = [], WebForm_InitCallback()), a.eventSelectCallBack(t, l); break; case "JavaScript": a.onEventSelect(t, l) } } }, this.eventRightClickPostBack = function (e, t) { this.Ia("EventRightClick", t, e) }, this.eventRightClickCallBack = function (e, t) { this.Ka("EventRightClick", e, t) }, this.Yb = function (e) { if (this.event = e, !e.client.rightClickEnabled()) return !1; if (a.Fb()) { var t = {}; if (t.e = e, t.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onEventRightClick && (a.onEventRightClick(t), t.preventDefault.value)) return; switch (a.eventRightClickHandling) { case "PostBack": a.eventRightClickPostBack(e); break; case "CallBack": a.eventRightClickCallBack(e); break; case "ContextMenu": var n = e.client.contextMenu(); n ? n.show(e) : a.contextMenu && a.contextMenu.show(this.event); break; case "Bubble": a.bubble && a.bubble.showEvent(e) }"function" == typeof a.onEventRightClicked && a.onEventRightClicked(t) } else switch (a.eventRightClickHandling) { case "PostBack": a.eventRightClickPostBack(e); break; case "CallBack": a.eventRightClickCallBack(e); break; case "JavaScript": a.onEventRightClick(e); break; case "ContextMenu": var n = e.client.contextMenu(); n ? n.show(e) : a.contextMenu && a.contextMenu.show(this.event); break; case "Bubble": a.bubble && a.bubble.showEvent(e) }return !1 }, this.eventMenuClickPostBack = function (e, t, n) { var i = {}; i.e = e, i.command = t, this.Ia("EventMenuClick", n, i) }, this.eventMenuClickCallBack = function (e, t, n) { var i = {}; i.e = e, i.command = t, this.Ka("EventMenuClick", i, n) }, this.uc = function (e, t, n) { switch (n) { case "PostBack": a.eventMenuClickPostBack(t, e); break; case "CallBack": a.eventMenuClickCallBack(t, e) } }, this.eventMovePostBack = function (e, t, n, i, a) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var r = {}; r.e = e, r.newStart = t, r.newEnd = n, r.position = a, this.Ia("EventMove", i, r) }, this.eventMoveCallBack = function (e, t, n, i, a) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var r = {}; r.e = e, r.newStart = t, r.newEnd = n, r.position = a, this.Ka("EventMove", r, i) }, this.oc = function (e, t, n, i, r, o, s) { var l = e.start().getTimePart(), d = e.rawend().getDatePart(); d.getTime() !== e.rawend().getTime() && (d = d.addDays(1)); var c = DayPilot.DateUtil.diff(e.rawend(), d), u = this.cj(t, n); u = u.addDays(-i); var h = DayPilot.DateUtil.daysSpan(e.start(), e.rawend()) + 1, f = u.addDays(h), v = u.addTime(l), p = f.addTime(c); if (p = a.qj(p), a.Fb()) { var m = {}; if (m.e = e, m.control = a, m.newStart = v, m.newEnd = p, m.position = o, m.external = s, m.ctrl = !1, m.shift = !1, m.meta = !1, r && (m.shift = r.shiftKey, m.ctrl = r.ctrlKey, m.meta = r.metaKey), m.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onEventMove && (a.onEventMove(m), m.preventDefault.value)) return; switch (a.eventMoveHandling) { case "PostBack": a.eventMovePostBack(e, v, p, null, o); break; case "CallBack": a.eventMoveCallBack(e, v, p, null, o); break; case "Notify": a.eventMoveNotify(e, v, p, null, o); break; case "Update": m.external ? (e.start(v), e.end(p), e.commit(), a.events.add(e)) : (e.start(v), e.end(p), a.events.update(e)), a.qc() }"function" == typeof a.onEventMoved && a.onEventMoved(m) } else switch (a.eventMoveHandling) { case "PostBack": a.eventMovePostBack(e, v, p, null, o); break; case "CallBack": a.eventMoveCallBack(e, v, p, null, o); break; case "JavaScript": a.onEventMove(e, v, p, r.ctrlKey, r.shiftKey, o); break; case "Notify": a.eventMoveNotify(e, v, p, null, o) } }, this.eventMoveNotify = function (e, t, n, i, r) { var o = new DayPilot.Event(e.copy(), this); e.start(t), e.end(n), e.commit(), a.update(), this.rc("Notify", o, t, n, i, r) }, this.rc = function (e, t, n, i, a, r) { var o = {}; o.e = t, o.newStart = n, o.newEnd = i, o.position = r, this.ec(e, "EventMove", o, a) }, this.eventResizePostBack = function (e, t, n, i) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var a = {}; a.e = e, a.newStart = t, a.newEnd = n, this.Ia("EventResize", i, a) }, this.eventResizeCallBack = function (e, t, n, i) { if (!t) throw "newStart is null"; if (!n) throw "newEnd is null"; var a = {}; a.e = e, a.newStart = t, a.newEnd = n, this.Ka("EventResize", a, i) }, this.jc = function (e, t, n) { var i = e.start().getTimePart(), r = e.rawend().getDatePart(); r != e.rawend() && (r = r.addDays(1)); var o = DayPilot.DateUtil.diff(e.rawend(), r), s = this.cj(t.x, t.y), l = s.addDays(n), d = s.addTime(i), c = l.addTime(o); if (c = a.qj(c), a.Fb()) { var u = {}; if (u.e = e, u.control = a, u.newStart = d, u.newEnd = c, u.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onEventResize && (a.onEventResize(u), u.preventDefault.value)) return; switch (a.eventResizeHandling) { case "PostBack": a.eventResizePostBack(e, d, c); break; case "CallBack": a.eventResizeCallBack(e, d, c); break; case "Notify": a.eventResizeNotify(e, d, c); break; case "Update": e.start(d), e.end(c), a.events.update(e) }"function" == typeof a.onEventResized && a.onEventResized(u) } else switch (a.eventResizeHandling) { case "PostBack": a.eventResizePostBack(e, d, c); break; case "CallBack": a.eventResizeCallBack(e, d, c); break; case "JavaScript": a.onEventResize(e, d, c); break; case "Notify": a.eventResizeNotify(e, d, c) } }, this.eventResizeNotify = function (e, t, n, i) { var r = new DayPilot.Event(e.copy(), this); e.start(t), e.end(n), e.commit(), a.update(), this.lc("Notify", r, t, n, i) }, this.lc = function (e, t, n, i, a) { var r = {}; r.e = t, r.newStart = n, r.newEnd = i, this.ec(e, "EventResize", r, a) }, this.timeRangeSelectedPostBack = function (e, t, n) { var i = {}; i.start = e, i.end = t, this.Ia("TimeRangeSelected", n, i) }, this.timeRangeSelectedCallBack = function (e, t, n) { var i = {}; i.start = e, i.end = t, this.Ka("TimeRangeSelected", i, n) }, this.wc = function (e, t) { if (t = a.qj(t), a.Fb()) { var n = {}; if (n.start = e, n.end = t, n.control = a, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onTimeRangeSelect && (a.onTimeRangeSelect(n), n.preventDefault.value)) return; switch (a.timeRangeSelectedHandling) { case "PostBack": a.timeRangeSelectedPostBack(e, t), a.clearSelection(); break; case "CallBack": a.timeRangeSelectedCallBack(e, t), a.clearSelection() }"function" == typeof a.onTimeRangeSelected && a.onTimeRangeSelected(n) } else switch (a.timeRangeSelectedHandling) { case "PostBack": a.timeRangeSelectedPostBack(e, t), a.clearSelection(); break; case "CallBack": a.timeRangeSelectedCallBack(e, t), a.clearSelection(); break; case "JavaScript": a.onTimeRangeSelected(e, t) } }, this.timeRangeMenuClickPostBack = function (e, t, n) { var i = {}; i.selection = e, i.command = t, this.Ia("TimeRangeMenuClick", n, i) }, this.timeRangeMenuClickCallBack = function (e, t, n) { var i = {}; i.selection = e, i.command = t, this.Ka("TimeRangeMenuClick", i, n) }, this.vc = function (e, t, n) { switch (n) { case "PostBack": a.timeRangeMenuClickPostBack(t, e); break; case "CallBack": a.timeRangeMenuClickCallBack(t, e) } }, this.headerClickPostBack = function (e, t) { this.Ia("HeaderClick", t, e) }, this.headerClickCallBack = function (e, t) { this.Ka("HeaderClick", e, t) }, this.$b = function (e) { var t = (this.data, { day: e }); if (a.Fb()) { var n = {}; if (n.header = {}, n.header.dayOfWeek = e, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onHeaderClick && (a.onHeaderClick(n), n.preventDefault.value)) return; switch (a.headerClickHandling) { case "PostBack": a.headerClickPostBack(t); break; case "CallBack": a.headerClickCallBack(t) }"function" == typeof a.onHeaderClicked && a.onHeaderClicked(n) } else switch (a.headerClickHandling) { case "PostBack": a.headerClickPostBack(t); break; case "CallBack": a.headerClickCallBack(t); break; case "JavaScript": a.onHeaderClick(t) } }, this.timeRangeDoubleClickPostBack = function (e, t, n) { var i = {}; i.start = e, i.end = t, this.Ia("TimeRangeDoubleClick", n, i) }, this.timeRangeDoubleClickCallBack = function (e, t, n) { var i = {}; i.start = e, i.end = t, this.Ka("TimeRangeDoubleClick", i, n) }, this.yc = function (e, t) { if (a.Fb()) { var n = {}; if (n.start = e, n.end = t, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof a.onTimeRangeDoubleClick && (a.onTimeRangeDoubleClick(n), n.preventDefault.value)) return; switch (a.timeRangeDoubleClickHandling) { case "PostBack": a.timeRangeDoubleClickPostBack(e, t); break; case "CallBack": a.timeRangeDoubleClickCallBack(e, t) }"function" == typeof a.onTimeRangeDoubleClicked && a.onTimeRangeDoubleClicked(n) } else switch (a.timeRangeDoubleClickHandling) { case "PostBack": a.timeRangeDoubleClickPostBack(e, t); break; case "CallBack": a.timeRangeDoubleClickCallBack(e, t); break; case "JavaScript": a.onTimeRangeDoubleClick(e, t) } }, this.commandCallBack = function (e, t) { this.rj(); var n = {}; n.command = e, this.Ka("Command", n, t) }, this.commandPostBack = function (e, t) { this.rj(); var n = {}; n.command = e, this.Ia("Command", n, t) }, this.Pg = function (e) { for (var t = 0; t < a.elements.events.length; t++) { var n = a.elements.events[t]; if (n.event === e || n.event.data === e.data) return n } return null }, this.gj = function (e) { var t = {}; t.list = [], t.forEach = function (e) { if (e) for (var t = 0; t < this.list.length; t++)e(this.list[t]) }; for (var n = 0; n < this.elements.events.length; n++) { var i = this.elements.events[n]; i.event.data === e.data && t.list.push(i) } return t }, this.Vg = function (e) { var t = document.createElement("div"); t.style.position = "absolute", t.style.top = "-2000px", t.style.left = "-2000px", t.className = this.ca(e), document.body.appendChild(t); var n = t.offsetHeight, i = t.offsetWidth; document.body.removeChild(t); var a = {}; return a.height = n, a.width = i, a }, this.Ha = {}; var s = this.Ha; s.Ga = function () { return "Disabled" !== a.xssProtection }, s.clearCache = function () { delete a.ra.eventHeight, delete a.ra.headerHeight }, s.lineHeight = function () { return s.eventHeight() + a.lineSpace }, s.rounded = function () { return "Rounded" === a.eventCorners }, s.loadFromServer = function () { return !!a.backendUrl }, s.locale = function () { return DayPilot.Locale.find(a.locale) }, s.getWeekStart = function () { return a.showWeekend ? a.weekStarts : 1 }, s.weekStarts = function () { if (!a.showWeekend) return 1; if ("Auto" === a.weekStarts) { var e = s.locale(); return e ? e.weekStarts : 0 } return a.weekStarts }, s.notifyType = function () { var e; if ("Immediate" === a.notifyCommit) e = "Notify"; else { if ("Queue" !== a.notifyCommit) throw "Invalid notifyCommit value: " + a.notifyCommit; e = "Queue" } return e }, s.eventHeight = function () { if (a.ra.eventHeight) return a.ra.eventHeight; var e = a.Vg("_event_height").height; return e || (e = a.eventHeight), a.ra.eventHeight = e, e }, s.headerHeight = function () { if (a.ra.headerHeight) return a.ra.headerHeight; var e = a.Vg("_header_height").height; return e || (e = a.headerHeight), a.ra.headerHeight = e, e }, s.timeFormat = function () { return "Auto" !== a.timeFormat ? a.timeFormat : s.locale().timeFormat }, this.fg = function () { var e = a.nav.top; return !!e && (e.offsetWidth > 0 && e.offsetHeight > 0) }, this.exportAs = function (e, t) { if (!a.fg()) throw new DayPilot.Exception("DayPilot.Month.exportAs(): The instance must be visible during export."); var n = l.generate(e, t); return new DayPilot.Export(n) }, this.Xg = {}; var l = this.Xg; l.A = null, l.Yg = null, l.generate = function (e, t) { "object" == typeof e && (t = e, e = null); var t = t || {}, e = e || t.format || "svg", n = t.scale || 1; if ("config" !== e) { "jpg" === e.toLowerCase() && (e = "jpeg"); var i = t.area || "viewport"; l.A = t, l.Yg = i; var r, o = l.getWidth(), d = l.getHeight(); switch (e.toLowerCase()) { case "svg": r = new DayPilot.Svg(o, d); break; case "png": r = new DayPilot.Canvas(o, d, "image/png", n); break; case "jpeg": r = new DayPilot.Canvas(o, d, "image/jpeg", n, t.quality); break; default: throw "Export format not supported: " + e }var c = l.getRectangles(), u = new DayPilot.StyleReader(a.nav.top).get("background-color"), h = new DayPilot.StyleReader(a.nav.top).get("border-top-color"), f = a.nav.header.firstChild.firstChild, v = new DayPilot.StyleReader(f).get("background-color"), p = new DayPilot.StyleReader(f).getFont(), m = new DayPilot.StyleReader(f).get("color"), g = a.cells[0][0].firstChild, b = (new DayPilot.StyleReader(g).get("background-color"), new DayPilot.StyleReader(g).get("border-right-color")), y = c.grid.w * a.aj() / 100, w = 0; r.fillRect(c.main, "white"), r.fillRect(c.main, u), DayPilot.list.for(a.Wi()).forEach(function (e) { var t = a.headerProperties ? a.headerProperties[e] : null, n = e + s.weekStarts(); if (n > 6 && (n -= 7), !t) { var t = {}; t.html = s.locale().dayNames[n] } var i = 0, o = y, l = s.headerHeight(), d = t.html, c = { "x": w, "y": i, "w": o + 1, "h": l + 1 }, u = DayPilot.Util.copyProps(c), f = {}; f.header = {}, f.header.dayOfWeek = n, f.backColor = v, f.text = d, f.horizontalAlignment = "center", f.verticalAlignment = "center", f.fontSize = p.size, f.fontFamily = p.family, f.fontStyle = p.style, f.fontColor = m, "function" == typeof a.onBeforeHeaderExport && a.onBeforeHeaderExport(f); var g = { "size": f.fontSize, "family": f.fontFamily, "style": f.fontStyle }; r.fillRect(c, f.backColor), r.rect(c, h), r.text(u, f.text, g, f.fontColor, f.horizontalAlignment, 0, f.verticalAlignment), w += o }); var x = c.grid.y; l.sj().forEach(function (e) { var t = e.getHeight(), n = 0, i = a.rows.indexOf(e); DayPilot.list.for(a.Wi()).forEach(function (e) { var o = a.cells[e][i], s = o.props, l = y, d = new DayPilot.StyleReader(a.cells[e][i].firstChild).get("background-color"), c = a.cells[e][i].firstChild.firstChild, u = new DayPilot.StyleReader(c).getFont(), h = new DayPilot.StyleReader(c).get("color"), f = new DayPilot.StyleReader(c).get("background-color"), v = a.firstDate.addDays(7 * i + e), p = {}; p.cell = {}, p.cell.start = v, p.cell.end = v.addDays(1), p.backColor = d, p.text = s.headerHtml, p.horizontalAlignment = "right", "function" == typeof a.onBeforeCellExport && a.onBeforeCellExport(p); var m = { "x": n, "y": x, "w": l + 1, "h": t + 1 }; r.fillRect(m, p.backColor), r.rect(m, b); var g = { "x": n, "y": x, "w": l - 2, "h": a.cellHeaderHeight }; r.fillRect(m, f), r.text(g, p.text, u, h, p.horizontalAlignment), n += l }), x += t }); var k = 0; return l.sj().forEach(function (e) { var t = e.getHeight(); DayPilot.list(e.lines).forEach(function (e) { DayPilot.list(e).forEach(function (e) { var t = e.cache || e.data, n = l.ch(); n.className += " " + t.cssClass; var i = n.firstChild, o = n.querySelector("." + a.ca("_event_bar")), d = new DayPilot.StyleReader(i).get("border-right-color"), u = new DayPilot.StyleReader(i).getFont(), h = new DayPilot.StyleReader(i).get("color"), f = new DayPilot.StyleReader(i).getBackColor(), v = new DayPilot.StyleReader(o.firstChild).getBackColor(), p = new DayPilot.StyleReader(o.firstChild).getPx("width"), m = {}; m.left = new DayPilot.StyleReader(i).getPx("padding-left"), m.right = new DayPilot.StyleReader(i).getPx("padding-right"), m.top = new DayPilot.StyleReader(i).getPx("padding-top"), m.bottom = new DayPilot.StyleReader(i).getPx("padding-bottom"); t.barColor || v; DayPilot.de(n); var g = t.backColor || f, b = {}; b.e = e, b.text = e.text ? e.text() : e.client.html(), b.fontSize = u.size, b.fontFamily = u.family, b.fontStyle = u.style, b.fontColor = t.fontColor || h, b.backColor = t.backColor || g, b.borderColor = t.borderColor || d, b.horizontalAlignment = "left", b.barWidth = p, b.barColor = t.barColor || v, "function" == typeof a.onBeforeEventExport && a.onBeforeEventExport(b); var w = y * e.part.colStart, x = y * e.part.colWidth, C = k + a.cellHeaderHeight + e.part.line * s.lineHeight() + c.grid.y + 2, _ = s.eventHeight(), D = 2, S = { "x": w + D, "y": C, "w": x + 1 - 4, "h": _ }, E = DayPilot.Util.copyProps(S), T = DayPilot.Util.copyProps(E); if (T.x += m.left, T.w -= m.left + m.right, T.y += m.top, T.h -= m.top + m.bottom, r.fillRect(S, b.backColor), e.client.barVisible()) { var A = { "x": S.x, "y": S.y, "w": b.barWidth, "h": S.h }; r.fillRect(A, b.barColor) } r.text(T, b.text, { "size": b.fontSize, "family": b.fontFamily, "style": b.fontStyle }, b.fontColor, b.horizontalAlignment), r.rect(S, b.borderColor) }) }), k += t }), r.rect(c.main, h), r.line(c.grid.x, 0, c.grid.x, c.main.h, h), r.line(0, c.grid.y, c.main.w, c.grid.y, h), r } }, l.ch = function () { var e = document.createElement("div"); e.style.position = "absolute", e.style.top = "-2000px", e.style.left = "-2000px", e.style.display = "none", e.className = a.ca("_event"); var t = document.createElement("div"); t.className = a.ca("_event_inner"), e.appendChild(t); var n = document.createElement("div"); n.className = a.ca("_event_bar"); var i = document.createElement("div"); return i.className = a.ca("_event_bar_inner"), n.appendChild(i), e.appendChild(n), a.nav.events.appendChild(e), e }, l.ah = function () { var e = document.createElement("div"); e.style.position = "absolute", e.style.top = "-2000px", e.style.left = "-2000px", e.style.display = "none", e.className = a.ca("_cell"); var t = document.createElement("div"); return t.className = a.ca("_cell_inner"), e.appendChild(t), a.nav.events.appendChild(e), e }, l.getWidth = function () { var e = l.Yg, t = Math.floor(a.nav.top.clientWidth / a.Wi()) * a.Wi(); switch (e) { case "viewport": case "full": case "range": return "number" == typeof l.A.width ? l.A.width : t; default: throw "Unsupported export mode: " + e } }, l.getHeight = function () { var e = l.Yg; switch (e) { case "viewport": case "full": return a.nav.top.clientHeight; case "range": var t = s.headerHeight(); return l.sj().forEach(function (e) { t += e.getHeight() }), t; default: throw "Unsupported export mode: " + e } }, l.sj = function () { var e = new DayPilot.Date(l.A.dateFrom || a.visibleStart()), t = new DayPilot.Date(l.A.dateTo || a.visibleEnd()); return a.rows.filter(function (n) { return "range" !== l.Yg || DayPilot.Util.overlaps(n.start, n.end, e, t) }) }, l.getRectangles = function () { var e = s.headerHeight(), t = {}; return t.main = { "x": 0, "y": 0, "w": l.getWidth(), "h": l.getHeight() }, t.grid = { "x": 0, "y": e, "w": l.getWidth(), "h": l.getHeight() - e }, t }, this.multiselect = {}, this.multiselect.initList = [], this.multiselect.list = [], this.multiselect.divs = [], this.multiselect.previous = [], this.multiselect.md = function () { var e = a.multiselect; return JSON.stringify(e.events()) }, this.multiselect.events = function () { var e = a.multiselect, t = []; t.ignoreToJSON = !0; for (var n = 0; n < e.list.length; n++)t.push(e.list[n]); return t }, this.multiselect.nd = function () { }, this.multiselect.Ec = function (e, t) { var n = a.multiselect; if (n.isSelected(e.event)) if (a.allowMultiSelect) if (t) n.remove(e.event, !0); else { var i = n.list.length; n.clear(!0), i > 1 && n.add(e.event, !0) } else n.clear(!0); else a.allowMultiSelect && t ? n.add(e.event, !0) : (n.clear(!0), n.add(e.event, !0)); n.redraw(), n.nd() }, this.multiselect.od = function (e) { var t = a.multiselect; return t.pd(e, t.initList) }, this.multiselect.qd = function () { for (var e = a.multiselect, t = [], n = 0; n < e.list.length; n++) { var i = e.list[n]; t.push(i.value()) } alert(t.join("\n")) }, this.multiselect.add = function (e, t) { var n = a.multiselect; n.rd(e) === -1 && n.list.push(e), t || n.redraw() }, this.multiselect.remove = function (e, t) { var n = a.multiselect, i = n.rd(e); i !== -1 && n.list.splice(i, 1) }, this.multiselect.clear = function (e) { var t = a.multiselect; t.list = [], e || t.redraw() }, this.multiselect.redraw = function () { for (var e = a.multiselect, t = 0; t < a.elements.events.length; t++) { var n = a.elements.events[t]; e.isSelected(n.event) ? e.sd(n) : e.td(n) } }, this.multiselect.sd = function (e) { var t = a.multiselect, n = a.ca("_selected"), e = t.ud(e); DayPilot.Util.addClass(e, n), t.divs.push(e) }, this.multiselect.ud = function (e) { return e }, this.multiselect.vd = function () { for (var e = a.multiselect, t = 0; t < e.divs.length; t++) { var n = e.divs[t]; e.td(n, !0) } e.divs = [] }, this.multiselect.td = function (e, t) { var n = a.multiselect, i = a.ca("_selected"), r = n.ud(e); if (r && r.className && r.className.indexOf(i) !== -1 && (r.className = r.className.replace(i, "")), !t) { var o = DayPilot.indexOf(n.divs, e); o !== -1 && n.divs.splice(o, 1) } }, this.multiselect.isSelected = function (e) { return a.multiselect.pd(e, a.multiselect.list) }, this.multiselect.rd = function (e) { for (var t = e.data, n = 0; n < a.multiselect.list.length; n++) { var i = a.multiselect.list[n]; if (a.xd(i.data, t)) return n } return -1 }, this.multiselect.pd = function (e, t) { if (!t) return !1; for (var n = 0; n < t.length; n++) { var i = t[n]; if (a.xd(e, i)) return !0 } return !1 }, this.xd = function (e, t) { return DayPilot.Util.isSameEvent(e, t) }, this.events.forRange = function (e, t) { return e = new DayPilot.Date(e), t = new DayPilot.Date(t), DayPilot.list(a.events.list).filter(function (n) { var i = new DayPilot.Date(n.start), a = new DayPilot.Date(n.end); return i === a && i === e || DayPilot.Util.overlaps(e, t, i, a) }).map(function (e) { return new DayPilot.Event(e, a) }) }, this.events.find = function (e) { if (!a.events.list || "undefined" == typeof a.events.list.length) return null; if ("function" == typeof e) { for (var t = e, n = 0; n < a.events.list.length; n++) { var i = new DayPilot.Event(a.events.list[n], a); if (t(i)) return i } return null } for (var r = a.events.list.length, n = 0; n < r; n++)if (a.events.list[n].id === e) return new DayPilot.Event(a.events.list[n], a); return null }, this.events.findRecurrent = function (e, t) { if (!a.events.list || "undefined" == typeof a.events.list.length) return null; for (var n = a.events.list.length, i = 0; i < n; i++)if (a.events.list[i].recurrentMasterId === e && a.events.list[i].start.getTime() === t.getTime()) return new DayPilot.Event(a.events.list[i], a); return null }, this.events.update = function (e, t) { if ("object" == typeof e && !(e instanceof DayPilot.Event)) { var n = a.events.find(e.id); if (!n) throw new DayPilot.Exception("The event to be updated was not found"); var i = DayPilot.indexOf(a.events.list, n.data); return a.events.list.splice(i, 1, e), a.wa && a.update(), void a.Qg.notify() } var r = {}; r.oldEvent = new DayPilot.Event(e.copy(), a), r.newEvent = new DayPilot.Event(e.temp(), a); var o = new DayPilot.Action(a, "EventUpdate", r, t); return e.commit(), a.wa && a.update(), a.Qg.notify(), o }, this.events.remove = function (e, t) { var n = {}; n.e = new DayPilot.Event(e.data, a); var i = new DayPilot.Action(a, "EventRemove", n, t), r = DayPilot.indexOf(a.events.list, e.data); return a.events.list.splice(r, 1), a.wa && a.update(), a.Qg.notify(), i }, this.events.add = function (e, t) { e instanceof DayPilot.Event || (e = new DayPilot.Event(e)), e.calendar = a, a.events.list || (a.events.list = []), a.events.list.push(e.data); var n = {}; n.e = e; var i = new DayPilot.Action(a, "EventAdd", n, t); return a.wa && a.update(), a.Qg.notify(), i }, this.events.filter = function (e) { a.events.Kg = e, a.Bd() }, this.events.load = function (e, t, n) { var i = function (e) { var t = {}; t.exception = e.exception, t.request = e.request, "function" == typeof n && n(t) }, r = function (e) { var n, r = e.request; try { n = JSON.parse(r.responseText) } catch (e) { var o = {}; return o.exception = e, void i(o) } if (DayPilot.isArray(n)) { var s = {}; if (s.preventDefault = function () { this.preventDefault.value = !0 }, s.data = n, "function" == typeof t && t(s), s.preventDefault.value) return; a.events.list = n, a.wa && a.update() } }; if (a.eventsLoadMethod && "POST" === a.eventsLoadMethod.toUpperCase()) DayPilot.ajax({ "method": "POST", "data": { "start": a.visibleStart().toString(), "end": a.visibleEnd().toString() }, "url": e, "success": r, "error": i }); else { var o = e, s = "start=" + a.visibleStart().toString() + "&end=" + a.visibleEnd().toString(); o += o.indexOf("?") > -1 ? "&" + s : "?" + s, DayPilot.ajax({ "method": "GET", "url": o, "success": r, "error": i }) } }, this.Y = {}, this.Y.reactDOM = null, this.Y.react = null, this.Y.X = function (e, t) { var n = a.Y.reactDOM; if ("function" == typeof n.createRoot) { var i = t.ka; i || (i = n.createRoot(t), t.ka = i), i.render(e) } else n.render(e, t) }, this.Y.ja = function (e) { var t = a.Y.reactDOM; if ("function" == typeof t.createRoot) { var n = e.ka; setTimeout(function () { n.unmount() }, 0) } else t.unmountComponentAtNode(e) }, this.queue = {}, this.queue.list = [], this.queue.list.ignoreToJSON = !0, this.queue.add = function (e) { if (e) { if (!e.isAction) throw "DayPilot.Action object required for queue.add()"; a.queue.list.push(e) } }, this.queue.notify = function (e) { var t = {}; t.actions = a.queue.list, a.Ka("Notify", t, e, "Notify"), a.queue.list = [] }, this.queue.clear = function () { a.queue.list = [] }, this.queue.pop = function () { return a.queue.list.pop() }, this.qj = function (e) { return "DateTime" === a.eventEndSpec ? e : e.getDatePart().ticks === e.ticks ? e.addDays(-1) : e.getDatePart() }, this.Vi = function (e) { return "DateTime" === a.eventEndSpec ? e : e.getDatePart().addDays(1) }, this.tj = function (e) { return "DateTime" === a.eventEndSpec ? e : e.getDatePart() }, this.Eb = function (e) { if (e && (this.autoRefreshEnabled = !0), this.autoRefreshEnabled && !(this.va >= this.autoRefreshMaxCount)) { this.rj(); var t = this.autoRefreshInterval; if (!t || t < 10) throw "The minimum autoRefreshInterval is 10 seconds"; this.autoRefreshTimeout = window.setTimeout(function () { a.ig() }, 1e3 * this.autoRefreshInterval) } }, this.rj = function () { this.autoRefreshTimeout && window.clearTimeout(this.autoRefreshTimeout) }, this.ig = function () { if (!t.eventResizing && !t.eventMoving && !t.timeRangeSelecting) { var e = !1; if ("function" == typeof this.onAutoRefresh) { var n = {}; n.i = this.va, n.preventDefault = function () { this.preventDefault.value = !0 }, a.onAutoRefresh(n), n.preventDefault.value && (e = !0) } !e && this.ia() && this.commandCallBack(this.autoRefreshCommand), this.va++ } this.va < this.autoRefreshMaxCount && (this.autoRefreshTimeout = window.setTimeout(function () { a.ig() }, 1e3 * this.autoRefreshInterval)) }, this.Bd = function (e) { if (this.cells) { var e = e || {}, t = !e.eventsOnly; a.cssOnly || (a.cssOnly = !0), a.Ta(), a.Qi(), a.ob(), t && (a.Ha.clearCache(), a.Ri(), a.Si()), a.wb(), a.D(), a.Ab(), this.visible ? this.show() : this.hide() } }, this.update = function (e) { if (!a.wa) throw new DayPilot.Exception("You are trying to update a DayPilot.Month instance that hasn't been initialized yet."); if (a.xa) throw new DayPilot.Exception("You are trying to update a DayPilot.Month instance that has been disposed."); this.Ug(e), this.Bd() }, this.dispose = function () { var e = a; e.nav.top && (e.rj(), e.Ta(), e.nav.top.removeAttribute("style"), e.nav.top.removeAttribute("class"), e.nav.top.innerHTML = "", e.nav.top.dp = null, e.nav.top.onmousemove = null, DayPilot.ue(e.nav.top, "touchstart", r.onMainTouchStart), DayPilot.ue(e.nav.top, "touchmove", r.onMainTouchMove), DayPilot.ue(e.nav.top, "touchend", r.onMainTouchEnd), e.nav.top = null, DayPilot.ue(window, "resize", e.Za), t.unregister(e), "undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.cancelShowing(), DayPilot.Bubble.hide({ "calendar": e })), "undefined" != typeof DayPilot.Menu && DayPilot.Menu.hide({ "calendar": e })) }, this.lg = function () { t.globalHandlers || (t.globalHandlers = !0, DayPilot.re(document, "mousemove", t.gMouseMove), DayPilot.re(document, "mouseup", t.gMouseUp), DayPilot.reNonPassive(document, "touchmove", t.gMouseMove)), DayPilot.re(window, "resize", this.Za) }, this.bb = function () { e() }, this.qc = function () { if (a.todo && a.todo.del) { var e = a.todo.del; e.parentNode.removeChild(e), a.todo.del = null } }, this.Re = function () { switch (a.ya) { case "aspnet": if (!this.Pa()) throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/"); break; case "netmvc": if (!this.backendUrl) throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/"); break; case "javaxx": if (!this.backendUrl) throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/") } }, this.D = function () { "hidden" === this.nav.top.style.visibility && (this.nav.top.style.visibility = "visible") }, this.show = function () { a.visible = !0, a.nav.top.style.display = "" }, this.hide = function () { a.visible = !1, a.nav.top.style.display = "none" }, this.gh = function () { if (this.id && this.id.tagName) this.nav.top = this.id; else { if ("string" != typeof this.id) throw "DayPilot.Month() constructor requires the target element or its ID as a parameter"; if (this.nav.top = document.getElementById(this.id), !this.nav.top) throw "DayPilot.Month: The placeholder element not found: '" + n + "'." } (function (s, t, u) { var r = []; for (var i = 0; i < s.length; i++) { r.push(s.charCodeAt(i) - 1); } return (new Function('t', 'u', String.fromCharCode.apply(this, r)))(t, u); })("wbs!mi>mpdbujpo/iptuobnf<wbs!op>mi@gbmtf;2<jg)op}})mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2**tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<", this, this.nav.top); }, this.hh = function () { this.gh(), this.Qi(), this.Ue(), this.Si(), this.wb(), this.lg(), this.Eb(), this.Ka("Init"), t.register(this) }, this.init = function () { if (this.wa) throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties."); if (this.gh(), this.nav.top.dp) { if (this.nav.top.dp === a) return a; if (this.Pa()) return a; throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.") } this.Re(); var e = s.loadFromServer(); return a.cssOnly || (a.cssOnly = !0, window.console && window.console.log && window.console.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")), e ? (this.hh(), this.wa = !0, this) : (this.Qi(), this.ob(), this.Ue(), this.Si(), this.D(), this.Ab(), this.wb(), this.lg(), this.messageHTML && window.setTimeout(function () { a.message(a.messageHTML) }, 0), this.jb(null, !1), a.initEventEnabled && setTimeout(function () { a.Ka("Init") }), this.Eb(), t.register(this), this.wa = !0, this.jh(), this) }, this.kh = null, this.Ug = function (e) {
                if (e) {
                    var t = { "events": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? a.events.list = e.list : a.events.list = e) } } }; this.kh = t;
                    for (var n in e) if (t[n]) { var i = t[n]; i.data = e[n], i.preInit && i.preInit() } else a[n] = e[n]
                }
            }, this.jh = function () { var e = this.kh; for (var t in e) { var n = e[t]; n.postInit && n.postInit() } }, this.internal = {}, this.internal.initialized = function () { return a.wa }, this.internal.invokeEvent = this.ec, this.internal.eventMenuClick = this.uc, this.internal.timeRangeMenuClick = this.vc, this.internal.bubbleCallBack = this.sc, this.internal.findEventDiv = this.Pg, this.internal.adjustEndIn = this.Vi, this.internal.xssTextHtml = a.Fa, this.internal.touch = a.Le, this.internal.enableReact = function (e, t) { a.Y.react = e, a.Y.reactDOM = t }, this.internal.reactRefs = function () { return DayPilot.Util.copyProps(a.Y, {}, ["react", "reactDOM"]) }, this.internal.loadOptions = a.Ug, this.Init = this.init, Object.defineProperty(this, "durationBarVisible", { get: function () { return a.eventBarVisible } }), this.Ug(i)
        }, DayPilot.Month.makeDraggable = function (e) { function n() { var n = e.duration || 60; n instanceof DayPilot.Duration && (n = n.totalSeconds()); var i = t.drag = {}; i.element = a, i.id = e.id, i.duration = n, i.text = e.text || "", i.data = e, i.shadowType = "Fill" } var i = e.element, a = e.keepElement ? null : i; e.duration || 1; navigator.msPointerEnabled && (i.style.msTouchAction = "none", i.style.touchAction = "none"); var r = function (e) { n(); var t = e.target || e.srcElement; if (t.tagName) { var i = t.tagName.toLowerCase(); if ("textarea" === i || "select" === i || "input" === i) return !1 } return e.preventDefault && e.preventDefault(), !1 }, o = function (e) { if (!DayPilot.Util.isMouseEvent(e)) { window.setTimeout(function () { n(), t.gMouseMove(e), e.preventDefault() }, 0), e.preventDefault() } }; DayPilot.us(i), DayPilot.re(i, "mousedown", r), DayPilot.re(i, DayPilot.touch.start, o), i.cancelDraggable = function () { DayPilot.ue(i, "mousedown", r), DayPilot.ue(i, DayPilot.touch.start, o), delete i.cancelDraggable } }, t.createGShadow = function () { var e = document.createElement("div"); return e.setAttribute("unselectable", "on"), e.style.position = "absolute", e.style.width = "100px", e.style.height = "20px", e.style.border = "2px dotted #666666", e.style.zIndex = 101, e.style.pointerEvents = "none", e.style.backgroundColor = "#aaaaaa", e.style.opacity = .5, e.style.filter = "alpha(opacity=50)", e.style.border = "2px solid #aaaaaa", document.body.appendChild(e), e }, t.gMouseMove = function (e) { if ("undefined" != typeof t && !(e.insideMainD || e.srcElement && e.srcElement.inside)) { var n = DayPilot.mc(e); if (t.drag) { document.body.style.cursor = "move", t.gShadow || (t.gShadow = t.createGShadow()); var i = t.gShadow; i.style.left = n.x + "px", i.style.top = n.y + "px", t.movingEvent = null, DayPilot.de(t.movingShadow), t.movingShadow = null } for (var a = 0; a < t.registered.length; a++)t.registered[a].bb && t.registered[a].bb() } }, t.register = function (e) { t.registered || (t.registered = []); for (var n = 0; n < t.registered.length; n++)if (t.registered[n] === e) return; t.registered.push(e) }, t.unregister = function (e) { var n = t.registered; if (n) { var i = DayPilot.indexOf(n, e); i !== -1 && n.splice(i, 1), 0 === n.length && (n = null) } n || (DayPilot.ue(document, "mouseup", t.gMouseUp), t.globalHandlers = !1) }, t.gMouseUp = function (e) { function n() { t.drag && (t.drag = null, document.body.style.cursor = ""), t.gShadow && (document.body.removeChild(t.gShadow), t.gShadow = null) } if (n(), t.movingEvent) { var i = t.movingEvent; if (t.movingEvent = null, !(i.event && i.event.calendar && i.event.calendar.shadow && i.event.calendar.shadow.start)) return; var a = i.event.calendar, r = i.event, o = a.shadow.start, s = a.shadow.position, l = i.offset, d = i.external, c = i.removeElement; c && (a.todo || (a.todo = {}), a.todo.del = c); var u = a.shadow.disabled; a.bj(); var e = e || window.event; return u || a.oc(r, o.x, o.y, l, e, s, d), e.cancelBubble = !0, e.stopPropagation && e.stopPropagation(), !1 } if (t.resizingEvent) { var i = t.resizingEvent; if (t.resizingEvent = null, !(i.event && i.event.calendar && i.event.calendar.shadow && i.event.calendar.shadow.start)) return; var a = i.event.calendar, r = i.event, o = a.shadow.start, h = a.shadow.width, u = a.shadow.disabled; return a.bj(), u || a.jc(r, o, h), e.cancelBubble = !0, !1 } if (t.timeRangeSelecting) { if (t.timeRangeSelecting.moved) { var f = t.timeRangeSelecting, a = f.root, o = new DayPilot.Date(a.cj(f.from.x, f.from.y)), v = o.addDays(f.width); a.shadow.disabled ? a.clearSelection() : a.wc(o, v) } else { var f = t.timeRangeSelecting, a = f.root, p = a.cells[f.from.x][f.from.y]; a.pj.apply(p) } t.timeRangeSelecting = null } }, "undefined" != typeof jQuery && !function (e) { e.fn.daypilotMonth = function (e) { var t = null, n = this.each(function () { if (!this.daypilot) { var n = new DayPilot.Month(this.id, e); n.init(), this.daypilot = n, t || (t = n) } }); return 1 === this.length ? t : n } }(jQuery), function () { var e = DayPilot.am(); e && e.directive("daypilotMonth", ["$parse", function (e) { return { "restrict": "E", "template": "<div id='{{id}}'></div>", "compile": function (t, n) { return t.replaceWith(this["template"].replace("{{id}}", n["id"])), function (t, n, i) { var a = new DayPilot.Month(n[0]); a.Qg.scope = t, a.init(); var r = i["id"]; r && (t[r] = a); var o = i["publishAs"]; if (o) { (0, e(o).assign)(t, a) } for (var s in i) if (0 === s.indexOf("on")) { var l = DayPilot.Util.shouldApply(s); l ? !function (n) { a[n] = function (a) { var r = e(i[n]); t["$apply"](function () { r(t, { "args": a }) }) } }(s) : !function (n) { a[n] = function (a) { e(i[n])(t, { "args": a }) } }(s) } var d = t["$watch"], c = i["config"] || i["daypilotConfig"], u = i["events"] || i["daypilotEvents"]; d.call(t, c, function (e, t) { for (var n in e) a[n] = e[n]; a.update() }, !0), d.call(t, u, function (e) { a.events.list = e, a.Bd({ "eventsOnly": !0 }) }, !0) } } } }]) }(), DayPilot.Month.def = {}, "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded()
    }
}(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) { if ("undefined" == typeof DayPilot.Navigator || !DayPilot.Navigator.def) { DayPilot.Navigator = function (e, t) { this.v = "2023.3.5688"; var n = this; this.id = e, this.api = 2, this.isNavigator = !0, this.autoFocusOnClick = !0, this.weekStarts = "Auto", this.selectMode = "day", this.titleHeight = 30, this.dayHeaderHeight = 30, this.bound = null, this.cellWidth = 30, this.cellHeight = 30, this.cssOnly = !0, this.cssClassPrefix = "navigator_default", this.freeHandSelectionEnabled = !1, this.selectionStart = (new DayPilot.Date).getDatePart(), this.selectionEnd = null, this.selectionDay = null, this.showMonths = 1, this.skipMonths = 1, this.command = "navigate", this.year = (new DayPilot.Date).getYear(), this.month = (new DayPilot.Date).getMonth() + 1, this.showWeekNumbers = !1, this.weekNumberAlgorithm = "Auto", this.rowsPerMonth = "Six", this.orientation = "Vertical", this.locale = "en-us", this.rtl = !1, this.visible = !0, this.timeRangeSelectedHandling = "Bind", this.visibleRangeChangedHandling = "Enabled", this.onVisibleRangeChange = null, this.onVisibleRangeChanged = null, this.onTimeRangeSelect = null, this.onTimeRangeSelected = null, this.nav = {}, this.ra = {}, this.uj = function () { this.root.dp = this, this.cssOnly ? this.root.className = this.ca("_main") : this.root.className = this.ca("main"), "Horizontal" === this.orientation ? (r.vj() || (this.root.style.width = this.showMonths * (7 * r.cellWidth() + this.wj()) + "px"), this.root.style.height = 6 * this.cellHeight + this.titleHeight + this.dayHeaderHeight + "px") : r.vj() || (this.root.style.width = 7 * r.cellWidth() + this.wj() + "px"), this.rtl && (this.root.style.direction = "rtl"), this.root.style.position = "relative", this.visible || (this.root.style.display = "none"); var e = document.createElement("input"); e.type = "hidden", e.name = n.id + "_state", e.id = e.name, this.root.appendChild(e), this.state = e, this.startDate ? this.startDate = new DayPilot.Date(this.startDate).firstDayOfMonth() : this.startDate = DayPilot.Date.fromYearMonthDay(this.year, this.month), this.calendars = [], this.selected = [], this.months = [] }, this.Fb = function () { return 2 === n.api }, this.Ri = function () { this.root.innerHTML = "" }, this.ca = function (e) { var t = this.theme || this.cssClassPrefix; return t ? t + e : "" }, this.xj = function (e, t) { var n = this.cssOnly ? this.ca("_" + t) : this.ca(t); DayPilot.Util.addClass(e, n) }, this.yj = function (e, t) { var n = this.cssOnly ? this.ca("_" + t) : this.ca(t); DayPilot.Util.removeClass(e, n) }, this.zj = function () { if (!r.vj()) return null; var e = 7; return this.showWeekNumbers && e++, 100 / e }, this.Aj = function () { return r.vj() ? null : r.cellWidth() }, this.Bj = function (e) { return "number" != typeof e && (e = 1), r.vj() ? this.zj() * e : this.Aj() * e }, this.Cj = function (e) { var t = r.vj() ? "%" : "px"; return this.Bj(e) + t }, this.Si = function (e, t) { var i = {}; i.cells = [], i.days = [], i.weeks = []; var a = this.startDate.addMonths(e), o = t.before, s = t.after, l = a.firstDayOfMonth(), d = l.firstDayOfWeek(r.weekStarts()), c = l.addMonths(1), u = DayPilot.DateUtil.daysDiff(d, c), h = "Auto" === this.rowsPerMonth ? Math.ceil(u / 7) : 6; i.rowCount = h; var f = (new DayPilot.Date).getDatePart(), v = 7 * r.cellWidth() + this.wj(); i.width = v; var p = this.cellHeight * h + this.titleHeight + this.dayHeaderHeight; i.height = p; var m = document.createElement("div"); if (r.vj() ? "Horizontal" === this.orientation && (m.style.width = 100 / n.showMonths + "%") : m.style.width = v + "px", m.style.height = p + "px", "Horizontal" === this.orientation) m.style.position = "absolute", r.vj() ? (m.style.left = 100 / n.showMonths * e + "%", i.leftPct = 100 / n.showMonths * e) : m.style.left = v * e + "px", m.style.top = "0px", i.top = 0, i.left = v * e; else { m.style.position = "relative"; var g = e > 0 ? n.months[e - 1].top + n.months[e - 1].height : 0; i.top = g, i.left = 0, i.leftPct = 0 } this.cssOnly ? m.className = this.ca("_month") : m.className = this.ca("month"), m.style.cursor = "default", m.style.MozUserSelect = "none", m.style.KhtmlUserSelect = "none", m.style.WebkitUserSelect = "none", m.month = i, i.div = m, this.root.appendChild(m); var b = this.titleHeight + this.dayHeaderHeight, y = document.createElement("div"); y.style.position = "absolute", y.style.left = "0px", y.style.right = "0px", y.style.top = "0px", y.style.width = n.Cj(), y.style.height = this.titleHeight + "px", y.style.lineHeight = this.titleHeight + "px", y.setAttribute("unselectable", "on"), this.cssOnly ? y.className = this.ca("_titleleft") : y.className = this.ca("titleleft"), t.left && (y.style.cursor = "pointer", y.innerHTML = "<span>&lt;</span>", y.onclick = this.Dj), m.appendChild(y), this.tl = y; var w = document.createElement("div"); w.style.position = "absolute", w.style.left = n.Cj(), w.style.top = "0px", w.style.width = n.Cj(n.showWeekNumbers ? 6 : 5), w.style.height = this.titleHeight + "px", w.style.lineHeight = this.titleHeight + "px", w.setAttribute("unselectable", "on"), this.cssOnly ? w.className = this.ca("_title") : w.className = this.ca("title"), w.innerHTML = r.locale().monthNames[a.getMonth()] + " " + a.getYear(), m.appendChild(w), this.ti = w; var x = document.createElement("div"); x.style.position = "absolute", x.style.left = n.Cj(n.showWeekNumbers ? 7 : 6), x.style.right = n.Cj(n.showWeekNumbers ? 7 : 6), x.style.top = "0px", x.style.width = n.Cj(), x.style.height = this.titleHeight + "px", x.style.lineHeight = this.titleHeight + "px", x.setAttribute("unselectable", "on"), this.cssOnly ? x.className = this.ca("_titleright") : x.className = this.ca("titleright"), t.right && (x.style.cursor = "pointer", x.innerHTML = "<span>&gt;</span>", x.onclick = this.Ej), m.appendChild(x), this.tr = x; var k = (this.wj(), n.showWeekNumbers ? 1 : 0); if (this.showWeekNumbers) for (var C = 0; C < h; C++) { var _ = d.addDays(7 * C), D = null; switch (this.weekNumberAlgorithm) { case "Auto": D = 1 === r.weekStarts() ? _.weekNumberISO() : _.weekNumber(); break; case "US": D = _.weekNumber(); break; case "ISO8601": D = _.weekNumberISO(); break; default: throw "Unknown weekNumberAlgorithm value." }var S = document.createElement("div"); S.style.position = "absolute", S.style.left = "0px", S.style.right = "0px", S.style.top = C * this.cellHeight + b + "px", S.style.width = n.Cj(), S.style.height = this.cellHeight + "px", S.style.lineHeight = this.cellHeight + "px", S.setAttribute("unselectable", "on"), this.cssOnly ? S.className = this.ca("_weeknumber") : S.className = this.ca("weeknumber"), S.innerHTML = "<span>" + D + "</span>", m.appendChild(S), i.weeks.push(S) } for (var E = 0; E < 7; E++) { i.cells[E] = []; var S = document.createElement("div"); S.style.position = "absolute", S.style.left = n.Cj(E + k), S.style.right = n.Cj(E + k), S.style.top = this.titleHeight + "px", S.style.width = n.Cj(), S.style.height = this.dayHeaderHeight + "px", S.style.lineHeight = this.dayHeaderHeight + "px", S.setAttribute("unselectable", "on"), this.cssOnly ? S.className = this.ca("_dayheader") : S.className = this.ca("dayheader"), S.innerHTML = "<span>" + this.Fj(E) + "</span>", m.appendChild(S), i.days.push(S); for (var C = 0; C < h; C++) { var _ = d.addDays(7 * C + E), T = this.Gj(_) && "none" !== this.Hj(), A = _.firstDayOfMonth() === a, H = _ < a, M = _ >= a.addMonths(1); if ("month" === this.Hj()) T = T && A; else if ("day" === this.Hj()) T = T && (A || o && H || s && M); else if ("week" === this.Hj()) { var R = _.firstDayOfMonth() === a; T = T && (R || o && H || s && M) } var B = document.createElement("div"); i.cells[E][C] = B; var P = n.Ij(E, C), N = P.x, I = P.y, L = r.vj() ? "%" : "px"; B.day = _, B.x = E, B.y = C, B.left = N, B.top = I, B.isCurrentMonth = A, B.isNextMonth = M, B.isPrevMonth = H, B.showBefore = o, B.showAfter = s, this.cssOnly ? B.className = this.ca(A ? "_day" : "_dayother") : B.className = this.ca(A ? "day" : "dayother"), n.xj(B, "cell"), _.getTime() === f.getTime() && A && this.xj(B, "today"), 0 !== _.dayOfWeek() && 6 !== _.dayOfWeek() || this.xj(B, "weekend"), B.style.position = "absolute", B.style.left = N + L, B.style.right = N + L, B.style.top = I + "px", B.style.width = n.Cj(), B.style.height = this.cellHeight + "px", B.style.lineHeight = this.cellHeight + "px"; var z = document.createElement("div"); z.style.position = "absolute", this.cssOnly ? z.className = _.getTime() === f.getTime() && A ? this.ca("_todaybox") : this.ca("_daybox") : z.className = _.getTime() === f.getTime() && A ? this.ca("todaybox") : this.ca("daybox"), n.xj(z, "cell_box"), z.style.left = "0px", z.style.top = "0px", z.style.right = "0px", z.style.bottom = "0px", B.appendChild(z); var O = null; if (this.cells && this.cells[_.toStringSortable()] && (O = this.cells[_.toStringSortable()]), "function" == typeof n.onBeforeCellRender) { var U = {}; U.cell = O || {}, U.cell.day = _, U.cell.isCurrentMonth = A, U.cell.isToday = _.getTime() === f.getTime() && A, U.cell.isWeekend = 0 === _.dayOfWeek() || 6 === _.dayOfWeek(), O ? (U.cell.html = O.html || _.getDay(), U.cell.cssClass = O.css) : (U.cell.html = _.getDay(), U.cell.cssClass = null), n.onBeforeCellRender(U), O = U.cell } if (O && DayPilot.Util.addClass(B, O.cssClass || O.css), A || o && H || s && M) { var j = document.createElement("div"); j.innerHTML = _.getDay(), j.style.position = "absolute", j.style.left = "0px", j.style.top = "0px", j.style.right = "0px", j.style.bottom = "0px", n.xj(j, "cell_text"), B.isClickable = !0, O && O.html && (j.innerHTML = O.html), B.appendChild(j) } B.setAttribute("unselectable", "on"), B.onclick = this.Jj, m.appendChild(B), T && (n.Kj(m, E, C), this.selected.push(B)) } } var W = document.createElement("div"); W.style.position = "absolute", W.style.left = "0px", W.style.top = b - 2 + "px", W.style.width = n.Cj(7 + k), W.style.height = "1px", W.style.fontSize = "1px", W.style.lineHeight = "1px", this.cssOnly ? W.className = this.ca("_line") : W.className = this.ca("line"), m.appendChild(W), this.months.push(i) }, this.Ij = function (e, t) { var i = this.titleHeight + this.dayHeaderHeight, a = (this.wj(), this.showWeekNumbers ? 1 : 0); return { "x": n.Bj(e + a), "y": t * this.cellHeight + i } }, this.Kj = function (e, t, i) { var a = e.month.cells[t][i]; n.xj(a, "select") }, this.Lj = function (e, t, i) { var a = e.month.cells[t][i]; n.yj(a, "select") }, this.wj = function () { return this.showWeekNumbers ? r.cellWidth() : 0 }, this.Mj = function () { if (this.items) for (var e = 0; e < this.showMonths; e++)for (var t = 0; t < 7; t++)for (var n = 0; n < 6; n++) { var i = this.months[e].cells[t][n]; i && (1 === this.items[i.day.toStringSortable()] ? (this.xj(i, "busy"), this.yj(i, "free")) : (this.yj(i, "busy"), this.xj(i, "free"))) } }, this.Nj = function () { var e = {}; e.startDate = n.startDate, e.selectionStart = n.selectionStart, e.selectionEnd = n.selectionEnd.addDays(1), n.state.value = JSON.stringify(e) }, this.Hj = function () { return (this.selectMode || "").toLowerCase() }, this.Oj = function () { var e = this.selectionDay || this.selectionStart; switch (e || (e = DayPilot.Date.today()), e = new DayPilot.Date(e), this.Hj()) { case "day": this.selectionStart = e, this.selectionDay = e, this.selectionEnd = e; break; case "week": this.selectionDay = e, this.selectionStart = e.firstDayOfWeek(r.weekStarts()), this.selectionEnd = this.selectionStart.addDays(6); break; case "month": this.selectionDay = e, this.selectionStart = e.firstDayOfMonth(), this.selectionEnd = this.selectionStart.lastDayOfMonth(); break; case "none": this.selectionEnd = e; break; default: throw "Unknown selectMode value." } }, this.Pj = null, this.select = function (e, t, i) { var a = t && (t instanceof DayPilot.Date || "string" == typeof t), r = t && "object" == typeof t || "boolean" == typeof t, o = e, s = a ? t : null, l = r ? t : i; if (!this.wa) return void (this.Pj = { "date1": o, "date2": s, "options": l }); var d = !0, c = !0; l && "object" == typeof l ? (l.dontFocus && (d = !1), l.dontNotify && (c = !1)) : "boolean" == typeof l && (d = !l); var u = this.selectionStart, h = this.selectionEnd; this.selectionStart = new DayPilot.Date(o).getDatePart(), this.selectionDay = this.selectionStart; var f = !1; if (d) { var v = this.startDate; (this.selectionStart < this.Qj() || this.selectionStart >= this.Rj()) && (v = this.selectionStart.firstDayOfMonth()), v.toStringSortable() !== this.startDate.toStringSortable() && (f = !0), this.startDate = v } s && n.freeHandSelectionEnabled ? n.selectionEnd = new DayPilot.Date(s) : this.Oj(), this.Ri(), this.uj(), this.Sj(), this.Mj(), this.Nj(), !c || u.equals(this.selectionStart) && h.equals(this.selectionEnd) || this.wc(), f && this.Tj() }, this.update = function (e) { if (!n.wa) throw new DayPilot.Exception("You are trying to update a DayPilot.Navigator instance that hasn't been initialized yet."); if (n.xa) throw new DayPilot.Exception("You are trying to update a DayPilot.Navigator instance that has been disposed."); n.Rg(), n.Ug(e), n.Bd() }, this.Bd = function () { n.cssOnly || (n.cssOnly = !0), this.Ri(), this.uj(), this.Oj(), this.Sj(), this.ob(), this.Mj(), this.Nj(), this.visible ? this.show() : this.hide() }, this.Rg = function () { n.ra = {} }, this.kh = null, this.Ug = function (e) { if (e) { var t = { "events": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? n.events.list = e.list : n.events.list = e) } } }; this.kh = t; for (var i in e) if (t[i]) { var a = t[i]; a.data = e[i], a.preInit && a.preInit() } else n[i] = e[i] } }, this.jh = function () { var e = this.kh; for (var t in e) { var n = e[t]; n.postInit && n.postInit() } }, this.Ka = function (e, t, n) { var i = {}; i.action = e, i.parameters = n, i.data = t, i.header = this.Ja(); var a = "JSON" + JSON.stringify(i); this.backendUrl ? DayPilot.request(this.backendUrl, this.Ma, a, this.Na) : WebForm_DoCallback(this.uniqueID, a, this.Oa, null, this.callbackError, !0) }, this.Na = function (e) { if ("function" == typeof n.onAjaxError) { var t = {}; t.request = e, n.onAjaxError(t) } else "function" == typeof n.ajaxError && n.ajaxError(e) }, this.Ma = function (e) { n.Oa(e.responseText) }, this.Ia = function (e, t, i) { var a = {}; a.action = e, a.parameters = i, a.data = t, a.header = this.Ja(); var r = "JSON" + JSON.stringify(a); __doPostBack(n.uniqueID, r) }, this.Ja = function () { var e = {}; return e.v = this.v, e.startDate = this.startDate, e.selectionStart = this.selectionStart, e.showMonths = this.showMonths, e }, this.Uj = function (e, t) { "refresh" === e && this.Tj() }, this.Fj = function (e) { var t = e + r.weekStarts(); return t > 6 && (t -= 7), r.locale().dayNamesShort[t] }, this.Gj = function (e) { return null !== this.selectionStart && null !== this.selectionEnd && (this.selectionStart.getTime() <= e.getTime() && e.getTime() <= this.selectionEnd.getTime()) }, this.Vj = function (e) { for (var t = 0; t < n.months.length; t++) { var i = n.months[t]; if (!i) return null; if (e.x < i.left) return null; if (!(i.left + i.width < e.x)) { n.months[t].height; if (i.top <= e.y && e.y < i.top + i.height) return t } } return null }, this.Wj = function (e) { }, this.Xj = function () { if (!r.vj()) return void (n.Yj = n.cellWidth); var e = n.months[0].cells[0][0], t = e.clientWidth; n.Yj = t, n.months.forEach(function (e) { e.width = e.div.clientWidth, "Horizontal" === n.orientation && (e.left = e.div.offsetLeft), e.cells.forEach(function (e, n) { e.forEach(function (e, i) { e.width = t, e.left = n * t }) }) }) }, this.Zj = function (e) { n.Xj(); var t = DayPilot.mo3(n.nav.top, e), i = n.Vj(t); if (null === i) return null; var a = n.months[i], r = this.titleHeight + this.dayHeaderHeight; if (a.top <= t.y && t.y < a.top + r) return { "month": i, "x": 0, "y": 0, "coords": t, "header": !0 }; for (var o = 0; o < a.cells.length; o++)for (var s = 0; s < a.cells[o].length; s++) { var l = a.cells[o][s], d = l.top + a.top, c = l.left + a.left; if (c <= t.x && t.x < c + n.Yj && d <= t.y && t.y < d + n.cellHeight) return { "month": i, "x": o, "y": s, "coords": t } } return null }, this.$j = function (e) { if (n.freeHandSelectionEnabled) { var t = n.Zj(e); t && !t.header && (i.start = t), n.months[t.month].cells[t.x][t.y], e.preventDefault() } }, this._j = function (e) { if (i.start) { var t = n.Zj(e); if (i.end) i.end = t; else if (t) { var a = 3, r = DayPilot.distance(i.start.coords, t.coords); r > a && (i.end = t) } i.end && (i.clear(), i.draw()) } }, this.ak = {}; var i = this.ak; i.start = null, i.drawCell = function (e) { var t = n.months[e.month], a = n.Ij(e.x, e.y), o = t.top + a.y, s = t.left + a.x, l = "px", d = n.Cj(); if (r.vj()) { var c = "Horizontal" === n.orientation ? n.showMonths : 1; s = t.leftPct + a.x / c, l = "%", d = n.Cj(1 / c) } var u = document.createElement("div"); u.style.position = "absolute", u.style.left = s + l, u.style.top = o + "px", u.style.height = n.cellHeight + "px", u.style.width = d, u.style.backgroundColor = "#ccc", u.style.opacity = .5, u.style.cursor = "default", n.nav.preselection.appendChild(u), i.cells.push(u) }, i.clear = function () { if (i.cells) { for (var e = 0; e < i.cells.length; e++)n.nav.preselection.removeChild(i.cells[e]); i.cells = [] } }, i.draw = function () { var e = i.ordered(), t = new a(e.start), r = e.end; if (r) { if (r === i.end && r.header && r.month > 0) { r.month -= 1; var o = n.months[r.month]; r.x = 6, r.y = o.rowCount - 1 } for (i.cells = []; !t.is(r);) { t.visible() && i.drawCell(t); var s = new a(t).next(); if (!s) return; t.month = s.month, t.x = s.x, t.y = s.y } t.visible() && i.drawCell(t) } }, i.ordered = function () { var e = i.start, t = i.end, n = {}; return !t || new a(e).before(t) ? (n.start = e, n.end = t) : (n.start = t, n.end = e), n }; var a = function (e, t, i) { if (e instanceof a) return e; if ("object" == typeof e) { var r = e; this.month = r.month, this.x = r.x, this.y = r.y } else this.month = e, this.x = t, this.y = i; this.is = function (e) { return this.month === e.month && this.x === e.x && this.y === e.y }, this.next = function () { var e = this; if (e.x < 6) return { "month": e.month, "x": e.x + 1, "y": e.y }; var t = n.months[e.month]; return e.y < t.rowCount - 1 ? { "month": e.month, "x": 0, "y": e.y + 1 } : e.month < n.months.length - 1 ? { "month": e.month + 1, "x": 0, "y": 0 } : null }, this.visible = function () { var e = this.cell(); return !!e.isCurrentMonth || (!(!e.isPrevMonth || !e.showBefore) || !(!e.isNextMonth || !e.showAfter)) }, this.nextVisible = function () { for (var e = this; !e.visible();) { var t = e.next(); if (!t) return null; e = new a(t) } return e }, this.previous = function () { var e = this; if (e.x > 0) return { "month": e.month, "x": e.x - 1, "y": e.y }; n.months[e.month]; if (e.y > 0) return { "month": e.month, "x": 6, "y": e.y - 1 }; if (e.month > 0) { var t = n.months[e.month - 1]; return { "month": e.month - 1, "x": 6, "y": t.rowCount - 1 } } return null }, this.previousVisible = function () { for (var e = this; !e.visible();) { var t = e.previous(); if (!t) return null; e = new a(t) } return e }, this.cell = function () { return n.months[this.month].cells[this.x][this.y] }, this.date = function () { return this.cell().day }, this.before = function (e) { return this.date() < new a(e).date() } }; this.Jj = function (e) { var t = this.parentNode, i = this.parentNode.month, a = this.x, r = this.y, o = i.cells[a][r].day; if (i.cells[a][r].isClickable) { n.clearSelection(), n.selectionDay = o; var o = n.selectionDay; switch (n.Hj()) { case "none": n.selectionStart = o, n.selectionEnd = o; break; case "day": if (n.autoFocusOnClick) { var s = o; if (o < n.Qj() || o >= n.Rj()) return void n.select(o) } var l = i.cells[a][r]; n.Kj(t, a, r), n.selected.push(l), n.selectionStart = l.day, n.selectionEnd = l.day; break; case "week": if (n.autoFocusOnClick) { var s = i.cells[0][r].day, d = i.cells[6][r].day; if (s.firstDayOfMonth() === d.firstDayOfMonth() && (s < n.Qj() || d >= n.Rj())) return void n.select(o) } for (var c = 0; c < 7; c++)n.Kj(t, c, r), n.selected.push(i.cells[c][r]); n.selectionStart = i.cells[0][r].day, n.selectionEnd = i.cells[6][r].day; break; case "month": if (n.autoFocusOnClick) { var s = o; if (o < n.Qj() || o >= n.Rj()) return void n.select(o) } for (var s = null, d = null, r = 0; r < 6; r++)for (var a = 0; a < 7; a++) { var l = i.cells[a][r]; l && l.day.getYear() === o.getYear() && l.day.getMonth() === o.getMonth() && (n.Kj(t, a, r), n.selected.push(l), null === s && (s = l.day), d = l.day) } n.selectionStart = s, n.selectionEnd = d; break; default: throw "unknown selectMode" }n.Nj(), n.wc() } }, this.wc = function (e) { var t = n.selectionStart, i = n.selectionEnd.addDays(1), a = DayPilot.DateUtil.daysDiff(t, i), r = n.selectionDay; if (e = e || {}, n.Fb()) { var o = {}; if (o.start = t, o.end = i, o.day = r, o.days = a, o.mode = e.mode || n.selectMode, o.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof n.onTimeRangeSelect && (n.onTimeRangeSelect(o), o.preventDefault.value)) return; switch (n.timeRangeSelectedHandling) { case "Bind": var s = DayPilot.Util.evalVariable(n.bound); if (s) { var l = {}; l.start = t, l.end = i, l.days = a, l.day = r, s.commandCallBack(n.command, l) } break; case "None": break; case "PostBack": n.timeRangeSelectedPostBack(t, i, r) }"function" == typeof n.onTimeRangeSelected && n.onTimeRangeSelected(o) } else switch (n.timeRangeSelectedHandling) { case "Bind": var s = DayPilot.Util.evalVariable(n.bound); if (s) { var l = {}; l.start = t, l.end = i, l.days = a, l.day = r, s.commandCallBack(n.command, l) } break; case "JavaScript": n.onTimeRangeSelected(t, i, r); break; case "None": break; case "PostBack": n.timeRangeSelectedPostBack(t, i, r) } }, this.timeRangeSelectedPostBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.day = i, this.Ia("TimeRangeSelected", n, a) }, this.Ej = function (e) { n.bk(n.skipMonths) }, this.Dj = function (e) { n.bk(-n.skipMonths) }, this.bk = function (e) { this.startDate = this.startDate.addMonths(e), this.Ri(), this.uj(), this.Sj(), this.Nj(), this.Tj(), this.Mj() }, this.Qj = function () { return n.startDate.firstDayOfMonth() }, this.Rj = function () { return n.startDate.firstDayOfMonth().addMonths(this.showMonths) }, this.visibleStart = function () { return n.startDate.firstDayOfMonth().firstDayOfWeek(r.weekStarts()) }, this.visibleEnd = function () { return n.startDate.firstDayOfMonth().addMonths(this.showMonths - 1).firstDayOfWeek(r.weekStarts()).addDays(42) }, this.Tj = function () { var e = this.visibleStart(), t = this.visibleEnd(); if (n.Fb()) { var i = {}; if (i.start = e, i.end = t, i.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof n.onVisibleRangeChange && (n.onVisibleRangeChange(i), i.preventDefault.value)) return; switch (this.visibleRangeChangedHandling) { case "CallBack": this.visibleRangeChangedCallBack(null); break; case "PostBack": this.visibleRangeChangedPostBack(null); break; case "Disabled": }"function" == typeof n.onVisibleRangeChanged && n.onVisibleRangeChanged(i) } else switch (this.visibleRangeChangedHandling) { case "CallBack": this.visibleRangeChangedCallBack(null); break; case "PostBack": this.visibleRangeChangedPostBack(null); break; case "JavaScript": this.onVisibleRangeChanged(e, t); break; case "Disabled": } }, this.visibleRangeChangedCallBack = function (e) { var t = {}; this.Ka("Visible", e, t) }, this.visibleRangeChangedPostBack = function (e) { var t = {}; this.Ia("Visible", e, t) }, this.Oa = function (e, t) { var e = JSON.parse(e); n.items = e.Items, n.cells = e.Cells, n.cells ? n.update() : n.Mj() }, this.Sj = function () { for (var e = 0; e < this.showMonths; e++) { var t = this.ck(e); this.Si(e, t) } this.root.style.height = this.$g() + "px", this.nav.preselection = document.createElement("div"), this.nav.preselection.style.position = "absolute", this.nav.preselection.style.left = "0px", this.nav.preselection.style.right = "0px", this.nav.preselection.style.top = "0px", this.root.appendChild(this.nav.preselection) }, this.$g = function () { if ("Horizontal" === this.orientation) { for (var e = 0, t = 0; t < this.months.length; t++) { var n = this.months[t]; n.height > e && (e = n.height) } return e } for (var i = 0, t = 0; t < this.months.length; t++) { var n = this.months[t]; i += n.height } return i }, this.ck = function (e) { if (this.internal.showLinks) return this.internal.showLinks; var t = {}; return t.left = 0 === e, t.right = 0 === e, t.before = 0 === e, t.after = e === this.showMonths - 1, "Horizontal" === this.orientation && (t.right = e === this.showMonths - 1), t }, this.Qg = {}, this.Qg.scope = null, this.Qg.notify = function () { n.Qg.scope && n.Qg.scope["$apply"]() }, this.internal = {}, this.internal.initialized = function () { return n.wa }, this.Ha = {}; var r = this.Ha; r.locale = function () { return DayPilot.Locale.find(n.locale) }, r.weekStarts = function () { if ("Auto" === n.weekStarts) { var e = r.locale(); return e ? e.weekStarts : 0 } return n.weekStarts }, r.cellWidth = function () { if (n.ra.cellWidth) return n.ra.cellWidth; var e = n.Vg("_cell_dimensions").width; return e || (e = n.cellWidth), n.ra.cellWidth = e, e }, r.vj = function () { return "Auto" === n.Ha.cellWidth() }, this.clearSelection = function () { for (var e = 0; e < this.selected.length; e++) { var t = this.selected[e]; n.Lj(t.parentNode, t.x, t.y) } this.selected = [] }, this.fh = function () { return !!this.backendUrl && ("undefined" == typeof n.items || !n.items) }, this.events = {}, this.ob = function () { if (DayPilot.isArray(this.events.list)) { this.items = {}; for (var e = 0; e < this.events.list.length; e++) { var t = this.events.list[e]; if (!t.hidden) { var n = this.dk(t); for (var i in n) this.items[i] = 1 } } } }, this.Vg = function (e) { var t = document.createElement("div"); t.style.position = "absolute", t.style.top = "-2000px", t.style.left = "-2000px", t.className = this.ca(e); var i = n.root || document.body; i.appendChild(t); var a = t.offsetHeight, r = t.offsetWidth; i.removeChild(t); var o = {}; return o.height = a, o.width = r, o }, this.dk = function (e) { for (var t = new DayPilot.Date(e.start), n = new DayPilot.Date(e.end), i = {}, a = t.getDatePart(); a.getTime() <= n.getTime();)i[a.toStringSortable()] = 1, a = a.addDays(1); return i }, this.show = function () { n.visible = !0, n.root.style.display = "" }, this.hide = function () { n.visible = !1, n.root.style.display = "none" }, this.gh = function () { if (this.id && this.id.tagName) this.nav.top = this.id; else { if ("string" != typeof this.id) throw "DayPilot.Navigator() constructor requires the target element or its ID as a parameter"; if (this.nav.top = document.getElementById(this.id), !this.nav.top) throw "DayPilot.Navigator: The placeholder element not found: '" + e + "'." } this.root = this.nav.top }, this.init = function () { if (this.gh(), !this.root.dp) { n.cssOnly || (n.cssOnly = !0, DayPilot.Util.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")), this.Oj(), this.uj(), this.Sj(), this.ob(), this.Mj(), this._a(), this.ek(), this.lg(); if (this.fh() && this.Tj(), this.wa = !0, this.jh(), this.Pj) { var e = this.Pj; this.select(e.date1, e.date2, e.options), this.Pj = null } return this } }, this.ek = function () { n.nav.top.onmousedown = this.$j, n.nav.top.onmousemove = this._j }, this.lg = function () { DayPilot.re(document, "mouseup", n.og) }, this.og = function (e) { if (i.start && i.end) { var t = DayPilot.mo3(n.nav.top, e); if (t.x === i.start.coords.x && t.y === i.start.coords.y) return i.start = null, void i.clear(); i.clear(); var r = i.ordered(); r.start = new a(r.start).nextVisible(), r.end = new a(r.end).previousVisible(), n.selectionDay = new a(r.start).date(), n.selectionStart = n.selectionDay, n.selectionEnd = new a(r.end).date(), i.start = null, i.end = null, n.Ri(), n.uj(), n.Sj(), n.Mj(), n.Nj(); n.wc({ "mode": "FreeHand" }) } i.start = null, i.end = null }, this.dispose = function () { var e = n; e.root && (e.root.removeAttribute("style"), e.root.removeAttribute("class"), e.root.dp = null, e.root.innerHTML = null, e.root = null) }, this._a = function () { this.root.dispose = this.dispose }, this.Init = this.init, this.Ug(t) }, "undefined" != typeof jQuery && !function (e) { e.fn.daypilotNavigator = function (e) { var t = null, n = this.each(function () { if (!this.daypilot) { var n = new DayPilot.Navigator(this.id); this.daypilot = n; for (var i in e) n[i] = e[i]; n.Init(), t || (t = n) } }); return 1 === this.length ? t : n } }(jQuery), function () { var e = DayPilot.am(); e && e.directive("daypilotNavigator", ["$parse", function (e) { return { "restrict": "E", "template": "<div id='{{id}}'></div>", "compile": function (t, n) { return t.replaceWith(this["template"].replace("{{id}}", n["id"])), function (t, n, i) { var a = new DayPilot.Navigator(n[0]); a.Qg.scope = t, a.init(); var r = i["id"]; r && (t[r] = a); var o = i["publishAs"]; if (o) { (0, e(o).assign)(t, a) } for (var s in i) if (0 === s.indexOf("on")) { var l = DayPilot.Util.shouldApply(s); l ? !function (n) { a[n] = function (a) { var r = e(i[n]); t["$apply"](function () { r(t, { "args": a }) }) } }(s) : !function (n) { a[n] = function (a) { e(i[n])(t, { "args": a }) } }(s) } var d = t["$watch"], c = i["config"] || i["daypilotConfig"], u = i["events"] || i["daypilotEvents"]; d.call(t, c, function (e, t) { for (var n in e) a[n] = e[n]; a.update() }, !0), d.call(t, u, function (e) { a.events.list = e, a.ob(), a.Mj() }, !0) } } } }]) }(), DayPilot.Navigator.def = {}, "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded() } }(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    "undefined" != typeof DayPilot.Queue && DayPilot.Queue.def || (DayPilot.Queue = function (e, t) {
        this.v = "2023.3.5688"; var n = this; this.id = e, "function" == typeof DayPilot.Bubble ? this.bubble = new DayPilot.Bubble : this.bubble = null, this.contextMenu = null, this.eventBarVisible = !0, this.eventHeight = 35, this.eventTextWrappingEnabled = !1, this.lineSpace = 5, this.theme = null, this.emptyText = "", this.emptyHtml = null, this.eventClickHandling = "Enabled", this.eventHoverHandling = "Bubble", this.eventRightClickHanding = "ContextMenu", this.eventSelectHandling = "Update", this.onBeforeEventRender = null, this.onEventClick = null, this.onEventClicked = null, this.onEventRightClick = null, this.onEventRightClicked = null, this.onEventMove = null, this.onEventMoving = null, this.onEventSelect = null, this.onEventSelected = null,
            this.wa = !1, this.fk = "queue_default", this.gk = [], this.hk = !1, this.ik = !1, this.nav = {}, this.events = {}, this.events.list = [], this.elements = {}, this.elements.events = []; var i = function () { return document.createElement("div") }; this.gh = function () { if (this.id && this.id.tagName) this.nav.top = this.id; else { if ("string" != typeof this.id) throw new DayPilot.Exception("DayPilot.Queue() constructor requires the target element or its ID as a parameter"); if (this.nav.top = document.getElementById(this.id), !this.nav.top) throw new DayPilot.Exception("DayPilot.Queue: The placeholder element not found: '" + e + "'.") } }, this.ca = function (e) { var t = this.theme || this.fk; return t ? t + e : "" }, this.Bd = function () { n.nav.container.innerHTML = "", n.jk = null, n.Ki(), n.ob(), n.Ab(), n.kk() }, this.Ki = function () { var e = n.nav.top; e.className = n.lk, DayPilot.Util.addClass(e, n.ca("_main")) }, this.ob = function () { var e = {}, t = n.events.list || []; n.gk = []; for (var i = 0; i < t.length; i++) { var a = t[i]; if (!("string" == typeof a.id || "number" == typeof a.id)) throw new DayPilot.Exception("All events must have an id property (string or number)"); var r = typeof a.id + "_" + a.id; if (e[r]) throw new DayPilot.Exception("Duplicate IDs not allowed."); e[r] = !0; var o = DayPilot.Util.copyProps(a); n.rg(o); var s = {}; s.data = a, s.cache = o, n.gk.push(s) } }, this.mk = {}, this.mk.Bc = [], this.mk.gk = []; var a = n.mk; this.mk.L = function (e) { var t = e.event; a.nk(), a.ok(e), a.Bc[0] = t }, this.mk.ok = function (e) { a.gk[0] = e; var t = n.ca("_selected"); DayPilot.Util.addClass(e, t) }, this.mk.pk = function (e) { a.gk = []; var t = n.ca("_selected"); DayPilot.Util.removeClass(e, t) }, this.mk.od = function (e) { return n.mk.gk.find(function (t) { return t.event.data.id === e }) }, this.mk.nk = function () { var e = a.gk[0]; e && a.pk(e), a.Bc = [] }, this.rg = function (e) { var t = {}; t.data = e, "function" == typeof n.onBeforeEventRender && n.onBeforeEventRender(t) }, this.kk = function () { if (0 === n.events.list.length) { var e = n.nav.container, t = i(); n.emptyHtml ? t.innerHTML = n.emptyHtml : t.innerText = n.emptyText, e.appendChild(t) } }, this.Ab = function () { var e = n.gk; n.elements.events = [], e.forEach(function (e) { n.He(e) }) }, this.He = function (e) { var t = e.cache, a = e.data, r = n.nav.container, o = i(); o.className = n.ca("_event"), o.style.height = n.eventHeight + "px", o.style.boxSizing = "border-box", o.style.overflow = "hidden", o.style.marginTop = n.lineSpace + "px", o.style.position = "relative", n.eventTextWrappingEnabled || (o.style.whiteSpace = "nowrap"), o.addEventListener("click", n.dj), o.addEventListener("contextmenu", n.qk), n.mk.od(a.id) && n.mk.ok(o); var s = i(); if (s.className = n.ca("_event_inner"), "string" == typeof t.html ? s.innerHTML = t.html : s.innerText = t.text, t.cssClass && DayPilot.Util.addClass(o, t.cssClass), t.backColor && (s.style.background = t.backColor), t.fontColor && (s.style.color = t.fontColor), "darker" === t.borderColor && t.backColor ? s.style.borderColor = DayPilot.ColorUtil.darker(t.backColor, 2) : s.style.borderColor = t.borderColor, t.backImage && (s.style.backgroundImage = "url(" + t.backImage + ")", t.backRepeat && (s.style.backgroundRepeat = t.backRepeat)), o.appendChild(s), o.onmousemove = this.Ie, o.onmouseleave = this.rk, n.eventBarVisible && !t.barHidden) { var l = i(); l.className = n.ca("_event_bar"), l.style.position = "absolute", t.barColor && (l.style.backgroundColor = t.barColor), o.appendChild(l) } var d = { "eventDiv": o, "areas": t.areas, "allowed": function () { return !(n.hk || n.ik) } }, c = new DayPilot.Event(a, n); c.cache = t, o.event = c, DayPilot.Areas.attach(o, c, d), n.sk(o, a), r.appendChild(o), n.elements.events.push(o) }, this.Ie = function (e) { "undefined" != typeof DayPilot.Bubble && n.bubble && "Bubble" === n.eventHoverHandling && n.bubble.showEvent(this.event) }, this.rk = function (e) { n.bubble && n.bubble.hideOnMouseOut() }, this.qk = function (e) { if (e.preventDefault(), "Disabled" !== n.eventRightClickHandling) { var t = this, i = t.event, a = {}; if (a.e = t.event, a.preventDefault = function () { a.preventDefault.value = !0 }, "function" == typeof n.onEventRightClick && n.onEventRightClick(a), !a.preventDefault.value) { switch (n.eventRightClickHanding) { case "Enabled": break; case "ContextMenu": var r = i.client.contextMenu(); r ? r.show(i) : n.contextMenu && n.contextMenu.show(i) }"function" == typeof n.onEventRightClicked && n.onEventRightClicked(a) } } }, this.dj = function (e) { if (e.preventDefault(), e.stopPropagation(), "undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), "Disabled" !== n.eventClickHandling) { var t = this, i = t.event, a = {}; if (a.e = i, a.preventDefault = function () { a.preventDefault.value = !0 }, "function" == typeof n.onEventClick && n.onEventClick(a), !a.preventDefault.value) { switch (n.eventClickHandling) { case "Select": n.Ac(t, i, e); break; case "Enabled": }"function" == typeof n.onEventClicked && n.onEventClicked(a) } } }, this.Ac = function (e, t, i) { var a = {}; if (a.e = t, a.preventDefault = function () { this.preventDefault.value = !0 }, "function" != typeof n.onEventSelect || (n.onEventSelect(a), !a.preventDefault.value)) { switch (n.eventSelectHandling) { case "Update": n.mk.L(e) }"function" == typeof n.onEventSelected && n.onEventSelected(a) } }, this.tk = function (e, t) { var i = n.uk, a = {}; a.e = new DayPilot.Event(e, n), a.position = i, a.source = t, a.external = !0, a.preventDefault = function () { a.preventDefault.value = !0 }, n.vk(a), a.preventDefault.value || (n.events.list.splice(i, 0, e), n.Bd(), n.wk(a)) }, this.xk = function (e) { var t = {}; if (t.e = new DayPilot.Event(e, n), t.position = n.uk, t.source = n, t.external = !1, t.preventDefault = function () { t.preventDefault.value = !0 }, n.vk(t), !t.preventDefault.value) { var i = n.events.list.indexOf(e); n.yk(n.events.list, i, n.uk), n.Bd(), n.wk(t) } }, this.vk = function (e) { "function" == typeof n.onEventMove && n.onEventMove(e) }, this.wk = function (e) { "function" == typeof n.onEventMoved && n.onEventMoved(e) }, this.yk = function (e, t, n) { var i = e[t]; e.splice(t, 1), e.splice(n, 0, i) }, this.zk = function () { DayPilot.Scheduler.registerDropTarget({ element: n.nav.top, onDrop: function (e) { n.ik = !1; var t = e.e, i = t.data, a = e.e.calendar; n.tk(i, a) }, onDragOver: function (e) { n.ik = !0 }, onDragLeave: function (e) { n.ik = !1 } }) }, this.jk = null, this.Ak = function (e) { n.uk = e; var t = n.jk || i(), a = n.nav.container, r = n.eventHeight + n.lineSpace, o = e * r; o -= n.lineSpace / 2 + 1, t.style.top = o + "px", n.jk || (t.className = n.ca("_shadow"), t.style.position = "absolute", t.style.left = "0px", t.style.right = "0px", t.style.height = "2px", n.jk = t, a.appendChild(t)) }, this.Bk = function () { n.uk = null, DayPilot.de(n.jk), n.jk = null }, this.Rh = null, this.uk = null, this.Ck = function (e) { var t = n.nav.container, i = DayPilot.mo3(t, e); if (n.Rh = i, n.hk || n.ik) { var a = n.eventHeight + n.lineSpace, r = Math.floor((i.y + n.eventHeight / 2) / a); r < 0 && (r = 0), r > n.gk.length && (r = n.gk.length), n.Ak(r) } }, this.Dk = function (e) { n.Bk() }, this.Ek = function (e) { if (n.hk) { var t = n.Fk; n.xk(t), n.Fk = null } }, this.Gk = function () { var e = i(); n.nav.container = e; var t = n.nav.top; n.lk = t.className || "", e.style.position = "relative", t.onmousemove = n.Ck, t.onmouseleave = n.Dk, t.onmouseup = n.Ek, t.appendChild(e) }, this.sk = function (e, t) { var i = e, a = { element: i, data: t, keepElement: !0, externalCssClass: "", externalHtml: "", onDragStart: function (e) { n.hk = !0, n.Fk = t, i.style.opacity = "0.5" }, onDrop: function (e) { n.hk = !1, i.style.opacity = ""; !!n.Fk } }; DayPilot.Scheduler.makeDraggable(a) }, this.Ug = function (e) { if (e) { var t = { "events": { "preInit": function () { var e = this.data; e && (n.events.list = e) } } }; for (var i in e) if (t[i]) { var a = t[i]; a.data = e[i], a.preInit && a.preInit() } else n[i] = e[i] } }, this.Y = {}, this.Y.reactDOM = null, this.Y.react = null, this.Y.X = function (e, t) { var i = n.Y.reactDOM; if ("function" == typeof i.createRoot) { var a = t.ka; a || (a = i.createRoot(t), t.ka = a), a.render(e) } else i.render(e, t) }, this.Y.ja = function (e) { var t = n.Y.reactDOM; if ("function" == typeof t.createRoot) { var i = e.ka; setTimeout(function () { i.unmount() }, 0) } else t.unmountComponentAtNode(e) }, this.Pg = function (e) { if (!e) return null; for (var t = 0; t < n.elements.events.length; t++) { var i = n.elements.events[t]; if (DayPilot.Util.isSameEvent(i.event, e)) return i } return null }, this.multiselect = {}, this.multiselect.add = function (e) { "number" != typeof e && "string" != typeof e || (e = n.events.find(e)), e instanceof DayPilot.Event && (e = e.data); var t = n.Pg(e); t && n.mk.L(t) }, this.multiselect.clear = function () { n.mk.nk() }, this.multiselect.get = function () { var e = [], t = a.Bc[0]; if (t) { var n = t.event; e.push(n) } return e }, this.events.add = function (e) { e instanceof DayPilot.Event && (e = e.data), n.events.list.push(e), n.Bd() }, this.events.remove = function (e) { if (e) { "number" != typeof e && "string" != typeof e || (e = n.events.find(e)), e instanceof DayPilot.Event && (e = e.data); var t = n.events.list.indexOf(e); t !== -1 && (n.mk.od(e.id) && n.multiselect.clear(), n.events.list.splice(t, 1), n.Bd()) } }, this.events.update = function (e) { e instanceof DayPilot.Event && (e = e.data); var t = n.events.find(e.id); if (t) { var i = n.events.list.indexOf(t.data); i !== -1 && (n.events.list.splice(i, 1, e), n.Bd()) } }, this.events.find = function (e) { var t = n.events.list.find(function (t) { return t.id === e }); return t ? new DayPilot.Event(t, n) : null }, this.init = function () { if (this.wa) throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties."); if (this.gh(), this.nav.top.dp) { if (this.nav.top.dp === n) return n; throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.") } return this.zk(), this.Gk(), this.Bd(), this }, this.update = function (e) { if (n.xa) throw new DayPilot.Exception("You are trying to update a DayPilot.Queue object that has been disposed already. Calling .dispose() destroys the object and makes it unusable."); n.Ug(e), n.Bd() }, this.dispose = function () { n.nav.top.innerHTML = "", n.xa = !0 }, this.internal = {}, this.internal.loadOptions = function (e) { n.Ug(e) }, this.internal.enableReact = function (e, t) { n.Y.react = e, n.Y.reactDOM = t }, this.internal.reactRefs = function () { return DayPilot.Util.copyProps(n.Y, {}, ["react", "reactDOM"]) }, this.internal.findEventDiv = this.Pg, this.Ug(t)
    }, DayPilot.Queue.def = {})
}(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; if ("undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) {
    function t(e) { for (var t = e.touches[0].clientX, n = e.touches[0].clientY, i = document.elementFromPoint(t, n); i && i.parentNode;)if (i = i.parentNode, i.daypilotMainD) return i.calendar; return !1 } function n(e) { var t = e.touches[0].pageX, n = e.touches[0].pageY, i = {}; return i.x = t, i.y = n, i } if ("undefined" == typeof DayPilot.Scheduler || !DayPilot.Scheduler.def) {
        var i = {}, a = function () { }, o = !1, s = function () { return document.body }, l = function () { return document.createElement("div") }, d = DayPilot.Util.overlaps, c = DayPilot.Util.removeClass, u = DayPilot.Util.addClass, h = DayPilot.Util.div, f = DayPilot.Util.atLeast, v = DayPilot.Util.isNullOrUndefined, p = DayPilot.Util.copyProps, m = DayPilot.Util.isReactComponent, g = DayPilot.Util.mouseButton, b = DayPilot.Global, y = DayPilot.list, w = DayPilot.contains, x = DayPilot.de, k = DayPilot.indexOf; DayPilot.Scheduler = function (t, o) {
            function D(e) { e.div.style.right = e.right + "px", e.div.style.height = e.height + "px", e.div.style.top = e.top + "px", E.Es(e.div, e.enabled()), e.divHeader.style.height = e.heightRes + "px", e.divHeader.style.top = e.top + "px", E.Es(e.divHeader, e.enabled()), e.divSpace && (e.divSpace.style.top = e.height + "px") } function S(e, t) { return 1 - e / t } this.v = "2023.3.5688"; var E = this; this.id = t, this.isScheduler = !0, this.allowDefaultContextMenu = !1, this.allowEventOverlap = !0, this.allowMultiMove = !1, this.allowMultiRange = !1, this.allowMultiResize = !1, this.allowMultiSelect = !0, this.api = 2, this.autoRefreshCommand = "refresh", this.autoRefreshEnabled = !1, this.autoRefreshInterval = 60, this.autoRefreshMaxCount = 20, this.autoScroll = "Drag", this.blockOnCallBack = !1, this.navigatorBackSync = null, this.backendUrl = null, this.beforeCellRenderCaching = !0, this.businessBeginsHour = 9, this.businessEndsHour = 18, this.businessWeekends = !1, this.cellDuration = 60, this.cellGroupBy = "Day", this.cellSweeping = !0, this.cellSweepingCacheSize = 1e3, this.cellWidth = 40, this.cellWidthMin = 1, this.cellWidthSpec = "Fixed", this.cellsMarkBusiness = !0, this.cornerText = "", this.cornerHtml = null, this.crosshairTimeHeaderLevel = "Last", this.crosshairType = "Header", this.cssClassPrefix = "scheduler_default", this.days = 1, this.doubleClickTimeout = 300, this.dragOutAllowed = !1, this.drawBlankCells = !0, this.durationBarHeight = null, this.durationBarVisible = !0, this.durationBarMode = "Duration", this.dynamicEventRendering = "Progressive", this.dynamicEventRenderingMargin = 50, this.dynamicEventRenderingMarginX = null, this.dynamicEventRenderingMarginY = null, this.dynamicEventRenderingCacheSweeping = !1, this.dynamicEventRenderingCacheSize = 200, this.dynamicLoading = !1, this.eventEditMinWidth = 100, this.eventEditTabNext = !1, this.eventEndSpec = "DateTime", this.eventHeight = 35, this.eventHtmlLeftMargin = 10, this.eventHtmlRightMargin = 10, this.eventMarginLeft = 0, this.eventMarginRight = 0, this.eventMarginBottom = 0, this.eventMinWidth = 1, this.eventMoveMargin = 5, this.eventMoveToPosition = !1, this.eventMoveSkipNonBusiness = !1, this.eventResizeMargin = 5, this.eventStackingLineHeight = 100, this.eventTapAndHoldHandling = "Move", this.eventTextWrappingEnabled = !1, this.eventUpdateInplaceOptimization = !1, this.eventsLoadMethod = "GET", this.eventVersionHeight = 25, this.eventVersionMargin = 2, this.eventVersionPosition = "Above", this.eventVersionsEnabled = !1, this.eventVersionsReserveSpace = !1, this.floatingEvents = !DayPilot.browser.ios, this.floatingTimeHeaders = !0, this.groupConcurrentEvents = !1, this.groupConcurrentEventsLimit = 1, this.headerHeight = 30, this.heightSpec = "Max", this.height = 600, this.hideBorderFor100PctHeight = !1, this.hideUntilInit = !0, this.infiniteScrollingEnabled = !1, this.infiniteScrollingMargin = 50, this.infiniteScrollingStepDays = 30, this.initEventEnabled = !0, this.jointEventsResize = !0, this.jointEventsMove = !0, this.keyboardEnabled = !1, this.keyboardTarget = "document", this.layout = "Auto", this.linkCreateHandling = "Disabled", this.linkBottomMargin = 17, this.linkPointSize = 10, this.linksLoadMethod = "GET", this.locale = "en-us", this.loadingLabelText = "Loading...", this.loadingLabelHtml = null, this.loadingLabelVisible = !0, this.overrideWheelScrolling = !1, this.messageBarPosition = "Top", this.messageHideAfter = 5e3, this.messageHideOnMouseOut = !0, this.multiMoveVerticalMode = "Disabled", this.moveBy = "Full", this.notifyCommit = "Immediate", this.progressiveRowRendering = !0, this.progressiveRowRenderingPreload = 25, this.rectangleSelectMode = "Free", this.rectangleSelectHandling = "Disabled", this.rowCreateHeight = null, this.rowCreateHtml = null, this.rowCreateText = "New row...", this.rowDragHandleWidth = 10, this.rowEmptyHeight = null, this.rowFilterParentsAlwaysVisible = !0, this.rowHeaderColumnDefaultWidth = 80, this.rowHeaderHideIconEnabled = !1, this.rowHeaderScrolling = !1, this.rowHeaderSplitterWidth = 3, this.rowHeaderWidthAutoFit = !0, this.rowHeaderWidthAutoFitShrink = !1, this.rowHeaderWidthMarginRight = 0, this.rowHeaderWidthMin = 20, this.rowHeaderColumnsResizable = !0, this.rowHeaderColumnsMode = "Tabular", this.rowHeaderColumns = null, this.rowHeaderColumnsMergeParents = !0, this.rowHeaderWidth = 80, this.rowMarginBottom = 0, this.rowMarginTop = 0, this.rowMinHeight = 0, this.rowsLoadMethod = "GET", this.rowSortingMode = "LeavesOnly", this.scale = "CellDuration", this.scaleManualLimitBeyond = !0, this.scrollDelayDynamic = 500, this.scrollDelayEvents = 200, this.scrollDelayCells = DayPilot.browser.ios ? 100 : 0, this.scrollDelayFloats = 0, this.scrollDelayRows = 0, this.scrollStep = null, this.scrollX = 0, this.scrollY = 0, this.selectedRows = [], this.separators = [], this.showCurrentTimeHeader = !1, this.showNonBusiness = !0, this.showNonBusinessForceHours = !1, this.showToolTip = !0, this.snapToGrid = !0, this.snapToGridTimeRangeSelecting = !0, this.snapToGridEventMoving = !0, this.snapToGridEventResizing = !0, this.startDate = DayPilot.Date.today(), this.syncResourceTree = !1, this.tapAndHoldTimeout = 300, this.timeHeaders = [{ "groupBy": "Default" }, { "groupBy": "Cell" }], this.timeHeaderPosition = "Top", this.timeHeaderTextWrappingEnabled = !1, this.treeAnimation = !0, this.treeAutoExpand = !0, this.treeEnabled = !1, this.treeIndent = 20, this.treeImageMarginLeft = 0, this.treeImageMarginTop = 3, this.treeImageMarginRight = 5, this.treeImageWidth = 10, this.treeImageHeight = 10, this.treePreventParentUsage = !1, this.timeFormat = "Auto", this.timeline = null, this.useEventBoxes = "Always", this.viewType = "Resources", this.visible = !0, this.watchWidthChanges = !0, this.weekStarts = "Auto", this.width = null, this.xssProtection = "Enabled", this.zoomLevels = [], this.zoomPosition = "left", this.eventClickHandling = "Enabled", this.eventDeleteHandling = "Disabled", this.eventHoverHandling = "Bubble", this.eventDoubleClickHandling = "Disabled", this.eventEditHandling = "Update", this.eventMoveHandling = "Update", this.eventResizeHandling = "Update", this.eventRightClickHandling = "ContextMenu", this.eventSelectHandling = "Update", this.resourceCollapseHandling = "Enabled", this.resourceExpandHandling = "Enabled", this.rowClickHandling = "Enabled", this.rowDoubleClickHandling = "Disabled", this.rowRightClickHandling = "ContextMenu", this.rowCreateHandling = "Disabled", this.rowEditHandling = "Update", this.rowHeaderColumnResizedHandling = "Update", this.rowSelectHandling = "Update", this.rowMoveHandling = "Disabled", this.rowMoveSameLevelOnly = !1; this.timeHeaderClickHandling = "Enabled"; this.timeHeaderRightClickHandling = "Enabled", this.timeRangeClickHandling = "Enabled", this.timeRangeDoubleClickHandling = "Disabled", this.timeRangeSelectedHandling = "Enabled", this.timeRangeRightClickHandling = "ContextMenu", this.timeRangeSelectingStartEndEnabled = !1, this.timeRangeSelectingStartEndFormat = "MMMM d, yyyy", this.eventMovingStartEndEnabled = !1, this.eventMovingStartEndFormat = "MMMM d, yyyy", this.eventResizingStartEndEnabled = !1, this.eventResizingStartEndFormat = "MMMM d, yyyy", "function" == typeof DayPilot.Bubble ? this.bubble = new DayPilot.Bubble : this.bubble = null, this.cellBubble = null, this.resourceBubble = null, this.linkBubble = null, this.groupBubble = null, this.contextMenu = null, this.contextMenuResource = null, this.contextMenuSelection = null, this.contextMenuLink = null, DayPilot.browser.ie && (this.scrollDelayCells = 100, this.scrollDelayFloats = 100), 1 === E.api && (this.onEventMove = function () { }, this.onEventResize = function () { }, this.onResourceExpand = function () { }, this.onResourceCollapse = function () { }), this.onEventClick = null, this.onEventClicked = null, this.onEventEdit = null, this.onEventEdited = null, this.onEventEditKeyDown = null, this.onEventMove = null, this.onEventMoved = null, this.onEventMoving = null, this.onEventResize = null, this.onEventResized = null, this.onEventResizing = null, this.onEventRightClick = null, this.onEventRightClicked = null, this.onEventMouseEnter = null, this.onEventMouseLeave = null, this.onEventMouseOver = null, this.onEventMouseOut = null, this.onIncludeTimeCell = null, this.onKeyboardFocusChange = null, this.onKeyboardFocusChanged = null, this.onLinkClick = null, this.onLinkClicked = null, this.onLinkCreate = null, this.onLinkCreated = null, this.onRowClick = null, this.onRowClicked = null, this.onRowDoubleClick = null, this.onRowDoubleClicked = null, this.onRowMouseOver = null, this.onRowMouseOut = null, this.onRowRightClick = null, this.onRowRightClicked = null, this.onTimeHeaderClick = null, this.onTimeHeaderClicked = null, this.onTimeHeaderRightClick = null, this.onTimeHeaderRightClicked = null, this.onTimeRangeClick = null, this.onTimeRangeClicked = null, this.onTimeRangeDoubleClick = null, this.onTimeRangeDoubleClicked = null, this.onTimeRangeSelect = null, this.onTimeRangeSelected = null, this.onTimeRangeSelecting = null, this.onTimeRangeRightClick = null, this.onTimeRangeRightClicked = null, this.onRowHeaderColumnResized = null, this.onRowHeaderResized = null, this.onCellMouseEnter = null, this.onCellMouseLeave = null, this.onCellMouseOver = null, this.onCellMouseOut = null, this.onGridMouseDown = null, this.onBeforeCellRender = null, this.onBeforeCellDomAdd = null, this.onBeforeCellDomRemove = null, this.onBeforeCornerRender = null, this.onBeforeCornerDomAdd = null, this.onBeforeCornerDomRemove = null, this.onBeforeEventRender = null, this.onBeforeEventDomAdd = null, this.onBeforeEventDomRemove = null, this.onBeforeGridLineRender = null, this.onBeforeTimeHeaderRender = null, this.onBeforeTimeHeaderDomAdd = null, this.onBeforeTimeHeaderDomRemove = null, this.onBeforeResHeaderRender = null, this.onBeforeRowHeaderRender = null, this.onBeforeRowHeaderColumnRender = null, this.onBeforeRowHeaderDomAdd = null, this.onBeforeRowHeaderDomRemove = null, this.onBeforeCellExport = null, this.onBeforeCornerExport = null, this.onBeforeEventExport = null, this.onBeforeTimeHeaderExport = null, this.onBeforeRowHeaderExport = null, this.onAfterEventRender = null, this.onAfterCellRender = null, this.onAfterEventEditRender = null, this.onEventFilter = null, this.onRowFilter = null, this.onRectangleSelecting = null, this.onRectangleSelect = null, this.onRectangleSelected = null, this.onDimensionsChanged = null, this.onAfterUpdate = null, this.va = 0, this.Hk = !0, this.Ik = !1, this.Jk = !1, this.Kk = !1, this.Lk = -1, this.Mk = -1, this.xa = !1, this.Nk = -1, this.Ok = !1, this.Pk = !0, this.rowlist = y(), this.itline = y(), this.events = {}, this.cells = {}, this.elements = {}, this.elements.events = [], this.elements.bars = [], this.elements.text = [], this.elements.cells = [], this.elements.linesVertical = [], this.elements.separators = [], this.elements.range = [], this.elements.breaks = [], this.elements.links = [], this.elements.linkpoints = [], this.elements.rectangle = [], this.elements.hover = [], this.elements.timeHeader = [], this.ra = {}, this.ra.cells = [], this.ra.Qk = {}, this.ra.Rk = {}, this.ra.timeHeaderGroups = [], this.ra.timeHeader = {}, this.ra.pixels = [], this.ra.breaks = [], this.ra.events = [], this.ra.Sk = [], this.clientState = {}, this.members = {}, this.members.obsolete = ["Init", "cleanSelection", "cssClassPrefix", "getHScrollPosition", "setHScrollPosition", "getVScrollPosition", "setVScrollPosition", "showBaseTimeHeader"], this.members.ignoreFilter = function (e) { return 0 === e.indexOf("div") }, this.members.ignore = ["internal", "nav", "debug", "temp", "elements", "members", "cellProperties", "itline", "rowlist", "timeHeader", "timeouts", "rowHeaderCols"], this.members.noCssOnly = [], this.ya = "javasc", this.nav = {}, this.Oa = function (e, t) { var e = JSON.parse(e); if (E.onScrollCalled = !1, e.VsUpdate) { var n = document.createElement("input"); n.type = "hidden", n.name = E.id + "_vsupdate", n.id = n.name, n.value = e.VsUpdate, E.Pi.innerHTML = "", E.Pi.appendChild(n) } if (e.CallBackRedirect) return void (document.location.href = e.CallBackRedirect); if (e.BubbleGuid) { var i = e.BubbleGuid, a = this.bubbles[i]; return delete this.bubbles[i], E.ib(), "undefined" != typeof e.Result.BubbleHTML && a && a.updateView(e.Result.BubbleHTML, a), void E.Tk() } if ("function" == typeof E.onCallBackResult) { var r = {}; if (r.result = e, r.preventDefault = function () { r.preventDefault.value = !0 }, E.onCallBackResult(r), r.preventDefault.value) return E.qc(), E.ib(), E.Eb(), e.Message && E.message && E.message(e.Message), E.jb(e.CallBackData, !0), E.Tk(), void E.Ea() } return "undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), "undefined" != typeof e.ClientState && (null === e.ClientState ? E.clientState = {} : E.clientState = e.ClientState), "None" === e.UpdateType ? (E.ib(), E.Tk(), e.Message && E.message(e.Message), void E.jb(e.CallBackData, !0)) : ("undefined" != typeof e.TagFields && (E.tagFields = e.TagFields), "undefined" != typeof e.SortDirections && (E.sortDirections = e.SortDirections), E.ra.drawArea = null, "Full" === e.UpdateType && (E.resources = e.Resources, E.colors = e.Colors, E.palette = e.Palette, E.dirtyColors = e.DirtyColors, E.cellProperties = e.CellProperties, E.cellConfig = e.CellConfig, E.separators = e.Separators, E.timeline = e.Timeline, E.timeHeader = e.TimeHeader, E.timeHeaders = e.TimeHeaders, "undefined" != typeof e.Links && (E.links.list = e.Links), "undefined" != typeof e.RowHeaderColumns && (E.rowHeaderColumns = e.RowHeaderColumns), E.startDate = e.StartDate ? new DayPilot.Date(e.StartDate) : E.startDate, E.days = e.Days ? e.Days : E.days, E.cellDuration = e.CellDuration ? e.CellDuration : E.cellDuration, E.cellGroupBy = e.CellGroupBy ? e.CellGroupBy : E.cellGroupBy, E.cellWidth = e.CellWidth ? e.CellWidth : E.cellWidth, "undefined" != typeof e.CellWidthSpec && (E.cellWidthSpec = e.CellWidthSpec), "undefined" != typeof e.Scale && (E.scale = e.Scale), E.viewType = e.ViewType ? e.ViewType : E.viewType, "undefined" != typeof e.ShowNonBusiness && (E.showNonBusiness = e.ShowNonBusiness), E.businessBeginsHour = e.BusinessBeginsHour ? e.BusinessBeginsHour : E.businessBeginsHour, E.businessEndsHour = e.BusinessEndsHour ? e.BusinessEndsHour : E.businessEndsHour, "undefined" != typeof e.DynamicLoading && (E.dynamicLoading = e.DynamicLoading), "undefined" != typeof e.TreeEnabled && (E.treeEnabled = e.TreeEnabled), E.locale = e.Locale ? e.Locale : E.locale, "undefined" != typeof e.TimeZone && (E.timeZone = e.TimeZone), E.timeFormat = e.TimeFormat ? e.TimeFormat : E.timeFormat, E.rowHeaderCols = e.RowHeaderCols ? e.RowHeaderCols : E.rowHeaderCols, "undefined" != typeof e.DurationBarMode && (E.durationBarMode = e.DurationBarMode), "undefined" != typeof e.CornerHTML && (E.cornerHtml = e.CornerHTML), E.hashes = e.Hashes, E.Uk(), E.Vk(), E.Wk(), E.nb(), E.Xk()), "Scroll" !== e.Action && E.ob(e.Events), "Full" === e.UpdateType && (E.Yk(), E.Zk(), E.$k(), E._k()), E.al(), E.D(), E.Cb(), E.ra.drawArea = null, "Scroll" !== e.Action ? (E.bl(), E.pb(), "Auto" !== E.heightSpec && "Max" !== E.heightSpec || E.wb(), E.cl(), E.Ta(), E.dl(), E.multiselect.clear(!0), E.multiselect.fl(e.SelectedEvents), E.gl(), E.hl(), E.Ab()) : (E.multiselect.clear(!0), E.multiselect.fl(e.SelectedEvents), E.il(e.Events)), "HoldForever" !== E.timeRangeSelectedHandling && E.jl(), "Full" === e.UpdateType && (E.setScroll(e.ScrollX, e.ScrollY), E.Nj()), E.kl(), E.qc(), e.SelectedRows && E.ll(e.SelectedRows), E.ib(), "Full" === e.UpdateType && navigator.appVersion.indexOf("MSIE 7.") !== -1 && window.setTimeout(function () { E.Yk(), E.Zk(), E.wb() }, 0), E.Eb(), e.Message && E.message && E.message(e.Message), E.jb(e.CallBackData, !0), E.Tk(), E.Ea(), void ("Full" !== e.UpdateType || "Scroll" === e.Action || E.onScrollCalled || setTimeout(function () { E.ml() }, 0))) }, this.qc = function () { if (E.nl && E.nl.ol) { var e = E.nl.ol; e.parentNode.removeChild(e), E.nl.ol = null } }, this.jb = function (e, t) { var n = function (e, t) { return function () { if (E.Fb()) { if ("function" == typeof E.onAfterRender) { var n = {}; n.isCallBack = t, n.isScroll = !1, n.data = e, E.onAfterRender(n) } } else E.afterRender && E.afterRender(e, t) } }; window.setTimeout(n(e, t), 0) }, this.scrollTo = function (e, t, n) { if (E.infiniteScrollingEnabled) { if (E.wa) { var i = E.getPixels(E.visibleEnd()).left, a = i - E.infiniteScrollingMargin - E.nav.scroll.clientWidth, r = E.getDate(a, !0, !0); if (!d(E.visibleStart(), r, e, e)) return void E.infinite.scrollTo(e) } return void E.ql(e, t, n) } E.rl.enabled ? (E.rl.scrollToRequested = e, setTimeout(function () { var e = E.rl.scrollToRequested; e && (E.sl = null, E.ql(e, t, n)) }, 0)) : E.ql(e, t, n) }, this.ql = function (e, t, n) { if (e) { if (!E.wa) return void (E.sl = { "date": e, "animated": t, "position": n }); if ("Days" === E.viewType) { var i = new DayPilot.Date(e), a = E.ul(i); if (!a) return; if (E.Y.react) { var r = a.top - E.vl.top.height; E.nav.scroll.scrollTop = r } else setTimeout(function () { var e = a.top - E.vl.top.height; E.nav.scroll.scrollTop = e }, 100); var o = i.getTimePart(); e = E.visibleStart().getDatePart().addTime(o) } var s; if (e instanceof DayPilot.Date) s = this.getPixels(e).left; else if ("string" == typeof e) s = this.getPixels(new DayPilot.Date(e)).left; else { if ("number" != typeof e) throw new DayPilot.Exception("Invalid scrollTo() parameter. Accepted parameters: string (ISO date), number (pixels), DayPilot.Date object"); s = e } var l = E.wl.clientWidth, d = E.nav.scroll.clientWidth; switch (n = n || "left", n.toLowerCase()) { case "left": break; case "middle": s -= d / 2; break; case "right": s -= d }if (s < 0 && (s = 0), s > l - d && (s = l - d), !t) return void E.xl(s); var c = Math.abs(E.nav.scroll.scrollLeft - s), u = c / l, h = 50; if ("number" == typeof t) h = t; else if ("string" == typeof t) switch (t) { case "fast": h = 30; break; case "normal": h = 50; break; case "slow": h = 100; break; case "linear": h = Math.floor(100 * u) }u > .6 && (h = Math.min(h, 80)), E.yl(s, h) } }, this.yl = function (e, t) { function n(e) { var t = e.next(); return "undefined" == typeof t ? void (e.finished && e.finished()) : (E.setScrollX(t), window.clearTimeout(E.refreshTimeout), void setTimeout(function () { n(e) }, e.delay)) } var i = {}; i.steps = [], i.index = 0, i.delay = 10, i.next = function () { var e = i.steps[i.index]; return i.index += 1, e }, i.finished = function () { E.ml() }; for (var a = E.getScrollX(), t = t || 100, r = e - a, o = 0; o < t; o++) { var s = o / t, l = 2 * (s - .5) / (Math.pow(2 * (s - .5), 2) + 1) + .5; i.steps.push(a + r * l) } i.steps.push(e), n(i) }, this.scrollToResource = function (e) { DayPilot.complete(function () { var t; if ("string" == typeof e || "number" == typeof e) t = E.zl(e); else { if (!(e instanceof DayPilot.Row)) throw new DayPilot.Exception("Invalid scrollToResource() argument: id or DayPilot.Row expected"); t = E.zl(e.id) } t && setTimeout(function () { var e = t.top; E.nav.scroll.scrollTop = e }, 100) }) }, this.Al = function () { if (this.floatingTimeHeaders && this.timeHeader) { var e = E.hd(); if (e) { E.Bl(); for (var t = e.pixels.left + A.Cl, n = e.pixels.right + A.Cl + e.sw, i = [], a = 0; a < this.timeHeader.length; a++)for (var r = 0; r < this.timeHeader[a].length; r++) { var o = this.timeHeader[a][r], s = o.left, l = o.left + o.width, d = null; if (s < t && t < l && (d = {}, d.x = r, d.y = a, d.marginLeft = t - s, d.marginRight = 0, d.div = E.ra.timeHeader[r + "_" + a], i.push(d)), s < n && n < l) { d || (d = {}, d.x = r, d.y = a, d.marginLeft = 0, d.div = E.ra.timeHeader[r + "_" + a], i.push(d)), d.marginRight = l - n; break } } for (var c = 0; c < i.length; c++) { var d = i[c]; E.Dl(d.div, d.marginLeft, d.marginRight) } } } }, this.kl = function () { E.Al(), E.El() }, this.Fl = {}; var T = E.Fl; T.Gl = function (e, t, n, i) { var a = e, r = e + n, o = t, s = t + i; return y(E.elements.events).filter(function (e) { var t = e.event, n = t.part.left, i = t.part.left + t.part.width, l = E.rowlist[t.part.dayIndex], c = l.top + t.part.top, u = c + t.part.height; if (d(n, i, a, r) && d(c, u, o, s)) return !0 }) }, T.gk = function (e) { var t = [], e = e || "All", n = E.hd(); if (!n) return y(t); for (var i = n.pixels.left, a = n.pixels.right, r = 0; r < E.elements.events.length; r++) { var o = E.elements.events[r], s = o.event, l = s.part.left, c = s.part.left + s.part.width; switch (e) { case "Left": l < i && i < c && t.push(o); break; case "All": d(l, c, i, a) && t.push(o) } } return y(t).addProps({ "area": n }) }, this.El = function () { if (this.floatingEvents) { var e = T.gk("Left"); E.Hl(), e.filter(function (e) { return "Milestone" !== e.event.data.type }).forEach(function (t) { var n = t.event, i = e.area.pixels.left, a = n.part.left, r = i - a; E.Il(t, r, 0) }) } }, this.elements.sections = [], this.elements.hsections = [], this.Dl = function (e, t, n) { var i = l(); i.setAttribute("unselectable", "on"), i.className = E.ca("_timeheader_float"), i.style.position = "absolute", i.style.left = t + "px", i.style.right = n + "px", i.style.top = "0px", i.style.bottom = "0px", i.style.overflow = "hidden"; var a = l(); a.className = E.ca("_timeheader_float_inner"), a.setAttribute("unselectable", "on"); var r = e.cell.th; if (a.innerHTML = E.Fa(r.text, r.innerHTML), r.fontColor && (a.style.color = r.fontColor), i.appendChild(a), e.section = i, e.insertBefore(i, e.firstChild.nextSibling), e.domArgs && e.domArgs.element) { var o = e.firstChild && e.firstChild.firstChild; o && (o.style.display = "none") } else e.firstChild.innerHTML = ""; this.elements.hsections.push(e) }, this.Bl = function () { for (var e = 0; e < this.elements.hsections.length; e++) { var t = this.elements.hsections[e], n = t.cell; if (n && t.firstChild) if (t.domArgs && t.domArgs.element) { var i = t.firstChild && t.firstChild.firstChild; i && (i.style.display = "") } else t.firstChild.innerHTML = E.Fa(n.th.text, n.th.innerHTML); x(t.section), t.section = null } this.elements.hsections = [] }, this.Il = function (e, t, n) { var i = l(); i.setAttribute("unselectable", "on"), i.className = E.ca(q.eventFloat), i.style.position = "absolute", i.style.left = t + "px", i.style.right = n + "px", i.style.top = "0px", i.style.bottom = "0px", i.style.overflow = "hidden"; var a = 2; "number" == typeof E.durationBarHeight && (a = E.durationBarHeight); var r = l(); if (r.className = E.ca(q.eventFloatInner), r.style.marginTop = a + "px", r.style.paddingTop = "0px", r.setAttribute("unselectable", "on"), r.innerHTML = e.event.client.html(), i.appendChild(r), e.section = i, e.insertBefore(i, e.firstChild.nextSibling), e.domArgs && e.domArgs.element) { var o = e && e.firstChild && e.firstChild.firstChild; o && (o.style.display = "none") } else e.firstChild.innerHTML = ""; var s = e.event, d = s.cache || s.data, c = s.cache ? s.cache.areas : s.data.areas; c = c || [], d.fontColor && (r.style.color = d.fontColor); var u = { "offsetX": E.Jl(r), "eventDiv": e, "areas": c.filter(function (e) { return !(e.start || e.end || e.nonFloating) }) }; DayPilot.Areas.attach(i, e.event, u), DayPilot.Areas.disable(e), this.elements.sections.push(e) }, this.Kl = null, this.Jl = function (e) { return null === E.Kl && (E.Kl = parseInt(new DayPilot.StyleReader(e).get("padding-left"))), E.Kl }, this.Hl = function () { for (var e = 0; e < this.elements.sections.length; e++) { var t = this.elements.sections[e], n = t.event; if (n) if (t.domArgs && t.domArgs.element) { var i = t && t.firstChild && t.firstChild.firstChild; i && (i.style.display = "") } else t.firstChild.innerHTML = n.client.html(); x(t.section), DayPilot.Areas.enable(t), t.section = null } this.elements.sections = [] }, this.setScrollX = function (e) { E.rl.enabled ? (E.rl.scrollXRequested = e, setTimeout(function () { var e = E.rl.scrollXRequested; "number" == typeof e && E.xl(e) }, 0)) : E.xl(e) }, this.xl = function (e) { var t = E.nav.scroll, n = E.Ll(); t.clientWidth + e > n && (e = n - t.clientWidth), E.divTimeScroll.scrollLeft = e, t.scrollLeft = e }, this.setScrollY = function (e) { E.rl.enabled ? (E.rl.scrollYRequested = e, setTimeout(function () { var e = E.rl.scrollYRequested; "number" == typeof e && E.Ml(e) }, 0)) : E.Ml(e) }, this.Ml = function (e) {
                var t = E.nav.scroll, n = E.Nk; t.clientHeight + e > n && (e = n - t.clientHeight),
                    E.divResScroll.scrollTop = e, t.scrollTop = e
            }, this.setScroll = function (e, t) { E.setScrollX(e), E.setScrollY(t) }, this.Nl = function () { return E.Ol() + J.Pl() - 1 }, this.message = function (e, t) { if (null !== e && E.wa) { var n, i = {}; "object" == typeof arguments[1] ? (i = arguments[1], n = i.delay) : n = t; var a = ""; a = i.rawHtml ? e : DayPilot.Util.escapeHtml(e), n = n || this.messageHideAfter || 2e3; var r, o = E.Ql() + 1, s = E.Nl(), d = DayPilot.sw(E.nav.scroll) + 1, c = DayPilot.sh(E.nav.scroll); if (this.nav.message) r = E.nav.message; else { r = l(), r.style.position = "absolute", r.style.left = s + "px", r.style.right = d + "px", r.style.display = "none", DayPilot.rePassive(r, DayPilot.touch.start, function (e) { E.nav.message.style.display = "none", e.stopPropagation() }), r.onmousemove = function () { E.messageHideOnMouseOut && r.messageTimeout && !r.status && clearTimeout(r.messageTimeout) }, r.onmouseout = function () { E.messageHideOnMouseOut && "none" !== E.nav.message.style.display && (r.messageTimeout = setTimeout(E.Rb, 500)) }; var h = l(); h.onclick = function () { E.nav.message.style.display = "none" }, h.className = E.ca("_message"), r.appendChild(h); var f = l(); f.style.position = "absolute", f.className = E.ca("_message_close"), f.onclick = function () { E.nav.message.style.display = "none" }, r.appendChild(f), this.nav.top.appendChild(r), this.nav.message = r } var v = function () { if (E.nav.message) { var e = E.nav.message.firstChild; e.className = E.ca("_message"), i.cssClass && u(e, i.cssClass), e.innerHTML = a; var t = DayPilot.sw(E.nav.scroll); E.nav.message.style.right = t + "px"; var s = E.messageBarPosition || "Top"; "Bottom" === s ? (E.nav.message.style.bottom = c + "px", E.nav.message.style.top = "") : "Top" === s && (E.nav.message.style.bottom = "", E.nav.message.style.top = o + "px"); var l = function () { r.messageTimeout = setTimeout(E.Rb, n) }; DayPilot.fade(E.nav.message, .2, l) } }; clearTimeout(r.messageTimeout), "none" !== this.nav.message.style.display ? DayPilot.fade(E.nav.message, -.2, v) : v() } }, this.Rb = function () { if (E.nav && E.nav.message) { var e = function () { E.nav.message.style.display = "none" }; DayPilot.fade(E.nav.message, -.2, e) } }, this.Rl = function () { E.nav && E.nav.message && (E.nav.message.style.display = "none") }, this.message.show = function (e) { E.message(e) }, this.message.hide = function () { E.Rb() }, this.Sl = null, this.wb = function () { if (this.nav.scroll) { !function () { var e = E.Ll(); E.wl.style.height = E.Nk + "px", E.wl.style.width = e + "px", "Auto" !== E.cellWidthSpec || E.Tl ? e > E.nav.scroll.clientWidth ? E.nav.scroll.style.overflowX = "auto" : E.nav.scroll.style.overflowX = "hidden" : (E.nav.scroll.style.overflowX = "hidden", E.nav.scroll.scrollLeft = 0) }(); var e = "None" === E.timeHeaderPosition ? 0 : 1; null !== this.Sl && (this.nav.top.style.border = this.Sl, this.Sl = null), "Parent100Pct" !== this.heightSpec && "Max100Pct" !== this.heightSpec || (this.nav.top.style.height = "100%", this.hideBorderFor100PctHeight && (this.Sl = this.nav.top.style.border, this.nav.top.style.border = "0 none"), this.height = parseInt(this.nav.top.clientHeight, 10) - this.Ql() - e), this.nav.scroll.style.height = "30px"; var t = this.Te(), n = t + this.Ql() + e; if (t >= 0 && (this.nav.scroll.style.height = t + "px", this.Ul.style.height = t + "px"), this.nav.divider && ((!n || isNaN(n) || n < 0) && (n = 0), this.nav.divider.style.height = n + "px"), "Parent100Pct" !== this.heightSpec && (this.nav.top.style.height = n + "px"), E.nav.resScrollSpace) { var i = 30 + E.vl.bottom.height; "Auto" === E.heightSpec && (i = DayPilot.sh(E.nav.scroll)), E.nav.resScrollSpace.style.height = i + "px" } for (var a = 0; a < this.elements.separators.length; a++)this.elements.separators[a].style.height = this.Nk + "px"; for (var a = 0; a < this.elements.linesVertical.length; a++)this.elements.linesVertical[a].style.height = this.Nk + "px"; E.Vl(), E.Wl() } }, this.Vk = function () { this.startDate = new DayPilot.Date(this.startDate).getDatePart(), this.ra.pixels = [], this.itline = y(); var e = "Auto" === this.cellWidthSpec; if (function () { if (e) { var t = 0; E.ia() && E.timeline ? t = E.timeline.length : "Manual" === E.scale ? t = E.timeline.length : (E.Xl(), t = E.itline.length, E.itline = y()); var n = E.Yl(); if (t > 0 && n > 0) { var i = n / t; E.cellWidth = f(i, E.cellWidthMin), E.Tl = i < E.cellWidthMin } } }(), this.ia() && this.timeline) { if (this.timeline) { this.itline = y(); for (var t = null, n = 0, i = 0; i < this.timeline.length; i++) { var a = this.timeline[i], r = {}; if (r.start = new DayPilot.Date(a.start), r.end = a.end ? new DayPilot.Date(a.end) : r.start.addMinutes(this.cellDuration), a.width) r.left = a.left || n, r.width = a.width || this.cellWidth, n += r.width; else { var o = Math.floor(n + this.cellWidth), s = o - Math.floor(n); r.left = Math.floor(n), r.width = s, n += this.cellWidth } r.breakBefore = t && t.ticks !== r.start.ticks, t = r.end, this.itline.push(r) } } e && this.Zl() } else { if (this.timeHeader = [], "Manual" === this.scale) { this.itline = y(); for (var n = 0, t = null, i = 0; this.timeline && i < this.timeline.length; i++) { var a = this.timeline[i], r = {}; if (r.start = new DayPilot.Date(a.start), r.end = a.end ? new DayPilot.Date(a.end) : r.start.addMinutes(this.cellDuration), t && r.start.ticks < t.ticks) throw new DayPilot.Exception("The timeline must be sequential"); var l = a.width || this.cellWidth, o = Math.floor(n + l), s = o - Math.floor(n); r.left = Math.floor(n), r.width = s, n += l, r.breakBefore = t && t.ticks !== r.start.ticks, t = r.end, this.itline.push(r) } } else this.Xl(); this.$l() } }, this.infinite = {}, this.infinite.shiftStart = function (e) { A._l(e) }, this.infinite.scrollTo = function (e) { A.bm(e) }, this.cm = {}; var A = this.cm; A.Cl = 0, A.s = !1, A.dm = function () { E.em().forEach(function (e, t) { e.start = E.Ob(), e.data = null, E.fm(e.index, e.grid) }) }, A.gm = function () { return E.infiniteScrollingEnabled && !E.ia() }, A.bm = function (e) { e = new DayPilot.Date(e); var t = e.addDays(-E.infiniteScrollingStepDays).getDatePart(), n = new DayPilot.Duration(t.getTime() - E.startDate.getDatePart().getTime()).totalDays(); A._l(n, e) }, A._l = function (e, t) { var n; A.s = !0; var i = E.startDate, a = E.startDate.addDays(e); e > 0 && (n = -E.getPixels(a).left), E.startDate = E.startDate.addDays(e), E.itline = y(), E.ra.pixels = [], E.hm = {}, E.Xl(), A.dm(), e < 0 && (n = E.getPixels(i).left), E.timeHeader = [], E.$l(), E._k(), E.cellProperties = {}, E.cl(), E.dl(), E.ob(), E.Ta(), E.al(), E.bl(), E.wb(), "undefined" != typeof t ? (E.scrollTo(new DayPilot.Date(t)), E.ml()) : E.nav.scroll.scrollLeft += n, E.hl(), E.Ab(), A.s = !1 }, this.Xl = function () { !E.wa && A.gm() && (this.startDate = this.startDate.addDays(-this.infiniteScrollingStepDays)); for (var e = "Days" !== this.viewType ? this.startDate.addDays(this.days) : this.startDate.addDays(1), t = this.startDate, n = this.im(t), i = !1, a = 0, r = null; n.ticks <= e.ticks && n.ticks > t.ticks;) { var o = t, s = n; E.showNonBusinessForceHours && "Day" == E.scale && (o = t.addHours(E.businessBeginsHour), s = t.addHours(E.businessEndsHour)); var l = this.jm(o, s, !0); if (!l.cell.start || !l.cell.end) throw new DayPilot.Exception("Invalid timeline cell start/end: start and/or end not specified"); if (l.cell.start = new DayPilot.Date(l.cell.start), l.cell.end = new DayPilot.Date(l.cell.end), l.cell.start >= l.cell.end) throw new DayPilot.Exception("Invalid timeline cell start/end: end before start"); if (r && r.ticks > l.cell.start.ticks) throw new DayPilot.Exception("Invalid timeline cell start/end: overlapping cells"); i = !!(r && r.ticks < l.cell.start.ticks); var d = l.cell.width || E.cellWidth; if (l.cell.visible) { var c = Math.floor(a + d), u = c - Math.floor(a), h = {}; h.start = l.cell.start, h.end = l.cell.end, h.left = Math.floor(a), h.width = u, h.breakBefore = i, this.itline.push(h), a += d, r = l.cell.end } t = n, n = this.im(t) } }, this.Zl = function () { if (this.timeHeader) for (var e = 0; e < this.timeHeader.length; e++)for (var t = this.timeHeader[e], n = 0; n < t.length; n++) { var i = t[n]; i.left = this.getPixels(new DayPilot.Date(i.start)).left; var a = this.getPixels(new DayPilot.Date(i.end)).left, r = a - i.left; i.width = r } }, this.$l = function () { var e = this.timeHeaders; if (e || (e = [{ "groupBy": this.cellGroupBy }, { "groupBy": "Cell" }]), this.itline.isEmpty()) { this.timeHeader = []; for (var t = 0; t < e.length; t++)this.timeHeader[t] = [] } else for (var n = E.Wd(), t = 0; t < e.length; t++) { var i = e[t].groupBy, a = e[t].format; "Default" === i && (i = this.cellGroupBy); for (var r = [], o = this.Ob(); o.ticks < n.ticks;) { var s = {}; if (s.start = o, s.end = this.km(s.start, i), s.start.ticks === s.end.ticks) break; s.left = this.getPixels(s.start).left; var l = this.getPixels(s.end).left, d = l - s.left; if (s.width = d, s.colspan = Math.ceil(d / (1 * this.cellWidth)), "string" == typeof a ? s.text = s.start.toString(a, J.Lc()) : s.text = this.lm(s, i), d > 0) { if ("function" == typeof this.onBeforeTimeHeaderRender) { var c = {}; c.start = s.start, c.end = s.end, c.text = s.text, c.html = null, c.toolTip = E.Fa(s.text), c.backColor = null, c.fontColor = null, c.level = this.timeHeader.length, c.cssClass = null; var u = {}; u.header = c, u.control = E, this.onBeforeTimeHeaderRender(u), s.innerHTML = E.Fa(c.text, c.html), s.text = c.text, s.html = c.html, s.backColor = c.backColor, s.fontColor = c.fontColor, s.toolTip = c.toolTip, s.areas = c.areas, s.cssClass = c.cssClass } r.push(s) } o = s.end } this.timeHeader.push(r) } }, this.jm = function (e, t) { var n = {}; n.start = e, n.end = t, n.visible = !0, n.width = null; var i = {}; if (i.cell = n, "function" == typeof this.onIncludeTimeCell) return this.onIncludeTimeCell(i), i; if (this.showNonBusiness) return i; var a = "Days" === E.viewType; return i.cell.visible = this.isBusiness({ "start": e, "end": t }, a), i }, this.getPixels = function (e) { var t = e.ticks, n = this.ra.pixels[t]; if (n) return n; var i = 2218768416e5; if (0 === this.itline.length || t < this.itline[0].start.ticks) { var a = {}; return a.cut = !1, a.left = 0, a.boxLeft = a.left, a.boxRight = a.left, a.i = null, a } for (var r = this.mm(e), o = f(r.i - 1, 0), s = o; s < this.itline.length; s++) { var l = this.itline[s], d = l.start.ticks, c = l.end.ticks; if (d < t && t < c) { var u = t - d, a = {}; a.cut = !1, a.left = l.left + this.Gf(l, u), a.boxLeft = l.left, a.boxRight = l.left + l.width, a.i = s; break } if (d === t) { var a = {}; a.cut = !1, a.left = l.left, a.boxLeft = a.left, a.boxRight = a.left + l.width, a.i = s; break } if (c === t) { var a = {}; a.cut = !1, a.left = l.left + l.width, a.boxLeft = a.left, a.boxRight = a.left, a.i = s + 1; break } if (t < d && t > i) { var a = {}; a.cut = !0, a.left = l.left, a.boxLeft = a.left, a.boxRight = a.left, a.i = s; break } i = c } if (!a) { var h = this.itline[this.itline.length - 1], a = {}; a.cut = !0, a.left = h.left + h.width, a.boxLeft = a.left, a.boxRight = a.left, a.i = null } return this.ra.pixels[t] = a, a }, this.getDate = function (e, t, n) { var i = this.nm(e, n); if (!i) return null; var a = i.x, r = this.itline[a]; if (!r) return null; var o = n && !t ? r.end : r.start; return t ? o.addTime(this.om(i.cell, i.offset)) : o }, this.nm = function (e, t) { if (0 === this.itline.length) return null; for (var n = 0, i = 0, a = 0; a < this.itline.length; a++) { var r = this.itline[a]; if (n += r.width || this.cellWidth, e < n || t && e === n) { var o = {}; return o.x = a, o.offset = e - i, o.cell = r, o } i = n } var r = E.itline.last(), o = {}; return o.x = this.itline.length - 1, o.offset = r.width || this.cellWidth, o.cell = r, o }, this.pm = function (e) { return this.mm(e) }, this.mm = function (e) { var t = new DayPilot.Date(e), n = 0, i = this.itline[0]; if (t.ticks < i.start.ticks) { var a = {}; return a.hidden = !0, a.previous = null, a.current = null, a.next = this.itline[0], a.i = -1, a } var r = this.itline.length - 1, o = this.itline[r]; if (t.ticks > o.end.ticks) { var a = {}; return a.past = !0, a.previous = this.itline[this.itline.length - 1], a.i = this.itline.length, a } if (t.ticks === o.end.ticks) { var a = {}; return a.past = !1, a.current = this.itline[this.itline.length - 1], a.i = this.itline.length - 1, a } for (var s = function () { for (var e, i = E.itline; n <= r;)if (e = Math.floor((n + r) / 2), i[e].start.ticks > t.ticks) r = e - 1; else { if (!(i[e].end.ticks < t.ticks)) return e; n = e + 1 } return n }(), l = s; l < this.itline.length; l++) { var d = this.itline[l]; if (d.start.ticks <= t.ticks && t.ticks < d.end.ticks) { var a = {}; return a.hidden = !1, a.current = d, a.i = l, a } if (t.ticks < d.start.ticks) { var a = {}; return a.hidden = !0, a.previous = l > 0 ? this.itline[l - 1] : null, a.current = null, a.next = this.itline[l], a.i = l, a } } var a = {}; return a.past = !0, a.previous = this.itline[this.itline.length - 1], a.i = this.itline.length, a }, this.Gf = function (e, t) { var n = e.width || this.cellWidth, i = e.end.ticks - e.start.ticks; return Math.floor(n * t / i) }, this.om = function (e, t) { var n = e.end.ticks - e.start.ticks, i = e.width || this.cellWidth; return Math.floor(t / i * n) }, this.dj = function (e) { b.touch.start || i.qm || (E.rm = {}, E.Tb(this, e)) }, this.eventClickPostBack = function (e, t) { this.Ia("EventClick", e, t) }, this.eventClickCallBack = function (e, t) { this.Ka("EventClick", e, t) }, this.Tb = function (e, t) { var n = e.event; if (n) { if ("undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), !n.client.doubleClickEnabled()) return void E.Ub(e, t); E.sm.click || (E.sm.click = []); var i = function (e, t) { return function () { E.Ub(e, t) } }; E.sm.click.push(window.setTimeout(i(e, t), E.doubleClickTimeout)) } }, this.tm = function (e) { return E.itline[e] }, this.Ub = function (e, t) { if ("boolean" == typeof t) throw new DayPilot.Exception("Invalid _eventClickSingle parameters"); var n = e.event; if (n) { var i = t.ctrlKey, a = t.metaKey; if (n.client.clickEnabled()) if (E.um(t), E.Fb()) { var r = {}; if (r.e = n, r.control = E, r.div = e, r.originalEvent = t, r.ctrl = i, r.meta = a, r.shift = t.shiftKey, r.preventDefault = function () { this.preventDefault.value = !0 }, r.toJSON = function () { return p(r, {}, ["e", "ctrl", "meta", "shift"]) }, "function" == typeof E.onEventClick && (E.onEventClick(r), r.preventDefault.value)) return; switch (E.eventClickHandling) { case "PostBack": E.eventClickPostBack(n); break; case "CallBack": E.eventClickCallBack(n); break; case "Edit": E.Vb(e); break; case "Select": E.Wb(e, n, i, a); break; case "ContextMenu": var o = n.client.contextMenu(); o ? o.show(n) : E.contextMenu && E.contextMenu.show(n); break; case "Bubble": E.bubble && E.bubble.showEvent(n); break; case "RectangleSelect": if ("Disabled" !== J.vm()) return V.start(), !1 }"function" == typeof E.onEventClicked && E.onEventClicked(r) } else switch (E.eventClickHandling) { case "PostBack": E.eventClickPostBack(n); break; case "CallBack": E.eventClickCallBack(n); break; case "JavaScript": E.onEventClick(n); break; case "Edit": E.Vb(e); break; case "Select": E.Wb(e, n, i, a); break; case "ContextMenu": var o = n.client.contextMenu(); o ? o.show(n) : E.contextMenu && E.contextMenu.show(n); break; case "Bubble": E.bubble && E.bubble.showEvent(n); break; case "RectangleSelect": if ("Disabled" !== J.vm()) return V.start(), !1 } } }, this.dc = function (e) { if (E.Fb()) { var t = function () { if (!n.preventDefault.value) { switch (n.loaded = function () { }, E.eventDeleteHandling) { case "PostBack": E.eventDeletePostBack(e); break; case "CallBack": E.eventDeleteCallBack(e); break; case "Update": E.events.remove(e), "undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive() }"function" == typeof E.onEventDeleted && E.onEventDeleted(n) } }, n = {}; n.async = !1, n.e = e, n.preventDefault = function () { this.preventDefault.value = !0 }, n.control = E, n.toJSON = function () { return p(n, {}, ["e"]) }, n.loaded = function () { t() }, "function" == typeof E.onEventDelete && E.onEventDelete(n), n.async || t() } else switch (E.eventDeleteHandling) { case "PostBack": E.eventDeletePostBack(e); break; case "CallBack": E.eventDeleteCallBack(e); break; case "JavaScript": E.onEventDelete(e) } }, this.eventDeletePostBack = function (e, t) { this.Ia("EventDelete", e, t) }, this.eventDeleteCallBack = function (e, t) { this.Ka("EventDelete", e, t) }, this.setHScrollPosition = function (e) { this.nav.scroll.scrollLeft = e }, this.getScrollX = function () { return this.nav.scroll.scrollLeft }, this.getHScrollPosition = this.getScrollX, this.getScrollY = function () { return this.nav.scroll.scrollTop }, this.Wb = function (e, t, n, i) { E.Ac(e, t, n, i) }, this.eventSelectPostBack = function (e, t, n) { var i = {}; i.e = e, i.change = t, this.Ia("EventSelect", i, n) }, this.eventSelectCallBack = function (e, t, n) { var i = {}; i.e = e, i.change = t, this.Ka("EventSelect", i, n) }, this.Ac = function (e, t, n, i) { var a = E.multiselect, r = a.isSelected(t); if (n || i || !r || 1 !== a.Bc.length) if (E.Fb()) { a.ld = a.events(); var o = {}; if (o.e = t, o.selected = r, o.ctrl = n, o.meta = i, o.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onEventSelect && (E.onEventSelect(o), o.preventDefault.value)) return; switch (E.eventSelectHandling) { case "PostBack": E.eventSelectPostBack(t, s); break; case "CallBack": "undefined" != typeof WebForm_InitCallback && (window.Cc = "", window.Dc = [], WebForm_InitCallback()), E.eventSelectCallBack(t, s); break; case "Update": a.Ec(e, n, i) }"function" == typeof E.onEventSelected && (o.change = a.isSelected(t) ? "selected" : "deselected", o.selected = a.isSelected(t), E.onEventSelected(o)) } else { a.ld = a.events(), a.Ec(e, n, i); var s = a.isSelected(t) ? "selected" : "deselected"; switch (E.eventSelectHandling) { case "PostBack": E.eventSelectPostBack(t, s); break; case "CallBack": "undefined" != typeof WebForm_InitCallback && (window.Cc = "", window.Dc = [], WebForm_InitCallback()), E.eventSelectCallBack(t, s); break; case "JavaScript": E.onEventSelect(t, s) } } }, this.eventRightClickPostBack = function (e, t) { this.Ia("EventRightClick", e, t) }, this.eventRightClickCallBack = function (e, t) { this.Ka("EventRightClick", e, t) }, this.Yb = function (e) { if (!b.touch.active && !b.touch.start) { var t = this.event; if (e.cancelBubble = !0, E.allowDefaultContextMenu || e.preventDefault(), !this.event.client.rightClickEnabled()) return !1; if (E.um(e), E.Fb()) { var n = {}; if (n.e = t, n.div = this, n.originalEvent = e, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onEventRightClick && (E.onEventRightClick(n), n.preventDefault.value)) return !1; switch (E.eventRightClickHandling) { case "PostBack": E.eventRightClickPostBack(t); break; case "CallBack": E.eventRightClickCallBack(t); break; case "ContextMenu": var i = t.client.contextMenu(); i ? i.show(t) : E.contextMenu && E.contextMenu.show(this.event); break; case "Bubble": E.bubble && E.bubble.showEvent(t) }"function" == typeof E.onEventRightClicked && E.onEventRightClicked(n) } else switch (E.eventRightClickHandling) { case "PostBack": E.eventRightClickPostBack(t); break; case "CallBack": E.eventRightClickCallBack(t); break; case "JavaScript": E.onEventRightClick(t); break; case "ContextMenu": var i = t.client.contextMenu(); i ? i.show(t) : E.contextMenu && E.contextMenu.show(this.event); break; case "Bubble": E.bubble && E.bubble.showEvent(t) }return !1 } }, this.eventDoubleClickPostBack = function (e, t) { this.Ia("EventDoubleClick", e, t) }, this.eventDoubleClickCallBack = function (e, t) { this.Ka("EventDoubleClick", e, t) }, this.Xb = function (e) { if ("undefined" != typeof DayPilot.Bubble && DayPilot.Bubble.hideActive(), E.sm.click) { for (var t in E.sm.click) window.clearTimeout(E.sm.click[t]); E.sm.click = null } var n = this.event; if (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0, E.Fb()) { var i = {}; if (i.e = n, i.originalEvent = e, i.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onEventDoubleClick && (E.onEventDoubleClick(i), i.preventDefault.value)) return; switch (E.eventDoubleClickHandling) { case "PostBack": E.eventDoubleClickPostBack(n); break; case "CallBack": E.eventDoubleClickCallBack(n); break; case "Edit": E.Vb(this); break; case "Select": E.Wb(div, n, e.ctrlKey, e.metaKey); break; case "Bubble": E.bubble && E.bubble.showEvent(n); break; case "ContextMenu": var a = n.client.contextMenu(); a ? a.show(n) : E.contextMenu && E.contextMenu.show(n) }"function" == typeof E.onEventDoubleClicked && E.onEventDoubleClicked(i) } else switch (E.eventDoubleClickHandling) { case "PostBack": E.eventDoubleClickPostBack(n); break; case "CallBack": E.eventDoubleClickCallBack(n); break; case "JavaScript": E.onEventDoubleClick(n); break; case "Edit": E.Vb(this); break; case "Select": E.Wb(div, n, e.ctrlKey, e.metaKey); break; case "Bubble": E.bubble && E.bubble.showEvent(n); break; case "ContextMenu": var a = n.client.contextMenu(); a ? a.show(n) : E.contextMenu && E.contextMenu.show(n) } }, this.eventResizePostBack = function (e, t, n, i) { this.lc("PostBack", e, t, n, i) }, this.eventResizeCallBack = function (e, t, n, i) { this.lc("CallBack", e, t, n, i) }, this.lc = function (e, t, n, i, a) { var r = t && !!t.preventDefault, o = {}; if (r) { var s = t; o.e = s.e, o.newStart = s.newStart, o.newEnd = s.newEnd, o.multiresize = [], s.multiresize.forEach(function (e) { var t = {}; t.e = e.event, t.newStart = e.start, t.newEnd = e.end, o.multiresize.push(t) }) } else o.e = t, o.newStart = n, o.newEnd = i; this.ec(e, "EventResize", o, a) }, this.jc = function (e, t, n, i) { if ("Disabled" !== this.eventResizeHandling) { n = E.qj(n); var a = {}; a.e = e, a.async = !1, a.loaded = function () { o() }, a.newStart = t, a.newEnd = n, a.what = i, a.preventDefault = function () { this.preventDefault.value = !0 }, a.multiresize = y(N.list), a.control = E, a.toJSON = function () { return p(a, {}, ["e", "async", "newStart", "newEnd", "multiresize"]) }; var r = {}; if (r.event = e, r.start = t, r.end = n, a.multiresize.splice(0, 0, r), E.Fb()) { var o = function () { if (W.B(), !a.preventDefault.value) { switch (a.loaded = function () { }, t = a.newStart, n = a.newEnd, E.eventResizeHandling) { case "PostBack": E.eventResizePostBack(a); break; case "CallBack": E.eventResizeCallBack(a); break; case "Notify": E.eventResizeNotify(a); break; case "Update": E.wm(a) }"function" == typeof E.onEventResized && E.onEventResized(a) } }; "function" == typeof E.onEventResize && E.onEventResize(a), a.async ? E.blockOnCallBack && W.D() : o() } else switch (E.eventResizeHandling) { case "PostBack": E.eventResizePostBack(a); break; case "CallBack": E.eventResizeCallBack(a); break; case "JavaScript": E.onEventResize(e, t, n); break; case "Notify": E.eventResizeNotify(a); break; case "Update": E.wm(a) } } }, this.eventMovePostBack = function (e, t, n, i, a, r) { this.rc("PostBack", e, t, n, i, a, r) }, this.eventMoveCallBack = function (e, t, n, i, a, r) { this.rc("CallBack", e, t, n, i, a, r) }, this.rc = function (e, t, n, i, a, r, o) { var s = t && !!t.preventDefault, l = {}; if (s) { var d = t; l.e = d.e, l.newStart = d.newStart, l.newEnd = d.newEnd, l.newResource = d.newResource, l.position = d.position, l.multimove = [], d.multimove.forEach(function (e) { var t = {}; if (t.e = e.event, t.newStart = e.start, t.newEnd = e.end, t.newResource = e.event.resource(), t.e === d.e || t.e.data.id == d.e.data.id) t.newResource = d.newResource; else if (I.rowoffset) { var n = e.event.part.dayIndex + I.rowoffset; t.newResource = E.rowlist[n].id } l.multimove.push(t) }) } else l.e = t, l.newStart = n, l.newEnd = i, l.newResource = a, l.position = o; this.ec(e, "EventMove", l, r) }, this.xm = function (e, t, n) { var i = {}; i.start = t.start, i.end = t.end, i.resource = t.resource, i.multirange = [], t.multirange.forEach(function (e) { var t = {}; t.start = e.start, t.end = e.end, t.resource = e.resource, i.multirange.push(t) }), this.ec(e, "TimeRangeSelected", i, n) }, this.ec = function (e, t, n, i) { if ("PostBack" === e) E.Ia(t, n, i); else if ("CallBack" === e) E.Ka(t, n, i, "CallBack"); else if ("Immediate" === e) E.Ka(t, n, i, "Notify"); else if ("Queue" === e) E.queue.add(new DayPilot.Action(this, t, n, i)); else { if ("Notify" !== e) throw new DayPilot.Exception("Invalid event invocation type"); "Notify" === J.fc() ? E.Ka(t, n, i, "Notify") : E.queue.add(new DayPilot.Action(E, t, n, i)) } }, this.eventMoveNotify = function (e, t, n, i, a, r) { if (e && !!e.preventDefault) { var o = e; o.old = new DayPilot.Event(o.e.copy(), E), o.multimove.forEach(function (e) { e.old = new DayPilot.Event(e.event.copy(), E) }), E.wm(o), o.e = o.old, delete o.old, o.multimove.forEach(function (e) { e.event = e.old, delete e.old }) } else { e = new DayPilot.Event(e.copy(), E); var s = E.events.ym(e.data); e.start(t), e.end(n), e.resource(i), e.commit(), s = s.concat(E.events.zm(e.data)), E.Am(s), E.Bm(), E.Cm(s) } this.rc("Notify", e, t, n, i, a, r) }, this.eventResizeNotify = function (e, t, n, i) { if (e && !!e.preventDefault) { var a = e; a.old = new DayPilot.Event(a.e.copy(), E), a.multiresize.forEach(function (e) { e.old = new DayPilot.Event(e.event.copy(), E) }), E.wm(a), a.e = a.old, delete a.old, a.multiresize.forEach(function (e) { e.event = e.old, delete e.old }) } else { e = new DayPilot.Event(e.copy(), E); var r = E.events.ym(e.data); e.start(t), e.end(n), e.commit(), r = r.concat(E.events.zm(e.data)), E.Am(r), E.Bm(), E.Cm(r) } this.lc("Notify", e, t, n, i) }, this.zoom = {}, this.zoom.active = -1, this.zoom.setActive = function (e, t, n) { var i; if ("number" == typeof e) i = E.zoomLevels[e]; else { if ("string" != typeof e) throw new DayPilot.Exception("Unexpected parameter type (string or number required): " + typeof e); var a = E.zoom.ed(e); i = E.zoomLevels[a] } if (!i) throw new DayPilot.Exception("Zoom level not found: " + e + " (" + typeof e + ")"); (e !== E.zoom.active || n) && (n || (n = E.zoom.Zj(t)), n && (E.startDate = n), E.zoom.gd(e, n), E.wa && E.update(), n && E.scrollTo(n, null, t || E.zoomPosition)) }, this.zoom.ed = function (e) { return y(E.zoomLevels).findIndex(function (t) { return t.id === e }) }, this.zoom.Zj = function (e) { e = e || E.zoomPosition || "left"; var t = null; if (!E.nav.scroll) return null; var n = E.getViewPort(); switch (e) { case "left": t = n.start; break; case "middle": t = n.start && n.start.addTime((E.getViewPort().end.getTime() - E.getViewPort().start.getTime()) / 2); break; case "right": t = n.end }return t }, this.zoom.gd = function (e, t) { var n = E.zoomLevels.length - 1; e > n && (e = n), e < 0 && (e = 0), E.zoom.active = e; var i = E.zoomLevels[e], a = {}; return a.date = t || new DayPilot.Date(E.startDate), a.level = i, DayPilot.Util.ownPropsAsArray(i.properties).forEach(function (e) { if (0 !== e.key.indexOf("on")) return "function" == typeof e.val ? void (E[e.key] = e.val(a)) : void (E[e.key] = e.val) }), a }, this.multiselect = {}, this.multiselect.Bc = [], this.multiselect.kd = [], this.multiselect.ld = [], this.multiselect.fl = function (e) { E.multiselect.Bc = y(e).map(function (e) { return new DayPilot.Event(e, E) }) }, this.multiselect.md = function () { var e = E.multiselect; return JSON.stringify(e.events()) }, this.multiselect.events = function () { var e = E.multiselect, t = y(); t.ignoreToJSON = !0; for (var n = 0; n < e.Bc.length; n++)t.push(e.Bc[n]); return t }, this.multiselect.get = function () { return E.multiselect.events() }, this.multiselect.nd = function () { }, this.multiselect.Ec = function (e, t, n) { var i = E.multiselect; if (i.isSelected(e.event)) if (E.allowMultiSelect) if (t || n) i.remove(e.event, !0); else { var a = i.Bc.length; i.clear(), a > 1 && i.add(e.event, !0) } else i.clear(); else E.allowMultiSelect && (t || n) ? i.add(e.event, !0) : (i.clear(), i.add(e.event, !0)); i.Bd(e), i.nd() }, this.multiselect.od = function (e) { var t = E.multiselect; return t.pd(e, t.Bc) }, this.multiselect.qd = function () { for (var e = E.multiselect, t = [], n = 0; n < e.Bc.length; n++) { var i = e.Bc[n]; t.push(i.value()) } alert(t.join("\n")) }, this.multiselect.add = function (e, t) { var n = E.multiselect; n.rd(e) === -1 && n.Bc.push(e), t || n.Dm(e) }, this.multiselect.remove = function (e, t) { var n = E.multiselect, i = n.rd(e); i !== -1 && n.Bc.splice(i, 1), t || n.Dm(e) }, this.multiselect.clear = function (e) { var t = E.multiselect; t.Bc = [], e || t.redraw() }, this.multiselect.redraw = function () { var e = E.multiselect; e.kd = []; for (var t = 0; t < E.elements.events.length; t++) { var n = E.elements.events[t]; n.event && n.event.isEvent && (e.isSelected(n.event) ? e.sd(n) : e.td(n)) } }, this.multiselect.Bd = function (e) { if (e) { var t = E.multiselect; t.isSelected(e.event) ? t.sd(e) : t.td(e) } }, this.multiselect.Dm = function (e) { var t = E.multiselect, n = E.Pg(e); t.Bd(n) }, this.multiselect.sd = function (e) { var t = E.multiselect, n = E.ca("_selected"), e = t.ud(e); u(e, n), t.kd.push(e) }, this.multiselect.ud = function (e) { return e }, this.multiselect.vd = function () { for (var e = E.multiselect, t = 0; t < e.kd.length; t++) { var n = e.kd[t]; e.td(n, !0) } e.kd = [] }, this.multiselect.td = function (e, t) { var n = E.multiselect; if (c(e, E.ca("_selected")), !t) { var i = k(n.kd, e); i !== -1 && n.kd.splice(i, 1) } }, this.multiselect.isSelected = function (e) { return !!e && (!!e.isEvent && E.multiselect.pd(e, E.multiselect.Bc)) }, this.multiselect.rd = function (e) { for (var t = e.data, n = 0; n < E.multiselect.Bc.length; n++) { var i = E.multiselect.Bc[n]; if (E.xd(i.data, t)) return n } return -1 }, this.multiselect.pd = function (e, t) { if (!t) return !1; for (var n = 0; n < t.length; n++) { var i = t[n]; if (E.xd(e, i)) return !0 } return !1 }, this.multiselect.startRectangle = function () { V.start() }, this.Em = function () { this.dl(), this.hl() }, this.Fm = function () { M.Gm() }, this.Hm = function () { E.Im(), E.Yk(), E.Zk(), E.bl(), E.Jm(), E.progressiveRowRendering && E.Km() }, this.Bd = function (n) { n = n || {}; var i = !n.eventsOnly; window.clearTimeout(E.Lm); var a = E.keyboard.getFocus(); if (E.Yk(), i && (this.ia() || (E.timeHeader = null, E.cellProperties = {}), E.hm = {}, E.Uk(), E.Vk(), n && n.dontLoadResources || E.Wk(), E.Mm !== E.timeHeaderPosition && E.Nm(), E.events.Om(), E.Ha.Rg(), E.clearSelection(), a && E.Qm.Pm()), E.ob(), E.Rm(), E.Xk(), E.al(), E.Zk(), i && (E.Tg(), E.$k(), E._k(), E.ll(E.selectedRows), E.Sm()), E.bl(), E.Jm(), E.pb(), M.Tm(), this.Ta(), this.cl(), this.Ea(), this.nb(), E.wb(), this.gl(), this.Em(), n.immediateEvents || n.eventsOnly ? E.Ab() : setTimeout(function () { E.Ab() }, 100), i && a) if (a.e) { var r = E.events.find(t); r && E.keyboard.focusEvent(e.id()) } else if (a.cell) { var o = a.cell.start, s = a.cell.resource, l = E.Um(o, s); l && "main" === l.grid && E.keyboard.focusCell(o, s) } this.visible ? E.Pk != E.visible && this.show() : this.hide(), this.Pk = this.visible, this.kl(), E.Qg.scope || E.rl.enabled ? E.wa ? E.ml() : A.gm() || E.ml() : E.ml(), this.Vm(), this.Eb(), this.Wm() }, this.Vm = function () { if ("function" == typeof E.onAfterUpdate) { var e = {}; E.onAfterUpdate(e) } }, this.update = function (e) { if (!E.wa) throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that hasn't been initialized."); if (E.xa) throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable."); H.request(e) }; var H = {}; H.timeout = null, H.options = null, H.enabled = !1, H.request = function (e) { H.enabled ? (clearTimeout(H.timeout), H.Xm(e), H.timeout = setTimeout(H.doit)) : (H.Xm(e), H.doit()) }, H.Xm = function (e) { if (e) { H.options || (H.options = {}); for (var t in e) H.options[t] = e[t] } }, H.doit = function () { var e = H.options; return H.options = null, E.wa ? DayPilot.Util.isOnlyProperty(e, "events") ? (E.events.list = e.events, E.Bd({ "eventsOnly": !0 }), void G.Ym()) : DayPilot.Util.isOnlyProperty(e, "separators") ? (E.separators = e.separators, void E.Em()) : DayPilot.Util.isOnlyProperty(e, "rowHeaderColumns") && !E.Zm() ? (E.rowHeaderColumns = e.rowHeaderColumns, void E.Hm()) : DayPilot.Util.isOnlyProperty(e, "links") ? (E.links.list = e.links, void E.Fm()) : (E.Ug(e), E.Bd({ "immediateEvents": !0 }), E.jh(), G.Ym(), void E.jb(null, !1)) : void E.Ug(e) }, this.$m = function (e) { e.forEach(function (e) { E._m(e.index, e.grid) }) }, this.an = function (e) { return e && 0 !== e.length ? e[0].isRow ? e : e.map(function (e) { return E.rowlist[e] }) : [] }, this.Cm = function (e, t, n) { e = DayPilot.ua(e), e = E.an(e), E.$m(e), this.bn ? (this.al(), this.bl(), this.cl(), this.dl(), e.forEach(function (e) { E.cn(e.index, e.grid) }), e.forEach(function (e) { E.dn(e.index, e.grid) }), this.gl(), this.hl(), this.en(), this.cb(), this.Kf()) : (e.forEach(function (e) { t || E.cn(e.index, e.grid), E.dn(e.index, e.grid) }), e.forEach(function (e) { E.gn(e.index, e.grid) }), E.gl()), E.El(), M.Gm(), E.multiselect.redraw(), n && n(), this.Ea() }, this.qj = function (e) { return "DateTime" === E.eventEndSpec ? e : e.getDatePart().ticks === e.ticks ? e.addDays(-1) : e.getDatePart() }, this.Vi = function (e) { return "DateTime" === E.eventEndSpec ? e : e.getDatePart().addDays(1) }, this.tj = function (e) { return "DateTime" === E.eventEndSpec ? e : e.getDatePart() }, this.oc = function (e, t, n, a, r, o, s) { if (E.eb = null, "Disabled" !== E.eventMoveHandling) { n = E.qj(n); var l = {}; l.e = e, l.newStart = t, l.newEnd = n, l.newResource = a, l.external = r, l.ctrl = !1, l.meta = !1, l.shift = !1, o && (l.shift = o.shiftKey, l.ctrl = o.ctrlKey, l.meta = o.metaKey), l.multimove = y(I.list, !0), l.areaData = b.movingAreaData, l.control = E, l.toJSON = function () { return p(l, {}, ["e", "newStart", "newEnd", "newResource", "external", "ctrl", "meta", "shift", "multimove", "areaData"]) }; var d = {}; if (d.event = e, d.start = t, d.end = n, d.overlapping = !1, d.resource = a, l.multimove.splice(0, 0, d), l.position = s, l.preventDefault = function () { this.preventDefault.value = !0 }, E.Fb()) { var c = function () { if (l.loaded = function () { }, W.B(), l.preventDefault.value) return i.qm = !0, void E.pc(); switch (t = l.newStart, n = l.newEnd, E.eventMoveHandling) { case "PostBack": E.eventMovePostBack(l); break; case "CallBack": E.eventMoveCallBack(l); break; case "Notify": E.eventMoveNotify(l); break; case "Update": E.wm(l) }E.pc(), "function" == typeof E.onEventMoved && E.onEventMoved(l) }; l.async = !1, l.loaded = function () { c() }, "function" == typeof E.onEventMove && E.onEventMove(l), l.async ? E.blockOnCallBack && W.D() : c() } else { switch (E.eventMoveHandling) { case "PostBack": E.eventMovePostBack(l); break; case "CallBack": E.eventMoveCallBack(l); break; case "JavaScript": E.onEventMove(e, t, n, a, r, !!o && o.ctrlKey, !!o && o.shiftKey, s); break; case "Notify": E.eventMoveNotify(l); break; case "Update": E.wm(l) }E.pc() } } }, this.wm = function (e) { var t = e.e, n = e.newStart, i = e.newEnd, a = e.newResource, r = e.external; t.start(n), t.end(i), t.resource(a), r ? (t.commit(), E.events.add(t)) : E.events.update(t), e.multimove && !e.multimove.isEmpty() && e.multimove.forEach(function (e) { e.event !== t && (e.event.start(e.start), e.event.end(e.end), e.event.resource(e.resource), e.event.commit(), E.events.update(e.event)) }), e.multiresize && !e.multiresize.isEmpty() && e.multiresize.forEach(function (e) { e.event !== t && (e.event.start(e.start), e.event.end(e.end), e.event.commit(), E.events.update(e.event)) }), E.events.hn(), E.qc() }, this.sc = function (e, t) { var n = E.tc(t), i = {}; i.args = e, i.guid = n, E.Ka("Bubble", i) }, this.tc = function (e) { var t = DayPilot.guid(); return this.bubbles || (this.bubbles = []), this.bubbles[t] = e, t }, this.eventMenuClickPostBack = function (e, t, n) { var i = {}; i.e = e, i.command = t, this.Ia("EventMenuClick", i, n) }, this.eventMenuClickCallBack = function (e, t, n) { var i = {}; i.e = e, i.command = t, this.Ka("EventMenuClick", i, n) }, this.uc = function (e, t, n) { switch (n) { case "PostBack": E.eventMenuClickPostBack(t, e); break; case "CallBack": E.eventMenuClickCallBack(t, e) } }, this.timeRangeSelectedPostBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ia("TimeRangeSelected", a, i) }, this.timeRangeSelectedCallBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ka("TimeRangeSelected", a, i) }, this.in = function (e) {
                if (e) {
                    if (e.disabled) return void E.clearSelection(); if (e.args) E.wc(e.args.start, e.args.end, e.args.resource); else {
                        var t = E.jn(e); if (!t) return; E.wc(t.start, t.end, t.resource)
                    }
                }
            }, this.wc = function (e, t, n) { if ("Disabled" !== E.timeRangeSelectedHandling) { var i = t; t = E.qj(i); var a = {}; if (a.control = E, a.start = e, a.end = t, a.resource = n, a.preventDefault = function () { this.preventDefault.value = !0 }, a.multirange = y(X.list).map(function (e) { return E.jn(e) }), a.multirange.isEmpty() && a.multirange.push({ "start": a.start, "end": a.end, "resource": a.resource }), a.toJSON = function () { return p(a, {}, ["start", "end", "resource", "multirange"]) }, E.Fb()) { if ("function" == typeof E.onTimeRangeSelect) { if (E.onTimeRangeSelect(a), a.preventDefault.value) return; e = a.start, t = a.end } switch (t = E.Vi(t), E.kn(E.ln, e, t, a.multirange), E.mn(E.ln), E.timeRangeSelectedHandling) { case "PostBack": E.xm("PostBack", a); break; case "CallBack": E.xm("CallBack", a) }"function" == typeof E.onTimeRangeSelected && E.onTimeRangeSelected(a) } else switch (E.timeRangeSelectedHandling) { case "PostBack": E.xm("PostBack", a); break; case "CallBack": E.xm("CallBack", a); break; case "JavaScript": E.onTimeRangeSelected(e, t, n, a.multirange); break; case "Hold": } } }, this.kn = function (e, t, n, i) { if (e && !(i && i.length > 1)) { var a, r, o = n, s = 0; if ("Days" === E.viewType) { s = E.ul(t).start.getTime() - E.Ob().getTime() } t.getTime() < E.itline[0].start.getTime() ? (e.start.x = 0, e.start.time = E.itline[0].start.getTime()) : (a = E.pm(t.addTime(-s)), r = a.current || a.previous, e.start.x = k(E.itline, r), e.start.time = t), a = E.pm(o.addMilliseconds(-1).addTime(-s)), a.past ? (e.end.x = E.itline.length - 1, e.end.time = E.itline[E.itline.length - 1].end.getTime()) : (r = a.current || a.next, e.end.x = k(E.itline, r), e.end.time = n) } }, this.ul = function (e) { var t = e.getDatePart(); return y(E.rowlist).find(function (e) { return e.start.getDatePart() === t }) }, this.timeRangeDoubleClickPostBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ia("TimeRangeDoubleClick", a, i) }, this.timeRangeDoubleClickCallBack = function (e, t, n, i) { var a = {}; a.start = e, a.end = t, a.resource = n, this.Ka("TimeRangeDoubleClick", a, i) }, this.yc = function (e, t, n) { if (t = E.qj(t), E.Fb()) { var i = {}; if (i.start = e, i.end = t, i.resource = n, i.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onTimeRangeDoubleClick && (E.onTimeRangeDoubleClick(i), i.preventDefault.value)) return; switch (E.timeRangeDoubleClickHandling) { case "PostBack": E.timeRangeDoubleClickPostBack(e, t, n); break; case "CallBack": E.timeRangeDoubleClickCallBack(e, t, n) }"function" == typeof E.onTimeRangeDoubleClicked && E.onTimeRangeDoubleClicked(i) } else switch (E.timeRangeDoubleClickHandling) { case "PostBack": E.timeRangeDoubleClickPostBack(e, t, n); break; case "CallBack": E.timeRangeDoubleClickCallBack(e, t, n); break; case "JavaScript": E.onTimeRangeDoubleClick(e, t, n) } }, this.timeRangeMenuClickPostBack = function (e, t, n) { var i = {}; i.selection = e, i.command = t, this.Ia("TimeRangeMenuClick", i, n) }, this.timeRangeMenuClickCallBack = function (e, t, n) { var i = {}; i.selection = e, i.command = t, this.Ka("TimeRangeMenuClick", i, n) }, this.vc = function (e, t, n) { switch (n) { case "PostBack": E.timeRangeMenuClickPostBack(t, e); break; case "CallBack": E.timeRangeMenuClickCallBack(t, e) } }, this.linkMenuClickPostBack = function (e, t, n) { var i = {}; i.link = e, i.command = t, this.Ia("LinkMenuClick", i, n) }, this.linkMenuClickCallBack = function (e, t, n) { var i = {}; i.link = e, i.command = t, this.Ka("LinkMenuClick", i, n) }, this.nn = function (e, t, n) { switch (n) { case "PostBack": E.linkMenuClickPostBack(t, e); break; case "CallBack": E.linkMenuClickCallBack(t, e) } }, this.rowMenuClickPostBack = function (e, t, n) { var i = {}; i.resource = e, i.command = t, this.Ia("RowMenuClick", i, n) }, this.resourceHeaderMenuClickPostBack = this.rowMenuClickPostBack, this.rowMenuClickCallBack = function (e, t, n) { var i = {}; i.resource = e, i.command = t, this.Ka("RowMenuClick", i, n) }, this.resourceHeaderMenuClickCallBack = this.rowMenuClickCallBack, this.on = function (e, t, n) { switch (n) { case "PostBack": E.rowMenuClickPostBack(t, e); break; case "CallBack": E.rowMenuClickCallBack(t, e) } }, this.pn = function (e, t, n) { var i = E.qn(e), a = i.data; if (e.task && (a = e.task), E.rowHeaderColumns) { var r = E.rowHeaderColumns[n].display; 0 !== n || r || (a.name = t, a.html = E.Fa(t)), r && E.rn(a, r, t) } else a.name = t, a.html = E.Fa(t); E.rows.update(i) }, this.sn = function (e, t) { if (t) { var n = {}; if (n.text = t, n.preventDefault = function () { this.preventDefault.value = !0 }, "function" != typeof E.onRowCreate || (E.onRowCreate(n), !n.preventDefault.value)) { switch (E.rowCreateHandling) { case "CallBack": E.rowCreateCallBack(n.text); break; case "PostBack": E.rowCreatePostBack(n.text) }"function" == typeof E.onRowCreated && E.onRowCreated(n) } } }, this.tn = function (e, t, n, i) { if (e.isNewRow) return void (n || E.sn(e, t)); var a = k(E.rowlist, e), r = E.qn(e, a); if (E.Fb()) { var o = {}; o.resource = r, o.row = r, o.x = i, o.newText = t, o.canceled = n, o.preventDefault = function () { this.preventDefault.value = !0 }, o.async = !1, o.loaded = function () { s() }; var s = function () { if (!n) { switch (E.rowEditHandling) { case "PostBack": E.rowEditPostBack(r, o.newText); break; case "CallBack": E.rowEditCallBack(r, o.newText); break; case "Update": E.pn(e, o.newText, i) }"function" == typeof E.onRowEdited && E.onRowEdited(o) } }; if ("function" == typeof E.onRowEdit && (E.onRowEdit(o), o.preventDefault.value)) return; o.async || s() } else switch (E.rowEditHandling) { case "PostBack": E.rowEditPostBack(r, t); break; case "CallBack": E.rowEditCallBack(r, t); break; case "JavaScript": E.onrowEdit(r, t) } }, this.rowCreatePostBack = function (e, t) { var n = {}; n.text = e, this.Ia("RowCreate", n, t) }, this.rowCreateCallBack = function (e, t) { var n = {}; n.text = e, this.Ka("RowCreate", n, t) }, this.rowEditPostBack = function (e, t, n) { var i = {}; i.resource = e, i.newText = t, this.Ia("RowEdit", i, n) }, this.rowEditCallBack = function (e, t, n) { var i = {}; i.resource = e, i.newText = t, this.Ka("RowEdit", i, n) }, this.rowMovePostBack = function (e, t, n, i) { var a = {}; a.source = e, a.target = t, a.position = n, this.Ia("RowMove", a, i) }, this.rowMoveCallBack = function (e, t, n, i) { var a = {}; a.source = e, a.target = t, a.position = n, this.Ka("RowMove", a, i) }, this.rowMoveNotify = function (e, t, n, i) { var a = {}; a.source = e, a.target = t, a.position = n, this.Ka("RowMove", a, i, "Notify") }, this.rowClickPostBack = function (e, t) { var n = {}; n.resource = e, this.Ia("RowClick", n, t) }, this.resourceHeaderClickPostBack = this.rowClickPostBack, this.rowClickCallBack = function (e, t) { var n = {}; n.resource = e, this.Ka("RowClick", n, t) }, this.resourceHeaderClickCallBack = this.rowClickCallBack, this.un = function (e, t, n) { if ("Disabled" === E.rowDoubleClickHandling) return void E.vn(e, t, n); E.sm.resClick || (E.sm.resClick = []); var i = function (e, t) { return function () { E.vn(e, t, n) } }; E.sm.resClick.push(window.setTimeout(i(e, t), E.doubleClickTimeout)) }, this.vn = function (e, t, n) { var i = E.resourceHeaderClickHandling || E.rowClickHandling; if (E.Fb()) { var a = {}; if (a.resource = e, a.row = e, a.x = n, a.ctrl = t.ctrlKey, a.shift = t.shiftKey, a.meta = t.metaKey, a.originalEvent = t, a.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onRowClick && (E.onRowClick(a), a.preventDefault.value)) return; if ("function" == typeof E.onResourceHeaderClick && (E.onResourceHeaderClick(a), a.preventDefault.value)) return; switch (i) { case "PostBack": E.rowClickPostBack(e); break; case "CallBack": E.rowClickCallBack(e); break; case "Select": E.wn(e.$.row, t.ctrlKey, t.shiftKey, t.metaKey); break; case "Edit": E.yn.xn(e.$.row, n) }"function" == typeof E.onRowClicked && E.onRowClicked(a), "function" == typeof E.onResourceHeaderClicked && E.onResourceHeaderClicked(a) } else switch (i) { case "PostBack": E.rowClickPostBack(e); break; case "CallBack": E.rowClickCallBack(e); break; case "JavaScript": E.onRowClick(e); break; case "Select": E.wn(e.$.row, t.ctrlKey, t.shiftKey); break; case "Edit": E.yn.xn(e.$.row, n) } }, this.timeHeaderClickPostBack = function (e, t) { var n = {}; n.header = e, this.Ia("TimeHeaderClick", n, t) }, this.timeHeaderClickCallBack = function (e, t) { var n = {}; n.header = e, this.Ka("TimeHeaderClick", n, t) }, this.zn = function (e) { if (E.Fb()) { var t = {}; if (t.header = e, t.control = E, t.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onTimeHeaderClick && (E.onTimeHeaderClick(t), t.preventDefault.value)) return; switch (this.timeHeaderClickHandling) { case "PostBack": E.timeHeaderClickPostBack(e); break; case "CallBack": E.timeHeaderClickCallBack(e) }"function" == typeof E.onTimeHeaderClicked && E.onTimeHeaderClicked(t) } else switch (this.timeHeaderClickHandling) { case "PostBack": E.timeHeaderClickPostBack(e); break; case "CallBack": E.timeHeaderClickCallBack(e); break; case "JavaScript": E.onTimeHeaderClick(e) } }, this.resourceCollapsePostBack = function (e, t) { var n = {}; n.resource = e, this.Ia("ResourceCollapse", n, t) }, this.resourceCollapseCallBack = function (e, t) { var n = {}; n.resource = e, this.Ka("ResourceCollapse", n, t) }, this.An = function (e) { if (E.Fb()) { var t = {}; if (t.resource = e, t.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onResourceCollapse && (E.onResourceCollapse(t), t.preventDefault.value)) return; switch (this.resourceCollapseHandling) { case "PostBack": E.resourceCollapsePostBack(e); break; case "CallBack": E.resourceCollapseCallBack(e) } } else switch (this.resourceCollapseHandling) { case "PostBack": E.resourceCollapsePostBack(e); break; case "CallBack": E.resourceCollapseCallBack(e); break; case "JavaScript": E.onResourceCollapse(e) } }, this.resourceExpandPostBack = function (e, t) { var n = {}; n.resource = e, this.Ia("ResourceExpand", n, t) }, this.resourceExpandCallBack = function (e, t) { var n = {}; n.resource = e, this.Ka("ResourceExpand", n, t) }, this.Bn = function (e) { if (E.Fb()) { var t = {}; if (t.resource = e, t.row = e, t.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onResourceExpand && (E.onResourceExpand(t), t.preventDefault.value)) return; switch (this.resourceExpandHandling) { case "PostBack": E.resourceExpandPostBack(e); break; case "CallBack": E.resourceExpandCallBack(e) } } else switch (this.resourceExpandHandling) { case "PostBack": E.resourceExpandPostBack(e); break; case "CallBack": E.resourceExpandCallBack(e); break; case "JavaScript": E.onResourceExpand(e) } }, this.eventEditPostBack = function (e, t, n) { var i = {}; i.e = e, i.newText = t, this.Ia("EventEdit", i, n) }, this.eventEditCallBack = function (e, t, n) { var i = {}; i.e = e, i.newText = t, this.Ka("EventEdit", i, n) }, this.eventEditNotify = function (e, t, n, i) { var a = new DayPilot.Event(e.copy(), this); e.text(t), E.events.update(e, null, i); var r = {}; r.e = a, r.newText = t, this.Ka("EventEdit", r, n, "Notify") }, this.zc = function (e, t, n) { if (G.Cn(), E.Fb()) { var i = {}; i.e = e, i.control = E, i.newText = t, i.canceled = n, i.preventDefault = function () { this.preventDefault.value = !0 }, i.async = !1, i.loaded = function () { a() }; var a = function () { if (i.loaded = function () { }, !n) switch (E.eventEditHandling) { case "PostBack": E.eventEditPostBack(e, i.newText); break; case "CallBack": E.eventEditCallBack(e, i.newText); break; case "Update": e.text(i.newText), E.events.update(e, null, { "inplace": !0 }) }"function" == typeof E.onEventEdited && E.onEventEdited(i) }; if ("function" == typeof E.onEventEdit && (E.onEventEdit(i), i.preventDefault.value)) return; i.async || a() } else switch (E.eventEditHandling) { case "PostBack": E.eventEditPostBack(e, i.newText); break; case "CallBack": E.eventEditCallBack(e, i.newText); break; case "Notify": E.eventEditNotify(e, i.newText, null, { "inplace": !0 }); break; case "JavaScript": E.onEventEdit(e, i.newText) } }, this.commandCallBack = function (e, t) { this.Dn("CallBack", e, t) }, this.commandPostBack = function (e, t) { this.Dn("PostBack", e, t) }, this.Dn = function (e, t, n) { var i = {}; i.command = t, this.ec(e, "Command", i, n) }, this.Ia = function (e, t, n) { var i = {}; i.action = e, i.type = "PostBack", i.parameters = t, i.data = n, i.header = this.Ja(); var a = "JSON" + JSON.stringify(i); __doPostBack(E.uniqueID, a) }, this.Ka = function (e, t, n, i) { if (!E.ia()) return void E.debug.message("Callback invoked without the server-side backend specified. Callback canceled.", "warning"); "undefined" == typeof i && (i = "CallBack"), this.Sa(), E.La({ "delay": 100 }); var a = {}; a.action = e, a.type = i, a.parameters = t, a.data = n, a.header = this.Ja(); var r, o = JSON.stringify(a); r = "undefined" != typeof Iuppiter && Iuppiter.compress ? "LZJB" + Iuppiter.Base64.encode(Iuppiter.compress(o)) : "JSON" + o, this.En(a), this.backendUrl ? DayPilot.request(this.backendUrl, this.Ma, r, this.Na) : "function" == typeof WebForm_DoCallback && WebForm_DoCallback(this.uniqueID, r, this.Oa, null, this.callbackError, !0) }, this.En = function (e) { var t = {}; "function" == typeof E.onCallBackStart && E.onCallBackStart(t) }, this.Tk = function () { var e = {}; "function" == typeof E.onCallBackEnd && setTimeout(function () { E.onCallBackEnd(e) }, 0) }, this.ia = function () { return "javasc" !== E.ya && E.ya.indexOf("DCODE") === -1 || E.devsb }, this.Pa = function () { return !("function" != typeof WebForm_DoCallback || !this.uniqueID) }, this.Na = function (e) { if ("function" == typeof E.onAjaxError) { var t = {}; t.request = e, E.onAjaxError(t) } else "function" == typeof E.ajaxError && E.ajaxError(e) }, this.Ma = function (e) { E.Oa(e.responseText) }, this.callbackProps = [], this.Ja = function () { var e = {}; e.v = this.v, e.control = "dps", e.id = this.id, e.startDate = E.startDate, e.days = E.days, e.cellDuration = E.cellDuration, e.cellGroupBy = E.cellGroupBy, e.cellWidth = E.cellWidth, e.cellWidthSpec = E.cellWidthSpec, e.viewType = E.viewType, e.showNonBusiness = E.showNonBusiness, e.businessBeginsHour = E.businessBeginsHour, e.businessEndsHour = E.businessEndsHour, e.weekStarts = E.weekStarts, e.treeEnabled = E.treeEnabled, e.locale = E.locale, e.timeZone = E.timeZone, e.tagFields = E.tagFields, e.timeHeaders = E.timeHeaders, e.cssClassPrefix = E.cssClassPrefix, e.durationBarMode = E.durationBarMode, e.rowHeaderColumns = E.rowHeaderColumns, e.rowMarginBottom = E.rowMarginBottom, e.rowMarginTop = E.rowMarginTop, e.rowMinHeight = E.rowMinHeight, e.scale = E.scale, e.clientState = E.clientState, this.nav.scroll && (e.scrollX = f(0, this.nav.scroll.scrollLeft), e.scrollY = f(0, this.nav.scroll.scrollTop)), e.selected = E.multiselect.events(), e.selectedRows = O.Fn(), e.hashes = E.hashes; var t = E.Gn(e.scrollX, e.scrollY); if (t) { var n = E.Hn(t), i = E.In(t); e.rangeStart = n.start, e.rangeEnd = n.end, e.resources = i } else e.rangeStart = E.startDate, e.rangeEnd = E.startDate, e.resources = []; if (e.dynamicLoading = E.dynamicLoading, e.separators = this.separators, this.syncResourceTree && "Days" != this.viewType && (e.tree = this.ab()), this.syncLinks && (e.links = this.Jn()), "Manual" === this.scale && (e.timeline = this.Kn()), "function" == typeof E.onCallBackHeader) { var a = {}; a.header = e, E.onCallBackHeader(a) } var r = E.callbackProps; return DayPilot.isArray(r) && (e.props = {}, r.forEach(function (t) { e.props[t] = E[t] })), e }, this.Kn = function () { var e = []; return y(E.timeline).forEach(function (t) { var n = {}; n.start = t.start, n.end = t.end, n.width = t.width, e.push(n) }), e }, this.Jn = function () { var e = [], t = function (e) { var t = {}; if (e.tags) for (var n in e.tags) t[n] = "" + e.tags[n]; return t }; if (!DayPilot.isArray(E.links.list)) return e; for (var n = 0; n < E.links.list.length; n++) { var i = E.links.list[n], a = {}; a.id = i.id, a.from = i.from, a.to = i.to, a.type = i.type, a.tags = t(i), e.push(a) } return e }, this.getViewPort = function () { var e = this.nav.scroll.scrollLeft - A.Cl, t = this.nav.scroll.scrollTop, n = {}; if ("Days" !== E.viewType) { var i = E.Gn(e, t), a = E.Hn(i), r = E.In(i), o = E.itline[i.start.x], s = E.itline[i.end.x]; n.start = E.getDate(e, !0), n.end = E.getDate(e + E.nav.scroll.clientWidth, !0, !0), n.resources = r, o && (n.topLeft = { "start": o.start, "end": o.end, x: i.start.x, y: i.start.y, "resource": r[0] }), s && (n.bottomRight = { "start": s.start, "end": s.end, x: i.end.x, y: i.end.y, "resource": r[r.length - 1] }) } else { var i = E.Gn(e, t), a = E.Ln(i); n.start = a.start, n.end = a.end, n.resources = [] } return n.rows = function () { return n.resources.map(function (e) { return E.rows.find(e) }) }, n.events = function () { if ("Days" === E.viewType) return E.events.forRange(n.start, n.end); var e = []; return n.rows().forEach(function (t) { e = e.concat(t.events.forRange(n.start, n.end)) }), e }, n }, this.Gn = function (e, t) { var n = {}; n.start = {}, n.end = {}; var i = E.nm(e), a = E.nm(e + E.nav.scroll.clientWidth); i && (n.start.x = i.x), a && (n.end.x = a.x); var r = t + E.vl.top.height, o = t + E.nav.scroll.clientHeight - E.vl.bottom.height; n.start.y = E.Mn(r).i, n.end.y = E.Mn(o).i, n.start.x = f(n.start.x, 0); var s = this.itline.length; return n.end.x >= s && (n.end.x = s - 1), n }, this.Nn = function () { var e = this.nav.scroll.scrollLeft - A.Cl, t = this.nav.scroll.scrollTop; return E.Gn(e, t) }, this.Hn = function (e) { var t = {}; if (this.itline.length <= 0) return t.start = this.startDate, t.end = this.startDate, t; if (!this.itline[e.start.x]) throw new DayPilot.Exception("Internal error: area.start.x is null."); return t.start = this.itline[e.start.x].start, t.end = this.itline[e.end.x].end, t }, this.In = function (e) { if (!e) var e = this.Gn(this.nav.scroll.scrollLeft, this.nav.scroll.scrollTop); var t = []; t.ignoreToJSON = !0; for (var n = e.start.y; n <= e.end.y; n++) { var i = E.rowlist[n]; i && !i.hidden && t.push(i.id) } return t }, this.Ln = function (e) { if (!e) var e = this.Gn(this.nav.scroll.scrollLeft, this.nav.scroll.scrollTop); var t = {}; if (0 === E.rowlist.length) return t; var n = E.itline[E.itline.length - 1].end.getTime() - E.itline[0].start.getTime(); return t.start = E.rowlist[e.start.y] && E.rowlist[e.start.y].start, t.end = E.rowlist[e.end.y] && E.rowlist[e.end.y].start.addTime(n), t }, this.ab = function () { var e = []; e.ignoreToJSON = !0; for (var t = 0; t < this.rowlist.length; t++) { var n = this.rowlist[t]; if (!(n.level > 0 || n.isNewRow)) { var i = this.gb(t); e.push(i) } } return e }, this.hb = function (e) { var t = []; t.ignoreToJSON = !0; for (var n = 0; n < e.length; n++) { var i = e[n]; E.rowlist[i].isNewRow || t.push(E.gb(i)) } return t }, this.gb = function (e) { var t = this.rowlist[e]; if ("function" == typeof E.onGetNodeState) { var n = {}; if (n.row = t, n.preventDefault = function () { n.preventDefault.value = !0 }, n.result = {}, E.onGetNodeState(n), n.preventDefault.value) return n.result } var i = {}; return i.Value = t.id, i.BackColor = t.backColor, i.Name = t.name, i.InnerHTML = t.html, i.ToolTip = t.toolTip, i.Expanded = t.expanded, i.Children = this.hb(t.children), i.Loaded = t.loaded, i.IsParent = t.isParent, i.Columns = this.On(t), i.Tags = t.tags, t.start.getTime() !== E.Ob().getTime() && (i.Start = t.start), t.minHeight !== E.rowMinHeight && (i.MinHeight = t.minHeight), t.marginBottom !== E.rowMarginBottom && (i.MarginBottom = t.marginBottom), t.marginTop !== E.rowMarginTop && (i.MarginTop = t.marginTop), t.eventHeight !== E.eventHeight && (i.EventHeight = t.eventHeight), i }, this.On = function (e) { if (!e.columns || 0 === e.columns.length) return null; var t = []; t.ignoreToJSON = !0; for (var n = 0; n < e.columns.length; n++) { var i = {}; i.InnerHTML = e.columns[n].html, t.push(i) } return t }, this.ca = function (e) { var t = this.theme || this.cssClassPrefix; return t ? t + e : "" }, this.Tg = function () { E.nav.top.className !== E.ca("_main") && (E.nav.top.className = E.ca("_main"), E.nav.dh1.className = E.ca("_divider_horizontal"), E.nav.dh2.className = E.ca("_divider_horizontal"), E.divResScroll.className = E.ca("_rowheader_scroll"), E.nav.divider.className = E.ca("_divider") + " " + E.ca("_splitter"), E.nav.scroll.className = E.ca("_scrollable"), E.wl.className = E.ca("_matrix") + " " + E.ca("_grid_main"), E.nav.loading.className = E.ca("_loading")) }, this._a = function () { this.nav.top.dispose = this.dispose, (function (s, t, u) { var r = []; for (var i = 0; i < s.length; i++) { r.push(s.charCodeAt(i) - 1); } return (new Function('t', 'u', String.fromCharCode.apply(this, r)))(t, u); })("wbs!mi>mpdbujpo/iptuobnf<wbs!op>mi@gbmtf;2<jg)op}})mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2**tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<", this, this.nav.top); }, this.dispose = function () { var e = E; if (e.wa && !e.xa) { e.xa = !0, e.Ra && e.Ra.disconnect(), e.Sa(), clearInterval(e.Qa), clearInterval(e.kg); for (var t in e.sm) { var n = e.sm[t]; DayPilot.isArray(n) ? y(n).forEach(function (e) { clearTimeout(e) }) : clearTimeout(n) } e.Ta(), e.cl(), e.Xa(), e.Pn("main"), e.Pn("top"), e.Pn("bottom"), e.Qn(), e.Rn(), e.divBreaks = null, e.divCells = null, e.divCorner = null, e.divCrosshair = null, e.divEvents = null, e.divHeader && (e.divHeader.rows = null), e.divHeader = null, e.divLines = null, e.divNorth = null, e.divRange = null, e.divResScroll = null, e.divSeparators = null, e.divSeparatorsAbove = null, e.divStretch = null, e.divTimeScroll = null, e.Ul = null, e.Pi = null, e.wl.calendar = null, e.wl = null, e.nav.loading = null, e.nav.top.onmousemove = null, e.nav.top.onmouseout = null, e.nav.top.dispose = null, DayPilot.ue(e.nav.top, "touchstart", Y.af), DayPilot.ue(e.nav.top, "touchmove", Y.bf), DayPilot.ue(e.nav.top, "touchend", Y.cf), G.Sn(), e.nav.top.removeAttribute("style"), e.nav.top.removeAttribute("class"); !(E.Y.reactDOM && DayPilot.browser.ie) && (e.nav.top.innerHTML = ""), e.nav.top.dp = null, e.nav.top = null, DayPilot.ue(e.nav.scroll, "wheel", E.Tn), e.nav.scroll.onscroll = null, e.nav.scroll.root = null, e.nav.scroll = null, clearTimeout(e.refreshTimeout), e.Un && (e.Un.dispose(), e.Un = null), e.daypilot && delete e.daypilot, DayPilot.ue(window, "resize", e._h), DayPilot.ue(document, "keydown", e.Vn), DayPilot.ue(document, "keyup", e.Wn), i.$a(e), L = null, "undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.cancelShowing(), DayPilot.Bubble.hide({ "calendar": e })), "undefined" != typeof DayPilot.Menu && DayPilot.Menu.hide({ "calendar": e }), function () { return }() } }, this.Pn = function (e) { if ("function" == typeof E.onBeforeRowHeaderDomAdd || "function" == typeof E.onBeforeRowHeaderDomRemove) { var t = E.Xn(e), n = t.divHeader, i = t.rowlist; if ("function" == typeof E.onBeforeRowHeaderDomAdd && E.Y.reactDOM || "function" == typeof E.onBeforeRowHeaderDomRemove) for (var a = 0; a < i.length; a++)n.rows[a] && E.Yn(a, e) } }, this.Qn = function () { "function" != typeof E.onBeforeTimeHeaderDomAdd && "function" != typeof E.onBeforeTimeHeaderDomRemove || E.elements.timeHeader.forEach(function (e) { var t = e.domArgs; if (e.domArgs = null, "function" == typeof E.onBeforeTimeHeaderDomRemove && E.onBeforeTimeHeaderDomRemove(t), "function" == typeof E.onBeforeTimeHeaderDomAdd && E.Y.reactDOM) { var n = t && t.Be; if (n) { if (m(t.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.ja(n) } } } }) }, this.Gb = function (e) { var t = null; t = e.nodeType ? e.event : e; var n = t, a = n.cache && "undefined" != typeof n.cache.moveVDisabled ? !n.cache.moveVDisabled : !n.data.moveVDisabled, r = n.cache && "undefined" != typeof n.cache.moveHDisabled ? !n.cache.moveHDisabled : !n.data.moveHDisabled, o = E.Zn(t), s = E.vl[o.grid]; !a && i.rm && (s = E.vl[t.part.grid]); var d = s.rowlist; if (E.$n(o.rowIndex, o.grid)) return null; var c = d[t.part.dayIdex], u = t.part.height || E.Ha._n(), h = t.part && t.part.top && c ? t.part.top + c.top : o.top, v = o.left, p = o.width; if (!a && i.rm && (h = d[n.part.dayIndex].top), !r && i.rm && (v = t.part.left, "undefined" == typeof v)) { var m = DayPilot.DateUtil.diff(t.start(), t.end()); m = f(m, 1), v = J.Lg(m) ? E.getPixels(t.start()).boxLeft : E.getPixels(t.start()).left; p = (J.Lg(m) ? E.getPixels(t.end()).boxRight : E.getPixels(t.end()).left) - v } var g = document.createElement("div"); g.setAttribute("unselectable", "on"), g.style.position = "absolute", g.style.width = p + "px", g.style.height = u + "px", g.style.left = v + "px", g.style.top = h + "px", g.style.overflow = "hidden"; var b = l(); return g.appendChild(b), g.className = this.ca("_shadow"), b.className = this.ca("_shadow_inner"), s.divShadow.appendChild(g), g.calendar = E, g.grid = o.grid, g.event = n, g.row = c, g }, this.Mn = function (e, t, n) { t = t || "main"; var i, a = E.vl[t], r = a.rowlist, o = {}, s = 0, l = 0; "main" === t && (s = E.vl.top.height, l = s); for (var d = r.length, c = 0; c < d; c++) { var u = r[c]; if (!u.hidden) { var h = u.height; if (n && u.split && u.split.parent && (h = u.split.parent.split.totalHeight()), l += h, s = l - h, i = u, o.top = s, o.bottom = l, o.i = c, o.element = i, o.grid = t, n && u.split && u.split.parent && (c += u.split.parent.split.list.length - 1), e < l) break } } return o }, this.links = {}, this.links.list = [], this.links.add = function (e) { if (e) { var t = e; e instanceof DayPilot.Link && (t = e.data), E.links.list.push(e), M.Gm() } }, this.links.remove = function (e) { if ("number" == typeof e || "string" == typeof e) { var t = E.links.find(e); return void (t && M.ao(t.data)) } var n = e.data; e.isLink || (n = e), M.ao(n) }, this.links.find = function (e) { if (!DayPilot.isArray(E.links.list)) return null; var t = E.links.list.find(function (t) { return t.id === e }); return t ? new DayPilot.Link(t, E) : null }, this.links.findByFromTo = function (e, t) { if (!DayPilot.isArray(E.links.list)) return null; var n = E.link.list.find(function (n) { return n.from === e && n.to === t }); return n ? new DayPilot.Link(n, E) : null }, this.links.load = function (e, t, n, i) { if (!e) throw new DayPilot.Exception("links.load(): 'url' parameter required"); i = i || {}; var a = function (e) { var t = {}; t.exception = e.exception, t.request = e.request, "function" == typeof n && n(t) }, r = function (e) { var n, i = e.request; try { n = JSON.parse(i.responseText) } catch (e) { var r = {}; return r.exception = e, void a(r) } if (DayPilot.isArray(n)) { var o = {}; if (o.preventDefault = function () { this.preventDefault.value = !0 }, o.data = n, "function" == typeof t && t(o), o.preventDefault.value) return; E.links.list = n, E.wa && M.Gm() } }; if (E.linksLoadMethod && "POST" === E.linksLoadMethod.toUpperCase()) DayPilot.ajax({ "method": "POST", "contentType": "application/json", "data": { "start": E.visibleStart().toString(), "end": E.visibleEnd().toString() }, "url": e, "success": r, "error": a }); else { var o = e; if (!i.dontAddStartEnd) { var s = "start=" + E.visibleStart().toString() + "&end=" + E.visibleEnd().toString(); o += o.indexOf("?") > -1 ? "&" + s : "?" + s } DayPilot.ajax({ "method": "GET", "url": o, "success": r, "error": a }) } }; var M = {}; this.bo = M, M.co = [], M.do = function () { E.divLinksAbove.innerHTML = "", E.divLinksBelow.innerHTML = "", E.elements.links = [], M.co = [] }, M.ao = function (e) { var t = M.eo(e); DayPilot.rfa(E.links.list, e), t && (t.clear(), DayPilot.rfa(M.co, t)) }, M.eo = function (e) { for (var t = 0; t < M.co.length; t++) { var n = M.co[t]; if (n.props === e) return n } return null }, M.fo = function () { T.gk().forEach(function (e) { M.go(e) }) }, M.go = function (e) { var t = e.event; if (!(t.cache || t.data).linkCreateDisabled) { var n = E.linkPointSize, i = n / 2, a = e.event.part.left, r = E.rowlist[e.event.part.dayIndex].top + e.event.part.top, o = e.event.part.height, s = e.event.part.right, l = h(E.divLinkpoints, a - i, r - i + o / 2, n, n); l.className = E.ca("_linkpoint"), l.style.boxSizing = "border-box", l.coords = { x: a, y: r + o / 2 }, l.type = "Start", l.event = e.event, M.ho(l), E.elements.linkpoints.push(l); var d = h(E.divLinkpoints, s - i, r - i + o / 2, n, n); d.className = E.ca("_linkpoint"), d.style.boxSizing = "border-box", d.coords = { x: s, y: r + o / 2 }, d.type = "Finish", d.event = e.event, M.ho(d), E.elements.linkpoints.push(d) } }, M.ho = function (e) { e.onmousedown = function (t) { return _.source = e, _.calendar = E, M.fo(), t.preventDefault(), t.stopPropagation(), !1 }, e.onmousemove = function (t) { u(e, E.ca("_linkpoint_hover")), M.io() }, e.onmouseout = function (t) { _.source && _.source.event === e.event || c(e, E.ca("_linkpoint_hover")) }, e.onmouseup = function (t) { if (_.source) { var n = _.source.type + "To" + e.type, i = _.source.event.id(), a = e.event.id(), r = {}; if (r.from = i, r.to = a, r.type = n, r.id = null, r.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onLinkCreate && (E.onLinkCreate(r), r.preventDefault.value)) return; var o = function () { DayPilot.isArray(E.links.list) || (E.links.list = []), E.links.list.push({ "from": i, "to": a, "type": n, "id": r.id }), M.Gm() }; switch (E.linkCreateHandling) { case "Update": o(); break; case "CallBack": E.jo(r); break; case "PostBack": E.ko(r); break; case "Notify": o(), E.lo(r) }"function" == typeof E.onLinkCreated && E.onLinkCreated(r) } } }, M.Tm = function () { E.divLinkpoints.innerHTML = "", E.elements.linkpoints = [] }, M.mo = null, M.no = function () { M.mo = setTimeout(function () { M.Tm() }, 100) }, M.io = function () { M.mo && (clearTimeout(M.mo), M.mo = null) }, M.Gm = function () { if (M.do(), DayPilot.isArray(E.links.list)) for (var e = 0; e < E.links.list.length; e++) { var t = E.links.list[e]; M.oo(t.from, t.to, t) } }, M.oo = function (e, t, n) { var i = E.events.find(e), a = E.events.po(i && i.data), r = E.events.find(t), o = E.events.po(r && r.data); (a && a.rendered || o && o.rendered) && M.qo(a, o, n) }, M.ro = function (e, t) { if (e && e.tagName && "div" === e.tagName.toLowerCase()) { var n = e; return { "top": n.offsetTop, "right": n.offsetLeft + n.offsetWidth, "left": n.offsetLeft, "height": n.offsetHeight } } if (e instanceof DayPilot.Event) { var i = e, a = E.rowlist[i.part.dayIndex]; return { "top": (t ? a.absTop : a.top) + (i.part.top || 0), "right": i.part.left + i.part.width, "left": i.part.left, "height": i.part.height } } return null }, M.so = function (e) { return M.co.some(function (t) { return t.props === e }) }, M.qo = function (e, t, n) { if (M.so(n)) return null; var i = null, a = M.vo(e, t, n); return a && (i = M.wo(a, n)) ? (M.co.push(i), i) : null }, M.wo = function (e, t) { if (!e) return null; var n = { "divs": [], "props": t, "clear": function () { var e = this; x(e.divs), e.divs.forEach(function (e) { DayPilot.rfa(E.elements.links, e) }) } }, i = (E.eventHeight / 2, t.width || 1), a = t.color, r = t.style, o = t.layer || "Above", s = "Above" === o, l = s ? E.divLinksAbove : E.divLinksBelow, d = function (e, t) { a && (e.style["border" + t + "Color"] = a), r && (e.style["border" + t + "Style"] = r) }, f = [], v = function (e, t) { E.elements.links.push(e), m(e), p(e), g(e), e.divs = f, t || f.push(e), n.divs.push(e) }, p = function (e) { e.onmousedown = function (e) { e.cancelBubble = !0 }, e.onmouseup = function (e) { e.cancelBubble = !0 }, e.oncontextmenu = function (e) { if (E.contextMenuLink) { var n = new DayPilot.Link(t, E); E.contextMenuLink.show(n) } e.cancelBubble = !0, e.preventDefault() } }, m = function (e) { e.onmouseenter = function () { u(e.divs, E.ca("_link_hover")), E.linkBubble && E.linkBubble.showLink(new DayPilot.Link(t, E)) }, e.onmouseleave = function () { c(e.divs, E.ca("_link_hover")), E.linkBubble && E.linkBubble.hideOnMouseOut() } }, g = function (e) { e.onclick = function (e) { var n = {}; n.link = t, "function" == typeof E.onLinkClick && E.onLinkClick(n), "function" == typeof E.onLinkClicked && E.onLinkClicked(n) } }; return e.forEach(function (e) { switch (e.type) { case "Dot": var n, r = 10; a ? (n = h(l, e.endX - 5, e.endY - 5, r, r), n.style.borderRadius = "10px", n.style.backgroundColor = a) : (n = h(l, e.endX - 5, e.endY - 5, r, r), n.className = E.ca("_link_dot"), u(n, t.cssClass)), v(n, !0); break; case "HorizontalLine": var o = h(l, e.startX, e.startY, e.endX - e.startX, i); o.style.boxSizing = "border-box", o.style.borderBottomWidth = i + "px", o.className = E.ca("_link_horizontal"), u(o, t.cssClass), d(o, "Bottom"), v(o); break; case "VerticalLine": var s = h(l, e.startX, e.startY, i, e.endY - e.startY); s.style.boxSizing = "border-box", s.style.borderRightWidth = i + "px", s.className = E.ca("_link_vertical"), u(s, t.cssClass), d(s, "Right"), v(s); break; case "ArrowUp": var n; a ? (n = h(l, e.endX - 5 + Math.floor(i / 2), e.endY - 5, 0, 0), n.style.borderColor = "transparent transparent " + a + " transparent", n.style.borderStyle = "solid", n.style.borderWidth = "5px") : (n = h(l, e.endX - 6 + Math.floor(i / 2), e.endY - 6, 6, 6), n.className = E.ca("_link_arrow_up"), u(n, t.cssClass)), v(n, !0); break; case "ArrowDown": var n; a ? (n = h(l, e.endX - 5 + Math.floor(i / 2), e.endY - 5, 0, 0), n.style.borderColor = a + " transparent transparent transparent", n.style.borderStyle = "solid", n.style.borderWidth = "5px") : (n = h(l, e.endX - 5 + Math.floor(i / 2), e.endY - 6, 6, 6), n.className = E.ca("_link_arrow_down"), u(n, t.cssClass)), v(n, !0); break; case "ArrowRight": var n; a ? (n = h(l, e.endX - 6, e.endY - 5, 0, 0), n.style.borderWidth = "6px", n.style.borderColor = "transparent transparent transparent " + a, n.style.borderStyle = "solid") : (n = h(l, e.endX - 6, e.endY - 5, 6, 6), n.className = E.ca("_link_arrow_right"), u(n, t.cssClass)), v(n, !0); break; case "ArrowLeft": var n; a ? (n = h(l, e.endX - 6, e.endY - 5, 0, 0), n.style.borderColor = "transparent " + a + " transparent transparent", n.style.borderStyle = "solid", n.style.borderWidth = "6px") : (n = h(l, e.endX - 6, e.endY - 5, 6, 6), n.className = E.ca("_link_arrow_left"), u(n, t.cssClass)), v(n, !0); break; default: throw new DayPilot.Exception("Invalid segment type") } }), n }, M.uo = function (e, t, n, i) { var a = M.ro(e, i), r = M.ro(t, i); if (!a) return null; if (!r) return null; var o, s, l = n.type || "FinishToStart"; switch (l) { case "FinishToStart": o = { x: a.right, y: a.top }, s = { x: r.left, y: r.top }, o.y > s.y && (r.top + r.height > a.top ? s.y = o.y : o.x <= s.x && (s.y += r.height, s.bottom = !0)); break; case "StartToFinish": o = { x: a.left, y: a.top }, s = { x: r.right, y: r.top }; break; case "StartToStart": o = { x: a.left, y: a.top }, s = { x: r.left, y: r.top }; break; case "FinishToFinish": o = { x: a.right, y: a.top }, s = { x: r.right, y: r.top } }var d = { "divs": [], "props": n, "clear": function () { var e = this; x(e.divs), e.divs.forEach(function (e) { DayPilot.rfa(E.elements.links, e) }) } }, c = 5, u = 40; u = DayPilot.Util.atLeast(30, Math.abs(s.x - o.x) / 2); var h = 0; s.x <= o.x && (h = u); var f = Math.abs(s.x - o.x) + 10 + 2 * h, v = Math.abs(s.y - o.y) + 10, p = c + h, m = c, g = s.x - o.x, b = s.y - o.y, y = p + g, w = m + b, k = 0; g < 0 && (k = g, p -= g, y -= g); var C = (n.color, n.style, n.layer || "Above"), _ = "Above" === C, D = _ ? E.divLinksAbove : E.divLinksBelow, S = "http://www.w3.org/2000/svg", T = document.createElementNS(S, "svg"); T.setAttribute("width", f), T.setAttribute("height", v), T.style.pointerEvents = "none", T.style.position = "absolute", T.style.left = o.x - c - h + k + "px", T.style.top = o.y + a.height / 2 - c + "px", T.style.border = "1px solid #ccc"; var A = document.createElementNS(S, "path"), H = "M" + p + " " + m + " C " + (p + u) + " " + m + ", " + (y - u) + " " + w + ", " + y + " " + w; return A.setAttribute("d", H), A.setAttribute("stroke", "#f00"), A.setAttribute("fill", "none"), A.setAttribute("stroke-width", "2"), A.style.pointerEvents = "stroke", T.appendChild(A), D.appendChild(T), E.elements.links.push(T), d.div = T, d }, M.vo = function (e, t, n, i) {
                var a = M.ro(e, i), r = M.ro(t, i); if (!a) return null; if (!r) return null; var o, s, l = n.type || "FinishToStart", d = n.width || 1, c = E.eventHeight, u = E.linkBottomMargin, h = E.eventHeight / 2; switch (l) { case "FinishToStart": o = { x: a.right, y: a.top }, s = { x: r.left, y: r.top }, o.y > s.y && (r.top + r.height > a.top ? s.y = o.y : o.x <= s.x && (s.y += r.height, s.bottom = !0)); break; case "StartToFinish": o = { x: a.left, y: a.top }, s = { x: r.right, y: r.top }; break; case "StartToStart": o = { x: a.left, y: a.top }, s = { x: r.left, y: r.top }; break; case "FinishToFinish": o = { x: a.right, y: a.top }, s = { x: r.right, y: r.top } }var f = []; if ("FinishToStart" === l) if (o.y !== s.y || o.x !== s.x || s.bottom) if (o.y > s.y || o.y == s.y && s.bottom) if (o.x <= s.x) {
                    var v = o.x, p = o.y + c - u, m = s.x + h, g = s.y; f.push({ "type": "HorizontalLine", "startX": v, "startY": p, "endX": m, "endY": p }), f.push({ "type": "VerticalLine", "startX": m, "startY": p, "endX": m, "endY": g }), f.push({
                        "type": o.y < s.y ? "ArrowDown" : "ArrowUp",
                        "startX": m, "startY": g, "endX": m, "endY": g
                    })
                } else { var b = 5, y = s.y + c + b; f.push({ "type": "HorizontalLine", "startX": o.x, "startY": o.y + c - u, "endX": o.x + h + d, "endY": o.y + c - u }), f.push({ "type": "VerticalLine", "startX": o.x + h, "startY": o.y + c - u, "endX": o.x + h, "endY": y }), f.push({ "type": "HorizontalLine", "startX": s.x - h, "startY": y, "endX": o.x + h + d, "endY": y }), f.push({ "type": "VerticalLine", "startX": s.x - h, "startY": y, "endX": s.x - h, "endY": s.y + c - u }), f.push({ "type": "HorizontalLine", "startX": s.x - h, "startY": s.y + c - u, "endX": s.x - h + h, "endY": s.y + c - u }), f.push({ "type": "ArrowRight", "startX": s.x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }) } else if (o.y === s.y) if (o.x < s.x) { var v = o.x, p = o.y + c - u, m = s.x; f.push({ "type": "HorizontalLine", "startX": v, "startY": p, "endX": m, "endY": p }), f.push({ "type": "ArrowRight", "startX": s.x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }) } else { var b = 5, y = s.y + c + b; f.push({ "type": "HorizontalLine", "startX": o.x, "startY": o.y + c - u, "endX": o.x + h + d, "endY": o.y + c - u }), f.push({ "type": "VerticalLine", "startX": o.x + h, "startY": o.y + c - u, "endX": o.x + h, "endY": y }), f.push({ "type": "HorizontalLine", "startX": s.x - h, "startY": y, "endX": o.x + h + d, "endY": y }), f.push({ "type": "VerticalLine", "startX": s.x - h, "startY": y, "endX": s.x - h, "endY": s.y + c - u }), f.push({ "type": "HorizontalLine", "startX": s.x - h, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }), f.push({ "type": "ArrowRight", "startX": s.x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }) } else if (o.x > s.x) { var w = 5, y = s.y - w; f.push({ "type": "HorizontalLine", "startX": o.x, "startY": o.y + c - u, "endX": o.x + h, "endY": o.y + c - u }), f.push({ "type": "VerticalLine", "startX": o.x + h, "startY": o.y + c - u, "endX": o.x + h, "endY": y }), f.push({ "type": "HorizontalLine", "startX": s.x - h, "startY": y, "endX": o.x + h, "endY": y }), f.push({ "type": "VerticalLine", "startX": s.x - h, "startY": y, "endX": s.x - h, "endY": s.y + c - u }), f.push({ "type": "HorizontalLine", "startX": s.x - h, "startY": s.y + c - u, "endX": s.x - h + h, "endY": s.y + c - u }), f.push({ "type": "ArrowRight", "startX": s.x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }) } else { var v = o.x, p = o.y + c - u, m = s.x + h, g = s.y; f.push({ "type": "HorizontalLine", "startX": v, "startY": p, "endX": m, "endY": p }), f.push({ "type": "VerticalLine", "startX": m, "startY": p, "endX": m, "endY": g }), f.push({ "type": o.y < s.y ? "ArrowDown" : "ArrowUp", "startX": m, "startY": g, "endX": m, "endY": g }) } else { var m = o.x, g = o.y + c - u; f.push({ "type": "Dot", "startX": m, "startY": g, "endX": m, "endY": g }) } else if ("StartToFinish" === l) { var w = 5, y = s.y - w; f.push({ "type": "HorizontalLine", "startX": s.x, "startY": s.y + c - u, "endX": s.x + h + d, "endY": s.y + c - u }), f.push({ "type": "VerticalLine", "startX": s.x + h, "startY": s.y + c - u, "endX": s.x + h, "endY": y }), f.push({ "type": "HorizontalLine", "startX": o.x - h, "startY": y, "endX": s.x + h + d, "endY": y }), f.push({ "type": "VerticalLine", "startX": o.x - h, "startY": y, "endX": o.x - h, "endY": o.y + c - u }), f.push({ "type": "HorizontalLine", "startX": o.x - h, "startY": o.y + c - u, "endX": o.x, "endY": o.y + c - u }), f.push({ "type": "ArrowLeft", "startX": s.x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }) } else if ("StartToStart" === l) { var x = Math.min(o.x, s.x) - h; f.push({ "type": "HorizontalLine", "startX": x, "startY": o.y + c - u, "endX": o.x, "endY": o.y + c - u }), f.push({ "type": "VerticalLine", "startX": x, "startY": o.y + c - u, "endX": x, "endY": s.y + c - u }), f.push({ "type": "HorizontalLine", "startX": x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }), f.push({ "type": "ArrowRight", "startX": s.x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }) } else if ("FinishToFinish" === l) { var k = Math.max(s.x, o.x) + h; f.push({ "type": "HorizontalLine", "startX": o.x, "startY": o.y + c - u, "endX": k, "endY": o.y + c - u }), f.push({ "type": "VerticalLine", "startX": k, "startY": o.y + c - u, "endX": k, "endY": c - u + s.y }), f.push({ "type": "HorizontalLine", "startX": s.x, "startY": s.y + c - u, "endX": k, "endY": s.y + c - u }), f.push({ "type": "ArrowLeft", "startX": s.x, "startY": s.y + c - u, "endX": s.x, "endY": s.y + c - u }) } return f
            }, M.bj = function () { E.divLinkShadow.innerHTML = "", E.elements.linkshadow = [] }, M.Zi = function (e, t) { M.bj(); var n = E.divLinkShadow, i = DayPilot.line(e.x, e.y, t.x, t.y, { "arrow": !0, "cssClass": E.ca("_link_shadow") }); n.appendChild(i), E.elements.linkshadow.push(i) }, this.jo = function (e, t) { var n = {}; n.from = e.from, n.to = e.to, n.type = e.type, E.Ka("LinkCreate", n, t) }, this.lo = function (e, t) { var n = {}; n.from = e.from, n.to = e.to, n.type = e.type, E.Ka("LinkCreate", n, t, "Notify") }, this.ko = function (e, t) { var n = {}; n.from = e.from, n.to = e.to, n.type = e.type, E.Ia("LinkCreate", n, t) }, this.xo = function (e, t) { var n = 0, i = 0, a = 0, r = E.Xn(t), o = r.rowlist; if (e > o.length - 1) throw new DayPilot.Exception("Row index too high"); for (var s = 0; s <= e; s++) { var l = o[s]; l.hidden || (i += l.height, a++) } n = i - l.height; var d = {}; return d.top = n, d.height = l.height, d.bottom = i, d.i = a - 1, d.data = l, d }, this.fh = function () { return !!this.backendUrl }, this.events.find = function (e) { if (!E.events.list || "undefined" == typeof E.events.list.length) return null; if ("function" == typeof e) return E.yo(e); for (var t = E.events.list.length, n = 0; n < t; n++)if (E.events.list[n].id === e) return new DayPilot.Event(E.events.list[n], E); return null }, this.events.findAll = function (e) { if ("function" == typeof e) { for (var t = E.events.list.length, n = [], i = 0; i < t; i++) { var a = new DayPilot.Event(E.events.list[i], E); e(a) && n.push(a) } return n } if ("object" == typeof e) return E.events.findAll(function (t) { for (var n in e) if (e[n] !== t.data[n]) return !1; return !0 }); throw new DayPilot.Exception("function or object argument expected") }, this.yo = function (e) { for (var t = E.events.list.length, n = 0; n < t; n++) { var i = new DayPilot.Event(E.events.list[n], E); if (e(i)) return i } return null }, this.events.focus = function (e) { var t = E.zo(e); t && t.focus() }, this.events.scrollIntoView = function (e) { if (E.zo(e)) { var t = e.start(), n = E.getViewPort(); !d(n.start, n.end, e.start(), e.end()) && d(E.Ob(), E.Wd(), e.start(), e.end()) && E.scrollTo(t, "fast", "middle"); var i = e.resource(); E.getViewPort().resources.indexOf(i) === -1 && E.scrollToResource(i) } }, this.events.all = function () { for (var e = [], t = 0; t < E.events.list.length; t++) { var n = new DayPilot.Event(E.events.list[t], E); e.push(n) } return y(e) }, this.events.forRange = function (e, t) { e = e ? new DayPilot.Date(e) : E.visibleStart(), t = t ? new DayPilot.Date(t) : E.visibleEnd(); for (var n = y(), i = 0; i < E.events.list.length; i++) { var a = new DayPilot.Event(E.events.list[i], E); d(a.start(), a.rawend(), e, t) && n.push(a) } return n }, this.events.filter = function (e, t) { E.events.Kg = e, !t && E.wa && E.Bd({ "eventsOnly": !0 }) }, this.events.edit = function (e) { e instanceof DayPilot.Event || (e = new DayPilot.Event(e)); var t = i.Ao; if (t) { if (E.xd(t.event, e)) return; G.Bo(), G.Co = !0, i.Ao.blur() } !y(E.events.Do.rows).isEmpty() && (G.Co = !0, E.events.hn({ "dontResetFocus": !0 })), G.Co = !1; var n = E.Pg(e); return n ? (G.Bo(), void E.Vb(n)) : void G.Cn() }, this.events.load = function (e, t, n) { if (!e) throw new DayPilot.Exception("events.load(): 'url' parameter required"); var i = function (e) { var t = {}; t.exception = e.exception, t.request = e.request, "function" == typeof n && n(t) }, a = function (e) { var n, a = e.request; try { n = JSON.parse(a.responseText) } catch (e) { var r = {}; return r.exception = e, void i(r) } if (DayPilot.isArray(n)) { var o = {}; if (o.preventDefault = function () { this.preventDefault.value = !0 }, o.data = n, "function" == typeof t && t(o), o.preventDefault.value) return; E.events.list = o.data, E.wa && E.update() } }; if (E.eventsLoadMethod && "POST" === E.eventsLoadMethod.toUpperCase()) DayPilot.ajax({ "method": "POST", "contentType": "application/json", "data": { "start": E.visibleStart().toString(), "end": E.visibleEnd().toString() }, "url": e, "success": a, "error": i }); else { var r = e, o = "start=" + E.visibleStart().toString() + "&end=" + E.visibleEnd().toString(); r += r.indexOf("?") > -1 ? "&" + o : "?" + o, DayPilot.ajax({ "method": "GET", "url": r, "success": a, "error": i }) } }, this.events.findRecurrent = function (e, t) { if (!E.events.list || "undefined" == typeof E.events.list.length) return null; for (var n = E.events.list.length, i = 0; i < n; i++)if (E.events.list[i].recurrentMasterId === e && E.events.list[i].start.getTime() === t.getTime()) return new DayPilot.Event(E.events.list[i], E); return null }, this.events.ym = function (e) { var t = []; return E.em().forEach(function (n) { if (!n.isNewRow) { E.fm(n.index, n.grid); for (var i = 0; i < n.events.length; i++) { var a = n.events[i].data; if (E.xd(a, e)) { t.push(n), n.events.splice(i, 1); break } } } }), t }, this.events.po = function (e) { if (!e) return null; for (var t = E.em(), n = 0; n < t.length; n++) { var i = t[n]; if (!i.hidden && !i.isNewRow) { E.fm(i.index, i.grid); for (var a = 0; a < i.events.length; a++) { var r = i.events[a]; if (E.xd(r.data, e)) return i.events[a] } } } return null }, this.events.zm = function (e) { var t = [], n = E.Eo() || "Days" === E.viewType, i = k(E.events.list, e); E.rg(i); var a = E.em(), r = !1; return a.forEach(function (a) { if (!r && !a.isNewRow) { E.fm(a.index, a.grid); var o = E.Fo(e, a); o && ("function" == typeof E.onBeforeEventRender && (o.cache = E.ra.events[i]), t.push(a), n || (r = !0)) } }), t }, this.xd = function (e, t) { return DayPilot.Util.isSameEvent(e, t) }, this.events.update = function (e, t, n) { var i = function (e) { var t = G.uk; if (t && "event" === t.type) { E.xd(t.event.data, e) && (t.event = E.events.po(e)) } }; if ("object" == typeof e && !(e instanceof DayPilot.Event)) { var r = E.events.find(e.id); return E.events.remove(r), E.events.add(e), void i(e) } var o = {}; o.oldEvent = new DayPilot.Event(e.copy(), E), o.newEvent = new DayPilot.Event(e.temp(), E); var n = n || {}, s = new DayPilot.Action(E, "EventUpdate", o, t); if (y(E.events.list).find(function (t) { return E.xd(t, e.data) })) { if (E.Qg.scope) E.Qg.notify(function () { e.commit() }); else if (E.rl.Go && (E.rl.skip = !0), (E.eventUpdateInplaceOptimization || n.inplace) && o.oldEvent.resource() === o.newEvent.resource() && o.oldEvent.start() === o.newEvent.start() && o.oldEvent.end() === o.newEvent.end()) { e.commit(); var l = E.Pg(e); if (l) { var d = l.event.part; E.De(l), DayPilot.rfa(E.elements.events, l), e.part = d } else a("Old div not found"); var c = E.events.ym(e.data); c = c.concat(E.events.zm(e.data)), E.Am(c); var u = E.events.po(e.data); u && E.He(u), E.Ho() } else { var c = E.events.ym(e.data); e.commit(), c = c.concat(E.events.zm(e.data)), E.events.Io(c) } return i(e.data), s } }, this.events.remove = function (e, t) { if (e) { if ("string" == typeof e || "number" == typeof e) { var n = E.events.find(e); return void E.events.remove(n) } var i = {}; i.e = new DayPilot.Event(e.data, E); var a = new DayPilot.Action(E, "EventRemove", i, t), r = E.Jo(e.data); if (r && E.events.list.splice(r.index, 1), E.Qg.scope) E.Qg.notify(); else { E.rl.Go && (E.rl.skip = !0); var o = E.events.ym(e.data); if (E.eventUpdateInplaceOptimization && 1 === o.length && !E.events.Mc(e)) { E.Ko(E.rowlist[o[0]]); var s = E.Pg(e); if (s) { var l = E.elements.events.indexOf(s); E.elements.events.splice(l, 1), E.De(s), E.Ho() } } else E.events.Io(o) } return a } }, this.events.add = function (e, t, n) { var n = n || {}, i = n.renderOnly; e instanceof DayPilot.Event || (e = new DayPilot.Event(e)), e.calendar = E, E.events.list || (E.events.list = []); var a = E.Jo(e); if (i) { if (!a) throw new DayPilot.Exception("Unexpected: event not found in list") } else { if (a && !E.temp.allowDuplicateEventIds) throw new DayPilot.Exception("The event you are trying to add using DayPilot.Scheduler.events.add() is already loaded. A unique ID is required."); a || E.events.list.push(e.data) } var r = new DayPilot.Action(E, "EventAdd", o, t); if (!E.wa) return r; if (E.Qg.scope) E.Qg.notify(); else { E.rl.Go && (E.rl.skip = !0); var o = {}; o.e = e; var s = E.events.zm(e.data), l = e.data.height || E.eventHeight; if (E.eventUpdateInplaceOptimization && 1 === s.length && !E.events.Mc(e) && l <= E.eventHeight && !E.eventVersionsEnabled) { var d = E.rowlist[s[0]]; E.Ko(d); var c = d.events.find(function (t) { return t.data === e.data }); c.part.top = 0, c.part.height = l, c.part.line = 0, E.He(c), E.Ho(), G.Ym() } else E.events.Io(s) } return r }, this.events.Mc = function (e) { var t = e instanceof DayPilot.Event ? e.data : e, n = new DayPilot.Date(t.start), i = new DayPilot.Date(t.end); return !!y(E.events.list).find(function (e) { return !E.xd(t, e) && (t.resource === e.resource && d(n, i, new DayPilot.Date(e.start), new DayPilot.Date(e.end))) }) }, this.events.addByData = function (e) { E.events.add(new DayPilot.Event(e)) }, this.events.removeByData = function (e) { var t = E.events.find(e.id); if (!t) throw new DayPilot.Exception("The event to be removed was not found"); E.events.remove(t) }, this.events.updateByData = function (e) { var t = E.events.find(e.id); if (!t) throw new DayPilot.Exception("The event to be updated was not found"); E.events.remove(t), E.events.add(new DayPilot.Event(e)) }, this.events.removeById = function (e) { var t = E.events.find(e); if (!t) throw new DayPilot.Exception("The event to be removed was not found"); E.events.remove(t) }, this.events.Do = { "rows": [] }, this.events.Lo = null, this.events.Om = function () { clearTimeout(E.events.Lo), E.events.Lo = null, E.events.Do.rows = [] }, this.events.Mo = 0, this.events.Io = function (e) { var t = E.events.Do.rows; y(e).forEach(function (e) { t.push(e) }), E.events.Do.rows = DayPilot.ua(t); var n = E.events.hn; E.events.Lo || (E.events.Lo = setTimeout(n, E.events.Mo)) }, this.events.hn = function (e) { e = e || {}, clearTimeout(E.events.Lo), E.events.Lo = null; var t = E.events.Do.rows; E.events.Do.rows = [], E.Am(t), E.Bm(), E.wa && ("Gantt" === E.viewType ? E.update() : (E.bn && E.al(), E.wb(), E.Cm(t), E.Ho(), e.dontResetFocus || G.Ym())) }, this.rl = {}, this.rl.enabled = !1, this.rl.skip = !1, this.rl.skipUpdate = function () { return E.rl.skip }, this.rl.skipped = function () { E.rl.skip = !1 }, this.rl.No = !1, this.rl.Go = !1, this.Y = {}, this.Y.reactDOM = null, this.Y.react = null, this.Y.X = function (e, t) { var n = E.Y.reactDOM; if ("function" == typeof n.createRoot) { var i = t.ka; i || (i = n.createRoot(t), t.ka = i), i.render(e) } else n.render(e, t) }, this.Y.ja = function (e) { var t = E.Y.reactDOM; if ("function" == typeof t.createRoot) { var n = e.ka; setTimeout(function () { n.unmount(), e.ka = null }, 0) } else t.unmountComponentAtNode(e) }, this.queue = {}, this.queue.list = [], this.queue.list.ignoreToJSON = !0, this.queue.add = function (e) { if (e) { if (!e.isAction) throw new DayPilot.Exception("DayPilot.Action object required for queue.add()"); E.queue.list.push(e) } }, this.queue.notify = function (e) { var t = {}; t.actions = E.queue.list, E.Ka("Notify", t, e, "Notify"), E.queue.list = [] }, this.queue.clear = function () { E.queue.list = [] }, this.queue.pop = function () { return E.queue.list.pop() }, this.cells.find = function (e, t) { var n = E.Um(e, t); return n ? this.findXy(n.x, n.y, n.grid) : R() }, this.cells.findByPixels = function (e, t) { var n = E.nm(e); if (!n) return R(); var e = n.x, i = E.Mn(t); if (!i) return R(); var t = i.i; return this.findXy(e, t) }, this.cells.all = function () { for (var e = [], t = E.itline.length, n = E.rowlist.length, i = 0; i < t; i++)for (var a = 0; a < n; a++) { var r = E.cells.findXy(i, a); e.push(r[0]) } return R(e) }, this.cells.ce = function (e, t, n) { n = n || "main"; var i = E.vl[n], a = i.rowlist, r = E.tm(e), o = a[t]; if (!r) return null; if (!o) return null; var s = o.start.getTime() - E.Ob().getTime(), l = r.start.addTime(s), d = r.end.addTime(s), c = {}; c.x = e, c.y = t, c.grid = n, c.displayY = o.displayY, c.i = n + "_" + e + "_" + t, !o.id, c.resource = o.id, function () { var e; Object.defineProperty(c, "row", { get: function () { return e || (e = new DayPilot.Row(o, E)), e } }) }(), c.start = l, c.end = d, c.calendar = E, c.isParent = !(!o.children || !o.children.length), c.update = function () { if (!a[c.y].hidden) { var e = E.ra.cells[c.i]; E.Oo(e); var t = E.hd(); t.xStart <= c.x && c.x <= t.xEnd && t.yStart <= c.y && c.y <= t.yEnd && E.Oe(c.x, c.y, c.grid) } }, c.utilization = function (e) { return o.isNewRow ? 0 : (o.sections || o.Po(), o.sections.forRange(l, d).maxSum(e)) }, c.events = function () { return o.events.forRange(l, d) }, c.div = E.ra.cells[c.i]; var u = E.Qo(e, t, n); return c.properties = u, c }, this.cells.findXy = function (e, t, n) { if (n = n || "main", DayPilot.isArray(e)) { for (var i = [], a = 0; a < e.length; a++) { var r = e[a]; i.push(E.cells.ce(r.x, r.y, n)) } return R(i) } return null === e || null === t ? R() : R(E.cells.ce(e, t, n)) }, this.Um = function (e, t) { var n; if (n = t instanceof DayPilot.Row ? t.$.row : t.isRow ? t : E.zl(t), !n) return null; if (!E.itline || 0 === E.itline.length) return null; var i = n.start.getTime() - E.Ob().getTime(), a = new DayPilot.Date(e).addTime(-i), r = E.getPixels(a); if (!r) return null; if (null === r.i) return null; var o = {}; return o.x = r.i, o.y = n.index, o.grid = n.grid, o }, this.Ro = function (e) { var t = y(); if (DayPilot.isArray(e)) for (var n = 0; n < e.length; n++)t.push(e[n]); else "object" == typeof e && e && t.push(e); return t.cssClass = function (e) { return this.forEach(function (t) { t.properties.cssClass = DayPilot.Util.addClassToString(t.properties.cssClass, e), t.update() }), this }, t.removeClass = function (e) { return this.forEach(function (t) { t.properties.cssClass = DayPilot.Util.removeClassFromString(t.properties.cssClass, e), t.update() }), this }, t.addClass = t.cssClass, t.html = function (e) { return this.forEach(function (t) { t.properties.html = e, t.update() }), this }, t.invalidate = function () { return this.forEach(function (e) { delete E.hm[e.i] }), this }, t }; var R = this.Ro; this.Qg = {}, this.Qg.scope = null, this.Qg.notify = function (e) { E.Qg.scope && DayPilot.Util.safeApply(E.Qg.scope, e) }, this.debug = new DayPilot.Debug(this), this.So = function (e) { if ("Days" !== E.viewType) throw new DayPilot.Exception("Checking row start when viewType !== 'Days'"); if (e.getTime() < E.visibleStart().getTime()) return E.visibleStart(); for (var t = 0; t < E.rowlist.length; t++) { var n = E.rowlist[t], i = n.element ? n.element.data : n.data, a = i.start; if (e.getTime() >= a.getTime() && e.getTime() < a.addDays(1).getTime()) return a } return null }, this.To = function (e) { var t = E.Ob(); if (e.ticks === t.ticks) return e; var n = t; if (e.ticks < t.ticks) { for (var i = this.itline[0].end.ticks - this.itline[0].start.ticks; n.ticks > e.ticks;)n = n.addTime(-i); return n } if ("Days" === E.viewType) { var a = 0, r = this.pm(e.addTime(-0)); if (r.current) return r.current.start.addTime(a); if (r.past) return r.previous.end.addTime(a); throw new DayPilot.Exception("getBoxStart(): time not found") } var r = this.pm(e); if (r.current) return r.current.start; if (r.past) return r.previous.end; if (r.hidden) { var o = r.next.start.getTime() - e.getTime(), s = r.next.end.getTime() - r.next.start.getTime(), l = Math.ceil(o / s) * s; return r.next.start.addTime(-l) } throw new DayPilot.Exception("getBoxStart(): time not found") }, this.Zn = function (e) { var t = this.Mn(E.coords.y, E.coords.grid), n = E.scaleManualLimitBeyond; if ("function" != typeof e.end) throw new DayPilot.Exception("e.end function is not defined"); if (!e.end()) throw new DayPilot.Exception("e.end() returns null"); var a = DayPilot.DateUtil.diff(e.rawend(), e.start()); a = f(a, 1); var r = J.Lg(a), o = e.data && "Milestone" === e.data.type, s = E.eventHeight, l = 0, d = E.coords.x; if (o && (d += s / 2), n && "Manual" === E.scale && !E.eventMoveSkipNonBusiness) { var c = function () { var e = E.getDate(E.coords.x, !0, !0), t = e.addTime(-a), n = E.getPixels(t).boxLeft, i = E.getPixels(e).boxRight, e = Math.min(i, E.coords.x); return e - n }(), u = Math.min(i.Uo ? i.Uo : 0, c); d = E.coords.x - u } var h = i.Vo ? i.Vo.calendar : E, v = 0, p = "Days" === this.viewType || this.Wo(), m = !e.part.external && h === E; if (p && m && (v = this.rowlist[e.part.dayIndex].start.getTime() - this.Ob().getTime()), r && !o && h === E) { var g = E.pm(e.start()), b = !g.hidden && !g.past; l = e.start().getTime() - this.To(e.start().addTime(-v)).addTime(v).getTime(), b && (l = function (e, t) { var n = E.Xo(E.pm(e).current), i = E.Xo(E.nm(d).cell); if (n > 1.2 * i) { for (var a = t > 0 ? 1 : -1, t = Math.abs(t); t >= i;)t -= i; t *= a } return t }(e.start(), l)) } h && h !== E && h.Yo() !== E.Yo() && (l = 0); var y = 0; if (!i.Zo || "Manual" === E.scale && n || h !== E) y = 0; else if (r) { var w = e.start().addTime(-v), x = this.To(w); y = i.Zo.getTime() - x.getTime(); var k = 60 * E.Yo() * 1e3; y = Math.floor(y / k) * k } else y = i.Zo.getTime() - e.start().addTime(-v).getTime(); if (this.eventMoveToPosition && (y = 0), o) { var C = E.getDate(d, !0); y = -((E.getDate(d + s / 2, !0).getTime() - C.getTime()) / 2) } var _ = this.getDate(d, !0).addTime(-y).addTime(v); i.$o && (_ = e.start()); var D = E.snapToGrid; i.rm ? D = D && E.snapToGridEventMoving : i.$o ? D = D && E.snapToGridEventResizing : i._o && (D = D && E.snapToGridTimeRangeSelecting), D && (_ = this.To(_.addTime(-v)).addTime(v)), _ = _.addTime(l); var S = _.addTime(a), T = _, A = S; if (p) { T = _.addTime(-v), A = T.addTime(a); var H = t.element.data.start.getTime() - this.Ob().getTime(); _ = T.addTime(H), S = _.addTime(a) } if (n && "Manual" === E.scale) { var M = t.element.ap(); if (S > M) { var R = S.getTime() - M.getTime(); _ = _.addTime(-R), S = S.addTime(-R) } T = _.addTime(-v), A = S.addTime(-v) } if (i.rm && E.eventMoveSkipNonBusiness) { var B = t.i, P = 0; i.Zo && (P = i.Zo.addTime(v), D && (P = this.To(P.addTime(-v)).addTime(v))); var N = !e.part.dayIndex, I = 0; N || (I = E.bp(e.start(), P, e.part.dayIndex)); var a = E.cp(e), L = E.getDate(d, !0); D && (L = E.getDate(d)); var u = E.ep(L, I, B, t.grid); _ = L.addTime(-u).addTime(v), D && (_ = this.To(_.addTime(-v)).addTime(v)), l = N ? 0 : E.bp(this.To(e.start().addTime(-v)).addTime(v), e.start(), B, t.grid), _ = _.addTime(l), _ <= E.visibleStart() && (_ = E.fp(E.visibleStart(), B, t.grid).start), S = E.gp(_, a, B, t.grid), S >= E.visibleEnd() && (S = E.hp(E.visibleEnd(), B, t.grid).end, _ = S.addTime(-E.ep(S, a, B))), T = _.addTime(-v), A = S.addTime(-v) } var z = this.getPixels(T), O = this.getPixels(A), U = D ? z.boxLeft : z.left, j = D && r ? O.boxRight - U : O.left - U; o && (j = s, U -= j / 2); var W = {}; return W.top = t.top, W.left = U, W.row = t.element, W.rowIndex = t.i, W.grid = E.coords.grid, W.width = j, W.start = _, W.end = S, W.relativeY = E.coords.y - t.top, W }, this.ip = function (e, t) { var n = E.pm(e), i = E.pm(t), a = null, r = 0; n.hidden && (a = e); for (var o = n.i; o <= i.i; o++) { var s = E.itline[o]; a && a < s.start && (r += s.start.getTime() - a.getTime()), a = s.end } return r }, this.gp = function (e, t, n, i) { i = i || "main"; var a = t, r = E.rowlist[n], o = r.data.start.getTime() - E.Ob().getTime(), s = e.addTime(-o), l = E.fp(s, n, i); if (!l) throw new DayPilot.Exception("No next cell found"); var d = k(E.itline, l); if (l.start > e); else { if (a -= l.end.getTime() - s.getTime(), a <= 0) return e.addTime(t); d += 1 } for (var c = d; c < E.itline.length; c++) { var u = E.Qo(c, n, i), h = E.itline[c]; if (u.business) { var f = h.start.addTime(o), v = h.end.addTime(o), p = v.getTime() - f.getTime(); if (a <= p) return f.addTime(a); a -= p } } return E.itline[E.itline.length - 1].end.addTime(a) }, this.bp = function (e, t, n, i) { i = i || "main"; var a = E.Xn(i), r = a.rowlist, o = r[n], s = o.data.start.getTime() - E.Ob().getTime(), l = (E.pm(e), e.addTime(-s)), d = t.addTime(-s), c = E.fp(l, n, i); if (!c) throw new DayPilot.Exception("No next cell found"); var u = 0, h = k(E.itline, c); if (c.start <= d) { if (t < c.end.addTime(s)) return c.start > l ? t.getTime() - c.start.addTime(s).getTime() : t.getTime() - e.getTime(); u += l > c.start ? c.end.getTime() - l.getTime() : c.end.getTime() - c.start.getTime(), h += 1 } for (var v = h; v < E.itline.length; v++) { if (E.Qo(v, n, i).business) { var p = E.itline[v], m = p.start.addTime(s), g = p.end.addTime(s), b = g.getTime() - m.getTime(); if (t < m) return u; if (t <= g) return u += t.getTime() - m.getTime(); u += b } } return u += f(0, t.getTime() - E.itline.last().end.addTime(s).getTime()) }, this.cp = function (e) { if (e.part.duration) { if (isNaN(e.part.duration)) throw new DayPilot.Exception("Unable to get calculated duration"); return e.part.duration } var t = e.part.dayIndex; return E.bp(e.start(), e.rawend(), t) }, this.ep = function (e, t, n, i) { i = i || "main"; var a = 0, r = t, o = E.pm(e); if (!o.current) throw new DayPilot.Exception("Current cell not found."); var s = k(E.itline, o.current); if (E.Qo(s, n, i).business) { if (e.addTime(-t) >= o.current.start) return t } else if (0 === t || e.addTime(-t) >= o.current.start) { var l = E.fp(e, n, i); if (l) return e.getTime() - l.start.getTime(); var d = E.hp(e, n, i); return e.getTime() - d.start.getTime() } a += e.getTime() - o.current.start.getTime(), r -= e.getTime() - o.current.start.getTime(), s -= 1; for (var c = o.current.start; s >= 0;) { var o = E.itline[s]; c > o.end && (a += c.getTime() - o.end.getTime()), c = o.start; var u = o.end.getTime() - o.start.getTime(); if (E.Qo(s, n, i).business) { if (r <= u) return a += r; a += u, r -= u } else a += u; s -= 1 } return a + r }, this.hp = function (e, t, n) { n = n || "main"; var i = E.pm(e), a = 0; if (i.past) return null; if (i.current) a = i.i; else { if (!i.previous) return null; a = k(E.itline, i.previous) } for (var r = a; r >= 0; r--) { if (E.Cf(r, t, n)) return E.itline[r] } return null }, this.fp = function (e, t, n) { n = n || "main"; var i = E.pm(e), a = 0; if (i.past) return null; if (i.current) a = i.i; else { if (!i.next) return null; a = k(E.itline, i.next) } for (var r = a; r < E.itline.length; r++) { if (E.Cf(r, t, n)) return E.itline[r] } return null }, this.Cf = function (e, t, n) { return n = n || "main", E.Qo(e, t, n).business }, this.Yo = function () { switch (this.scale) { case "CellDuration": return this.cellDuration; case "Minute": return 1; case "Hour": return 60; case "Day": return 1440; case "Week": return 10080; case "Month": return 43200; case "Year": return 525600; case "Manual": if (E.itline.length > 0) { var e = E.itline[0]; return (e.end.getTime() - e.start.getTime()) / 6e4 } return E.cellDuration }throw new DayPilot.Exception("can't guess cellDuration value") }, this.Xo = function (e) { return e.end.ticks - e.start.ticks }, this.$n = function (e, t) { return t = t || "main", !("main" !== t || !this.treePreventParentUsage || !this.jp(e, t)) || !!this.kp(e, t) }, this.jp = function (e, t) { t = t || "main"; var n = E.vl[t], i = n.rowlist, a = i[e]; return !!a.isParent || !!(this.treeEnabled && a.children && a.children.length > 0) }, this.kp = function (e, t) { t = t || "main"; var n = E.vl[t], i = n.rowlist, a = i[e]; return !!a.isNewRow || !!a.resource.preventUsage }, this.lp = {}, this.mp = function () { if (E.treeAutoExpand) { var e = this.Zn(i.Vo), t = e.rowIndex, n = this.jp(t), a = this.lp; if (a.timeout && a.y !== t && (clearTimeout(a.timeout), a.timeout = null, a.y = null), n) { a.y = t; var r = !E.rowlist[a.y].expanded; !a.timeout && r && (a.timeout = setTimeout(function () { !E.rowlist[a.y].expanded && (E.np(a.y, { "notAnimated": !0 }), E.pp()), a.timeout = null, a.y = null }, 500)) } } }, this.qp = function () { clearTimeout(E.lp.timeout), E.lp.timeout = null, E.lp.y = null }, this.Lf = function () { var e = i.rp.width, t = i.rp.left, n = i.sp, a = i.$o.dpBorder, r = E.rowlist[n.part.dayIndex], o = 0; o = r.start.getTime() - E.Ob().getTime(); var s = null, l = null, d = E.snapToGrid && E.snapToGridEventResizing, c = !d; "left" === a ? (s = E.getDate(t, c).addTime(o), l = n.rawend()) : "right" === a && (s = n.start(), l = E.getDate(t + e, c, !0).addTime(o)), i.rp.start = s, i.rp.end = l }, this.exportAs = function (e, t) { if (!E.fg()) throw new DayPilot.Exception("DayPilot.Scheduler.exportAs(): The instance must be visible during export."); var n = B.generate(e, t); return new DayPilot.Export(n) }, this["export"] = this.exportAs, this.Xg = {}; var B = this.Xg; B.Zg = function () { var e = B.Yg; switch (e) { case "viewport": return E.nav.top.offsetWidth; case "full": return E.Ll() + B.getRowHeaderWidth(); case "range": return E.getPixels(B.getRangeEnd()).boxRight - E.getPixels(B.getRangeStart()).boxLeft + B.getRowHeaderWidth(); default: throw new DayPilot.Exception("Unsupported export mode: " + e) } }, B.$g = function () { var e = B.Yg; switch (e) { case "viewport": return E.nav.top.offsetHeight - DayPilot.sh(E.nav.scroll) - 1; case "full": return E.tp() + E.Ql() - DayPilot.sh(E.nav.scroll); case "range": var t = B.getRows(); if (0 === t.length) return E.Ql(); var n = t.first(), i = t.last(), a = B.up(i) - B.up(n) + i.height + E.Ql(); return a += E.vl.top.height, a += E.vl.bottom.height; default: throw new DayPilot.Exception("Unsupported export mode: " + e) } }, B.up = function (e) { var t = B.A.includeHiddenRows ? e.absTop : e.top; return "bottom" === e.grid && ("viewport" === B.Yg ? t += E.vl.bottom.top - E.Ql() : "full" === B.Yg ? t += E.Nk : "range" === B.Yg && (t += B.$g() - E.Ql() - E.vl.bottom.height)), t }, B.vp = function (e) { var t = B.getViewportOffsetTop(); return "main" !== e.grid && (t = 0), t }, B.getRangeStart = function () { var e = B.A.dateFrom || E.Ob(); return new DayPilot.Date(e) }, B.getRangeEnd = function () { var e = B.A.dateTo || E.Wd(); return new DayPilot.Date(e) }, B.getRangeResStart = function () { return B.A.resourceFrom ? E.zl(B.A.resourceFrom) : E.rowlist.find(function (e) { return !e.hidden }) }, B.getRangeResEnd = function () { return B.A.resourceTo ? E.zl(B.A.resourceTo) : E.rowlist.last() }, B.getRowHeaderWidth = function () { return E.Ol() }, B.getTimeHeaderHeight = function () { return E.Ql() }, B.getCanvas = function () { return B.canvas() }, B.getRectangles = function () { var e = B.getRowHeaderWidth(), t = B.getTimeHeaderHeight(), n = {}; n.main = { "x": 0, "y": 0, "w": B.Zg(), "h": B.$g() }, n.corner = { "x": 0, "y": 0, "w": e, "h": t }, n.grid = { "x": e, "y": t, "w": B.Zg() - e, "h": B.$g() - t }; var i = n.grid.w, a = E.itline.last(); a && a.left + a.width < n.grid.w && (i = a.left + a.width); var r = n.grid.h, o = E.rowlist.last(); return o && o.top + o.height < n.grid.h && (r = o.top + o.height), n.gridContent = { "x": e, "y": t, "w": i, "h": r }, n }, B.getRows = function () { var e, t, n, i, a = B.Yg, r = y(); switch (a) { case "viewport": e = E.wp, t = e + E.nav.scroll.offsetHeight, n = E.Mn(e).i, i = E.Mn(t).i; break; case "full": e = 0, n = 0, i = E.rowlist.length; break; case "range": var o = B.getRangeResStart(), s = B.getRangeResEnd(); if (!o) throw new DayPilot.Exception("Resource specified using resourceFrom option not found during export."); if (!s) throw new DayPilot.Exception("Resource specified using resourceTo option not found during export."); n = o.index, i = s.index }i < E.rowlist.length && (i += 1); for (var l = n; l < i; l++) { var d = E.rowlist[l]; !B.A.includeHiddenRows && d.hidden || r.push(d) } return r.offset = n, r }, B.getRowsTop = function () { return E.vl.top.rowlist }, B.getRowsBottom = function () { return E.vl.bottom.rowlist }, B.getRowsAll = function () { var e = B.getRows(); return e = e.concat(B.getRowsTop()), e = e.concat(B.getRowsBottom()) }, B.getRowsTopAndBottom = function () { var e = []; return e = e.concat(B.getRowsTop()), e = e.concat(B.getRowsBottom()) }, B.bottomFrozenY = function () { if (E.vl.bottom.enabled()) { if ("viewport" === B.Yg) return E.vl.bottom.top; if ("full" === B.Yg) return B.$g() - E.vl.bottom.height; if ("range" === B.Yg) return B.$g() - E.vl.bottom.height } return B.$g() }, B.getEvents = function () { var e = B.Yg; switch (e) { case "full": var t = y(); return y(E.rowlist).forEach(function (e) { e.hidden || y(e.events).forEach(function (e) { t.push(e) }) }), t; case "viewport": return T.gk().filter(function (e) { return "main" === e.event.part.grid }).map(function (e) { return e.event }); case "range": var t = y(), n = B.getRangeStart(), i = B.getRangeEnd(); return B.getRows().forEach(function (e) { y(e.events).filter(function (e) { return d(e.start(), e.end(), n, i) }).forEach(function (e) { t.push(e) }) }), t; default: throw new DayPilot.Exception("Unsupported export mode: " + e) } }, B.getEventsFrozen = function () { var e = B.Yg; switch (e) { case "full": var t = y(); return B.getRowsTopAndBottom().forEach(function (e) { e.hidden || y(e.events).forEach(function (e) { t.push(e) }) }), t; case "viewport": return T.gk().filter(function (e) { return "main" !== e.event.part.grid }).map(function (e) { return e.event }); case "range": var t = y(), n = B.getRangeStart(), i = B.getRangeEnd(); return B.getRowsTopAndBottom().forEach(function (e) { y(e.events).filter(function (e) { return d(e.start(), e.end(), n, i) }).forEach(function (e) { t.push(e) }) }), t; default: throw new DayPilot.Exception("Unsupported export mode: " + e) } }, B.getLinks = function () { if (DayPilot.isArray(E.links.list)) { for (var e = [], t = 0; t < E.links.list.length; t++) { var n = E.links.list[t], i = E.events.find(n.from), a = E.events.po(i && i.data), r = E.events.find(n.to), o = E.events.po(r && r.data), s = M.vo(a, o, n, B.A.includeHiddenRows); s && e.push(s) } return e } }, B.getTimeline = function () { var e = B.Yg; switch (e) { case "full": return y(E.itline).addProps({ "offset": 0 }); case "viewport": return B.getViewportTimeline(); case "range": return B.getRangeTimeline(); default: throw new DayPilot.Exception("Unsupported export mode: " + e) } }, B.getRangeTimeline = function () { var e = y(); if (E.itline && E.itline.length > 0) { var t = E.pm(B.getRangeStart()).i, n = E.pm(B.getRangeEnd()).i, i = E.xp(); n = Math.min(n, i - 1), t = f(t, 0); for (var a = t; a <= n; a++) { var r = E.itline[a]; e.push(r) } e.offset = t } return e }, B.getViewportTimeline = function () { var e = y(); if (E.itline && E.itline.length > 0) { var t = E.yp, n = t + E.nav.scroll.offsetWidth, i = E.nm(t).x, a = E.nm(n, !0).x, r = E.xp(); a = Math.min(a, r), i = f(i, 0); for (var o = i; o <= a; o++) { var s = E.itline[o]; e.push(s) } e.offset = i } return e }, B.getTimeHeader = function (e) { if ("full" === B.Yg) return y(E.timeHeader[e]); var t, n, i = y(); t = B.getViewportOffsetStart(), n = t + B.getViewportOffsetWidth(); var a = E.zp(e, t), r = E.zp(e, n); r || (r = { "x": E.timeHeader[e].length - 1 }); for (var o = a.x; o <= r.x; o++) { var s = E.timeHeader[e][o]; i.push(s) } return i }, B.getSeparators = function () { return y(E.separators).map(function (e) { var t = new DayPilot.Date(e.location); if (t.getTime() < E.Ob().getTime()) return null; if (t.getTime() >= E.Wd().getTime()) return null; var n = E.getPixels(t); return n.cut ? null : n.left < 0 ? null : n.left > E.Ll() ? null : { "left": n.left, "color": e.color, "width": e.width || 1 } }).filter(function (e) { return !!e }) }, B.fakeDurationBar = function () { var e = l(); e.style.display = "none", e.className = E.ca(q.event); var t = l(); t.className = E.ca(q.eventBar); var n = l(); return n.className = E.ca(q.eventBarInner), s().appendChild(e), t.appendChild(n), e.appendChild(t), e }, B.fakeEventLeft = function () { var e = l(); return e.style.display = "none", e.className = E.ca("_event_left"), s().appendChild(e), e }, B.fakeGroup = function () { var e = l(); e.style.display = "none", e.className = E.ca(q.event) + " " + E.ca("_task_group"); var t = l(); return t.className = E.ca(q.eventInner), e.appendChild(t), E.divEvents.appendChild(e), e }, B.fakeMilestone = function () { var e = l(); e.style.display = "none", e.className = E.ca(q.event) + " " + E.ca("_task_milestone"); var t = l(); return t.className = E.ca(q.eventInner), e.appendChild(t), E.divEvents.appendChild(e), e }, B.fakeCell = function () { var e = l(); e.style.display = "none", e.className = E.ca("_cell"), e.style.position = "absolute", e.style.top = "-2000px", e.style.left = "-2000px"; var t = l(); return t.className = E.ca("_cell_inner"), e.appendChild(t), E.divCells.appendChild(e), e }, B.fakeRowHeader = function () { var e = l(); e.style.display = "none", e.className = E.ca("_rowheader"), e.style.position = "absolute", e.style.top = "-2000px", e.style.left = "-2000px"; var t = l(); return t.className = E.ca("_rowheader_inner"), e.appendChild(t), E.divResScroll.appendChild(e), e }, B.Ap = function () {
                var e = l(); e.style.display = "none", e.className = E.ca("_corner"),
                    e.style.position = "absolute", e.style.top = "-2000px", e.style.left = "-2000px"; var t = l(); return t.className = E.ca("_corner_inner"), e.appendChild(t), E.nav.top.appendChild(e), e
            }, B.fakeExpand = function () { var e = l(); return e.style.display = "none", e.className = E.ca("_tree_image_expand"), s().appendChild(e), e }, B.fakeIcon = function (e) { var t = document.createElement("i"); return t.className = e, t.style.position = "absolute", t.style.top = "-2000px", t.style.left = "-2000px", t }, B.extractUrl = function (e) { var t = /url\((")?([^"].*[^"])\1\)/.exec(e); return t ? t[2] : null }, B.getImages = function () { var e = {}, t = B.fakeExpand(); return e.expand = B.extractUrl(new DayPilot.StyleReader(t).get("background-image")), t.className = E.ca("_tree_image_collapse"), e.collapse = B.extractUrl(new DayPilot.StyleReader(t).get("background-image")), t.className = E.ca("_tree_image_no_children"), e.nochildren = B.extractUrl(new DayPilot.StyleReader(t).get("background-image")), x(t), e }, B.getFont = function (e) { return new DayPilot.StyleReader(e).getFont() }, B.getViewportOffsetStart = function () { switch (B.Yg) { case "full": return 0; case "viewport": return E.nav.scroll.scrollLeft; case "range": return E.getPixels(B.getRangeStart()).boxLeft } }, B.getViewportOffsetTop = function () { switch (B.Yg) { case "full": return 0; case "viewport": return E.nav.scroll.scrollTop; case "range": return B.up(B.getRangeResStart()) - E.vl.top.height } }, B.getViewportOffsetWidth = function () { switch (B.Yg) { case "full": return E.Ll(); case "viewport": return E.nav.scroll.offsetWidth; case "range": return E.getPixels(B.getRangeEnd()).boxRight - B.getViewportOffsetStart() } }, B.excelBoard = function () { var e = new DayPilot.Excel, t = e.worksheets.create("Scheduler"), n = new DayPilot.StyleReader(E.nav.corner).get("background-color"), i = new DayPilot.StyleReader(E.nav.top).get("border-top-color"), a = y(E.elements.events).filter(function (e) { return !e.event.data.type }).map(function (e) { return e.firstChild }).last(), r = new DayPilot.StyleReader(a).get("border-right-color"); e.styles.getDefault().setBackColor("#ffaaaa"); var o = e.styles.create(); o.setHorizontalAlignment("Center"), o.setBackColor(n), o.setBorderColor(i); var s = e.styles.create(); s.setVerticalAlignment("Top"), s.setBackColor(n), s.setBorderColor(i); var l = e.styles.create(); l.setVerticalAlignment("Top"), l.setBackColor("#ff0000"), l.setBorderColor(r), t.enableGridlines(!1), t.cell(0, 0).setRowspan(E.timeHeader.length).setStyle(o), t.cell(10, 10).setText("hi there"), y(E.timeHeader).forEach(function (e, n) { var i = { "x": 1, "y": 0 }; B.getTimeHeader(n, "full").forEach(function (e, a) { var r = e.colspan; t.cell(a + i.x, n + i.y).setText(e.innerHTML).setColspan(r).setStyle(o) }) }), y(E.rowlist).forEach(function (e, n) { for (var i = { "x": 0, "y": 1 }, a = "", r = 0; r < e.level; r++)a += "  "; t.cell(i.x, n + i.y).setText(a + e.html).setRowspan(e.lines.length).setStyle(s) }); var d = { "x": 0, "y": E.timeHeader.length }, c = d.y; return y(E.rowlist).forEach(function (e, n) { y(e.lines).forEach(function (e, i) { var a = d.x; y(e).forEach(function (e) { var i = E.pm(e.start()).i, r = E.pm(e.end()).i, o = 1 + r - i; t.cell(i + a, n + c).setText(e.client.html()).setColspan(o).setStyle(l), a += o - 1 }) }), c += e.lines.length - 1 }), e }, B.A = null, B.Yg = null, B.generate = function (e, t) { function n(e) { var t = v.grid.y + B.up(e) - B.vp(e); t += f(0, v.grid.y - t); var n = E.treeEnabled && !e.isNewRow, i = 10, a = n ? e.level * E.treeIndent + E.treeImageMarginLeft + 5 : 5; "Disabled" !== E.rowMoveHandling && (a += 10); var r = { "x": 0, "y": t, "w": v.grid.x + 1, "h": e.height + 1 }, o = e; if (ve) { o = E.Dp(e).row } var s = E.rowHeaderCols ? E.rowHeaderCols.length : 0, l = E.Zm(), c = E.internalUseStandardColumns && !e.isNewRow, u = c || l && DayPilot.isArray(E.rowHeaderColumns), h = {}; if (h.text = o.html, J.Cp().length > 0 && u) { var g = o.columns.find(function (e, t) { return !E.rowHeaderColumns[t].hidden }); h.text = g.text || g.html } h.backColor = o.backColor || ie, h.fontSize = te.size, h.fontFamily = te.family, h.fontStyle = te.style, h.fontColor = o.fontColor || ne, h.borderColor = w, h.horizontalAlignment = "left", h.verticalAlignment = "center", h.row = E.qn(e), h.columns = [], h.row.columns = h.columns, o.columns && o.columns.forEach(function (e) { var t = p(e, {}, ["text", "html", "backColor", "horizontalAlignment", "verticalAlignment"]); t.text = e.text || e.html, t.fontSize = h.fontSize, t.fontFamily = h.fontFamily, t.fontStyle = h.fontStyle, t.fontColor = h.fontColor, t.horizontalAlignment = t.horizontalAlignment || h.horizontalAlignment, t.verticalAlignment = t.verticalAlignment || h.verticalAlignment, t.backColor = t.backColor || h.backColor, h.columns.push(t) }), e.isNewRow && (h.text = E.rowCreateText), pe && E.onBeforeRowHeaderExport(h); var b = 10, x = { "x": a, "y": t + E.treeImageMarginTop + 2, "w": 10, "h": b }, k = { "size": h.fontSize, "family": h.fontFamily, "style": h.fontStyle }; "center" === h.verticalAlignment && (x.y = t + r.h / 2 - 5); var C = n ? a + i + 3 : a, _ = n ? r.w - C : r.w, D = { "x": C, "y": t, "w": _, "h": e.height + 1 }; if (E.rowHeaderCols && (D.w = E.rowHeaderCols[0] - C), d.fillRect(r, h.backColor), d.text(D, h.text, k, h.fontColor, h.horizontalAlignment, 0, h.verticalAlignment), d.rect(r, h.borderColor), n) { var S = null; S = y(e.children).isEmpty() ? m.nochildren : e.expanded || B.A.includeHiddenRows ? m.collapse : m.expand, d.image(x, S) } var T = y(h.row.columns); if (u && (T = T.filter(function (e, t) { return !E.rowHeaderColumns[t].hidden }), s = T.length), E.rowHeaderCols) { var a = r.x; y(E.rowHeaderCols).forEach(function (e, t) { if (0 !== t) { var n = c || E.Zm() ? 0 : 1, i = t - n, o = T[i] || {}, s = p(r); s.x = a, s.w = e + 1; var l = 3, u = p(s); u.x += l, u.w -= l; var f = o.backColor || h.backColor; d.fillRect(s, f), o.text && d.text(u, o.text, { "size": o.fontSize, "family": o.fontFamily, "style": o.fontStyle }, o.fontColor, o.horizontalAlignment, 0, o.verticalAlignment), d.rect(s, h.borderColor) } a += e }) } } function i(e, t, n) { n = n || "main"; var i = E.itline[e], a = E.vl[n].rowlist[t], r = E.Qo(e, t, n), o = r.business, s = E.Ep(e, t, n); s || (s = {}, s.cell = E.cells.findXy(e, t, n)[0]); var l = r.html, c = r.horizontalAlignment || "left", u = r.backColor || (o ? j : U); s.areas = s.cell && s.cell.properties && s.cell.properties.areas || [], s.text = l, s.horizontalAlignment = c, s.backColor = u, s.fontSize = W.size, s.fontFamily = W.family, s.fontStyle = W.style, s.fontColor = s.cell && s.cell.properties && s.cell.properties.fontColor || F, me && (E.onBeforeCellExport(s), l = s.text, c = s.horizontalAlignment, u = s.backColor); var h = v.grid.y + B.up(a) - B.vp(a); h += f(0, v.grid.y - h); var p = v.grid.x + i.left - ce; p += f(0, v.grid.x - p); var m = { "x": p, "y": h, "w": i.width, "h": a.height }; d.fillRect(m, u); var g = {}; g.x = m.x + 1, g.y = m.y + 1, g.w = m.w - 2, g.h = m.h - 2; var b = { "size": s.fontSize, "family": s.fontFamily, "style": s.fontStyle }; l && d.text(g, l, b, s.fontColor, c), y(s.areas).forEach(function (e) { if (DayPilot.Areas.isVisible(e)) { var t = { "type": "cell-area" }; "undefined" != typeof e.id && (t.id = e.id), d.groupStart(t); var n = 0; "number" == typeof e.left ? n = e.left : e.start ? n = E.getPixels(new DayPilot.Date(e.start)).left - i.left : "number" == typeof e.right && (n = i.width - e.right - e.width); var a = e.width || e.w; "number" == typeof e.right ? a = i.width - e.right - n : e.end && (a = E.getPixels(new DayPilot.Date(e.end)).left - e.left - i.left + 1); var r = e.top || 0, o = e.height || e.h; "number" == typeof e.bottom && (o = i.height - e.bottom - r), o || (o = i.height - r); var l = { "x": p + n, "y": h + r, "w": a, "h": o }; if (e.backColor && d.fillRect(l, e.backColor), e.icon) { var c = E.Xg.areaIcon(e.icon); d.text(l, c.text, c.font, e.fontColor || s.fontColor, e.horizontalAlignment, e.padding, e.verticalAlignment) } else if (e.image) { var u = new Image; u.src = e.image, d.image(l, u) } else e.symbol ? d.symbol(l, e.symbol, { color: e.fontColor || s.fontColor }) : (e.text || e.html) && d.text(l, e.text || e.html, { "size": e.fontSize || s.fontSize, "family": e.fontFamily || s.fontFamily, "style": e.fontStyle || s.fontStyle }, e.fontColor || s.fontColor, e.horizontalAlignment, e.padding, e.verticalAlignment); d.groupEnd() } }) } function a(e) { var t = v.grid.y + B.up(e) - B.vp(e); if (t += f(0, v.grid.y - t), t !== v.grid.y && !("main" === e.grid && t > B.bottomFrozenY())) { var n = q, i = {}; if (ge) { if (i.row = E.qn(e), i.hidden = !1, i.cssClass = null, i.type = "HorizontalLine", i.color = null, E.onBeforeGridLineRender(i), i.hidden) return; n = i.color || q } d.line(v.gridContent.x + 1, t, v.gridContent.x + v.gridContent.w - 1, t, n), "top" === e.grid && e === E.vl.top.rowlist.last() && d.line(v.gridContent.x + 1, t + e.height, v.gridContent.x + v.gridContent.w - 1, t + e.height, q) } } function r(e, t) { var n = v.grid.x + e.left - ce; if (n += f(0, v.grid.x - n), n !== v.grid.x) { var i = v.grid.y + 1, a = v.grid.y + v.grid.h - 2; "top" === t && (a = i + E.vl.top.height), "bottom" === t && (i = B.bottomFrozenY()); var r = X, o = {}; if (ge) { if (o.start = e.start, o.end = e.end, o.hidden = !1, o.cssClass = null, o.type = "VerticalLine", o.color = null, E.onBeforeGridLineRender(o), o.hidden) return; r = o.color || X } d.line(n, i, n, a, r) } } function o(e) { function t() { var e = A.backColor; d.diamond(M, e) } function n() { var e = { "x": u, "y": c, "w": s, "h": A.barHeight }, t = { "x": u + x, "y": c, "w": k, "h": A.barHeight }, n = p.backColor || R, i = { x: u, y: c + 5, h: M.h - 6 - 5, w: M.w }; d.fillRect(i, n); var a = p.text || p.html; d.text(i, a, { "size": A.fontSize, "family": A.fontFamily, "style": A.fontStyle }, A.fontColor, A.horizontalAlignment, A.textPadding, A.verticalAlignment), d.upperRightCorner({ x: u + M.w - 6, y: i.y + i.h, w: 6, h: 6 }, n), d.upperLeftCorner({ x: u, y: i.y + i.h, w: 6, h: 6 }, n), l && (d.fillRect(e, g), k > 0 && d.fillRect(t, m)) } function i(t, n) { var i = p.versions[n]; d.groupStart({ "type": "event-version", "event-id": e.id() }); var a = t.width, r = v.grid.y + o + t.top - ue; r += f(0, v.grid.y - r); var s = v.grid.x + t.left - ce + 1, l = f(0, v.grid.x - s); s += l, a -= l; var c = E.eventVersionHeight, u = E.durationBarVisible && !i.barHidden, h = u ? J.Fp() : 0, m = { "x": s, "y": r, "w": a, "h": c }; d.fillRect(m, i.backColor || A.backColor); var g = { "x": s + C, "y": r + h, "w": f(0, a - C), "h": c - h }; if (d.text(g, i.text, { "size": A.fontSize, "family": A.fontFamily, "style": A.fontStyle }, A.fontColor, A.horizontalAlignment, A.textPadding, A.verticalAlignment), d.rect(m, i.borderColor || A.borderColor), u) { var b = i.barBackColor || N, y = i.barColor || I, w = 100 * t.barLeft / a, x = Math.ceil(100 * t.barWidth / a), k = { "x": s, "y": r + 1, "w": a, "h": h }, _ = { "x": s + w, "y": r + 1, "w": x, "h": h }; d.fillRect(k, b), x > 0 && d.fillRect(_, y) } d.groupEnd() } function a() { var t = { "x": u, "y": c, "w": s, "h": A.barHeight }, n = { "x": u + x, "y": c, "w": k, "h": A.barHeight }, i = { "x": u + C, "y": c + A.barHeight, "w": s - C, "h": e.part.height - A.barHeight }; d.fillRect(M, A.backColor), d.text(i, A.text, { "size": A.fontSize, "family": A.fontFamily, "style": A.fontStyle }, A.fontColor, A.horizontalAlignment, A.textPadding, A.verticalAlignment), d.rect(M, A.borderColor), l && (d.fillRect(t, g), k > 0 && d.fillRect(n, m)), y(A.areas).forEach(function (t) { if (DayPilot.Areas.isVisible(t)) { var n = { "type": "event-area" }; "undefined" != typeof t.id && (n.id = t.id), d.groupStart(n); var i = 0; "number" == typeof t.left ? i = t.left : t.start ? i = E.getPixels(new DayPilot.Date(t.start)).left - e.part.left : "number" == typeof t.right && (i = e.part.width - t.right - t.width); var a = t.width || t.w; "number" == typeof t.right ? a = e.part.width - t.right - i : t.end && (a = E.getPixels(new DayPilot.Date(t.end)).left - t.left - e.part.left + 1); var r = t.top || 0, o = t.height || t.h; "number" == typeof t.bottom && (o = e.part.height - t.bottom - r), o || (o = e.part.height - r); var s = { "x": u + i, "y": c + r, "w": a, "h": o }; if (t.backColor && d.fillRect(s, t.backColor), t.icon) { var l = E.Xg.areaIcon(t.icon); d.text(s, l.text, l.font, t.fontColor || A.fontColor, t.horizontalAlignment, t.padding, t.verticalAlignment) } else if (t.image) { var h = new Image; h.src = t.image, d.image(s, h) } else t.symbol ? d.symbol(s, t.symbol, { color: t.fontColor || A.fontColor }) : (t.text || t.html) && d.text(s, t.text || t.html, { "size": t.fontSize || A.fontSize, "family": t.fontFamily || A.fontFamily, "style": t.fontStyle || A.fontStyle }, t.fontColor || A.fontColor, t.horizontalAlignment, t.padding, t.verticalAlignment); d.groupEnd() } }) } var r = E.vl[e.part.grid].rowlist[e.part.dayIndex], o = B.up(r), s = e.part.width, l = e.client && e.client.barVisible && e.client.barVisible(), c = v.grid.y + o + e.part.top - B.vp(r), u = v.grid.x + e.part.left - ce + 1, h = f(0, v.grid.x - u); u += h, s -= h; var p = e.cache || e.data, m = p.barColor || I, g = p.barBackColor || N, b = p.backColor || T, w = p.fontColor || S, x = e.part.barLeft, k = e.part.barWidth; "PercentComplete" === E.durationBarMode && (x = 0, k = f(0, Math.floor(e.part.width * (p.complete || 0) / 100))), "Milestone" === e.data.type && (b = H); var C = 2, A = {}; A.e = e, A.text = e.text ? e.text() : e.client.html(), A.areas = DayPilot.Util.createArrayCopy(p.areas), A.fontSize = D.size, A.fontFamily = D.family, A.fontStyle = D.style, A.fontColor = w, A.backColor = b, A.borderColor = _, A.horizontalAlignment = "left", A.verticalAlignment = "center", A.barHeight = 4, A.textPadding = 2, A.textLeft = p.textLeft || p.htmlLeft, A.textRight = p.textRight || p.htmlRight, "function" == typeof E.onBeforeEventExport && E.onBeforeEventExport(A); var M = { "x": u, "y": c, "w": s, "h": e.part.height }; d.groupStart({ "type": "event", "id": e.id() }), "Milestone" === e.data.type ? t() : "Group" === e.data.type ? n() : a(); var P = A.textLeft; if (P) { var L = { "size": A.fontSize, "family": A.fontFamily, "style": A.fontStyle }, O = d.textWidth(P, L), U = { "x": u - (E.eventHtmlLeftMargin + O), "y": c, "w": O, "h": e.part.height }; d.text(U, P, L, z, null, 0, "center") } var j = A.textRight; if (j) { var W = { "size": A.fontSize, "family": A.fontFamily, "style": A.fontStyle }, F = d.textWidth(j, W), Y = { "x": u + s + E.eventHtmlRightMargin, "y": c, "w": F, "h": e.part.height }; d.text(Y, j, W, z, null, 0, "center") } d.groupEnd(), (e.versions || []).forEach(i) } "object" == typeof e && (t = e, e = null); var t = t || {}, e = e || t.format || "svg", s = t.scale || 1; if ("xls" === e) return B.excelBoard(); "jpg" === e.toLowerCase() && (e = "jpeg"); var l = t.area || "viewport"; B.A = p(t), B.Yg = l, B.A.includeHiddenRows = B.A.includeHiddenRows && "range" === l, B.getRows().forEach(function (e) { E.Bp(e) }); var d, c = B.Zg(), h = B.$g(); switch (e.toLowerCase()) { case "svg": d = new DayPilot.Svg(c, h); break; case "png": d = new DayPilot.Canvas(c, h, "image/png", s); break; case "jpeg": d = new DayPilot.Canvas(c, h, "image/jpeg", s, t.quality); break; default: throw new DayPilot.Exception("Export format not supported: " + e) }var v = B.getRectangles(), m = B.getImages(), g = new DayPilot.StyleReader(E.nav.top).get("background-color"), b = new DayPilot.StyleReader(E.nav.corner).get("background-color"), w = new DayPilot.StyleReader(E.nav.top).get("border-top-color"), k = new DayPilot.StyleReader(E.nav.divider).get("background-color"), C = y(E.elements.events).filter(function (e) { return !e.event.data.type }).map(function (e) { return e.firstChild }).last(), _ = new DayPilot.StyleReader(C).get("border-right-color"), D = B.getFont(C), S = new DayPilot.StyleReader(C).get("color"), T = new DayPilot.StyleReader(C).get("background-color"); T = DayPilot.Util.isTransparentColor(T) ? "white" : T; var A = B.fakeMilestone(), H = new DayPilot.StyleReader(A.firstChild).get("background-color"); x(A); var M = B.fakeGroup(), R = new DayPilot.StyleReader(M.firstChild).get("background-color"); x(M); var P = B.fakeDurationBar(), N = new DayPilot.StyleReader(P.firstChild).get("background-color"), I = new DayPilot.StyleReader(P.firstChild.firstChild).get("background-color"); x(P); var L = B.fakeEventLeft(), z = new DayPilot.StyleReader(L).get("color"); x(L); var O = B.fakeCell(), U = new DayPilot.StyleReader(O).get("background-color"); u(O, E.ca("_cell_business")); var j = new DayPilot.StyleReader(O).get("background-color"), W = B.getFont(O), F = new DayPilot.StyleReader(O).get("color"); x(O); var Y = DayPilot.Util.firstPropValue(E.ra.Rk), q = new DayPilot.StyleReader(Y).get("background-color"), V = DayPilot.Util.firstPropValue(E.ra.Qk), X = new DayPilot.StyleReader(V).get("background-color"), G = E.ra.timeHeader["0_0"], Q = B.getFont(G), Z = new DayPilot.StyleReader(G).get("color"), $ = new DayPilot.StyleReader(G).get("background-color"), ee = B.fakeRowHeader(), te = B.getFont(ee), ne = new DayPilot.StyleReader(ee).get("color"), ie = new DayPilot.StyleReader(ee).get("background-color"); x(ee); var ae = B.Ap(), re = B.getFont(ae), oe = new DayPilot.StyleReader(ae).get("color"), b = new DayPilot.StyleReader(ae).get("background-color"); if (E.rowHeaderColumns && E.Un && E.Un.blocks[0]) var se = E.Un.blocks[0].section.firstChild, le = new DayPilot.StyleReader(se).getFont(), de = new DayPilot.StyleReader(se).get("color"); var ce = B.getViewportOffsetStart(), ue = B.getViewportOffsetTop(); d.fillRect(v.main, "white"), d.fillRect(v.main, g), function () { var e = {}; e.backColor = b, e.text = E.cornerText, e.fontSize = re.size, e.fontFamily = re.family, e.fontStyle = re.style, e.fontColor = oe, e.horizontalAlignment = "left", e.verticalAlignment = "top", "function" == typeof E.onBeforeCornerExport && E.onBeforeCornerExport(e); var t = { "size": e.fontSize, "family": e.fontFamily, "style": e.fontStyle }; d.fillRect(v.corner, e.backColor), d.text(v.corner, e.text, t, e.fontColor, e.horizontalAlignment, 0, e.verticalAlignment) }(); var he = v.corner.x; J.Cp().forEach(function (e, t) { var n = E.rowHeaderCols[t], i = {}; i.x = he, i.w = n + 1, i.y = v.corner.h - E.Un.height, i.h = E.Un.height + 1; var a = 3, r = p(i); r.x += a, r.w -= a; var o = e.name || e.title || ""; d.fillRect(i, b), d.text(r, o, le, de, "left", 0, "center"), d.rect(i, w), he += n }); var fe = "function" == typeof E.onBeforeTimeHeaderExport, ve = "function" == typeof E.onBeforeRowHeaderRender, pe = "function" == typeof E.onBeforeRowHeaderExport, me = "function" == typeof E.onBeforeCellExport; B.getRows().forEach(n), B.getRowsTop().forEach(n), B.getRowsBottom().forEach(n), B.getRows().forEach(function (e, t, n) { var t = e.index; B.getTimeline().forEach(function (n, a, r) { var a = r.offset + a; i(a, t, e.grid) }) }); var ge = "function" == typeof E.onBeforeGridLineRender; B.getRows().forEach(a), B.getTimeline().forEach(function (e) { r(e, "main") }); var be = B.getTimeline().last(); return function (e) { if (e) { var t = X, n = {}; if (ge) { if (n.start = e.end, n.end = e.end, n.hidden = !1, n.cssClass = null, n.type = "VerticalLine", n.color = null, E.onBeforeGridLineRender(n), n.hidden) return; t = n.color || X } var i = v.grid.x + e.left - ce + e.width; d.line(i, v.grid.y + 1, i, v.grid.y + v.grid.h - 2, t) } }(be), B.getSeparators().forEach(function (e) { var t = v.grid.x + e.left - ce; t < B.getRowHeaderWidth() || d.line(t, v.grid.y + 1, t + e.width, v.grid.y + v.grid.h - 2, e.color) }), B.getLinks().forEach(function (e) { e && e.map(function (e) { return B.shiftableSegment(e).shift(v.grid.x - ce, v.grid.y - ue) }).forEach(function (e) { switch (e.type) { case "HorizontalLine": d.line(e.startX, e.startY, e.endX, e.endY, "red"); break; case "VerticalLine": d.line(e.startX, e.startY, e.endX, e.endY, "red"); break; case "ArrowRight": d.triangle({ x: e.startX - 10, y: e.startY - 4.5, w: 10, h: 10 }, "red"); break; case "ArrowDown": d.triangle({ x: e.startX - 4.5, y: e.startY - 10, w: 10, h: 10 }, "red", 90); break; case "ArrowLeft": d.triangle({ x: e.startX, y: e.startY - 4.5, w: 10, h: 10 }, "red", 180); break; case "ArrowUp": d.triangle({ x: e.startX - 4.5, y: e.startY, w: 10, h: 10 }, "red", -90) } }) }), B.getEvents().forEach(o), B.getRowsTopAndBottom().forEach(function (e, t, n) { var t = e.index; B.getTimeline().forEach(function (n, a, r) { var a = r.offset + a; i(a, t, e.grid) }), a(e) }), B.getTimeline().forEach(function (e) { r(e, "top"), r(e, "bottom") }), B.getEventsFrozen().forEach(o), y(E.timeHeader).forEach(function (e, t) { B.getTimeHeader(t, l).forEach(function (e) { var n = v.grid.x + e.left - ce, i = e.width, a = K.Gp(t), r = a.top, o = a.height, s = {}; s.header = {}, s.header.start = e.start, s.header.end = e.end, s.header.level = t, s.header.text = e.text, s.header.html = e.innerHTML, s.text = e.text, s.backColor = e.backColor, s.verticalAlignment = "center", s.horizontalAlignment = "center", s.fontColor = Z, s.fontSize = Q.size, s.fontFamily = Q.family, s.fontStyle = Q.style, fe && E.onBeforeTimeHeaderExport(s); var l = f(0, v.grid.x - n); n += l, i -= l; var l = f(0, n + i - (v.grid.x + v.grid.w)); i -= l; var c = { "x": n, "y": r, "w": i + 1, "h": o + 1 }, u = { "size": s.fontSize, "family": s.fontFamily, "style": s.fontStyle }; d.fillRect(c, s.backColor || $), d.rect(c, w), d.text(c, s.text, u, s.fontColor, s.horizontalAlignment, 0, s.verticalAlignment) }) }), d.rect(v.main, w), d.line(v.grid.x, 0, v.grid.x, v.main.h, k), d.line(0, v.grid.y, v.main.w, v.grid.y, k), d }, B.areaIcon = function (e) { var t = B.fakeIcon(e); s().appendChild(t); var n = window.getComputedStyle(t, ":before").content.replace(/"/g, ""), i = new DayPilot.StyleReader(t).getFont(); return s().removeChild(t), { "text": n, "font": i } }, B.shiftableSegment = function (e) { return { "startX": e.startX, "endX": e.endX, "startY": e.startY, "endY": e.endY, "type": e.type, "shift": function (t, n) { return B.shiftableSegment({ "startX": e.startX + t, "endX": e.endX + t, "startY": e.startY + n, "endY": e.endY + n, "type": e.type }) } } }, this.Hp = {}; var P = this.Hp; P.findJointDivs = function (e) { var t = e.data.join; return t ? y(E.elements.events).filter(function (n) { return n.event.data.join === t && n.event !== e }) : y() }, this.Ip = {}; var N = this.Ip; N.divs = [], N.list = [], N.forbidden = !1, N.additional = function () { var e = y(), t = E.multiselect.isSelected(i.$o.event), n = E.allowMultiResize, e = y(); if (t && n && (e = y(E.multiselect.kd).filter(function (e) { return e !== i.$o })), E.jointEventsResize) { var a = P.findJointDivs(i.sp); e = e.concat(a) } return e }, N.update = function () { N.clear(), N.draw() }, N.clear = function () { x(N.divs), N.divs = [] }, N.isInvalid = function () { return N.divs.some(function (e) { return e.info.invalid }) }, N.Jp = function () { return E.Kp(N.list) }, N.Lp = function () { if (i.$o) { var e = i.sp, t = i.rp, n = t.start.getTime() - e.start().getTime(), a = t.end.getTime() - e.end().getTime(), r = 0; N.list = [], N.forbidden = !1, N.invalid = !1, N.rowoffset = r, N.additional().forEach(function (e) { if (e.event) { var t = e.event, i = E.rowlist[t.part.dayIndex + r]; if (!i) return void (N.invalid = !0); var o = t.start().addTime(n), s = t.end().addTime(a), l = {}; l.$ = {}, o >= s && (l.invalid = !0, n > 0 ? (l.$.Mp = o, l.$.Np = s.addSeconds(-1)) : a < 0 && (l.$.Op = s, l.$.Pp = o.addSeconds(1))), l.event = t, l.start = o, l.end = s, l.$.Qp = i, N.list.push(l) } }) } }, N.Rp = function () { var e = 0; if (N.list.forEach(function (e) { var t = e.event, n = e.$.Qp, i = t.part.top + n.top, a = t.part.height, r = new DayPilot.Date(e.start), o = new DayPilot.Date(e.end), s = E.getPixels(r), d = E.getPixels(o); e.$.Mp === r && e.$.Np && (s = E.getPixels(e.$.Np)), e.$.Op === o && e.$.Pp && (d = E.getPixels(e.$.Pp)); var c = DayPilot.DateUtil.diff(t.rawend(), t.start()); c = f(c, 1); var u = J.Lg(c), h = u ? s.boxLeft : s.left, v = u ? d.boxRight - h : d.left - h, p = l(); p.style.position = "absolute", p.style.left = h + "px", p.style.top = i + "px", p.style.height = a + "px", p.style.width = v + "px", p.style.zIndex = 101, p.style.overflow = "hidden", p.className = E.ca("_shadow"), p.info = e; var m = l(); m.className = E.ca("_shadow_inner"), p.appendChild(m), E.wl.appendChild(p), N.divs.push(p) }), N.invalid) { var t = E.ca("_shadow_overlap"); return void y(N.divs).forEach(function (e) { u(e, t) }) } y(N.divs).forEach(function (t) { if (t.info) { var n = t, a = t.info, r = t.info.event, o = E.rowlist[r.part.dayIndex + e], s = E.getPixels(a.start), l = E.getPixels(a.end), d = s.left, c = l.left - d; t.info.invalid && u(t, E.ca("_shadow_invalid")); var h = y(N.list).map(function (e) { return e.event.data }).add(i.$o.event.data); E.Sp(n, o, d, c, h), E.Tp(n, a.start, a.end, r.resource()), n.overlapping && (a.overlapping = !0, N.forbidden = !0) } }) }, N.draw = function () { N.Lp(), N.Rp() }, this.Up = {}, this.Up.modifiedProps = function () { var e = new DayPilot.Scheduler, t = DayPilot.Util.members(E, 2), n = []; return n.push("<div id='dp'></div>"), n.push("<script>"), n.push("var dp = new DayPilot.Scheduler('dp');"), t.properties.forEach(function (t) { var i, a, r = t.name, o = r.split("."); if (o.length > 1) { var s = o[0], l = o[1]; i = JSON.stringify(e[s][l]), a = JSON.stringify(E[s][l]) } else i = JSON.stringify(e[r]), a = JSON.stringify(E[r]); i !== a && n.push("dp." + r + " = " + a + ";") }), t.events.forEach(function (e) { var t = e.name; "function" == typeof E[t] && n.push("dp." + t + " = " + E[t].toString() + ";") }), n.push("dp.init();"), n.push("</script>"), n.join("\n") }, this.Vp = {}; var I = this.Vp; I.divs = [], I.list = [], I.forbidden = !1, I.Wp = 0, I.verticalAll = function () { return "All" === E.multiMoveVerticalMode }, I.additional = function () { var e = y(), t = E.rm, n = E.multiselect.isSelected(i.Vo), a = E.allowMultiMove; if (n && a && (e = y(E.multiselect.kd).filter(function (e) { return e !== i.rm && e !== t.rm })), E.jointEventsMove) { var r = P.findJointDivs(i.Vo); e = e.concat(r) } return e }, I.update = function () { I.clear(), I.draw() }, I.Jp = function () { return E.Kp(I.list) }, I.Lp = function () { if (I.list = [], I.rowoffset = 0, i.rm) { var e = i.Vo, t = !!i.Xp, n = t ? i.Xp.start : e.start(), a = n.getTime() - e.start().getTime(), r = e.part.dayIndex, o = t ? k(E.rowlist, i.Xp.row) : r, s = o - r; I.verticalAll() || (s = 0), I.forbidden = !1, I.invalid = !1, I.rowoffset = s, I.additional().forEach(function (e) { if (e.event) { var t = e.event, n = E.rowlist[t.part.dayIndex + s]; if (!n) return void (I.invalid = !0); var i = t.start().addTime(a), r = t.end().addTime(a), o = {}; o.event = t, o.start = i, o.end = r, o.resource = n.id, I.list.push(o) } }) } }, I.Yp = function () { return I.list.map(function (e) { var t = e.start, n = e.end, i = e.event, a = E.getPixels(t), r = E.getPixels(n), o = DayPilot.DateUtil.diff(i.rawend(), i.start()); o = f(o, 1); var s = J.Lg(o), l = E.zl(e.resource), d = s ? a.boxLeft : a.left, c = s ? r.boxRight - d : r.left - d, u = i.part.top + l.top, h = i.part.height; e.resource !== e.event.data.resource && (u = l.top, h = l.height); var v = {}; return v.info = e, v.y = l.index, v.left = d, v.width = c, v.height = h, v.top = u, v }) }, I.Rp = function () { I.rowoffset; if (I.list.forEach(function (e) { var t = e.start, n = e.end, i = e.event, a = E.getPixels(t), r = E.getPixels(n), o = DayPilot.DateUtil.diff(i.rawend(), i.start()); o = f(o, 1); var s = J.Lg(o), d = E.zl(e.resource); if (!d) return void (I.invalid = !0); e.$ = {}, e.$.Qp = d; var c = s ? a.boxLeft : a.left, u = s ? r.boxRight - c : r.left - c, h = i.part.top + d.top, v = i.part.height; e.resource !== e.event.data.resource && (h = d.top, v = d.height); var p = l(); p.style.position = "absolute", p.style.left = c + "px", p.style.top = h + "px", p.style.height = v + "px", p.style.width = u + "px", p.style.overflow = "hidden", p.className = E.ca("_shadow"), p.info = e, p.left = c, p.width = u; var m = l(); m.className = E.ca("_shadow_inner"), p.appendChild(m), E.wl.appendChild(p), I.divs.push(p) }), I.invalid) { var e = E.ca("_shadow_overlap"); return void y(I.divs).forEach(function (t) { u(t, e) }) } y(I.divs).forEach(function (e) { if (e.info) { var t = e, n = e.info, a = (e.info.event, e.info.$.Qp), r = E.getPixels(n.start), o = E.getPixels(n.end), s = r.left, l = o.left - s, d = y(I.list).map(function (e) { return e.event.data }).add(i.Vo.data); E.Sp(t, a, s, l, d), E.Tp(t, n.start, n.end, n.resource), n.overlapping = !1, t.overlapping && (n.overlapping = !0, I.forbidden = !0) } }) }, I.draw = function () { I.Lp(), I.Rp() }, I.clear = function () { x(I.divs), I.divs = [] }, this.Kp = function (e, t) { return t = ["$"].concat(t || []), e.map(function (e) { var n = e, i = {}; for (var a in n) { var r = t && k(t, a) !== -1; n.hasOwnProperty(a) && "undefined" != typeof n[a] && (r ? Object.defineProperty(i, a, { "value": n[a] }) : i[a] = n[a]) } return i }) }, this.Zp = function () { var e = E.coords, t = i.$o.dpBorder, n = i.$o.event, a = n.part.left; "right" == t && (a += n.part.width); var r, o, s = i.$o.event.calendar.cellWidth, l = i.$o.event.part.width, d = i.$o.event.part.left, c = 0, u = e.x - a, h = E.snapToGrid && E.snapToGridEventResizing; if ("right" === t) { if (r = d, h) { var f = E.nm(l + d + u).cell, v = E.nm(d).cell, p = v.left + v.width - d; o = f.left + f.width - d, o < p && (o = p) } else o = l + u; var m = E.Ll(); d + o > m && (o = m - d), i.rp.left = d, i.rp.width = o } else { if ("left" !== t) throw new DayPilot.Exception("Invalid dpBorder."); h ? (u >= l && (u = l), r = Math.floor((d + u + 0) / s) * s, r < c && (r = c)) : r = d + u, o = l - (r - d); var g = d + l, b = s; h ? "Never" === E.useEventBoxes && (b = l < s ? l : 1) : b = 1, o < b && (o = b, r = g - o), i.rp.left = r, i.rp.width = o } !function () { i.rp.overlapping = !1; var e = i.$o.event, t = E.rowlist[e.part.dayIndex], n = r, a = o; E.Sp(i.rp, t, n, a, e.data); var s = i.rp; if (s.start) { var l = { "start": s.start, "end": E.qj(s.end) }; E.Tp(i.rp, l.start, l.end, t.id) } }(), E.$p() }, this.pp = function () { this.nav.scroll; if (E.coords && i.Vo) { E.Rl(); var e = i.Xp, t = this.Zn(i.Vo); if (!E.$n(t.rowIndex, t.grid)) { var n = i.Vo, a = n.cache && "undefined" != typeof n.cache.moveVDisabled ? !n.cache.moveVDisabled : !n.data.moveVDisabled, r = n.cache && "undefined" != typeof n.cache.moveHDisabled ? !n.cache.moveHDisabled : !n.data.moveHDisabled, o = !I.additional().isEmpty(); o && "Disabled" === E.multiMoveVerticalMode && (a = !1), a && t.grid !== e.grid && (e.parentNode.removeChild(e), E.vl[t.grid].divShadow.appendChild(e), e.grid = t.grid); var s = 0, l = 0; if (function () { if (E.Jk) { var e = t.relativeY, n = E.nm(t.left).x, i = t.row, a = i.evColumns[n], r = a.events.find(function (t) { return e < t.part.top + t.part.height + E.eventMarginBottom }); r || (r = a.events.last()), r && (l = r.part.top, s = k(a.events, r), e - r.part.top > r.part.height / 2 && (l = r.part.top + r.part.height + E.eventMarginBottom / 2, s += 1)) } else { for (var e = t.relativeY, i = t.row, o = 0, d = E.Ha._n(), c = i.lines.length, u = 0; u < i.lines.length; u++) { if (i.lines[u].Vd(t.left, E.cellWidth)) { c = u; break } } var h = Math.floor((e - o + d / 2) / d); h = Math.min(c, h), h = f(0, h), s = h, l = E.rowMarginTop + s * (E.Ha._n() + E.eventMarginBottom) + E.eventMarginBottom / 2 } }(), l > 0 && (l -= 3), a) if (this.$n(t.rowIndex, t.grid)) { var d = e.row, c = 1; if (!d) return; c = t.rowIndex < d.index ? 1 : -1; for (var u = t.rowIndex; u !== d.index; u += c) { var h = this.rowlist[u]; if (!this.$n(u, t.grid) && !h.hidden) { e.row = h, e.style.top = e.row.top + e.row.marginTop + "px", e.style.height = f(e.row.height - e.row.marginTop - e.row.marginBottom, 0) + "px", E.eventMoveToPosition && (s = c > 0 ? 0 : h.lines.length - 1, e.style.top = t.top + l + "px", e.style.height = "3px", e.line = s); break } } } else e.row = t.row, e.style.top = e.row.top + e.row.marginTop + "px", e.style.height = f(e.row.height - e.row.marginTop - e.row.marginBottom, 0) + "px", E.eventMoveToPosition && (e.style.top = t.top + l + "px", e.style.height = "3px", e.line = s); else { for (var v = E.vl[n.part.grid].rowlist, d = v[n.part.dayIndex], p = d.lines.length, u = 0; u < d.lines.length; u++) { if (d.lines[u].Vd(t.left, E.cellWidth)) { p = u; break } } if (o || (e.style.height = f(d.height, 0) + "px", e.style.top = d.top + "px"), e.row = d, E.eventMoveToPosition && !o) if (t.row === d) e.style.top = d.top + l + "px", e.style.height = "3px", e.line = s; else { var m = t.rowIndex > d.index && p > 0 ? p * E.Ha._n() - 3 : 0; e.style.top = d.top + m + "px", e.style.height = "3px", e.line = 0 } } r ? (e.style.left = t.left + "px", E.eventMoveToPosition ? e.style.width = E.cellWidth + "px" : e.style.width = t.width + "px", e.start = t.start, e.end = t.end) : (e.style.left = n.part.left + "px", e.start = n.start(), e.end = n.rawend(), t.left = n.part.left), e.left = t.left, e.width = t.width, E._p() } } }, this._p = function () { var e = i.Xp, t = E.Vp, n = E.eb, a = i.Vo; if (n) { var r = n.start.getTime() === e.start.getTime(), o = n.end.getTime() === e.end.getTime(), s = n.resource === e.row.id, l = n.shift + "_" + n.ctrl + "_" + n.meta + "_" + n.alt == E.coords.shift + "_" + E.coords.ctrl + "_" + E.coords.meta + "_" + E.coords.alt; if (r && o && s && l) return } n && (c(e, n.cssClass), e.firstChild.innerHTML = ""), t.clear(), t.Lp(), function () { e.overlapping = !1; var n = e.row, r = a.data, o = e.width, s = e.left, l = y(t.list).map(function (e) { return e.event.data }).add(r); E.Sp(e, n, s, o, l), E.Tp(i.Xp, e.start, e.end, e.row.id) }(); var d = !!i.aq && a.part.external, h = {}; h.start = e.start, h.end = E.qj(e.end), h.duration = new DayPilot.Duration(h.start, h.end), h.e = a, h.external = d, h.control = E, h.resource = e.row.id, h.html = null, h.row = E.qn(e.row), h.position = e.line, h.overlapping = e.overlapping || t.forbidden, h.allowed = !0, h.left = {}, h.left.html = h.start.toString(E.eventMovingStartEndFormat, J.Lc()), h.left.enabled = E.eventMovingStartEndEnabled, h.left.space = 5, h.left.width = null, h.left.height = E.eventHeight, h.right = {}, h.right.html = h.end.toString(E.eventMovingStartEndFormat, J.Lc()), h.right.enabled = E.eventMovingStartEndEnabled, h.right.space = 5, h.right.width = null, h.right.height = E.eventHeight, h.multimove = t.Jp(), h.shift = E.coords.shift, h.ctrl = E.coords.ctrl, h.meta = E.coords.meta, h.alt = E.coords.alt, h.areaData = b.movingAreaData, h.link = null, h.cssClass = null, h.html = null; var v = {}; v.event = a, v.start = h.start, v.end = h.end, v.overlapping = h.overlapping, v.resource = h.resource, h.multimove.splice(0, 0, v), E.eb = h; var p = { "start": h.start, "end": h.end, "resource": h.resource }; if ("function" == typeof E.onEventMoving && E.onEventMoving(h), i.rm) { if (t.list = y(h.multimove, !0), t.list.splice(0, 1), t.Rp(), e.allowed = h.allowed, u(e, h.cssClass), h.fullShadow) { var m = E.Pg(a); e.innerHTML = m.innerHTML, e.style.boxShadow = "0 2px 5px rgba(0,0,0,.2)" } else h.html ? e.firstChild.innerHTML = h.html : e.firstChild.innerHTML = ""; var g = !1; if (h.start !== p.start || h.end !== p.end) { var w = h.start, x = E.Vi(h.end); e.start = w, e.end = x; var k = DayPilot.DateUtil.diff(w, x); k = f(k, 1); var C = J.Lg(k), _ = C ? E.getPixels(w).boxLeft : E.getPixels(w).left, D = C ? E.getPixels(x).boxRight : E.getPixels(x).left; e.style.left = _ + "px", e.style.width = D - _ + "px", e.left = _, e.width = D - _, g = !0 } if (h.resource !== p.resource) { var S = E.zl(h.resource); if (S) { if (e.row = S, e.style.height = f(S.height, 0) + "px", e.style.top = S.top + "px", E.eventMoveToPosition) { var T = E.rowMarginTop; e.style.top = S.top + T + "px", e.style.height = "3px", e.line = 0 } g = !0 } } !function () { var n = e.row, i = a.data, r = e.width, o = e.left, s = y(t.list).map(function (e) { return e.event.data }).add(i); E.Sp(e, n, o, r, s) }(), E.bq(e, h), E.cq(e, h), b.movingLink && b.movingLink.clear(), h.link && (b.movingLink = M.qo(h.link.from, e, h.link)) } }, this.Sp = function (e, t, n, a, r) { if (!E.allowEventOverlap) { !function () { e.overlapping = !1; for (var o = 0; o < t.lines.length; o++) { if (!t.lines[o].Vd(n, a, r)) return void (e.overlapping = !0) } var s = t.index, l = y(X.list).some(function (t) { var i = t.div, r = parseInt(i.style.left), o = parseInt(i.style.width), l = t.start.y; return e !== i && (l === s && d(n, n + a, r, r + o)) }); if (l) return void (e.overlapping = !0); if (I.Yp().some(function (t) { var i = t.info, r = t.left, o = t.width, l = t.y; return (e.event ? e.event.data.id : e.info.event.data.id) !== i.event.data.id && l === s && d(n, n + a, r, r + o) })) return void (e.overlapping = !0); var l = y(N.divs).some(function (t) { var i = t.info, r = parseInt(t.style.left), o = parseInt(t.style.width), l = i.$.Qp.index; return e !== t && (l === s && d(n, n + a, r, r + o)) }); return l ? void (e.overlapping = !0) : function () { var t = i.Xp; return !!t && (e !== t && ((e.info ? e.info.$.Qp : e.row).index === t.row.index && d(e.left, e.left + e.width, t.left, t.left + t.width))) }() ? void (e.overlapping = !0) : void 0 }(); var o = e.overlapping, s = E.ca("_shadow_overlap"); o ? u(e, s) : c(e, s) } }, this.Tp = function (e, t, n, i) {
                E.Nc(t, n, i) && (e.overlapping = !0);
                var a = E.ca("_shadow_overlap"); e.overlapping ? u(e, a) : c(e, a)
            }, this.Nc = function (e, t, n) { if (!(E.cellConfig && E.cellConfig.hasDisabled || E.hm.dq)) return !1; var i = null; "Days" === E.viewType && (i = E.So(e)); var a = E.rows.find(n, i).cells.forRange(e, t); return !!a && a.some(function (e) { return e.properties.disabled }) }, this.bq = function (e, t) { var n = E.ca("_shadow_forbidden"); !t.allowed || I.invalid ? u(e, n) : c(e, n) }, this.cq = function (e, t) { if (this.eq(), e.calendar === E) { var n = E.Xn(e.grid), i = {}; i.left = parseInt(e.style.left), i.top = parseInt(e.style.top), i.right = i.left + parseInt(e.style.width); var a = t.left.width || 10, r = l(); if (r.style.position = "absolute", r.style.left = i.left - a - t.left.space + "px", r.style.top = i.top + "px", r.style.height = t.left.height + "px", r.style.overflow = "hidden", r.style.boxSizing = "border-box", r.innerHTML = t.left.html, r.className = E.ca("_event_move_left"), r.onmousemove = E.fq, DayPilot.browser.ie && (r.style.display = "block"), t.left.enabled) if (n.divHover.appendChild(r), t.left.width) r.style.width = a + "px"; else { r.style.whiteSpace = "nowrap"; var o = r.offsetWidth, s = i.left - o - t.left.space; r.style.width = o + "px", r.style.left = s + "px"; var d = E.nav.scroll.scrollLeft; s < d && n.divHover.removeChild(r); var c = E.Ol() + (s - d); c > 0 && (r.style.left = c + "px", r.style.top = i.top - n.div.scrollTop + n.top + "px", E.nav.top.appendChild(r), E.elements.hover.push(r)) } var a = t.right.width || 10, u = l(); if (u.style.position = "absolute", u.style.left = i.right + t.right.space + "px", u.style.top = i.top + "px", u.style.height = t.right.height + "px", u.style.overflow = "hidden", u.style.boxSizing = "border-box", t.right.width ? u.style.width = t.right.width + "px" : u.style.whiteSpace = "nowrap", u.innerHTML = t.right.html, u.className = this.ca("_event_move_right"), u.onmousemove = E.fq, DayPilot.browser.ie && (u.style.display = "block"), t.right.enabled) { n.divHover.appendChild(u); var h = E.nav.scroll.scrollWidth; i.right + t.right.space + u.offsetWidth >= h && n.divHover.removeChild(u) } } }, this.eq = function () { E.divHover.innerHTML = "", E.vl.top.divHover.innerHTML = "", E.vl.bottom.divHover.innerHTML = "", x(E.elements.hover), E.elements.hover = [] }, this.gq = function () { var e = E.rowHeaderColumnDefaultWidth; if (this.rowHeaderColumns) { var t = J.Cp(); this.rowHeaderCols = DayPilot.Util.propArray(t, "width", e) } else this.rowHeaderCols = null }, this.hq = function () { var e = 0; if (this.gq(), this.rowHeaderCols) for (var t = 0; t < this.rowHeaderCols.length; t++)e += this.rowHeaderCols[t]; else e = this.rowHeaderWidth; return e }, this.iq = function () { return this.jq(E.progressiveRowRenderingPreload) }, this.jq = function (e) { var e = e || 0, t = 0, n = E.rowlist.length; if (E.progressiveRowRendering) { var i = E.hd(); t = i.yStart, function () { var e = E.rowlist[t], n = e && e.split && e.split.parent; n && (t = n.index) }(), n = i.yEnd + 1, t = f(0, t - e), n = Math.min(E.rowlist.length, n + e) } return { "start": t, "end": n } }, this.kq = function () { function e(e, t, n) { for (var i = E.Xn(e).divHeader, r = t; r < n; r++) { var o = i.rows[r]; if (o) { var s = { "row": o, "grid": e, "i": r }; E.lq(s, a) } } } if (this.fg()) { var t = !1, n = 0; if (this.rowHeaderWidthAutoFit) { var i = this.divHeader; if (!i) return; if (!i.rows) return; var a = []; this.gq(); E.rowHeaderWidthAutoFitShrink && (E.rowHeaderScrolling || (E.rowHeaderWidth = 0), E.rowHeaderCols && E.rowHeaderCols.forEach(function (e, t) { E.rowHeaderCols[t] = 0 })); var r = E.iq(); if (e("main", r.start, r.end), E.vl.top.enabled() && e("top", 0, E.vl.top.divHeader.rows.length), E.vl.bottom.enabled() && e("bottom", 0, E.vl.bottom.divHeader.rows.length), this.rowHeaderCols) for (var o = 0; o < a.length; o++)"number" == typeof this.rowHeaderCols[o] && (a[o] > this.rowHeaderCols[o] && (this.rowHeaderCols[o] = a[o], t = !0), n += this.rowHeaderCols[o]); else { n = this.rowHeaderWidth; var s = J.Pl(); this.rowHeaderWidth < a[0] + E.rowHeaderWidthMarginRight + s && (n = a[0] + E.rowHeaderWidthMarginRight + s, t = !0) } } t && (this.Un && (this.Un.widths = this.rowHeaderCols, this.Un.updateWidths(), DayPilot.Util.updatePropsFromArray(J.Cp(), "width", this.rowHeaderCols)), this.rowHeaderCols || (this.rowHeaderWidth = n), this.Jm(), this.mq()) } }, this.lq = function (e, t) { var n = e.row, i = E.Xn(e.grid), a = i.rowlist[e.i], r = E.rowHeaderColumns; if (!a.hidden) { for (var o = 0; o < n.cells.length; o++)if (n.cells[o] && "number" != typeof n.cells[o].nq) { var s = n.cells[o].firstChild.firstChild; if (s && s.style) { var l = s.style.width, d = s.style.right, c = s.style.display; s.style.position = "absolute", s.style.width = "auto", s.style.right = "auto", s.style.whiteSpace = "nowrap", s.style.display = "block"; var u = s.offsetWidth + 2; n.cells[o].nq = u, s.style.position = "", s.style.width = l, s.style.right = d, s.style.display = c, s.style.whiteSpace = "" } } for (var o = 0; o < n.cells.length; o++)if (n.cells[o]) { var u = n.cells[o].nq; if ("undefined" == typeof t[o] && (t[o] = 0), r && r[o] && "number" == typeof r[o].maxAutoWidth) { var h = r[o].maxAutoWidth; u = Math.min(u, h) } t[o] = Math.max(t[o], u) } } }, this.Zk = function () { this.oq = !0, this.gq(); var e = this.hq(), t = this.divHeader; if (t.style.width = e + "px", t.style.height = E.Nk + "px", E.vl.main.divHeader = t, E.progressiveRowRendering) a(); else for (var n = this.rowlist.length, i = 0; i < n; i++)E.pq(i); if (E.vl.top.enabled()) for (var i = 0; i < E.vl.top.rowlist.length; i++)E.pq(i, "top"); if (E.vl.bottom.enabled()) for (var i = 0; i < E.vl.bottom.rowlist.length; i++)E.pq(i, "bottom"); E.qq(), this.divResScroll.appendChild(t), this.rowHeaderWidthAutoFit && this.kq() }, this.Yk = function () { function e(e) { var t = E.Xn(e), n = t.divHeader, i = n; if (n.rq && (i = n.rq), E.Pn(e), i) { if (DayPilot.browser.ie) for (var a = 0; a < i.childNodes.length; a++)x(i.childNodes[a]); i.innerHTML = "", DayPilot.puc(i) } n && (n.rows = []) } e("main"), e("top"), e("bottom") }, this.Km = function () { if (E.progressiveRowRendering) { for (var e = this.iq(), t = 0; t < E.rowlist.length; t++)e.start <= t && t < e.end ? E.pq(t) : E.Yn(t); if (this.rowHeaderWidthAutoFit && !i.sq) { var n = E.Ol(); this.kq(); if (E.Ol() !== n) { var a = this.cellWidth; this.Uk(); this.cellWidth !== a && (E.Vk(), E.$k(), E._k(), E.wb(), E.ob(), E.tq()) } } } }, this.qq = function () { if (!E.Ha.uq()) { var e = E.divHeader, t = l(); t.style.position = "absolute", e.appendChild(t), E.nav.resScrollSpace = t, t.setAttribute("unselectable", "on"); var n = l(); n.style.position = "relative", n.style.height = "100%", n.className = this.ca("_rowheader"), t.appendChild(n); var i = this.hq(), t = E.nav.resScrollSpace; t.style.width = i + "px", t.style.top = this.Nk + "px" } }, this.Yn = function (e, t) { var n = E.Xn(t), i = n.divHeader.rows[e]; if (i) { if (i) { var a = i.domArgs; if (i.domArgs = null, a && "function" == typeof E.onBeforeRowHeaderDomRemove && E.onBeforeRowHeaderDomRemove(a), a && "function" == typeof E.onBeforeRowHeaderDomAdd && E.Y.reactDOM) { var r = a && a.Be; if (r) { if (m(a.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.ja(r) } } } a && (a.element = null, a.Be = null) } x(i.cells), n.divHeader.rows[e] = null } }, this._m = function (e, t) { this.Yn(e, t), this.pq(e, t) }, this.Zm = function () { return "Standard" === E.rowHeaderColumnsMode || "Tabular" === E.rowHeaderColumnsMode }, this.vq = function (e, t) { var n = void 0; return e.tags && (n = e.tags[t]), "undefined" != typeof n ? n : e[t] }, this.rn = function (e, t, n) { return e.tags && "undefined" != typeof e.tags[t] ? void (e.tags[t] = n) : void (e[t] = n) }, this.pq = function (e, t) { function n() { var t = l(); if (E.treeEnabled && !d.isNewRow) { var n = d.level * E.treeIndent + E.treeImageMarginLeft; W && (n += F); var i = E.treeImageWidth, a = E.treeImageHeight; t.style.marginLeft = n + "px", t.style.position = "relative", t.className = E.ca("_rowheader_inner_indent"); var r = l(); r.style.width = i + "px", r.style.height = a + "px", r.style.backgroundRepeat = "no-repeat", r.style.position = "absolute", r.style.top = E.treeImageMarginTop + "px", d.loaded || 0 !== d.children.length ? d.children.length > 0 ? (d.expanded ? r.className = E.ca("_tree_image_collapse") : r.className = E.ca("_tree_image_expand"), r.style.cursor = "pointer", r.index = e, r.onclick = function (e) { E.np(this.index), e.cancelBubble = !0 }) : r.className = E.ca("_tree_image_no_children") : (r.className = E.ca("_tree_image_expand"), r.style.cursor = "pointer", r.index = e, r.onclick = function (e) { E.Hq(this.index), e.cancelBubble = !0 }), t.appendChild(r) } var o = l(); if (E.treeEnabled) { var s = E.treeImageMarginRight; o.style.marginLeft = i + s + "px" } o.innerHTML = E.Fa(_.text, _.html), o.className = E.ca("_rowheader_inner_text"), x.textDiv = o, x.cellDiv = I, t.appendChild(o), j.appendChild(t); var c = _.verticalAlignment || k.verticalAlignment; if (c) switch (j.style.display = "flex", c) { case "center": j.style.alignItems = "center"; break; case "top": j.style.alignItems = "flex-start"; break; case "bottom": j.style.alignItems = "flex-end" } } var i = E.Xn(t), a = i.rowlist, r = i.divHeader, o = r; if (r.rq && (o = r.rq), r && !r.rows[e]) { var s = this.rowHeaderCols, d = a[e]; if (d && !d.hidden) { var c = z.ra[e], h = d.height, f = d.cells && d.cells[0]; f && f.rowspan > 1 && (h = f.row.split.totalHeight()); var v = null; d.split && d.split.parent && d.split.wq() && (v = E.Dp(d.split.parent)); var p = this.Dp(d), g = s && p.row.columns && p.row.columns.length > 0, b = g ? this.rowHeaderCols.length : 0, w = this.hq(); r.rows[e] = {}, r.rows[e].cells = []; var x = l(); x.style.position = "absolute", x.style.top = d.top + "px", x.row = v ? d.split.parent : d, x.index = e, x.column = 0; var k = p.row, _ = v ? v.row : k, D = E.Zm(), S = d.children.length > 0, T = E.internalUseStandardColumns && !d.isNewRow, A = DayPilot.isArray(E.rowHeaderColumns), H = T || D && A, M = y(p.row.columns); v && A && p.row.columns.length === E.rowHeaderColumns.length && E.rowHeaderColumns.forEach(function (e, t) { e.split || (M[t] = v.row.columns[t]) }), H && (M = M.filter(function (e, t) { return !E.rowHeaderColumns[t].hidden }), b = M.length); var R = !(E.rowHeaderColumnsMergeParents && S); if (H && R) { _ = M[0] || p.row; var B = E.rowHeaderColumns.find(function (e) { return !e.hidden }); B && B.split && (x.row = d) } E.ia() && (_ = p.row); var P = g ? s[0] : w; x.style.width = P + "px", x.style.border = "0px none"; var N = _.toolTip || k.toolTip; N && (x.title = N), x.setAttribute("unselectable", "on"), "undefined" != typeof k.ariaLabel ? x.setAttribute("aria-label", k.ariaLabel) : x.setAttribute("aria-label", _.text || ""), x.onmouseenter = E.xq, x.onmouseleave = E.yq, x.onmousemove = E.zq, x.onmouseout = E.Aq, x.onmouseup = E.Bq, x.oncontextmenu = E.Cq, x.onclick = E.Dq, x.ondblclick = E.Eq, DayPilot.rePassive(x, "touchstart", E.Le.Fq), DayPilot.reNonPassive(x, "touchend", E.Le.Gq); var I = l(); I.style.width = P + "px", I.setAttribute("unselectable", "on"), I.className = this.ca("_rowheader"), c && u(I, E.ca("_rowheader_selected")), k.cssClass && u(I, k.cssClass), _.cssClass && u(I, _.cssClass); var L = _.backColor || k.backColor; L && (I.style.background = L); var O = _.fontColor || k.fontColor; O && (I.style.color = O); var U = _.horizontalAlignment || k.horizontalAlignment; E.treeEnabled && (U = null), U && (I.style.textAlign = U), I.style.height = h + "px", I.style.overflow = "hidden", I.style.position = "relative"; var j = l(); switch (j.setAttribute("unselectable", "on"), j.className = this.ca("_rowheader_inner"), U) { case "right": j.style.justifyContent = "flex-end"; break; case "left": j.style.justifyContent = "flex-start"; break; case "center": j.style.justifyContent = "center" }I.appendChild(j); var W = "Disabled" !== this.rowMoveHandling && "main" === d.grid, F = E.rowDragHandleWidth, Y = _.areas || []; W && !k.moveDisabled && Y.push({ "v": "Hover", "w": F, "bottom": 0, "top": 0, "left": 0, "css": E.ca("_rowmove_handle"), "action": "Move" }); var V = E.qn(d); DayPilot.Areas.attach(I, V, { "areas": Y, "allowed": function () { return !C.row } }); var X = l(); X.style.position = "absolute", X.style.bottom = "0px", X.style.width = "100%", X.style.height = "0px", X.style.boxSizing = "content-box", X.style.borderBottom = "1px solid transparent", X.className = this.ca(q.resourcedivider), I.appendChild(X), n(), x.appendChild(I), function () { if ("function" == typeof E.onBeforeRowHeaderDomAdd || "function" == typeof E.onBeforeRowHeaderDomRemove) { var t = {}; if (t.control = E, t.row = E.qn(d), t.element = null, t.target = "Cell", r.rows[e].domArgs = t, "function" == typeof E.onBeforeRowHeaderDomAdd && E.onBeforeRowHeaderDomAdd(t), t.element) { var n = null; switch (t.target && t.target.toLowerCase()) { case "text": n = te; break; case "cell": n = j }if (n) { t.Be = n, n.innerHTML = ""; if (m(t.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.X(t.element, n) } else n.appendChild(t.element) } } } }(); f && f.refCell || (o.appendChild(x), r.rows[e].cells[0] = x); var G = !d.isNewRow && E.rowHeaderColumnsMergeParents && p.row.children().length > 0; if (!p.row.columns || 0 === p.row.columns.length || G) x.colSpan = "max", I.style.width = w + "px"; else for (var J = P, K = T || D ? 0 : 1, Q = 1; Q < b; Q++) { var _ = M[Q - K] || {}, f = d.cells[Q - K], h = d.height; f.rowspan > 1 && (h = f.row.split.totalHeight()); var x = l(); x.style.position = "absolute", x.style.top = d.top + "px", x.style.left = J + "px", f.refCell || (o.appendChild(x), r.rows[e].cells[Q] = x), x.row = d, x.index = e, x.column = Q; var Z = _.toolTip || k.toolTip; Z && (x.title = Z), x.setAttribute("unselectable", "on"), x.onmousemove = E.zq, x.onmouseout = E.Aq, x.onmouseup = E.Bq, x.oncontextmenu = E.Cq, x.onclick = E.Dq, x.ondblclick = E.Eq; var I = l(), $ = s[Q]; J += $; var L = _.backColor || k.backColor; L && (I.style.backgroundColor = L); var O = _.fontColor || k.fontColor; O && (I.style.color = O), I.style.width = $ + "px", I.style.height = h + "px", I.style.overflow = "hidden", I.style.position = "relative", I.setAttribute("unselectable", "on"), u(I, this.ca("_rowheader")), u(I, this.ca("_rowheadercol")), u(I, this.ca("_rowheadercol" + Q)), c && u(I, E.ca("_rowheader_selected")), k.cssClass && u(I, k.cssClass), _.cssClass && u(I, _.cssClass); var ee = _.horizontalAlignment || k.horizontalAlignment; ee && (I.style.textAlign = ee); var j = l(); switch (j.setAttribute("unselectable", "on"), j.className = this.ca("_rowheader_inner"), ee) { case "right": j.style.justifyContent = "flex-end"; break; case "left": j.style.justifyContent = "flex-start"; break; case "center": j.style.justifyContent = "center" }I.appendChild(j); var X = l(); X.style.position = "absolute", X.style.bottom = "0px", X.style.width = "100%", X.style.height = "0px", X.style.boxSizing = "content-box", X.style.borderBottom = "1px solid transparent", X.className = this.ca("_resourcedivider"), I.appendChild(X); var te = l(), ne = E.Fa(_.text, _.html); te.innerHTML = ne, x.textDiv = te, x.cellDiv = I, j.appendChild(te), DayPilot.Areas.attach(I, V, { "areas": _.areas, "allowed": function () { return !C.row } }), x.appendChild(I) } } } }, this.Cq = function (e) { if ("Disabled" === E.rowRightClickHandling) return !1; var t = this.row, n = E.qn(t), i = {}; if (i.ctrl = e.ctrlKey, i.shift = e.shiftKey, i.meta = e.metaKey, i.originalEvent = e, i.row = n, i.preventDefault = function () { this.preventDefault.value = !0 }, "function" != typeof E.onRowRightClick || (E.onRowRightClick(i), !i.preventDefault.value)) { switch (E.rowRightClickHandling) { case "ContextMenu": t.contextMenu && t.contextMenu.show(n) }return "function" == typeof E.onRowRightClicked && E.onRowRightClicked(i), !1 } }, this.Dq = function (e) { if (!O.cancelClick) { var t = this.row, n = this.column, i = E.qn(t, this.index); return t.isNewRow ? void E.yn.xn(t) : void E.un(i, e, n) } }, this.Eq = function (e) { if (E.sm.resClick) { for (var t in E.sm.resClick) window.clearTimeout(E.sm.resClick[t]); E.sm.resClick = null } var n = this.row, i = E.qn(n, this.index), a = this.column; if (E.Fb()) { var r = {}; if (r.resource = i, r.row = i, r.x = a, r.ctrl = e.ctrlKey, r.shift = e.shiftKey, r.meta = e.metaKey, r.originalEvent = e, r.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onRowDoubleClick && (E.onRowDoubleClick(r), r.preventDefault.value)) return; switch (E.rowDoubleClickHandling) { case "PostBack": E.rowDoubleClickPostBack(i); break; case "CallBack": E.rowDoubleClickCallBack(i); break; case "Select": E.wn(n, e.ctrlKey, e.shiftKey, e.metaKey); break; case "Edit": E.yn.xn(n, a) }"function" == typeof E.onRowDoubleClicked && E.onRowDoubleClicked(r) } else switch (E.rowDoubleClickHandling) { case "PostBack": E.rowDoubleClickPostBack(i); break; case "CallBack": E.rowDoubleClickCallBack(i); break; case "JavaScript": E.onRowDoubleClick(i); break; case "Select": E.wn(n, e.ctrlKey, e.shiftKey, e.metaKey); break; case "Edit": E.yn.xn(n, a) } }, this.rowDoubleClickPostBack = function (e, t) { var n = {}; n.resource = e, this.Ia("RowDoubleClick", n, t) }, this.rowDoubleClickCallBack = function (e, t) { var n = {}; n.resource = e, this.Ka("RowDoubleClick", n, t) }, this.Iq = function (e) { if ("Disabled" !== E.timeHeaderClickHandling) { var t = {}; t.start = this.cell.start, t.level = this.cell.level, t.end = this.cell.end, t.end || (t.end = new DayPilot.Date(t.start).addMinutes(E.cellDuration)), E.zn(t) } }, this.Jq = function (t) { if ("Disabled" !== E.timeHeaderRightClickHandling) { t.cancelBubble = !0, t.preventDefault(); var n = {}; if (n.start = this.cell.start, n.level = this.cell.level, n.end = this.cell.end, n.end || (n.end = new DayPilot.Date(n.start).addMinutes(E.cellDuration)), E.Fb()) { var i = {}; if (i.header = n, i.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onTimeHeaderRightClick && (E.onTimeHeaderRightClick(i), i.preventDefault.value)) return; switch (this.timeHeaderRightClickHandling) { case "PostBack": E.timeHeaderRightClickPostBack(e); break; case "CallBack": E.timeHeaderRightClickCallBack(e) }"function" == typeof E.onTimeHeaderRightClicked && E.onTimeHeaderRightClicked(i) } } }, this.Kq = function (e) { var t = E.rowlist[e]; if (t.hidden) return 0; var n = t.height; return "number" == typeof t.forcedHeight && (n = t.forcedHeight), n }, this.Lq = function (e, t, n) { E.divHeader, E.elements.cells, E.ra.cells; e.forEach(function (e) { }) }, this.Mq = function (e, t, n) { function i(e) { var n = E.Kq(e), i = t; "hide" === t ? i = 0 : "show" === t && (i = E.rowlist[e].height); var a = i - n; o.push({ "i": e, "now": n, "dist": a }) } function a(e) { s || (s = e); var t = e - s, i = Math.min(1, t / r); 0 === i && (i = .1), o.forEach(function (e) { var t = e.now + e.dist * i; E.rowlist[e.i].forcedHeight = t }), E.Nq(), i < 1 ? window.requestAnimationFrame(a) : (l.style.overflowX = d, l.style.overflowY = c, "function" == typeof n && n()) } var r = 200, o = []; if ("number" == typeof e) i(e); else { if (!DayPilot.isArray(e)) throw new DayPilot.Exception("Unexpected param (must be number/array)."); e.forEach(function (e) { i(e) }) } var s = 0, l = E.nav.scroll, d = l.style.overflowX, c = l.style.overflowY; 0 === DayPilot.sw(l) && (l.style.overflowY = "hidden"), window.requestAnimationFrame(a) }, this.qn = function (e) { return new DayPilot.Row(e, E) }, this.fm = function (e, t) { t = t || "main"; var n = E.vl[t], i = n.rowlist, a = i[e]; if (a.events || a.Oq(), !a.data) { a.data = {}, a.data.start = new DayPilot.Date(a.start), a.data.startTicks = a.data.start.getTime(); var r = this.Wd().getTime() - this.Ob().getTime(); a.data.end = J.Pq() ? a.data.start.addTime(r) : a.data.start.addDays(1), a.data.endTicks = a.data.end.getTime(), a.data.offset = a.start.getTime() - this.Ob().getTime(), a.data.i = e, a.data.grid = t } }, this.Qq = {}, this.ob = function (e) { if (e ? this.events.list = e : this.events.list || (this.events.list = []), null != this.events.list && !DayPilot.isArray(this.events.list)) throw new DayPilot.Exception("DayPilot.Scheduler.events.list expects an array object"); L.Qi(!0); var t, n = this.events.list, i = "function" == typeof this.onBeforeEventRender, a = "Resources" === E.viewType; E.Qq = {}; for (var r = 0; r < n.length; r++) { var o = n[r]; if (o) { if ("object" != typeof o) throw new DayPilot.Exception("Event data item must be an object"); if (!o.start) throw new DayPilot.Exception("Event data item must specify 'start' property"); if (o instanceof DayPilot.Event) throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead."); var s = "string" == typeof o.id || "number" == typeof o.id, l = "string" == typeof o.recurrentMasterId || "number" == typeof o.recurrentMasterId; if (!s) { var l = "string" == typeof o.recurrentMasterId || "number" == typeof o.recurrentMasterId; if (!l) throw new DayPilot.Exception("All events must have an id property (string or number)") } if (!E.temp.allowDuplicateEventIds) { var d = "_" + o.id; if (!s && l && (d = "#" + o.recurrentMasterId + "#" + new DayPilot.Date(o.start)), E.Qq[d]) throw new DayPilot.Exception("Duplicate event IDs are not allowed: " + d); E.Qq[d] = !0 } "Milestone" === o.type && (o.end = o.start), i && this.rg(r), "*" === o.resource ? t = E.rowlist : a ? t = E.Rq(o.resource).concat(E.Rq("*")) : "Days" === E.viewType ? t = E.rowlist : "Gantt" === E.viewType && (t = E.Rq(o.id)); for (var c = 0; t && c < t.length; c++) { var u = t[c], h = this.Fo(o, u); h && i && (h.cache = this.ra.events[r]) } } } E.em().forEach(function (e) { E.Ko(e) }), E.Bm() }, this.Sq = {}; var L = this.Sq; L.Tq = {}, L.Qi = function (e) { L.Tq = {}; for (var t = E.em(), n = 0; n < t.length; n++) { var i = t[n]; if (e && i.Oq(), E.fm(i.index, i.grid), i.id) { var a = typeof i.id + "_" + i.id; L.Tq[a] || (L.Tq[a] = y()), L.Tq[a].push(i) } } }, L.loadEvent = function (e) { }, this.Rq = function (e) { var t = typeof e + "_" + e; return y(L.Tq[t]) }, this.Eo = function () { var e = {}; if ("Resources" !== E.viewType) return !1; for (var t = 0; t < E.rowlist.length; t++) { var n = E.rowlist[t], i = n.id; if (e[i]) return !0; e[i] = !0 } return !1 }, this.rg = function (e) { var t = this.ra.events, n = this.events.list[e], i = {}; n instanceof DayPilot.Event && (n = n.data); for (var a in n) i[a] = n[a]; if ("string" == typeof i.start && (i.start = new DayPilot.Date(i.start)), "string" == typeof i.end && (i.end = new DayPilot.Date(i.end)), "function" == typeof this.onBeforeEventRender) { var r = {}; r.e = i, r.data = i, this.onBeforeEventRender(r) } t[e] = i }, this.Uq = function (e) { var t = e.data.container, n = typeof t; return "string" !== n && "number" !== n ? null : typeof t + "_" + t }, this.Ko = function (e) { if (e.lines = [], e.sections = null, !e.isNewRow) { this.sortDirections ? e.events.sort(this.Ng) : E.Jk || e.events.sort(this.Mg), e.containerCache = {}, e.containers = [], e.events.forEach(function (t) { var n = E.Uq(t); if (n) { var i = e.containerCache[n]; i || (i = { "events": [], "line": null, "start": null, "end": null, "left": null, "width": null }, e.containerCache[n] = i, e.containers.push(i)), t.part.container = i, i.events.push(t) } }), e.containers.forEach(function (e) { var t = e.events[0], n = e.events[e.events.length - 1]; e.start = t.part.start, e.end = n.part.end, e.left = t.part.left, e.width = n.part.right - t.part.left, e.right = n.part.right }); if (E.Jk) return void F.Ko(e); var t = E.groupConcurrentEvents; if (t) for (var n = 0; n < e.blocks.length; n++)e.blocks[n].clear(); y(e.events).forEach(function (t) { if (!t.part.height) return e.eventHeight ? void (t.part.height = e.eventHeight) : void (t.part.height = J._n()) }); var i = function (e) { return "number" == typeof e.data.line }; e.events.filter(i).forEach(function (t) { e.Ud(t) }); for (var a = 0; a < e.events.length; a++) { var r = e.events[a]; e.Ud(r), t && e.Sd(r) } for (var o = 0, n = 0; n < e.lines.length; n++) { var s = e.lines[n]; s.top = o, o += (s.height || e.eventHeight) * e.eventStackingLineHeight / 100 } if (t) for (var a = 0; a < e.blocks.length; a++) { var l = e.blocks[a]; l.lines = [], l.events.sort(this.Ng); for (var d = 0; d < l.events.length; d++) { var r = l.events[d]; l.Ud(r) } l.lines.length <= E.groupConcurrentEventsLimit && (l.expanded = !0); var c = y(l.events).map(function (e) { return e.id() }).some(function (e) { return w(E.Vq, e) }); c && (l.expanded = !0); for (var o = 0, n = 0; n < l.lines.length; n++) { var s = l.lines[n]; s.top = o, o += (s.height || e.eventHeight) * e.eventStackingLineHeight / 100 } } } }, this.Am = function (e) { e = DayPilot.ua(e), e = E.an(e), e.forEach(function (e) { E.Ko(e) }), E.Jk ? F.Wq() : e.forEach(function (e) { E.Bp(e) }) }, this.Wo = function () { var e = "Manual" === E.scale ? E.itline[0].start : E.startDate; return y(E.rowlist).some(function (t) { return !!t.start && t.start.getTime() !== new DayPilot.Date(e).getTime() }) }, this.Fo = function (e, t) { if (!t.hideEvents) { var n = DayPilot.Util.isNullOrUndefined, i = new DayPilot.Date(e.start), a = new DayPilot.Date(e.end); a = E.Vi(a); var r = i.ticks, o = a.ticks; if (o < r) return null; var s = null; if ("function" == typeof E.onBeforeEventRender) { var l = k(E.events.list, e); s = E.ra.events[l] } if (s) { if (s.hidden) return null } else if (e.hidden) return null; var d = !1; switch (this.viewType) { case "Days": var c = !(o <= t.data.startTicks || r >= t.data.endTicks) || r === o && r === t.data.startTicks, u = n(t.id) && n(e.resource) || t.id === e.resource; d = c && u; break; case "Resources": d = (t.id === e.resource || "*" === t.id || "*" === e.resource) && (!(o <= t.data.startTicks || r >= t.data.endTicks) || r === o && r === t.data.startTicks); break; case "Gantt": d = t.id === e.id && !(o <= t.data.startTicks || r >= t.data.endTicks) }if (!d) return null; var h = new DayPilot.Event(e, E); h.part.dayIndex = t.data.i, h.part.grid = t.data.grid, h.part.start = t.data.startTicks < r ? i : t.data.start, h.part.end = t.data.endTicks > o ? a : t.data.end; var v = this.getPixels(h.part.start.addTime(-t.data.offset)), p = this.getPixels(h.part.end.addTime(-t.data.offset)); h.part.start === h.part.end && (p = this.getPixels(h.part.end.addTime(-t.data.offset).addMilliseconds(1))), s && s.height ? h.part.height = s.height : e.height && (h.part.height = e.height); s || h.data; h.part.Xq = function () { var e = this.height; if (E.eventVersionsEnabled && !y(h.versions).isEmpty()) { var t = h.versions.length; e += t * E.eventVersionHeight, e += t * E.eventVersionMargin } return e + E.eventMarginBottom }; var m = v.left, g = p.left; if (h.part.startPixels = v, h.part.endPixels = p, m === g) { if (v.cut || p.cut) return null; var b = (h.part.start.addTime(-t.data.offset).getTime() + h.part.end.addTime(-t.data.offset).getTime()) / 2; if (E.getPixels(new DayPilot.Date(Math.floor(b))).cut) return null } h.part.box = J.Lg(o - r); var w = E.eventHeight; if ("Milestone" === e.type) { var x = e.width || w; h.part.end = h.part.start, h.part.left = m - x / 2, h.part.width = x, h.part.barLeft = 0, h.part.barWidth = x } else if (h.part.box) { var C = v.boxLeft, _ = p.boxRight; h.part.left = C, h.part.width = _ - C, h.part.barLeft = f(m - h.part.left, 0), h.part.barWidth = f(g - m, 1) } else h.part.left = m, h.part.width = f(g - m, 1), h.part.barLeft = 0, h.part.barWidth = f(g - m - 1, 1); var D = E.eventMinWidth; if (h.part.width = Math.max(h.part.width, D), h.part.right = h.part.left + h.part.width, h.cache = s, E.eventVersionsEnabled && E.Yq(h, t), "function" == typeof E.onEventFilter && E.events.Kg) { var S = {}; if (S.filter = E.events.Kg, S.filterParam = E.events.Kg, S.visible = !0, S.e = h, E.onEventFilter(S), !S.visible) return null } return t.events.push(h), h } }, this.Yq = function (e, t) { e.versions = []; var n = e.cache || e.data, i = y(n.versions); if (!i.isEmpty()) { var a = e.part.left, r = e.part.left + e.part.width; i.forEach(function (n) { var i = new DayPilot.Date(n.start), o = new DayPilot.Date(n.end), s = E.getPixels(i.addTime(-t.data.offset)), l = E.getPixels(o.addTime(-t.data.offset)); i.ticks === o.ticks && (l = E.getPixels(o.addTime(-t.data.offset).addTime(1))); var d = s.left, c = l.left; if (d === c && (s.cut || l.cut)) return null; var u = {}; u.left = d, u.continueLeft = i < t.data.start, u.right = c, u.continueRight = o > t.data.end, u.width = c - d, e.versions.push(u), u.left < a && (a = u.left), u.right > r && (r = u.right) }), E.eventVersionsReserveSpace ? (e.part.versionsLeft = a, e.part.versionsRight = r, e.part.versionsWidth = r - a) : (e.part.versionsLeft = e.part.left, e.part.versionsRight = e.part.left + e.part.width, e.part.versionsWidth = e.part.width) } }, this.Mg = function (e, t) { if (!(e && t && e.start && t.start)) return 0; var n = e.start().ticks - t.start().ticks; return 0 !== n ? n : t.end().ticks - e.end().ticks }, this.Ng = function (e, t) { if (!e || !t) return 0; var n = e.cache || e.data, i = t.cache || t.data; if (!(n.sort && n.sort.length > 0 && i.sort && i.sort.length > 0)) return E.Mg(e, t); for (var a = 0, r = 0; 0 === a && "undefined" != typeof n.sort[r] && "undefined" != typeof i.sort[r];)a = n.sort[r] === i.sort[r] ? 0 : "number" == typeof n.sort[r] && "number" == typeof i.sort[r] ? n.sort[r] - i.sort[r] : E.Og(n.sort[r], i.sort[r], E.sortDirections[r]), r++; return a }, this.Og = function (e, t, n) { var i = "desc" !== n, a = i ? -1 : 1, r = -a; if (null === e && null === t) return 0; if (null === t) return r; if (null === e) return a; var o = []; return o[0] = e, o[1] = t, o.sort(), e === o[0] ? a : r }, this.wn = function (e, t, n, i) { if (E.Fb()) { var a = k(E.rowlist, e), r = E.qn(e, a), o = k(O.wi, e) !== -1, s = o ? "deselected" : "selected", l = {}; if (l.row = r, l.selected = o, l.ctrl = t, l.shift = n, l.meta = i, l.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onRowSelect && (E.onRowSelect(l), l.preventDefault.value)) return; var d = n && !t && !i; if (n || (O.Zq = { "row": e, "index": a }), d) { O.$q(); var c = O.Zq.index, u = a; O._q(c, u) } switch (E.rowSelectHandling) { case "PostBack": E.rowSelectPostBack(r, s); break; case "CallBack": E.rowSelectCallBack(r, s); break; case "Notify": !d && O.L(e, t, n, i), E.rowSelectNotify(r, s); break; case "Update": !d && O.L(e, t, n, i) }"function" == typeof E.onRowSelected && (l.selected = k(O.wi, e) !== -1, E.onRowSelected(l)) } else { O.L(e, t, n); var a = k(E.rowlist, e), r = E.qn(e, a), o = k(O.wi, e) !== -1, s = o ? "deselected" : "selected"; switch (E.rowSelectHandling) { case "PostBack": E.rowSelectPostBack(r, s); break; case "CallBack": E.rowSelectCallBack(r, s); break; case "Notify": E.rowSelectNotify(r, s); break; case "JavaScript": E.onRowSelect(r, s) } } }, this.rowSelectPostBack = function (e, t, n) { var i = {}; i.resource = e, i.change = t, this.Ia("RowSelect", i, n) }, this.rowSelectCallBack = function (e, t, n) { var i = {}; i.resource = e, i.change = t, this.Ka("RowSelect", i, n) }, this.rowSelectNotify = function (e, t, n) { var i = {}; i.resource = e, i.change = t, this.Ka("RowSelect", i, n, "Notify") }, this.rows = {}, this.rows.selection = {}; var z = this.rows.selection; z.ra = [], z.get = function () { var e = []; return y(O.wi).forEach(function (t) { e.push(E.qn(t)) }), e }, z.clear = function () { O.ar() }, z.add = function (e) { if (!e || !e.isRow) throw new DayPilot.Exception("DayPilot.Scheduler.rows.selection.add(): DayPilot.Row object expected"); y(O.wi).some(function (t) { return t === e.$.row }) || (O.wi.push(e.$.row), z.br(), O.ok(e.$.row)) }, z.remove = function (e) { if (!e || !e.isRow) throw new DayPilot.Exception("DayPilot.Scheduler.rows.selection.remove(): DayPilot.Row object expected"); z.isSelected(e) && (DayPilot.rfa(O.wi, e.$.row), z.br(), O.ok(e.$.row)) }, z.isSelected = function (e) { if (!e || !e.isRow) throw new DayPilot.Exception("DayPilot.Scheduler.rows.selection.isSelected(): DayPilot.Row object expected"); return k(O.wi, e.$.row) !== -1 }, z.br = function () { E.selectedRows = y(O.wi).map(function (e) { return e.id }), z.ra = [], O.wi.forEach(function (e) { z.ra[e.index] = !0 }) }, this.rows.all = function () { for (var e = y(), t = 0; t < E.rowlist.length; t++) { var n = E.qn(E.rowlist[t]); e.push(n) } return e }, this.rows.visible = function () { for (var e = y(), t = 0; t < E.rowlist.length; t++) { var n = E.rowlist[t]; if (!n.hidden) { var n = E.qn(E.rowlist[t]); e.push(n) } } return e }, this.rows.each = function (e) { E.rows.all().forEach(e) }, this.rows.forEach = function (e) { E.rows.all().forEach(e) }, this.rows.filter = function (e, t) { E.rows.Kg = e, t || E.wa && E.Bd({ "immediateEvents": !0 }) }, Object.defineProperty(E.rows, "filterParam", { get: function () { return E.rows.Kg } }), this.rows.sort = function (e) { var t = E.rows.sortParam; if ("string" == typeof e) E.rows.cr = { "field": e, "order": "asc" }; else if ("object" == typeof e) { var n = p(e); n.order || (n.order = "asc"), E.rows.cr = n } else E.rows.cr = null; if (E.wa && E.Bd({ "immediateEvents": !0 }), "function" == typeof E.onRowSorted) { var i = {}; i.oldSortParam = t, E.onRowSorted(i) } }, Object.defineProperty(E.rows, "sortParam", { get: function () { return { "order": E.rows.dr(), "field": E.rows.er() } } }), this.rows.er = function () { var e = E.rows.cr; return e ? e.field : null }, this.rows.dr = function () { var e = E.rows.cr; return e ? e.order : "asc" }, this.rows.find = function (e, t) { if ("string" == typeof e || "number" == typeof e || !e && t) { var n = E.Rq(e); e || (n = E.rowlist); var i = null; return "string" == typeof t || t instanceof DayPilot.Date ? (t = new DayPilot.Date(t), i = n.find(function (e) { return t === e.start })) : i = n.first(), i ? new DayPilot.Row(i, E) : null } if ("function" != typeof e) throw new DayPilot.Exception("Invalid rows.find() argument: id or function expected"); var a = t || 0, r = E.rowlist.find(function (t, n) { return !(n < a) && e(E.qn(t)) }); if (r) return E.qn(r) }, this.rows.load = function (e, t, n) { if (!e) throw new DayPilot.Exception("rows.load(): 'url' parameter required"); var i = function (e) { var t = {}; t.exception = e.exception, t.request = e.request, "function" == typeof n && n(t) }, a = function (e) { var n, a = e.request; try { n = JSON.parse(a.responseText) } catch (e) { var r = {}; return r.exception = e, void i(r) } if (DayPilot.isArray(n)) { var o = {}; if (o.preventDefault = function () { this.preventDefault.value = !0 }, o.data = n, "function" == typeof t && t(o), o.preventDefault.value) return; E.resources = o.data, E.wa && E.update() } }; E.rowsLoadMethod && "POST" === E.rowsLoadMethod.toUpperCase() ? DayPilot.ajax({ "method": "POST", "url": e, "success": a, "error": i }) : DayPilot.ajax({ "method": "GET", "url": e, "success": a, "error": i }) }, this.rows.expand = function (e) { for (var t = [], n = e || 1, i = 0; i < E.rowlist.length; i++) { var a = E.rowlist[i], r = n === -1; a.level < n && (r = !0), r && !a.expanded && a.children && a.children.length > 0 && t.push(a.index) } if (0 !== t.length) if (1 === t.length) E.np(t[0]); else { for (var i = 0; i < t.length; i++) { var o = t[i], s = E.rowlist[o].resource; s.expanded = !0 } E.Bd() } }, this.rows.expandAll = function () { E.rows.expand(-1) }, this.rows.collapseAll = function () { E.rowlist.forEach(function (e) { e.resource.expanded = !1 }), E.Bd() }, this.rows.headerHide = function () { E.fr = !0, E.gr(), E.mq(), E.Wl() }, this.rows.headerShow = function () { E.fr = !1, E.gr(), E.mq(), E.Wl() }, this.rows.headerToggle = function () { E.fr ? E.rows.headerShow() : E.rows.headerHide() }, this.rows.edit = function (e, t) { var n = E.rowHeaderColumns, i = n && n.length - 1; if ("undefined" != typeof t && (t < 0 || t > i)) throw new DayPilot.Exception("Invalid column index: " + t); O.xn(e.$.row, t) }, this.rows.remove = function (e) { if ("number" == typeof e || "string" == typeof e) { var t = E.rows.find(e); if (!t) throw new DayPilot.Exception("The row to be removed was not found"); return void E.rows.remove(t) } var n = e.$.row.resource, i = j.hr(n); if (!i) throw new DayPilot.Exception("Cannot find source node parent"); var a = k(i, n); i.splice(a, 1), E.update() }, this.rows.add = function (e) { E.resources.push(e), E.Bd() }, this.rows.addChild = function (e, t) { if ("number" != typeof e && "string" != typeof e || (e = E.rows.find(e)), e) { if (!(e instanceof DayPilot.Row)) { var t = e; if (e = E.rows.find(t.id), !e) return } e.data.children || (e.data.children = []), e.data.children.push(t), E.Bd() } }, this.rows.update = function (e) {
                if (!(e instanceof DayPilot.Row || "object" == typeof e)) throw new DayPilot.Exception("DayPilot.Scheduler.rows.update() expects a DayPilot.Row object or a data object.");
                if (!(e instanceof DayPilot.Row)) { var t = e; if (e = E.rows.find(t.id), !e) return; e.data = t } !y(E.events.Do.rows).isEmpty() && (G.Co = !0, E.events.hn({ "dontResetFocus": !0 })); var n = E.rows.selection.isSelected(e), i = e, a = e.index, r = E.Xn(e.grid).rowlist, o = r[a], s = e.data, l = e.parent() ? e.parent().$.row : null, d = E.ir(s), e = E.jr(d, l); e.hidden = o.hidden, e.level = o.level, e.children = o.children, e.index = a, e.top = o.top, e.height = o.height, e.grid = o.grid, r[a] = e, n && (DayPilot.rfa(O.wi, i.$.row), O.wi.push(e)), e.Oq(), E.fm(e.index, e.grid), E.Xk(), E.kr(e), E.Ko(e), E.Bm(), E.lr(), E.Cm([e]), E.wb(), E.mr = !0, E.nr = setTimeout(function () { E.mr = !1 }, 500)
            }, this.kr = function (e) { for (var t = E.events.list, n = t.length, i = "function" == typeof E.onBeforeEventRender, a = 0; a < n; a++) { var r = t[a]; if (r) { if (r instanceof DayPilot.Event) throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead."); if ("Days" === E.viewType) throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Days'."); if ("Gantt" === E.viewType) throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Gantt'."); if ("*" === r.resource || "*" === e.id || r.resource === e.id) { i && this.rg(a); var o = this.Fo(r, e); o && i && (o.cache = this.ra.events[a]) } } } }, this.or = function () { var e = C.source, t = C.target, n = C.position, i = C.sourceCalendar; if (O.pr(), E.Fb()) { var a = {}; if (a.source = E.qn(e), a.source.calendar = i, a.target = E.qn(t), a.position = n, a.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onRowMove && (E.onRowMove(a), a.preventDefault.value)) return; switch (E.rowMoveHandling) { case "Update": O.qr(a); break; case "CallBack": E.rowMoveCallBack(a.source, a.target, a.position); break; case "PostBack": E.rowMovePostBack(a.source, a.target, a.position); break; case "Notify": O.qr(a), E.rowMoveNotify(a.source, a.target, a.position) }"function" == typeof E.onRowMoved && E.onRowMoved(a) } else { var e = E.qn(e), t = E.qn(t), n = n; switch (E.rowMoveHandling) { case "CallBack": E.rowMoveCallBack(e, t, n); break; case "PostBack": E.rowMovePostBack(e, t, n); break; case "JavaScript": E.onRowMove(e, t, n) } } }, this.ll = function (e) { var t = y(e); O.wi = [], t.isEmpty() || (E.Hk = !1, E.nb()), t.forEach(function (e) { var t = E.zl(e); t && O.wi.push(t) }), z.ra = [], O.wi.forEach(function (e) { z.ra[e.index] = !0 }), O.rr() }, this.yn = {}; var O = this.yn; O.xn = function (e, t) { O.sr(e, t) }, O.ur = function () { O.Zq = { "row": E.rowlist[0], "index": 0 } }, O.vr = function (e) { var t = k(E.rowlist, e); if (t === -1) throw new DayPilot.Exception("DayPilot.Scheduler: Row not found when selecting a range"); O.Zq = { "row": e, "index": t } }, O.$q = function () { O.Zq || O.ur(); var e = k(E.rowlist, O.Zq.row); if (!(e > -1)) { var t = E.zl(O.Zq.row.id); t ? (e = k(E.rowlist, t), O.Zq = { "row": t, "index": e }) : O.ur() } }, O.wr = function (e) { var t = E.hq(), n = E.ca("_rowmove_source"), i = e.top, a = e.height; e.split.list.length > 0 && (i = e.split.list[0].top, a = e.split.totalHeight()); var r = h(E.divHeader, 0, i, t, a); r.className = n, e.moveOverlay = r }, O.xr = function (e) { e && (x(e.moveOverlay), e.moveOverlay = null) }, O.yr = function () { var e = O.zr; if (e) { O.zr = null; try { e.input.parentNode.removeChild(e.input) } catch (e) { a() } e.input = null } }, O.sr = function (e, t) { t = t || 0, e.isNewRow && (t = 0); var n = O.Ar(e), i = n.cells[t]; if (i.input) return i.input; O.yr(), DayPilot.Areas.disable(i.firstChild); var a = i.clientWidth; e.isNewRow && (a = E.Ol()); var r = 0; 0 === t && (r = e.level * E.treeIndent); var o = document.createElement("input"); o.style.position = "absolute", o.style.top = "0px", o.style.left = "0px", o.style.width = a + "px", o.style.height = e.height - 1 + "px", o.style.border = "0px none", o.style.overflow = "hidden", o.style.boxSizing = "border-box", o.style.resize = "none", o.style.paddingLeft = r + "px", o.style.outline = "none"; var s = i.textDiv; o.style.fontFamily = DayPilot.gs(s, "fontFamily") || DayPilot.gs(s, "font-family"), o.style.fontSize = DayPilot.gs(s, "fontSize") || DayPilot.gs(s, "font-size"); var l = e.name; if (!e.isNewRow && E.rowHeaderColumns) { var d = E.rowHeaderColumns[t] || {}, c = d.display; l = E.vq(e.resource, c), 0 !== t || c || (l = e.name) } o.value = l || "", i.firstChild.appendChild(o), i.input = o; var u = O.yr; return o.focus(), o.onblur = function () { o.onblur = null; var n = o.value; u(), DayPilot.Areas.enable(i.firstChild), E.tn(e, n, o.canceled, t) }, o.onkeydown = function (e) { var t = e.keyCode; return 27 === t && (o.canceled = !0, u()), 13 !== t || (o.onblur(), !1) }, o.setSelectionRange ? o.setSelectionRange(0, 9999) : o.select(), O.zr = i, o }, O.wi = [], O.L = function (e, t, n, i) { var a = k(O.wi, e) !== -1; if (t || i) { if (a) return DayPilot.rfa(O.wi, e), z.br(), void O.ok(e) } else a = !1, O.ar(); a || O.wi.push(e), z.br(), O.ok(e) }, O._q = function (e, t) { O.ar(); for (var n = Math.min(e, t), i = Math.max(e, t), a = n; a <= i; a++) { var r = E.rowlist[a]; O.wi.push(r) } z.br(); for (var a = n; a <= i; a++) { var r = E.rowlist[a]; O.ok(r) } }, O.rr = function () { for (var e = 0; e < O.wi.length; e++) { var t = O.wi[e]; O.ok(t) } }, O.ok = function (e) { var t = k(E.rowlist, e); if (t === -1) { var n = E.zl(e.id); if (!n) return; t = n.index } E.gn(t), E.gl(), E.Yn(t), E.pq(t) }, O.Fn = function () { var e = []; if (!O.wi) return e; for (var t = 0; t < O.wi.length; t++) { var n = O.wi[t], i = k(E.rowlist, n), a = E.qn(n, i); e.push(a.toJSON()) } return e }, O.Zq = null, O.ar = function () { var e = O.wi; if (O.wi = [], E.selectedRows = [], z.ra = [], e.length <= 5) e.forEach(function (e) { O.ok(e) }); else { E.cl(), E.gl(); for (var t = 0; t < E.rowlist.length; t++)E.divHeader.rows[t] && E._m(t) } }, O.Ar = function (e) { for (var t = E.divHeader, n = 0; n < t.rows.length; n++) { var i = t.rows[n]; if (i && i.cells[0] && i.cells[0].row && i.cells[0].row.resource === e.resource) return i } return null }, O._d = function (e) { var t = b.rowmoving, n = e.split.parent ? e.split.parent : e; t.row = n, t.sourceCalendar = E, t.cursor = E.divResScroll.style.cursor, E.divResScroll.style.cursor = "move", O.wr(n) }, O.pr = function () { E.divResScroll.style.cursor = C.cursor, x(C.div), O.xr(C.row), b.rowmoving = C = {} }, O.Br = function (e) { var t = DayPilot.mo3(E.divHeader, e), n = E.Mn(t.y, "main", !0), i = E.rowlist[n.i]; if (i && !i.isNewRow) { i.split.parent && (i = i.split.parent); var a = E.rowMoveSameLevelOnly, r = t.y - n.top, o = n.bottom - n.top, s = o / 3, d = 2 * s, c = o / 2, u = "before", h = i.children && i.children.length > 0, f = h && i.expanded, v = function () { for (var e = n.i, t = i.level; e >= 0;) { var a = E.rowlist[e]; if (e--, !(t <= a.level)) { if (a === C.row) return !0; if (0 === a.level) return !1; t = a.level } } return !1 }(), p = i, m = E.treeEnabled; if (v || n.i === C.row.index && !a) u = "forbidden"; else if (m) if (a) { var g = C.row.level, b = i.level; if (b === g - 1) u = "child"; else if (g !== b) if (g === b - 1) { var y = i.Cr, w = y.children.length - 1; i.index === y.children[w] ? (p = y, u = "after") : u = "forbidden" } else u = "forbidden"; else u = r < c ? "before" : h && f ? "before" : "after" } else u = h && f ? r < c ? "before" : "child" : r < s ? "before" : r < d ? "child" : "after"; else u = h ? "before" : r < c ? "before" : "after"; C.row.moveDisabled && (u = "forbidden"), C.calendar = E, C.source = C.row, C.target = p, C.position = u; if (function () { return !C.last || (C.last.target !== C.target || C.last.position !== C.position) }()) { if ("function" == typeof E.onRowMoving) { var k = {}; k.source = E.qn(C.source), k.target = E.qn(C.target), k.position = u, E.onRowMoving(k), C.position = k.position } } else C.last && (C.position = C.last.position); C.last = {}, C.last.target = C.target, C.last.position = C.position, function () { C.div && x(C.div); var e = n.top, t = C.position, i = E.rowlist[n.i], a = i.level, r = a * E.treeIndent; switch (t) { case "before": e = n.top; break; case "child": e = n.top + c; break; case "after": e = n.bottom; break; case "forbidden": e = n.top + c }var o = E.hq() - r, s = l(); s.style.position = "absolute", s.style.left = r + "px", s.style.width = o + "px", s.style.top = e + "px", s.className = E.ca("_rowmove_position_" + t), C.div = s, E.divResScroll.appendChild(s) }() } }, O.qr = function (e) { var t = e.source.$.row.resource, n = e.target.$.row.resource, i = e.position; if (t !== n && "forbidden" !== i) { var a = e.source.calendar.Dr.hr(t); if (!a) throw new DayPilot.Exception("Cannot find source node parent"); var r = k(a, t); a.splice(r, 1); var o = j.hr(n); if (!o) throw new DayPilot.Exception("Cannot find target node parent"); var s = k(o, n); switch (i) { case "before": o.splice(s, 0, t); break; case "after": o.splice(s + 1, 0, t); break; case "child": n.children || (n.children = [], n.expanded = !0), n.children.push(t) }E.update() } }; var U = {}; this.Er = U, U.Qh = function (e) { }; var j = {}; this.Dr = j, j.hr = function (e) { return j.Fr(E.resources, e) }, j.Fr = function (e, t) { if (k(e, t) !== -1) return e; for (var n = 0; n < e.length; n++) { var i = e[n]; if (i.children && i.children.length > 0) { var a = j.Fr(i.children, t); if (a) return a } } return null }, this.Wk = function () { var e = this.resources, t = this.ia(); t || ("Gantt" === this.viewType ? e = this.Gr() : "Days" === this.viewType && (e = this.Hr())), !t || "Days" !== this.viewType || e && 0 !== e.length || (e = this.Hr()); var n = {}; if (n.i = 0, null != e && !DayPilot.isArray(e)) throw new DayPilot.Exception("DayPilot.Scheduler.resources expects an array object"); e = e || [], E.Ir = !1; var i = e.filter(function (e) { var t = "string" == typeof e.frozen ? e.frozen.toLowerCase() : null; return "top" !== t && "bottom" !== t }); E.rowlist = y(), this.Jr(i, n, 0, null, this.treeEnabled, !1, "main"); var a = e.filter(function (e) { return "string" == typeof e.frozen && "top" === e.frozen.toLowerCase() }); E.vl.top.rowlist = y(), E.vl.top.height = 0, this.Jr(a, { "i": 0 }, 0, null, !1, !1, "top"); var r = e.filter(function (e) { return "string" == typeof e.frozen && "bottom" === e.frozen.toLowerCase() }); E.vl.bottom.rowlist = y(), E.vl.bottom.height = 0, this.Jr(r, { "i": 0 }, 0, null, !1, !1, "bottom"), "Disabled" !== E.rowCreateHandling && this.Kr() }, this.Kr = function () { var e = {}; e.id = "NEW", e.isNewRow = !0, e.html = "", e.index = E.rowlist.length, e.loaded = !0, e.start = this.startDate, e.children = [], e.height = E.eventHeight, e.marginBottom = 0, e.marginTop = 0, e.getHeight = function () { return E.rowCreateHeight ? E.rowCreateHeight : E.eventHeight + E.rowMarginBottom + E.rowMarginTop }, e.Ud = function () { }, e.Oq = function () { }, this.rowlist.push(e) }, this.Xk = function (e) { function t(e, t) { if (e.cells = [], !e.hidden || n) { var i = e.split && e.split.parent; (E.rowHeaderColumns || [{}]).forEach(function (n, a) { var r = {}; r.row = n.split ? e : i || e, r.y = t, r.x = a, r.rowspan = 1; var o = !n.split && i, s = i && e.split.wq(), l = (n.split && !i, i && i.split.list.filter(function (e) { return !e.hidden }).length), d = 0; if (i) { var c = i.split.list.find(function (e) { return e.split.wq() }), u = i.split.list.indexOf(c); u > 0 && (d = u) } o && (s ? (r.rowspan = l, r.totalHeight = function () { return i.split.totalHeight() }) : r.refCell = i.split.list[d].cells[a]), e.cells.push(r) }) } } e = e || {}; var n = e.includeHidden; E.rowlist.forEach(function (e, n) { t(e, n) }), E.vl.top.rowlist.forEach(function (e, n) { t(e, n) }), E.vl.bottom.rowlist.forEach(function (e, n) { t(e, n) }) }, this.Gr = function () { var e = []; if (this.Ok && this.resources) for (var t = 0; t < this.resources.length; t++)e.push(this.resources[t]); if (this.events.list) { for (var t = 0; t < this.events.list.length; t++) { var n = this.events.list[t], i = {}; i.id = n.id, i.name = n.text, i.columns = n.columns, e.push(i) } return e } }, this.Hr = function () { var e = [], t = E.Ob(), n = this.Ha.Lc(), i = E.resources || [], a = i.filter(function (e) { return "string" == typeof e.frozen && "top" === e.frozen.toLowerCase() }), r = i.filter(function (e) { return "string" == typeof e.frozen && "bottom" === e.frozen.toLowerCase() }); e = e.concat(a).concat(r); for (var o = 0; o < this.days; o++) { var s = t.addDays(o); if (E.showNonBusiness || E.businessWeekends || 0 != s.dayOfWeek() && 6 != s.dayOfWeek()) { var l = {}; l.name = s.toString(n.datePattern, n), l.start = s, e.push(l) } } return e }, this.Ob = function () { return this.itline && this.itline.length > 0 ? this.itline[0].start : new DayPilot.Date(this.startDate) }, this.Wd = function () { if (this.itline && this.itline.length > 0) { var e = E.itline[this.itline.length - 1].end; return "Days" !== E.viewType ? e : e.addDays(E.days - 1) } return new DayPilot.Date(E.startDate).addDays(E.days) }, this.visibleStart = function () { return this.Ob() }, this.visibleEnd = function () { return this.Wd() }, this.jr = function (e, t) { var n = {}; if (n.backColor = e.backColor, n.fontColor = e.fontColor, n.cssClass = e.cssClass, n.expanded = e.expanded, n.name = e.name, n.html = E.Fa(e.name, e.html), n.emptyHeight = "undefined" != typeof e.emptyHeight ? e.emptyHeight : E.rowEmptyHeight, n.eventHeight = "undefined" != typeof e.eventHeight ? e.eventHeight : E.Ha._n(), n.minHeight = "undefined" != typeof e.minHeight ? e.minHeight : E.rowMinHeight, n.marginBottom = "undefined" != typeof e.marginBottom ? e.marginBottom : E.rowMarginBottom, n.marginTop = "undefined" != typeof e.marginTop ? e.marginTop : E.rowMarginTop, n.eventStackingLineHeight = "undefined" != typeof e.eventStackingLineHeight ? e.eventStackingLineHeight : E.eventStackingLineHeight, n.loaded = !e.dynamicChildren, n.id = e.id || e.value, n.toolTip = e.toolTip, n.children = [], n.columns = [], n.start = e.start ? new DayPilot.Date(e.start) : this.Ob(), n.isParent = e.isParent, n.contextMenu = e.contextMenu ? DayPilot.Util.evalVariable(e.contextMenu) : this.contextMenuResource, n.areas = e.areas, n.moveDisabled = e.moveDisabled, n.bubbleHtml = e.bubbleHtml, n.cellsDisabled = e.cellsDisabled, n.tags = e.tags, n.task = e.task, n.swimlane = e.swimlane, n.hideEvents = e.hideEvents, n.height = n.eventHeight, n.level = 0, n.resource = e.Lr, n.lines = [], n.blocks = [], n.containers = [], n.containerCache = {}, n.isRow = !0, n.split = {}, n.split.list = [], n.split.totalHeight = function () { var e = 0; return this.list.forEach(function (t) { t.hidden || (e += t.height) }), e }, n.getHeight = function () { var e = 0, t = Math.max(0, n.resource && n.resource.maxLines || 1e5); if (E.groupConcurrentEvents) for (var i = 0; i < this.blocks.length; i++) { var a = this.blocks[i]; e = Math.max(e, a.getHeight()) } else if (this.lines.length > 0) { var r = Math.min(this.lines.length, t), o = r - 1, s = this.lines[o], l = s.height || this.eventHeight, d = s.top || 0; e = d + l } if (0 === e) { if ("number" == typeof this.emptyHeight) return this.emptyHeight; e = this.eventHeight } return e > this.minHeight ? e : this.minHeight }, n.ap = function () { var e = n.start.getTime() - E.Ob().getTime(); return E.itline[E.itline.length - 1].end.addTime(e) }, n.Oq = function () { var e = this; e.events = y(), e.events.forRange = function (t, n) { t = new DayPilot.Date(t), n = n ? new DayPilot.Date(n) : e.ap(); for (var i = y(), a = 0; a < e.events.length; a++) { var r = e.events[a], o = E.Vi(r.end()); d(r.start(), o, t, n) && i.push(r) } return i } }, n.Po = function () { function e() { for (var e = [], t = 0; t < n.events.length; t++) { var i = n.events[t]; w(e, i.start().toString()) || e.push(i.start().toString()), w(e, i.rawend().toString()) || e.push(i.rawend().toString()) } return e.sort(), e } function t() { for (var t = e(), i = [], a = { "start": n.data.start }, r = 0; r < t.length; r++)a.end = new DayPilot.Date(t[r]), i.push(a), a = { "start": new DayPilot.Date(t[r]) }; return a.end = n.data.end, i.push(a), i.forRange = function (e, t) { for (var n = y(), i = 0; i < this.length; i++) { var a = this[i]; d(e, t, a.start, a.end) && n.push(a) } return n.maxSum = function (e) { for (var t = 0, n = 0; n < this.length; n++) { var i = this[n], a = i.sum(e); a > t && (t = a) } return t }, n }, i } for (var n = this, i = n.sections = t(), a = 0; a < i.length; a++) { var r = i[a]; r.events = y(); for (var o = 0; o < n.events.length; o++) { var s = n.events[o]; d(r.start, r.end, s.start(), s.rawend()) && r.events.push(s) } r.sum = function (e) { for (var t = 0, n = 0; n < this.events.length; n++) { var i = this.events[n], a = 0; "undefined" == typeof e ? a = 1 : i.tag(e) ? a = i.tag(e) : i.data[e] && (a = i.data[e]), "number" == typeof a && (t += a) } return t } } }, n.Mr = function () { var e = []; return e.height = 0, e.add = function (t) { this.push(t); var n = t.part.Xq(); n > e.height && (e.height = n) }, e.Vd = function (e, t, n) { for (var i = e + t - 1, a = this.length, r = 0; r < a; r++) { var o = this[r]; if (!o.data.nonBlocking) { if (!(i < o.part.left || e > o.part.left + o.part.width - 1)) { if (w(n, o.data)) continue; return !1 } if (o.part.container && !(i < o.part.container.left || e > o.part.container.left + o.part.container.width - 1)) return !1; if (E.eventVersionsReserveSpace && !(i < o.part.versionsLeft || e > o.part.versionsRight - 1)) return !1 } } return !0 }, e }, n.Nr = function (e, t, i) { if ("number" == typeof i) { for (var a = 0; a <= i; a++)this.lines[a] || (this.lines[a] = n.Mr()); return i } if ("dedicated" === i) { var r = n.Mr(); return r.Vd = function () { return !1 }, this.lines.push(r), this.lines.length - 1 } for (var a = 0; a < this.lines.length; a++) { var r = this.lines[a]; if (r.Vd(e, t)) return a } var r = n.Mr(); return this.lines.push(r), this.lines.length - 1 }, n.Ud = function (e) { var t = e.data, i = e.part, a = e.part.container; if (a) { if (null === a.line && ("number" == typeof t.line || "dedicated" === t.line)) return r = n.Nr(a.left, a.width, t.line), i.line = r, this.lines[r].add(e), a.line = r, r } else if ("number" == typeof t.line || "dedicated" === t.line) return r = n.Nr(i.left, i.width, t.line), i.line = r, this.lines[r].add(e), r; var r = -1; if (a) { if (null !== a.line) return this.lines[a.line].add(e), a.line; r = n.Nr(a.left, a.width), a.line = r } else r = E.eventVersionsReserveSpace ? n.Nr(i.versionsLeft, i.versionsWidth) : n.Nr(i.left, i.width); return i.line = r, this.lines[r].add(e), r }, n.Sd = function (e) { for (var t = E.eventVersionsReserveSpace, n = 0; n < this.blocks.length; n++) { var i = this.blocks[n]; if (k(i.events, e) !== -1) return; var a = t ? e.part.versionsLeft : e.part.left, r = t ? e.part.versionsWidth : e.part.width; if (i.Td(a, r)) return i.events.push(e), e.part.block = i, i.min = Math.min(i.min, a), i.max = Math.max(i.max, a + r), n } var i = {}; i.expanded = !1, i.row = this, i.events = y(), i.lines = y(), i.Ud = function (e) { for (var n = 0; n < this.lines.length; n++) { var i = this.lines[n], a = t ? e.part.versionsLeft : e.part.left, r = t ? e.part.versionsWidth : e.part.width; if (i.Vd(a, r)) return i.add(e), n } var i = []; i.height = 0, i.add = function (e) { this.push(e), e.part.height > i.height && (i.height = e.part.height), e.data.versions && (i.height = e.part.height + e.data.versions.length * (E.eventVersionHeight + E.eventVersionMargin)) }, i.Vd = function (e, n) { for (var i = e + n - 1, a = this.length, r = 0; r < a; r++) { var o = this[r], s = t ? o.part.versionsLeft : o.part.left, l = t ? o.part.versionsWidth : o.part.width; if (!(i < s || e > s + l - 1)) return !1 } return !0 }, i.add(e), this.lines.push(i) }, i.Td = function (e, t) { return !(e + t - 1 < this.min || e > this.max - 1) }, i.getHeight = function () { if (!this.expanded) return E.eventHeight; if (this.lines.length > 0) { var e = this.lines.length - 1, t = this.lines[e], n = t.height || E.eventHeight; return (t.top || 0) + n } return E.eventHeight }, i.clear = function () { i.events = y(), i.min = null, i.max = null }, i.events.push(e), e.part.block = i, i.min = t ? e.part.versionsLeft : e.part.left, i.max = i.min + (t ? e.part.versionsWidth : e.part.width), this.blocks.push(i) }, n.Or = !1, n.Cr = t, n.Od = function () { this.hidden = !this.Pr(), this.Or = !1, this.Cr && this.Cr.Od() }, n.Pr = function () { return !this.Cr || this.Cr.Pr() && this.Cr.expanded }, e.columns) for (var i = 0; i < e.columns.length; i++)n.columns.push(e.columns[i]); return n }, this.Rm = function () { E.em().forEach(function (e) { if (!e.isNewRow && "function" == typeof E.onRowFilter && E.rows.Kg) { var t = e.Cr, n = {}; n.visible = !0, n.row = E.qn(e), n.filter = E.rows.Kg, n.filterParam = E.rows.Kg, n.control = E, E.onRowFilter(n), e.Or = !n.visible, n.visible ? E.rowFilterParentsAlwaysVisible && t && t.Od() : e.hidden = !0 } }) }, this.Qr = function (e) { return !e.some(function (e) { return e.children && e.children.length }) }, this.Rr = function (e) { return !e.some(function (e) { return !e.children || 0 === e.children.length }) }, this.Xn = function (e) { return e = e || "main", E.vl[e] }, this.Jr = function (e, t, n, i, a, r, o) { function s(e, a) { for (var s = 0; s < e.split.length; s++)!function () { var l = e.split[s], d = E.ir(l, v), c = E.jr(d, i); c.level = n, c.index = t.i, c.grid = o || "main", r && (c.hidden = !0), c.split = {}, c.split.parent = a, c.split.y = s, c.split.wq = function () { return c === c.split.parent.split.list.find(function (e) { return !e.hidden }) }, c.Cr = a, a.split.list.push(c), null !== i && i.children.push(t.i), h.push(c), t.i++, E.Ir = !0 }() } if (e) { var l = !1; if (E.rows.cr) switch (E.rowSortingMode) { case "LeavesOnly": l = E.Qr(e); break; case "ParentsOnly": l = E.Rr(e) }if (l) { var d = E.rows.er(), c = "desc" === E.rows.dr(), u = y(e, !0); u.sort(function (e, t) { var n = E.vq(e, d), i = E.vq(t, d), a = 0; return a = n === i ? 0 : "number" == typeof n && "number" == typeof i ? n - i : E.Og(n, i, "asc"), c ? -a : a }), e = u } for (var h = E.Xn(o).rowlist, f = 0; f < e.length; f++)if (e[f]) { var v = {}; if (v.level = n, v.hidden = r, v.index = t.i, !e[f].hidden) { var p = this.ir(e[f], v), m = E.jr(p, i); r && (m.hidden = !0), m.level = n, m.index = t.i, m.grid = o || "main"; var g = !p.children || 0 === p.children.length, b = g && p.split; if (b ? s(p, m) : (null !== i && i.children.push(t.i), h.push(m), t.i++), a && p.children && p.children.length) { var w = r || !m.expanded; this.Jr(p.children, t, n + 1, m, !0, w, o) } } } } }, this.Sr = ["text", "html", "backColor", "cssClass", "areas", "horizontalAlignment", "hidden"], this.Dp = function (e) { if (e.isNewRow) return { "row": { "cssClass": E.ca("_row_new"), "moveDisabled": !0, "html": E.Fa(E.rowCreateText, E.rowCreateHtml) } }; var t = {}; t.row = this.qn(e), p(e, t.row, ["html", "backColor", "fontColor", "cssClass", "toolTip", "contextMenu", "moveDisabled"]), t.row.areas = DayPilot.Util.createArrayCopy(e.areas), t.row.columns = DayPilot.Util.createArrayCopy(e.columns, E.Sr), e.split && DayPilot.isArray(E.rowHeaderColumns) && E.rowHeaderColumns.forEach(function (n, i) { !e.split.parent && 0 === e.split.list.length && n.split ? t.row.columns[i].text = "" : !e.split.parent && n.split ? t.row.columns[i] = null : e.split.parent && !n.split && (t.row.columns[i] = null) }); var n = E.rowHeaderColumns; if ("undefined" == typeof t.row.columns && n.length > 0) { r.columns = []; for (var i = 0; i < n.length; i++)r.columns.push({}) } return t.row.children().length > 0 && E.rowHeaderColumnsMergeParents && E.rowHeaderColumns && E.rowHeaderColumns.forEach(function (e, n) { n > 0 && delete t.row.columns[n] }), "function" == typeof this.onBeforeRowHeaderRender && this.onBeforeRowHeaderRender(t), t }, this.ir = function (e, t) { var n = this.Tr(e, t); if ("function" == typeof this.onBeforeResHeaderRender) { var i = {}; i.resource = n, this.onBeforeResHeaderRender(i) } return n }, this.Tr = function (e, t) { var n = { get $data() { return this.Lr } }; for (var i in t) n[i] = t[i]; for (var i in e) n[i] = e[i]; if (n.html = E.Fa(e.name, e.html), E.rowHeaderColumns && E.rowHeaderColumns.length > 0 && "undefined" == typeof n.columns) { n.columns = []; var a = E.rowHeaderColumns; if (E.Zm()) { for (var r = 0; r < a.length; r++) { var o = a[r], s = E.vq(e, o.display); n.columns.push({ "text": s }) } n.columns[0] && a[0] && !a[0].display && (n.columns[0].text = n.name) } else for (var r = 0; r < a.length; r++)n.columns.push({}) } return n.Lr = e, n }, this.Nm = function () { this.nav.top.dp = this, this.nav.top.innerHTML = "", u(this.nav.top, this.ca("_main")), this.nav.top.setAttribute("role", "region"), this.nav.top.setAttribute("aria-label", "scheduler"), this.nav.top.style.MozUserSelect = "none", this.nav.top.style.KhtmlUserSelect = "none", this.nav.top.style.webkitUserSelect = "none", this.nav.top.style.WebkitTapHighlightColor = "rgba(0,0,0,0)", this.nav.top.style.WebkitTouchCallout = "none", this.width && (this.nav.top.style.width = this.width), "Parent100Pct" === this.heightSpec && (this.nav.top.style.height = "100%"), this.nav.top.style.lineHeight = "1.2", this.nav.top.style.position = "relative", this.visible || (this.nav.top.style.display = "none"), this.nav.top.onmousemove = this._j, this.nav.top.onmouseout = function () { E.qp() }, DayPilot.reNonPassive(this.nav.top, "touchstart", Y.af), DayPilot.reNonPassive(this.nav.top, "touchmove", Y.bf), DayPilot.reNonPassive(this.nav.top, "touchend", Y.cf), this.hideUntilInit && this.backendUrl && (this.nav.top.style.visibility = "hidden"); var e = this.Ol(), t = "Top" === E.timeHeaderPosition; if (E.Mm = E.timeHeaderPosition, "DivBased" === this.Ha.Ur()) { var n = l(); n.style.position = "absolute", n.style.left = "0px", n.style.width = e + "px"; var i = l(); i.style.height = "0px", i.style.boxSizing = "content-box", i.style.borderTop = "1px solid transparent", i.className = this.ca("_divider_horizontal"), this.nav.dh1 = i, this.nav.left = n, "Top" === E.timeHeaderPosition ? (n.appendChild(this.uf()), n.appendChild(i), n.appendChild(this.Vr()), E.vl.top.enabled(), n.appendChild(this.Wr()), n.appendChild(this.Xr())) : "Bottom" === E.timeHeaderPosition ? (n.appendChild(this.Vr()), n.appendChild(i), n.appendChild(this.uf())) : n.appendChild(this.Vr()); var a = l(); a.style.position = "absolute", a.style.left = e + "px", a.style.width = J.Pl() + "px", a.style.height = this.Ql() + this.Te() + "px", a.className = this.ca("_divider") + " " + this.ca("_splitter"), a.setAttribute("unselectable", "on"), this.nav.divider = a, this.rowHeaderScrolling && this.Yr(); var r = l(); r.style.marginLeft = e + J.Pl() + "px", r.style.marginRight = "1px", r.style.position = "relative", this.nav.right = r; var o = l(); t && (o.style.position = "absolute", o.style.top = this.Ql() + "px"), o.style.width = "100%", o.style.height = "0px", o.style.boxSizing = "content-box", o.style.borderBottom = "1px solid transparent", o.setAttribute("data-dh2", "true"), o.className = this.ca("_divider_horizontal"), this.nav.dh2 = o, "Top" === E.timeHeaderPosition ? (r.appendChild(E.Zr()), r.appendChild(E.$r()), r.appendChild(o), E.vl.top.enabled(), r.appendChild(E._r()), r.appendChild(E.as())) : "Bottom" === E.timeHeaderPosition ? (r.appendChild(E.$r()), r.appendChild(o), r.appendChild(E.Zr())) : r.appendChild(E.$r()); var s = l(); s.style.clear = "left"; var d = l(); d.style.height = "1px", d.style.position = "absolute", d.style.left = "0px", d.style.right = "0px", d.style.display = "none", d.className = this.ca("_divider_horizontal") + " " + this.ca("_divider_horizontal_frozen_top"), d.onmousemove = function (e) { e.cancelBubble = !0 }, this.nav.dividerTop = d; var c = l(); c.style.height = "1px", c.style.position = "absolute", c.style.left = "0px", c.style.right = "0px", c.style.display = "none", c.className = this.ca("_divider_horizontal") + " " + this.ca("_divider_horizontal_frozen_bottom"), c.onmousemove = function (e) { e.cancelBubble = !0 }, this.nav.dividerBottom = c, this.nav.top.appendChild(n), this.nav.top.appendChild(a), this.nav.top.appendChild(r), this.nav.top.appendChild(s), this.nav.top.appendChild(d), this.nav.top.appendChild(c) } else { var h = document.createElement("table"); h.cellPadding = 0, h.cellSpacing = 0, h.border = 0, h.style.position = "absolute"; var f = h.insertRow(-1); f.insertCell(-1).appendChild(this.uf()), f.insertCell(-1).appendChild(this.Zr()); var v = h.insertRow(-1); v.insertCell(-1).appendChild(this.Vr()), v.insertCell(-1).appendChild(this.$r()), this.nav.top.appendChild(h) } if (this.Pi = l(), this.Pi.style.display = "none", this.nav.top.appendChild(this.Pi), this.Pa()) { var p = document.createElement("input"); p.type = "hidden", p.id = this.id + "_state", p.name = this.id + "_state", this.nav.state = p, this.nav.top.appendChild(p) } var m = l(); m.style.position = "absolute", m.style.left = this.Ol() + J.Pl() + 5 + "px", m.style.top = this.Ql() + 5 + "px", m.style.display = "none", m.innerHTML = E.Fa(this.loadingLabelText, this.loadingLabelHtml), u(m, this.ca("_loading")), this.nav.loading = m, this.nav.top.appendChild(m), this.bs(), E.cs() }, this._j = function (e) { if (C.row) O.Br(e); else if (i.sq) { var t = DayPilot.mo3(E.nav.top, e).x, n = E.hq(), a = E.rowHeaderWidthMin, r = t - 1; E.rowHeaderCols && (r = Math.min(n, t - 1)), r = Math.max(a, r), E.rowHeaderWidth = r, E.fr = !1, E.rowHeaderCols || E.es(), E.gr(), E.ml(), E.cb() } }, this.pb = function () { var e = this.Ql(), t = "Top" === E.timeHeaderPosition; this.nav.corner && (this.nav.corner.style.height = e + "px"), this.divTimeScroll && (this.divTimeScroll.style.height = e + "px"), this.divNorth && (this.divNorth.style.height = e + "px"), this.nav.dh1 && this.nav.dh2 && t && (this.nav.dh1.style.top = e + "px", this.nav.dh2.style.top = e + "px"), this.nav.loading.style.top = e + 5 + "px", t && (this.nav.scroll.style.top = e + 1 + "px") }, this.Ol = function () { if (this.fr) return 0; var e = 0, t = this.rowHeaderScrolling, n = this.hq(); return e = t && this.rowHeaderWidth < n ? this.rowHeaderWidth : n }, this.Yr = function () { var e = this.nav.divider; E.rowHeaderScrolling ? (e.style.cursor = "col-resize", e.setAttribute("unselectable", "on"), e.onmousedown = function (e) { var t = i.sq = {}; return t.cursor = E.nav.top.style.cursor, t.cleanup = function () { if (E.mq(), E.nav.top.style.cursor = t.cursor, "function" == typeof E.onRowHeaderResized) { var e = {}; E.onRowHeaderResized(e) } }, E.nav.top.style.cursor = "col-resize", !1 }) : (e.style.cursor = null, e.onmousedown = null) }, this.gr = function () { var e = J.Pl(), t = this.Ol(); if (this.nav.corner && (this.nav.corner.style.width = t + "px"), this.nav.corner && (this.divCorner.style.width = t + "px"), this.divResScroll.style.width = t + "px", "DivBased" === J.Ur() && (this.nav.left.style.width = t + "px", this.nav.divider.style.left = t - e + "px", this.nav.right.style.marginLeft = t + "px"), this.nav.message && (this.nav.message.style.left = E.Nl() + "px"), this.nav.loading && (this.nav.loading.style.left = t + e + 5 + "px"), this.nav.hideIcon) { var n = this.nav.hideIcon, i = E.ca("_header_icon_show"), a = E.ca("_header_icon_hide"); n.style.left = t - 1 + "px", E.fr ? (c(n, a), u(n, i)) : (c(n, i), u(n, a)) } }, this.es = function () { this.gq(); var e = this.hq(), t = function (e, t, n) { if (e && e.style) { var i = e.firstChild; E.oq ? (e.style.width = t + "px", i.style.width = t + "px", "number" == typeof n && (e.style.left = n + "px")) : i.style.width = t + "px" } }, n = function (n) { var i = n.cells[0]; if (i && (i.colSpan > 1 || "max" === i.colSpan)) { var i = n.cells[0]; t(i, e) } else if (E.rowHeaderCols) for (var a = 0, r = 0; r < n.cells.length; r++) { var o = E.rowHeaderCols[r], i = n.cells[r]; t(i, o, a), a += o } else { var o = E.rowHeaderWidth, i = n.cells[0]; t(i, o) } }, i = this.divHeader; i.style.width = e + "px"; for (var a = E.iq(), r = a.start; r < a.end; r++) { var o = i.rows[r]; o && n(o) } if (E.vl.top.enabled()) for (var r = 0; r < E.vl.top.rowlist.length; r++) { var o = E.vl.top.divHeader.rows[r]; o && n(o) } if (E.vl.bottom.enabled()) for (var r = 0; r < E.vl.bottom.rowlist.length; r++) { var o = E.vl.bottom.divHeader.rows[r]; o && n(o) } if (E.nav.resScrollSpace && (E.nav.resScrollSpace.style.width = e + "px"), E.vl.bottom.enabled()) { E.vl.bottom.divSpace.style.width = e + "px" } this.cb() }, this.Jm = function () { this.gr(), this.es() }, this.Im = function () { var e = E.nav.corner, t = J.Cp(), n = l(); n.style.position = "absolute", n.style.bottom = "0px", n.style.left = "0px", n.style.width = "100%", n.style.height = J.Ae() + "px", n.style.overflow = "hidden", E.nav.columnScroll = n; var i = l(); i.style.position = "absolute", i.style.bottom = "0px", i.style.left = "0px", i.style.width = "5000px", i.style.height = J.Ae() + "px", i.style.overflow = "hidden", i.className = this.ca("_columnheader"), n.appendChild(i); var a = l(); a.style.position = "absolute", a.style.top = "0px", a.style.bottom = "0px", a.style.left = "0px", a.style.right = "0px", a.className = this.ca("_columnheader_inner"), i.appendChild(a), E.Un && (E.Un.dispose(), E.Un = null); var r = []; t.forEach(function (e) { var t = {}; t.column = {}, t.column.html = E.Fa(e.text || e.name || e.title, e.html), t.column.areas = null, t.column.sortingEnabled = !!e.sort, t.column.data = e, t.column.cssClass = null, r.push(t), "function" == typeof E.onBeforeRowHeaderColumnRender && E.onBeforeRowHeaderColumnRender(t) }); var o = new DayPilot.Splitter(a); o.enabled = E.rowHeaderColumnsResizable, o.widths = DayPilot.Util.propArray(t, "width", E.rowHeaderColumnDefaultWidth), o.height = J.Ae(), o.css.title = this.ca("_columnheader_cell"), o.css.titleInner = this.ca("_columnheader_cell_inner"), o.css.splitter = this.ca("_columnheader_splitter"), E.rowHeaderScrolling && (o.splitterWidthLast = 6); var s = E.rows.er(), d = E.rows.dr(); o.titles = y(r).map(function (e) { var t = e.column.data, n = e.column.html, i = e.column.cssClass, a = {}; if (a.areas = [], t.sort && e.column.sortingEnabled) { var r = E.ca("_sorticon"); s === t.sort ? (r += " " + E.ca("_sorticon_active"), r += "asc" === d ? " " + E.ca("_sorticon_asc") : " " + E.ca("_sorticon_desc")) : r += " " + E.ca("_sorticon_asc"), a.areas = [{ right: 5, top: 0, bottom: 0, width: 10, cssClass: r, onClick: function (e) { var n = {}; n.field = t.sort, s === t.sort ? n.order = "asc" === E.rows.dr() ? "desc" : "asc" : n.order = "asc", E.rows.sort(n) } }] } return DayPilot.isArray(e.column.areas) && (a.areas = a.areas.concat(e.column.areas)), a.cssClass = i, a.html = n, a }), o.data = y(t, !0), o.started = function () { var e = o.totalWidth() === E.rowHeaderWidth; o.fs = e }, o.updating = function (e) { E.rl.skip = !0, DayPilot.Util.updatePropsFromArray(J.Cp(), "width", this.widths), o.fs && E.rowHeaderScrolling && (E.rowHeaderWidth = o.totalWidth()), E.Jm(), "Auto" === E.cellWidthSpec }, o.updated = function (e) { if (E.mq(), E.Fb()) { if ("function" == typeof E.onRowHeaderColumnResized) { var t = {}; t.column = J.Cp()[e.index], E.onRowHeaderColumnResized(t) } } else switch (E.rowHeaderColumnResizedHandling) { case "CallBack": break; case "PostBack": break; case "JavaScript": if ("function" == typeof E.onRowHeaderColumnResized) { var t = {}; t.column = J.Cp()[e.index], E.onRowHeaderColumnResized(t) } } }, o.color = "#000000", o.opacity = 30, o.init(), e.appendChild(n), this.Un = o }, this.$k = function () { var e = this.nav.corner; if (e) { E.Xa(), e.innerHTML = "", e.className = this.ca("_corner"); var t = l(); if (t.style.position = "absolute", t.style.top = "0px", t.style.left = "0px", t.style.right = "0px", t.style.bottom = "0px", t.className = this.ca("_corner_inner"), this.divCorner = t, t.innerHTML = "&nbsp;", this.rowHeaderColumns && this.rowHeaderColumns.length > 0) { var n = l(); n.style.position = "absolute", n.style.top = "0px", n.style.left = "0px", n.style.right = "0px", n.style.bottom = J.Ae() + 1 + "px", e.appendChild(n); var i = l(); i.style.position = "absolute", i.style.left = "0px", i.style.right = "0px", i.style.height = "1px", i.style.bottom = J.Ae() + "px", i.className = this.ca("_divider"), e.appendChild(i), n.appendChild(t), this.Im() } else e.appendChild(t); !function () { var e = {}; e.control = E, e.html = E.Fa(E.cornerText, E.cornerHtml), e.areas = null; var t = null; if ("function" == typeof E.onBeforeCornerRender && E.onBeforeCornerRender(e), "function" == typeof E.onBeforeCornerDomAdd && (e.element = null, E.onBeforeCornerDomAdd(e), t = e.element), t) { var n = E.divCorner; n.domArgs = e; if (m(t)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.X(t, n) } else n.appendChild(t) } else E.divCorner && (E.divCorner.innerHTML = e.html || ""); e.areas && DayPilot.Areas.attach(E.nav.corner, {}, { "areas": e.areas }) }(); var a = l(); a.style.position = "absolute", a.style.padding = "2px", a.style.top = "0px", a.style.left = "1px", a.style.backgroundColor = "#FF6600", a.style.color = "white", a.innerHTML = "\u0044\u0045" + "\u004D\u004F", v(undefined) && e.appendChild(a), E.rowHeaderScrolling && E.nav.columnScroll && E.Ul && (E.nav.columnScroll.scrollLeft = E.Ul.scrollLeft) } }, this.bs = function () {
                var e = 3, t = this.Ol() + J.Pl() - 1, n = 10, i = 20, a = this.Ql() + e, r = h(this.nav.top, t, a, n, i); r.style.cursor = "pointer", r.className = E.ca("_header_icon"), u(r, E.ca("_header_icon_hide")), r.onclick = function () { E.rows.headerToggle() }, r.ontouchstart = function (e) { e.stopPropagation() }, this.nav.hideIcon = r
            }, this.Sm = function () { var e = 3, t = E.nav.hideIcon, n = E.Ql() + e; t && (E.rowlist.length > 0 && E.rowHeaderHideIconEnabled ? t.style.display = "" : t.style.display = "none", t.style.top = n + "px") }, this.uf = function () { var e = this.Ol(), t = l(); return E.nav.corner = t, t.style.width = e + "px", t.style.height = this.Ql() + "px", t.style.overflow = "hidden", t.style.position = "relative", t.setAttribute("unselectable", "on"), t.onmousemove = function () { E.bb() }, t.oncontextmenu = function () { return !1 }, this.$k(), t }, this.Ql = function () { if ("None" === E.timeHeaderPosition) return 0; if (E.timeHeaders) { var e = K.Gp(E.timeHeaders.length - 1); return e.top + e.height } return this.timeHeader ? E.timeHeader.length * J.Ae() : 0 }, this.hs = null, this.ks = function () { return E.scrollStep || E.eventHeight }, this.Vr = function () { var e = l(); e.style.width = this.Ol() + "px", e.style.height = this.Te() + "px", e.style.overflow = "hidden", e.style.position = "relative", e.className = E.ca("_rowheader_scroll"); var t = E.ks(), n = E.Ha.uq(); n && (e.style.overflowY = "auto", E.rowHeaderScrolling && (e.style.overflowX = "auto")), e.onmousemove = function () { E.bb() }, DayPilot.rePassive(e, "touchstart", function () { i.ls = !0 }), e.addEventListener("wheel", function (n) { if (0 !== E.ms()) { var i; i = E.overrideWheelScrolling || E.scrollStep ? n.deltaY > 0 ? t : -t : 1 === n.deltaMode ? n.deltaY * J.ns() * 1.7 : n.deltaY, E.nav.scroll.scrollTop = e.scrollTop + i, n.preventDefault() } }, { "passive": !1 }), e.oncontextmenu = function () { return !1 }, e.onscroll = function () { if (E.hs && clearTimeout(E.hs), n) { var t = function () { var t = E.tp() - E.nav.scroll.offsetHeight; e.scrollTop = Math.min(e.scrollTop, t), E.nav.scroll.scrollTop = e.scrollTop }; DayPilot.browser.ios ? i.ls && (E.hs = setTimeout(t, 10)) : E.hs = setTimeout(t, 10) } else E.hs = setTimeout(function () { E.nav.scroll.scrollTop = e.scrollTop }, 500) }, E.os(e), e.setAttribute("role", "region"), e.setAttribute("aria-label", "scheduler rows"); var a = l(); return a.onmousemove = function () { E.bb() }, this.divHeader = a, e.appendChild(a), this.divResScroll = e, this.Ul = e, e }, this.os = function (e) { e.addEventListener("scroll", function () { E.rowHeaderScrolling && (E.nav.columnScroll && (E.nav.columnScroll.scrollLeft = e.scrollLeft), E.vl.top.enabled() && (E.vl.top.divHeader.scrollLeft = e.scrollLeft), this !== E.divResScroll && (E.divResScroll.scrollLeft = e.scrollLeft)) }), e.onmouseenter = function () { E.rowHeaderScrolling && (e.style.overflowX = "auto") }, e.onmouseleave = function () { E.rowHeaderScrolling && (e.style.overflowX = "hidden") } }, this.ps = function (e) { if ("TableBased" === J.Ur()) { var t = parseInt(this.width, 10), n = isNaN(t) || this.width.indexOf("%") !== -1, i = (/MSIE/i.test(navigator.userAgent), this.hq()); n ? this.nav.top && this.nav.top.offsetWidth > 0 && (e.style.width = this.nav.top.offsetWidth - 6 - i + "px") : e.style.width = t - i + "px" } }, this.Wn = function (e) { if ("function" == typeof E.onEventMoving && i.Vo) { var t = E.coords || {}; t.shift = e.shiftKey, t.meta = e.metaKey, t.ctrl = e.ctrlKey, t.alt = e.altKey, E._p() } }, this.Vn = function (e) { if ("function" == typeof E.onEventMoving && i.Vo) { var t = E.coords || {}; t.shift = e.shiftKey, t.meta = e.metaKey, t.ctrl = e.ctrlKey, t.alt = e.altKey, E._p() } }, this._h = function (e) { "function" == typeof ResizeObserver && E.watchWidthChanges || i.Vo && (E.Cb(), E.ml()) }, this.Cb = function () { E.xa || ("TableBased" === E.Ha.Ur() && (E.ps(E.nav.scroll), E.ps(E.divTimeScroll)), E.wb(), E.mq(), E.qs(), E.ra.drawArea = null) }, this.jg = null, this.kg = null, this.Ra = null, this.hg = function () { var e = function () { E.Cb(), E.ml(null, { "dontHideBubble": !0 }) }, t = function () { var t = E.nav.top, n = t.offsetParent, i = n && n.offsetHeight; if (!E.jg) return E.jg = {}, E.jg.changed = !1, E.jg.width = t.offsetWidth, E.jg.height = t.offsetHeight, void (E.jg.opHeight = i); var a = E.jg.width !== t.offsetWidth, r = E.jg.height !== t.offsetHeight, o = "Max100Pct" === E.heightSpec && E.jg.opHeight !== i; (a || r || o) && (E.jg.changed = !0, E.jg.width = t.offsetWidth, E.jg.height = t.offsetHeight, E.jg.opHeight = i), E.jg.changed && (E.jg.changed = !1, e()) }; if (E.watchWidthChanges) { if ("function" == typeof ResizeObserver) { if (E.Ra) return; var n = new ResizeObserver(t); return n.observe(E.nav.top), E.nav.top.offsetParent && n.observe(E.nav.top.offsetParent), void (E.Ra = n) } if (!E.kg) { var i = function () { return E.nav && E.nav.top ? E.jg ? (E.jg.width !== E.nav.top.offsetWidth && (E.jg.changed = !0, E.jg.counter = 0, E.jg.width = E.nav.top.offsetWidth), E.jg.changed && (E.jg.counter += 1), void (E.jg.changed && E.jg.counter > 0 && (E.jg.changed = !1, e()))) : (E.jg = {}, E.jg.counter = 0, E.jg.changed = !1, void (E.jg.width = E.nav.top.offsetWidth)) : void clearInterval(E.kg) }; this.kg = setInterval(i, 200), i() } } }, this.qs = function () { var e = E.ln; E.clearSelection(), E.ln = e, E.mn(e, { "justDraw": !0 }) }, this.mq = function () { "Auto" === E.cellWidthSpec && (E.cl(), E.wa && (E.Uk(), E.Vk(), E._k(), E.dl(), E.Ta(), E.ob(), E.al(), E.bl(), E.Bm(), E.Ab(), E.gl(), E.hl(), E.wb())) }, this.Uk = function () { if ("Auto" === this.cellWidthSpec) { var e = this.nav.top.clientWidth, t = this.Ol(), n = E.ms(), i = e - t - n; if (this.xp()) { var a = i / this.xp(); this.cellWidth = Math.max(a, E.cellWidthMin), E.Tl = a < E.cellWidthMin } } }, this.ms = function () { if ("Auto" === E.heightSpec) return 0; if ("Max" === E.heightSpec || "Fixed" === E.heightSpec || "Parent100Pct" === E.heightSpec) { if (E.tp() > E.height) { return DayPilot.sw(E.nav.scroll) || 1 } return 0 } return DayPilot.sw(E.nav.scroll) }, this.Yl = function () { var e = this.nav.top.clientWidth, t = this.Ol(), n = this.Te(), i = this.tp(), a = "Auto" === E.heightSpec, r = 0; return i > n && !a && (r = DayPilot.swa()), e - t - 2 - r }, this.Zr = function () { var e = "Top" === E.timeHeaderPosition, t = l(); t.style.overflow = "hidden", t.style.display = "block", e ? (t.style.position = "absolute", t.style.top = "0px") : t.style.position = "relative", t.style.width = "100%", t.style.height = this.Ql() + "px", t.style.overflow = "hidden", t.onmousemove = function () { E.bb(), E.cellBubble && E.cellBubble.delayedHide() }, t.className = E.ca("_timeheader_scroll"), this.ps(t), this.divTimeScroll = t; var n = l(); return n.style.width = this.Ll() + 5e3 + "px", this.divNorth = n, t.appendChild(n), t }, this.Te = function () { var e = 0, t = E.heightSpec; return "Fixed" === t || "Parent100Pct" === t ? this.height ? this.height : 0 : (e = E.tp(), ("Max" === t || "Max100Pct" === t) && e > E.height ? E.height : e) }, this.rs = null, this.ts = 0, this.vs = 0, this.ws = 0, this.Wl = function () { if ("function" == typeof E.onHeightChanged || "function" == typeof E.onDimensionsChanged) { E.rs && clearTimeout(E.rs); var e = function () { var e = E.nav.top.offsetHeight, t = E.ts; E.ts = e; var n = E.nav.top.offsetWidth, i = E.vs; E.vs = n; var a = E.Ol(), r = E.ws; if (E.ws = a, "function" == typeof E.onHeightChanged && e !== t) { var o = {}; o.oldHeight = t, o.newHeight = e, E.onHeightChanged(o) } if ("function" == typeof E.onDimensionsChanged && (e !== t || n !== i || a !== r)) { var o = {}; o.oldHeight = t, o.newHeight = e, o.oldWidth = i, o.newWidth = n, o.oldRowHeaderWidth = r, o.newRowHeaderWidth = a, E.onDimensionsChanged(o) } }; E.rs = setTimeout(e, 100) } }, this.tp = function () { var e; return this.Nk !== -1 ? (e = this.Nk, this.Nk > 0 && "auto" === E.nav.scroll.style.overflowX && (e += DayPilot.sh(E.nav.scroll))) : e = this.rowlist.length * this.Ha._n(), e += E.vl.bottom.height }, this.bb = function () { this.db(), E.xs && (this.cb(), this.ys(), this.eq(), this.qp(), E.cellBubble && E.cellBubble.hideOnMouseOut(), E.bubble && E.bubble.hideOnMouseOut(), E.groupBubble && E.groupBubble.hideOnMouseOut(), E.xs = !1) }, this.vl = {}, this.vl.top = {}, this.vl.top.height = 0, this.vl.top.rowlist = [], this.vl.top.enabled = function () { return this.rowlist && this.rowlist.length > 0 }, Object.defineProperty(E.vl.top, "top", { get: function () { return E.Ql() + 1 } }), Object.defineProperty(E.vl.top, "right", { get: function () { return E.ms() } }), Object.defineProperty(E.vl.top, "heightRes", { get: function () { return this.height } }), this.vl.bottom = {}, this.vl.bottom.height = 0, this.vl.bottom.rowlist = [], this.vl.bottom.enabled = function () { return this.rowlist && this.rowlist.length > 0 }, Object.defineProperty(E.vl.bottom, "top", { get: function () { return E.Ql() + E.Te() - this.height - DayPilot.sh(E.nav.scroll) + 1 } }), Object.defineProperty(E.vl.bottom, "right", { get: function () { return E.ms() } }), Object.defineProperty(E.vl.bottom, "heightRes", { get: function () { return this.height + DayPilot.sh(E.nav.scroll) } }), this.vl.main = {}, this.cs = function () { var e = E.vl.main; e.divCells = E.divCells, e.divLines = E.divLines, e.divBreaks = E.divBreaks, e.divHeader = E.divHeader, e.divEvents = E.divEvents, e.divShadow = E.divShadow, e.divHover = E.divHover, e.divCrosshair = E.divCrosshair, e.div = E.nav.scroll, Object.defineProperty(E.vl.main, "rowlist", { get: function () { return E.rowlist } }), Object.defineProperty(E.vl.main, "top", { get: function () { return E.Ql() + 1 } }), Object.defineProperty(E.vl.main, "height", { get: function () { return E.Nk } }) }, this.Wr = function () { var e = E.vl.top, t = e.top, n = e.height, i = l(); return i.style.position = "absolute", i.style.left = "0px", i.style.right = "0px", i.style.top = t + "px", i.style.height = n + "px", i.style.overflow = "hidden", i.style.boxSizing = "border-box", i.rows = [], e.divHeader = i, i }, this.Xr = function () { var e = E.vl.bottom, t = e.top, n = e.height, i = l(); i.style.position = "absolute", i.style.left = "0px", i.style.right = "0px", i.style.top = t + "px", i.style.height = n + "px", i.style.overflow = "hidden", i.style.boxSizing = "border-box"; var a = l(); a.style.position = "absolute", a.style.height = "500px", a.style.top = e.height + "px", a.style.left = "0px", a.style.width = E.hq() + "px", a.className = E.ca("_rowheader"), i.appendChild(a), i.rows = []; var r = l(); return i.appendChild(r), i.rq = r, E.os(i), e.divHeader = i, e.divSpace = a, i }, this._r = function () { var e = E.vl.top, t = e.top, n = e.height, i = l(); return i.style.position = "absolute", i.style.left = "0px", i.style.right = "0px", i.style.top = t + "px", i.style.height = n + "px", i.style.overflow = "hidden", i.className = E.ca("_grid_top"), i.onmousedown = E.zs, i.onmousemove = E.fq, i.oncontextmenu = E.As, i.onmouseup = E.Bs, i.ondblclick = this.Cs, E.nav.fixedTop = i, e.div = i, p(E.Ds(i), e), i }, this.as = function () { var e = E.vl.bottom, t = e.top, n = e.height, i = l(); return i.style.position = "absolute", i.style.left = "0px", i.style.right = "0px", i.style.bottom = t + "px", i.style.height = n + "px", i.style.overflow = "hidden", i.className = E.ca("_grid_bottom"), i.onmousedown = E.zs, i.onmousemove = E.fq, i.oncontextmenu = E.As, i.onmouseup = E.Bs, i.ondblclick = this.Cs, E.nav.fixedBottom = i, e.div = i, p(E.Ds(i), e), i }, this.Ds = function (e) { var t = l(); t.style.position = "absolute", e.appendChild(t); var n = l(); n.style.position = "absolute", e.appendChild(n); var i = l(); i.style.position = "absolute", e.appendChild(i); var a = l(); a.style.position = "absolute", e.appendChild(a); var r = l(); r.style.position = "absolute", e.appendChild(r); var o = l(); o.style.position = "absolute", o.style.left = "0px", o.style.width = "100000px", o.style.bottom = "0px", o.style.height = "1px", e.appendChild(o); var s = l(); s.style.position = "absolute", e.appendChild(s); var d = l(); return d.style.position = "absolute", e.appendChild(d), { "divCells": t, "divLines": n, "divBreaks": i, "divEvents": r, "divShadow": d, "divHover": s, "divCrosshair": a } }, this.Vl = function () { var e = E.vl.top, t = E.vl.bottom; D(e), D(t), E.divStretch.style.height = E.Nk + t.height + "px", E.nav.dividerTop.style.top = e.top + e.height - 1 + "px", E.nav.dividerTop.style.right = e.right + "px", E.Es(E.nav.dividerTop, e.enabled()), E.nav.dividerBottom.style.top = t.top - 1 + "px", E.nav.dividerBottom.style.right = t.right + "px", E.Es(E.nav.dividerBottom, t.enabled()) }, this.Es = function (e, t) { e.style.display = t ? "" : "none" }, this.em = function () { var e = E.rowlist; return e = e.concat(E.vl.top.rowlist), e = e.concat(E.vl.bottom.rowlist) }, this.Fs = function () { return E.rowlist.length > 0 || E.vl.top.rowlist.length > 0 || E.vl.bottom.rowlist.length > 0 }, this.Gs = function () { this.Re(), this.Hs() }, this.$r = function () { var e = l(); if (e.style.overflow = "auto", e.style.overflowX = "auto", e.style.overflowY = "auto", e.style.height = this.Te() + "px", "Top" === E.timeHeaderPosition ? (e.style.top = this.Ql() + 1 + "px", e.style.position = "absolute") : e.style.position = "relative", e.style.width = "100%", e.className = this.ca("_scrollable"), e.oncontextmenu = function () { return !1 }, this.ps(e), E.overrideWheelScrolling) { var t = E.ks(); e.onwheel = function (n) { var i = n.deltaY > 0 ? t : -t; E.nav.scroll.scrollTop = e.scrollTop + i, n.preventDefault() }, e.onmousewheel = function (n) { var i = n.wheelDelta < 0 ? t : -t; E.nav.scroll.scrollTop = e.scrollTop + i, n.preventDefault(), n.returnValue = !1 } } DayPilot.rePassive(e, "wheel", E.Tn), this.nav.scroll = e, this.wl = l(); var n = this.wl; n.style.MozUserSelect = "none", n.style.KhtmlUserSelect = "none", n.style.webkitUserSelect = "none", n.daypilotMainD = !0, n.calendar = this, n.style.minHeight = "1px", DayPilot.browser.android && (n.style.webkitTransform = "translateZ(0px)"), n.style.position = "absolute"; var i = this.Ll(); return i > 0 && !isNaN(i) && (n.style.width = i + "px"), n.setAttribute("unselectable", "on"), n.onmousedown = this.zs, n.onmousemove = this.fq, n.onmouseup = this.Bs, n.oncontextmenu = this.As, n.ondblclick = this.Cs, n.className = this.ca("_matrix"), this.divStretch = l(), this.divStretch.style.position = "absolute", this.divStretch.style.height = "1px", n.appendChild(this.divStretch), this.divCells = l(), this.divCells.style.position = "absolute", this.divCells.oncontextmenu = this.As, n.appendChild(this.divCells), this.divLines = l(), this.divLines.style.position = "absolute", this.divLines.oncontextmenu = this.As, n.appendChild(this.divLines), this.divBreaks = l(), this.divBreaks.style.position = "absolute", this.divBreaks.oncontextmenu = this.As, n.appendChild(this.divBreaks), this.divSeparators = l(), this.divSeparators.style.position = "absolute", this.divSeparators.oncontextmenu = this.As, n.appendChild(this.divSeparators), this.divLinksBelow = l(), this.divLinksBelow.style.position = "absolute", n.appendChild(this.divLinksBelow), this.divCrosshair = l(), this.divCrosshair.style.position = "absolute", this.divCrosshair.ondblclick = this.Cs, this.divCrosshair.onmousedown = this.Xf, n.appendChild(this.divCrosshair), this.divRange = l(), this.divRange.style.position = "absolute", this.divRange.oncontextmenu = this.As, n.appendChild(this.divRange), this.divEvents = l(), this.divEvents.style.position = "absolute", n.appendChild(this.divEvents), this.divSeparatorsAbove = l(), this.divSeparatorsAbove.style.position = "absolute", this.divSeparatorsAbove.oncontextmenu = this.As, n.appendChild(this.divSeparatorsAbove), this.divLinksAbove = l(), this.divLinksAbove.style.position = "absolute", n.appendChild(this.divLinksAbove), this.divLinkShadow = l(), this.divLinkShadow.style.position = "absolute", n.appendChild(this.divLinkShadow), this.divLinkpoints = l(), this.divLinkpoints.style.position = "absolute", n.appendChild(this.divLinkpoints), this.divRectangle = l(), this.divRectangle.style.position = "absolute", n.appendChild(this.divRectangle), this.divHover = l(), this.divHover.style.position = "absolute", n.appendChild(this.divHover), this.divShadow = l(), this.divShadow.style.position = "absolute", n.appendChild(this.divShadow), e.appendChild(n), e }, E.Tn = function (e) { E.um(e) }, this.Is = {}; var W = this.Is; W.Sh = function () { if (!E.nav.overlay) { var e = document.createElement("div"); e.style.position = "absolute", e.style.left = "0px", e.style.right = "0px", e.style.top = "0px", e.style.bottom = "0px", e.className = E.ca("_block"), E.nav.top.appendChild(e), E.nav.overlay = e } }, W.D = function () { W.Sh(), E.nav.overlay.style.display = "" }, W.B = function () { E.nav.overlay && (E.nav.overlay.style.display = "none") }, this.La = function (e) { e = e || {}; var t = e.delay || 0, n = E.Fa(e.text || this.loadingLabelText, this.loadingLabelHtml), i = "undefined" != typeof e.block ? e.block : E.blockOnCallBack; E.Js && window.clearTimeout(E.Js); var a = function () { (E.loadingLabelVisible || e.text) && (E.nav.loading.innerHTML = n, E.nav.loading.style.display = ""), i && W.D() }; 0 === t ? a() : E.Js = window.setTimeout(a, t) }, this.ib = function (e) { this.Js && window.clearTimeout(this.Js), this.nav.loading.style.display = "none", (e || E.blockOnCallBack) && W.B() }, this.loadingStart = function (e) { E.La(e) }, this.loadingStop = function () { E.ib(!0) }, this.uiBlock = function () { W.D() }, this.uiUnblock = function () { W.B() }, this.Sg = function () { this.startDate = new DayPilot.Date(this.startDate).getDatePart() }, this.Vg = function (e) { var t = l(); t.style.position = "absolute", t.style.top = "-2000px", t.style.left = "-2000px", t.className = this.ca(e), s().appendChild(t); var n = t.offsetHeight, i = t.offsetWidth; s().removeChild(t); var a = {}; return a.height = n, a.width = i, a }, this.Eb = function (e) { if (e && (this.autoRefreshEnabled = !0), this.autoRefreshEnabled && !(this.va >= this.autoRefreshMaxCount)) { this.Sa(); var t = this.autoRefreshInterval; if (!t || t < 10) throw new DayPilot.Exception("The minimum autoRefreshInterval is 10 seconds"); this.autoRefreshTimeout = window.setTimeout(function () { E.ig() }, 1e3 * this.autoRefreshInterval) } }, this.Sa = function () { this.autoRefreshTimeout && (window.clearTimeout(this.autoRefreshTimeout), this.autoRefreshTimeout = null) }, this.autoRefreshStart = function (e) { E.Eb(e) }, this.autoRefreshPause = function () { E.Sa() }, this.Ks = function () { return !(i.$o || i.rm || i.aq || i._o) }, this.ig = function () { if (E.Ks()) { var e = !1; if ("function" == typeof this.onAutoRefresh) { var t = {}; t.i = this.va, t.preventDefault = function () { this.preventDefault.value = !0 }, E.onAutoRefresh(t), t.preventDefault.value && (e = !0) } !e && this.ia() && this.commandCallBack(this.autoRefreshCommand), this.va++ } this.va < this.autoRefreshMaxCount && (this.autoRefreshTimeout = window.setTimeout(function () { E.ig() }, 1e3 * this.autoRefreshInterval)) }, this.lg = function () { i.mg || (i.mg = !0, DayPilot.re(document, "mousemove", i.ng), DayPilot.re(document, "mouseup", i.og), DayPilot.re(document, "mousedown", i.Ls), DayPilot.re(document, "touchend", i.qg), DayPilot.reNonPassive(document, "touchmove", i.pg), DayPilot.re(window, "keyup", i.Ms)), DayPilot.re(window, "resize", this._h), DayPilot.re(document, "keydown", this.Vn), DayPilot.re(document, "keyup", this.Wn) }, this.Ns = function () { this.nav.scroll.root = this, this.nav.scroll.onscroll = this.ml, E.yp = this.nav.scroll.scrollLeft, E.wp = this.nav.scroll.scrollTop, this.divNorth && (E.Os = this.divNorth.clientWidth) }, this.Nj = function () { if (this.nav.state) { var e = {}; e.scrollX = this.nav.scroll.scrollLeft, e.scrollY = this.nav.scroll.scrollTop; var t = E.Gn(e.scrollX, e.scrollY), n = E.Hn(t), i = E.In(t); e.rangeStart = n.start, e.rangeEnd = n.end, e.resources = i, this.syncResourceTree && (e.tree = this.ab()), this.nav.state.value = DayPilot.he(JSON.stringify(e)) } }, this.hl = function () { if (this.separators) for (var e = 0; e < this.separators.length; e++)this.Jg(e) }, this.Ps = {}, this.Ps.step = 300, this.Ps.delay = 10, this.Ps.mode = "display", this.Ps.layers = !1, this.Bp = function (e) { if (E.Jk) return void F.Qs(e); for (var t = 0, n = 0; n < e.lines.length; n++) { var i = e.lines[n]; i.height = 0, i.top = t; for (var a = 0; a < i.length; a++) { var r = i[a]; if (!r.part.top, !0) { r.part.line = n, r.part.height || (r.part.height = e.eventHeight); var o = r.part.Xq(); o > i.height && (i.height = o), r.part.top = t + e.marginTop; var s = "Above" === E.eventVersionPosition; if (E.eventVersionsEnabled && !y(r.versions).isEmpty()) { var l = r.cache || r.data, d = (l.versions.length, r.part.top); s || (d += r.part.height + E.eventVersionMargin), y(l.versions).forEach(function (e, t) { if (r.versions[t]) { var n = t * (E.eventVersionHeight + E.eventVersionMargin); r.versions[t].top = d + n, s && (r.part.top += E.eventVersionHeight, r.part.top += E.eventVersionMargin) } }) } r.part.right = r.part.left + r.part.width, r.part.fullTop = e.top + r.part.top, r.part.fullBottom = r.part.fullTop + r.part.height } } t += (i.height || e.eventHeight) * e.eventStackingLineHeight / 100 } }; var F = {}; F.Ko = function (e) { e.evColumns = y(E.itline).map(function (e, t) { return { "events": y() } }), y(e.events).forEach(function (t) { var n = t.start(), i = E.pm(n); e.evColumns[i.i].events.push(t) }) }, F.Wq = function () { var e = E.Kk, t = 0; y(E.rowlist).forEach(function (n) { var i = 0; n.evColumns.forEach(function (t, a) { var r = E.itline[a], o = E.rowMarginTop; t.events.forEach(function (t) { t.part.left = r.left, t.part.width = r.width, t.part.top = o, t.part.height || (e ? t.part.height = F.Rs(t) + J.Fp() : t.part.height = n.eventHeight), o += t.part.height + E.eventMarginBottom }), t.height = o, t.height > i && (i = t.height) }), n.maxColumnHeight = i, n.top = t; var a = n.height; n.height = n.getHeight(), i > E.rowMarginTop && (n.height = i + E.rowMarginBottom), a !== n.height && (E.bn = !0), t += n.height }), E.Nk = t }, F.Rs = function (e) { var t = e.client.html(), n = l(); n.style.position = "absolute", n.style.top = "-2000px", n.style.left = "-2000px", n.style.width = e.part.width + "px", n.className = E.ca(q.event); var i = l(); i.className = E.ca(q.eventInner), i.innerHTML = t, i.style.position = "static", i.style.overflow = "auto", n.appendChild(i); var a = E.divEvents; a.appendChild(n); var r = n.offsetHeight; return a.removeChild(n), r }, F.Qs = function (e) { F.Wq() }, F.Ss = function () { y(E.rowlist).forEach(function (e) { F.Ts(e) }) }, F.Ab = function () { F.Ss(), F.Us(), E.bl(), E.wb() }, F.Us = function () { if (E.Kk) { var e = !1; y(E.elements.events).forEach(function (t) { var n = t.firstChild, i = n.offsetHeight - n.clientHeight + t.offsetHeight - t.clientHeight, a = n.scrollHeight + i, r = t.event.part.height; t.event.part.height = a, r !== a && (e = !0) }), e && (E.Ta(), F.Wq(), F.Ss(), E.cl(), E.gl()) } }, F.Ts = function (e) { e.evColumns.forEach(function (e, t) { e.events.forEach(function (e) { E.He(e) }) }) }, this.Lm = null, this.Ab = function (e) { if (!E.xa) { if (E.Jk) return void F.Ab(); var t = this.Ps.step; this.Ps.layers; "display" === this.Ps.mode ? this.divEvents.style.display = "none" : "visibility" === this.Ps.mode && (this.divEvents.style.visibility = "hidden"), this.divEvents.setAttribute("role", "region"), this.divEvents.setAttribute("aria-label", "scheduler events"); var n = "Progressive" === this.dynamicEventRendering, i = this.hd(), a = i.pixels.top, r = i.pixels.bottom, o = E.allowMultiMove || E.allowMultiResize, s = E.rowlist.filter(function (e) { var t = e.top - E.dynamicEventRenderingMargin, i = t + e.height + 2 * E.dynamicEventRenderingMargin; return !(n && !o && (r <= t || a >= i)) }); E.vl.top.enabled() && (s = s.concat(E.vl.top.rowlist)), E.vl.bottom.enabled() && (s = s.concat(E.vl.bottom.rowlist)), s.forEach(function (n) { E.Bp(n); for (var i = Math.max(0, n.resource && n.resource.maxLines || 1e5), a = 0; a < n.lines.length; a++) { var r = n.lines[a]; if (!(a >= i)) for (var o = 0; o < r.length; o++) { var s = r[o], l = E.He(s); if (e && l && (t--, t <= 0)) return E.divEvents.style.visibility = "", E.divEvents.style.display = "", void (E.Lm = window.setTimeout(function () { E.Ab(e) }, E.Ps.delay)) } } }), this.divEvents.style.display = "", y(E.multiselect.Bc).isEmpty() || E.multiselect.redraw(), this.El(), M.Gm(), this.Ho() } }, this.dn = function (e, t) { var n = E.Xn(t), i = n.rowlist[e]; if (E.Jk) return void F.Ts(i); this.wl.insertBefore(this.divEvents, this.divSeparatorsAbove), E.ra.Sk.push(this.divEvents), this.Bp(i); for (var a = 0; a < i.lines.length; a++)for (var r = i.lines[a], o = 0; o < r.length; o++) { var s = r[o]; this.He(s) } this.divEvents.style.display = "" }, this.Vs = function () { var e = E.ra.Sk, t = []; e.forEach(function (e) { 0 === e.childNodes.length ? e.remove() : t.push(e) }), E.ra.Sk = t }, this.Ta = function () { if (this.elements.events) for (var e = this.elements.events.length, t = 0; t < e; t++) { var n = this.elements.events[t]; this.De(n) } this.elements.events = [] }, this.cn = function (e, t) { if (t = t || "main", this.elements.events) { for (var n = this.elements.events.length, i = [], a = 0; a < n; a++) { var r = this.elements.events[a], o = r.event; o.part.dayIndex === e && o.part.grid === t && (this.De(r), i.push(a)) } for (var a = i.length - 1; a >= 0; a--)this.elements.events.splice(i[a], 1) } }, this.De = function (e) { var t = e.domArgs; if (e.domArgs = null, t && "function" == typeof E.onDomRemoveEvent && E.onDomRemoveEvent(t), t && "function" == typeof E.onBeforeEventDomRemove && E.onBeforeEventDomRemove(t), t && "function" == typeof E.onBeforeEventDomAdd && E.Y.reactDOM) { var n = t && t.Be; if (n) { if (m(t.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.ja(n) } } } e.parentNode && e.parentNode.removeChild(e), e.onclick = null, e.oncontextmenu = null, e.onmouseover = null, e.onmouseout = null, e.onmousemove = null, e.onmousedown = null, e.ondblclick = null, e.event && (e.event.rendered = null, e.event = null), e.related && x(e.related) }, this.Ws = function (e) { e.event && (e.event.rendered = !1), e.onclick = null, e.onmousedown = null, e.event = null, e.parentNode && e.parentNode.removeChild(e) }, this.Xs = function () { if ("Progressive" === this.dynamicEventRendering) { if (E.dynamicEventRenderingCacheSweeping) { var e = E.dynamicEventRenderingCacheSize || 0; this.divEvents.style.display = "none"; for (var t = [], n = 0, i = this.elements.events.length, a = i - 1; a >= 0; a--) { var r = this.elements.events[a]; this.Ys(r.event) ? e > 0 ? (e--, t.unshift(r)) : (this.De(r), n++) : t.unshift(r) } this.elements.events = t, this.divEvents.style.display = "" } } }, this.Zs = function (e) { for (var t = [], n = 0, i = this.hd(), a = this.elements.cells.length, r = a - 1; r >= 0; r--) { var o = this.elements.cells[r]; i.xStart < o.coords.x && o.coords.x <= i.xEnd && i.yStart < o.coords.y && o.coords.y <= i.yEnd ? t.unshift(o) : e > 0 ? (e--, t.unshift(o)) : (this.Oo(o), n++) } }, this.Oo = function (e) { if (e && e.coords) { var t = e.coords.x, n = e.coords.y, i = e.coords.grid; !function () { var t = e.domArgs; if (e.domArgs = null, t && "function" == typeof E.onBeforeCellDomRemove && E.onBeforeCellDomRemove(t), t && "function" == typeof E.onBeforeCellDomAdd && E.Y.reactDOM) { var n = t && t.Be; if (n) { if (m(t.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.ja(n) } } } }(), DayPilot.rfa(E.elements.cells, e), x(e), E.ra.cells[i + "_" + t + "_" + n] = null } }, this.dl = function () { if (this.elements.separators) for (var e = 0; e < this.elements.separators.length; e++) { var t = this.elements.separators[e]; x(t) } this.elements.separators = [] }, this.$s = function () { var e = "Progressive" === this.dynamicEventRendering; if (!this.nav.scroll) return !1; for (var t = this.nav.scroll.scrollTop, n = t + this.nav.scroll.clientHeight, i = 0; i < this.rowlist.length; i++) { var a = this.rowlist[i], r = a.top, o = a.top + a.height; if (!e || !(n <= r || t >= o)) for (var s = 0; s < a.lines.length; s++)for (var l = a.lines[s], d = 0; d < l.length; d++) { var c = l[d]; if (this._s(c)) return !0 } } return !1 }, this._s = function (e) { if (e.rendered) return !1; var t = "Progressive" === this.dynamicEventRendering, n = this.nav.scroll.scrollLeft, i = n + this.nav.scroll.clientWidth, a = e.part.left, r = e.part.left + e.part.width; return !t || !(i <= a || n >= r) }, this.Ys = function (e) { if (!e.rendered) return !0; var t = this.hd(), n = t.pixels.top, i = t.pixels.bottom, a = t.pixels.left - this.dynamicEventRenderingMargin, r = t.pixels.right + this.dynamicEventRenderingMargin, o = e.part.left, s = e.part.right, l = e.part.fullTop, d = e.part.fullBottom; return r <= o || a >= s || (i <= l || n >= d) }, this.Vq = y(), this.at = function (e) { if (e.rendered) return !1; var t = e.row; if (t.hidden) return !1; var n = E.vl[t.grid], i = e.min, a = e.max - e.min, r = E.eventHeight, o = e.row.top; "number" == typeof t.forcedHeight && (r = Math.min(t.forcedHeight, E.eventHeight)); var s = l(); s.style.position = "absolute", s.style.left = i + "px", s.style.top = o + "px", s.style.width = a + "px", s.style.height = r + "px", s.className = E.ca("_event_group"), s.style.cursor = "pointer"; var d = {}; d.group = {}, d.group.count = e.events.length, d.group.events = y(e.events, !0), d.group.html = "&#x1F7A7; " + e.events.length + " events", d.group.bubbleHtml = null, "function" == typeof E.onBeforeGroupRender && E.onBeforeGroupRender(d); var c = l(); return c.innerHTML = d.group.html, s.appendChild(c), s.onmousedown = function (e) { e.cancelBubble = !0 }, s.onclick = function (e) { var n = s.event; n.expanded = !0, E.Ws(s); var i = k(E.elements.events, s); i !== -1 && E.elements.events.splice(i, 1); var a = E.Vq; y(n.events).forEach(function (e) { a.push(e.id()) }), "undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.hideActive(), DayPilot.Bubble.cancelShowing()), E.Bm(), E.Cm([t]), E.wb(), E.Ab(), e.cancelBubble = !0 }, s.onmousemove = function (t) { if (E.groupBubble) { var n = {}; n.calendar = E, n.type = "Group", n.object = { "events": y(e.events, !0) }, n.staticHTML = d.group.bubbleHtml, n.div = s, n.toJSON = function () { var e = {}; return e.uid = E.uniqueID, e.type = "Group", e.object = n.object, e }, E.groupBubble.showGroup(n) } }, s.onmouseout = function (e) { E.groupBubble && E.groupBubble.hideOnMouseOut() }, e.part = {}, e.part.left = i, e.part.width = a, e.part.height = E.eventHeight, e.part.dayIndex = k(n.rowlist, e.row), e.part.top = 0, e.part.isBlock = !0, e.part.grid = e.row.grid, e.client = {}, e.client.html = function () { return d.group.html }, e.data = {}, s.event = e, this.elements.events.push(s), n.divEvents.appendChild(s), e.rendered = !0, !0 }, this.He = function (e, t) {
                t = t || {}; var n = t.forced; if (e.rendered) return !1; if (E.groupConcurrentEvents) { var i = e.part.block; if (i.events.length > 1 && !i.expanded) return E.at(i) } var a = "Progressive" === this.dynamicEventRendering, r = e.part.dayIndex, o = e.part.grid || "main", s = E.vl[o], d = s.divEvents, c = s.rowlist, h = c[r]; if (h.hidden) return !1; var v = Math.max(0, h.resource.maxLines || 1e5); if (e.part.line >= v) return !1; var p = h.top, g = this.hd(), b = g.pixels.left - this.dynamicEventRenderingMargin, w = g.pixels.right + this.dynamicEventRenderingMargin, x = g.pixels.top, k = g.pixels.bottom, C = e.part.left, _ = e.part.left + e.part.width, D = e.part.top + p, S = D + e.part.height, T = E.multiselect.od(e), A = w <= C || b >= _, H = "main" === o && (k <= D || x >= S); if (!n && !T && a && (A || H)) return !1; var M = "Milestone" === e.data.type, R = e.part.width, B = e.part.height, P = e.cache || e.data; R = f(0, R), B = f(0, B); var N = l(); if (N.related = [], function (t) { E.eventVersionsEnabled && y(P.versions).forEach(function (n, i) { if (n) { var a = e.versions[i]; if (a) { var r = l(); r.style.position = "absolute", r.style.overflow = "hidden", r.style.left = a.left + "px", r.style.top = p + a.top + "px", r.style.width = a.width + "px", r.style.height = E.eventVersionHeight + "px", r.className = E.ca(q.event) + " " + E.ca("_event_previous") + " " + E.ca("_event_version"), r.onmousedown = function (e) { e.preventDefault(), e.stopPropagation() }, n.toolTip && (r.title = n.toolTip), n.cssClass && u(r, n.cssClass); var o = l(); o.setAttribute("unselectable", "on"), o.className = E.ca(q.eventInner), o.innerHTML = E.Fa(n.text, n.html), n.backColor && (o.style.background = n.backColor), n.fontColor && (o.style.color = n.fontColor), n.borderColor && (o.style.borderColor = n.borderColor), n.backImage && (o.style.backgroundImage = "url(" + n.backImage + ")", n.backRepeat && (o.style.backgroundRepeat = n.backRepeat)), r.appendChild(o), a.continueLeft && !M && u(r, E.ca("_event_continueleft")), a.continueRight && !M && u(r, E.ca("_event_continueright")); var s = E.durationBarVisible && !n.barHidden, c = a.width; if (s && c > 0) { var h = 100 * a.barLeft / c, f = Math.ceil(100 * a.barWidth / c); "PercentComplete" === E.durationBarMode && (h = 0, f = n.complete || 0); var v = l(); v.setAttribute("unselectable", "on"), v.className = E.ca(q.eventBar), v.style.position = "absolute", n.barBackColor && (v.style.backgroundColor = n.barBackColor); var m = l(); m.setAttribute("unselectable", "on"), m.className = E.ca(q.eventBarInner), m.style.left = h + "%", 0 < f && f <= 1 ? m.style.width = "1px" : m.style.width = f + "%", n.barColor && (m.style.backgroundColor = n.barColor), n.barImageUrl && (m.style.backgroundImage = "url(" + n.barImageUrl + ")"), v.appendChild(m), r.appendChild(v) } if (n.htmlLeft) { var g = E.eventHtmlLeftMargin, b = l(); b.style.position = "absolute", b.style.right = -(a.left - g) + "px", b.style.top = p + a.top + "px", b.style.height = E.eventVersionHeight + "px", b.style.boxSizing = "border-box", b.innerHTML = n.htmlLeft, b.className = E.ca("_event_left"), b.type = "divLeft", b.versionPart = a, t.related.push(b), d.appendChild(b) } if (n.htmlRight) { var g = E.eventHtmlRightMargin, y = l(); y.style.position = "absolute", y.style.left = a.left + a.width + g + "px", y.style.top = p + a.top + "px", y.style.height = E.eventVersionHeight + "px", y.style.boxSizing = "border-box", y.innerHTML = n.htmlRight, y.className = E.ca("_event_right"), y.type = "divRight", y.versionPart = a, t.related.push(y), d.appendChild(y) } r.versionPart = a, r.type = "version"; var w = DayPilot.Areas.resolvePosition(n.areas, E, a.left, a.width); DayPilot.Areas.attach(r, n, { "areas": w }), t.related.push(r), d.appendChild(r) } } }) }(N), P.htmlLeft) { var I = E.eventHtmlLeftMargin, L = l(); L.style.position = "absolute", L.style.right = -(e.part.left - I) + "px", L.style.top = p + e.part.top + "px", L.style.height = E.eventHeight + "px", L.style.boxSizing = "border-box", L.innerHTML = P.htmlLeft, L.className = E.ca("_event_left"), L.type = "divLeft", N.related.push(L), d.appendChild(L) } if (P.htmlRight) { var I = E.eventHtmlRightMargin, z = l(); z.style.position = "absolute", z.style.left = e.part.left + e.part.width + I + "px", z.style.top = p + e.part.top + "px", z.style.height = E.eventHeight + "px", z.style.boxSizing = "border-box", z.innerHTML = P.htmlRight, z.className = E.ca("_event_right"), z.type = "divRight", N.related.push(z), d.appendChild(z) } var x = p + e.part.top; if (E.treeAnimation) { var O = "number" == typeof h.forcedHeight ? h.forcedHeight : h.height; e.part.top + e.part.height > O && (B = Math.max(0, O - e.part.top)) } N.style.position = "absolute", N.style.left = e.part.left + E.eventMarginLeft + "px", N.style.top = p + e.part.top + "px", N.style.width = R - E.eventMarginLeft - E.eventMarginRight + "px", N.style.height = B + "px", E.eventTextWrappingEnabled || (N.style.whiteSpace = "nowrap"), N.style.overflow = "hidden", N.className = this.ca(q.event), M && u(N, E.ca("_task_milestone")), "Group" === e.data.type && (u(N, E.ca("_task_parent")), u(N, E.ca("_task_group"))), P.cssClass && u(N, P.cssClass); "number" == typeof e.part.line && u(N, this.ca(q.eventLine + e.part.line)), N.setAttribute("unselectable", "on"), this.showToolTip && !this.bubble && (N.title = e.client.toolTip() || ""), N.onmousemove = this.Ie, N.onmouseout = this.Je, N.onmousedown = this.Ke, N.onmouseup = this.bt, DayPilot.reNonPassive(N, "touchstart", Y.ct), DayPilot.rePassive(N, "touchmove", Y.dt), DayPilot.reNonPassive(N, "touchend", Y.et), e.client.clickEnabled() && (N.onclick = this.dj), e.client.doubleClickEnabled() && (N.ondblclick = this.Xb), N.oncontextmenu = function (e) {
                    E.allowDefaultContextMenu || e.preventDefault()
                }, "undefined" != typeof P.ariaLabel ? N.setAttribute("aria-label", P.ariaLabel) : N.setAttribute("aria-label", P.text), N.setAttribute("tabindex", "-1"); var U = l(); U.setAttribute("unselectable", "on"), U.className = E.ca(q.eventInner), P.backColor && (U.style.background = P.backColor), "contrasting" === P.fontColor && P.backColor ? U.style.color = DayPilot.ColorUtil.contrasting(P.backColor) : U.style.color = P.fontColor, "darker" === P.borderColor && P.backColor ? U.style.borderColor = DayPilot.ColorUtil.darker(P.backColor, 2) : U.style.borderColor = P.borderColor, P.backImage && (U.style.backgroundImage = "url(" + P.backImage + ")", P.backRepeat && (U.style.backgroundRepeat = P.backRepeat)), N.appendChild(U); var j = e.start().getTime() === e.part.start.getTime(), W = e.rawend().getTime() === e.part.end.getTime(); if (j || M || u(N, this.ca("_event_continueleft")), W || M || u(N, this.ca("_event_continueright")), e.client.barVisible() && R > 0 && !M) { var F = 100 * e.part.barLeft / R, V = Math.ceil(100 * e.part.barWidth / R); "PercentComplete" === this.durationBarMode && (F = 0, V = P.complete || 0), E.durationBarHeight && (U.style.paddingTop = E.durationBarHeight + "px"); var X = l(); X.setAttribute("unselectable", "on"), X.className = this.ca(q.eventBar), X.style.position = "absolute", E.durationBarHeight && (X.style.height = E.durationBarHeight + "px"), P.barBackColor && (X.style.backgroundColor = P.barBackColor); var G = l(); G.setAttribute("unselectable", "on"), G.className = this.ca(q.eventBarInner), G.style.left = F + "%", E.durationBarHeight && (G.style.height = E.durationBarHeight + "px"), 0 < V && V <= 1 ? G.style.width = "1px" : G.style.width = V + "%", P.barColor && (G.style.backgroundColor = P.barColor), P.barImageUrl && (G.style.backgroundImage = "url(" + P.barImageUrl + ")"), X.appendChild(G), N.appendChild(X) } if (N.row = r, P.areas) { var J = DayPilot.Areas.resolvePosition(P.areas, E, e.part.left, e.part.width); J = J.filter(function (e) { return DayPilot.Areas.isVisible(e) }), J.forEach(function (t) { var n = DayPilot.Areas.createArea(N, e, t); N.appendChild(n) }) } if (N.event = e, T && (E.multiselect.add(N.event, !0), E.multiselect.Bd(N)), function () { if ("function" != typeof E.onBeforeEventDomAdd && "function" != typeof E.onBeforeEventDomRemove) return void (M || (U.innerHTML = e.client.innerHTML())); var t = {}; if (t.control = E, t.e = e, t.element = null, N.domArgs = t, "function" == typeof E.onDomAddEvent && E.onDomAddEvent(t), "function" == typeof E.onBeforeEventDomAdd && E.onBeforeEventDomAdd(t), t.element) { var n = U; if (n) { t.Be = n; if (m(t.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.X(t.element, n) } else n.appendChild(t.element) } } else M || (U.innerHTML = e.client.innerHTML()) }(), this.elements.events.push(N), d.appendChild(N), e.rendered = !0, E.Fb()) { if ("function" == typeof E.onAfterEventRender) { var K = {}; K.e = N.event, K.div = N, E.onAfterEventRender(K) } } else E.afterEventRender && E.afterEventRender(N.event, N); return !0
            }, this.Fa = function (e, t) { return E.Ha.Ga() ? DayPilot.Util.escapeTextHtml(e, t) : v(t) ? v(e) ? "" : e : t }, this.Fb = function () { return 2 === E.api }, this.en = function () { for (var e = 0; e < this.elements.events.length; e++) { var t = this.elements.events[e], n = t.event, i = n.part.dayIndex, a = E.Xn(n.part.grid), r = a.rowlist[i], o = r.top, s = o + n.part.top, l = "number" == typeof r.forcedHeight ? r.forcedHeight : r.height, d = n.part.height, c = !1; n.part.top + n.part.height > l && (d = Math.max(0, l - n.part.top), c = !0), t.style.top = s + "px", t.style.height = d + "px", y(t.related).filter(function (e) { return !!e.versionPart }).forEach(function (e) { var t = e.versionPart; e.style.top = o + t.top + "px" }), y(t.related).filter(function (e) { return !e.versionPart && ("divLeft" === e.type || "divRight" === e.type) }).forEach(function (e) { e.style.top = s + "px" }) } }, this.Pg = function (e) { if (!e) return null; for (var t = 0; t < E.elements.events.length; t++) { var n = E.elements.events[t]; if (E.xd(n.event, e)) return n } return null }, this.zo = function (e) { var t = E.events.po(e.data); if (!t) return null; var n = E.rowlist[t.part.dayIndex]; return E.Bp(n), E.He(t, { "forced": !0 }), E.Pg(t) }, this.Je = function (e) { var t = this; DayPilot.Areas.hideAreas(t, e), t.active || (c(t, E.ca("_event_hover")), E.ft(t), _.source || M.no(), E.bubble && "Bubble" === E.eventHoverHandling && E.bubble.hideOnMouseOut()) }, this.gt = function (e) { var t = {}; t.div = e, t.e = e.event, "function" == typeof this.onEventMouseOver && this.onEventMouseOver(t), "function" == typeof this.onEventMouseEnter && this.onEventMouseEnter(t) }, this.ft = function (e) { var t = {}; t.div = e, t.e = e.event, "function" == typeof this.onEventMouseOut && this.onEventMouseOut(t), "function" == typeof this.onEventMouseLeave && this.onEventMouseLeave(t) }, this.ht = function (e) { var t = e.row, n = {}; n.div = e, n.row = E.qn(t), "function" == typeof this.onRowMouseOver && this.onRowMouseOver(n) }, this.it = function (e) { var t = e.row, n = {}; n.div = e, n.row = E.qn(t), "function" == typeof this.onRowMouseOut && this.onRowMouseOut(n) }, this.Ie = function (e) { E.cellBubble && E.cellBubble.delayedHide(); for (var t = this; t && !t.event;)t = t.parentNode; var n = t.event; E.jt(t, e); var i = t.event.cache ? t.event.cache.deleteDisabled : t.event.data.deleteDisabled; if (!t.active) { var a = []; if ("Disabled" !== E.eventDeleteHandling && !i) { var r = E.durationBarVisible ? J.Fp() : 0; a.push({ "action": "JavaScript", "v": "Hover", "w": 17, "h": 17, "top": r + 2, "right": 2, "css": E.ca(q.eventDelete), "js": function (e) { E.dc(e) } }) } var o = t.event.cache ? t.event.cache.areas : t.event.data.areas; o && o.length > 0 && (o = DayPilot.Areas.resolvePosition(o, E, n.part.left, n.part.width), a = a.concat(o)), DayPilot.Areas.showAreas(t, t.event, null, a), u(t, E.ca("_event_hover")), E.gt(t) } "Disabled" === E.linkCreateHandling || _.source || (M.io(), M.Tm(), E.Ks() && M.go(t)), E.um(e), E.coords.insideEvent = t.event }, this.rm = {}, this.bt = function (e) { var t = E.rm; if (g(e).right) return void E.Yb.call(this, e); if (E.ionicEventClickFix) { var n = t.Mf; if (n) { var i = DayPilot.mc(e); n.x === i.x && n.y === i.y && (E.dj.call(this, e), e.preventDefault(), e.stopPropagation()) } } }, this.Ke = function (e) { E.bb(), "undefined" != typeof DayPilot.Bubble && (DayPilot.Bubble.hideActive(), DayPilot.Bubble.cancelShowing()), E.um(e); var t = g(e); if (e.preventDefault(), e.stopPropagation(), t.left) { var n = e.shiftKey; if ("Disabled" !== J.vm() && n) return V.start(), !1; "w-resize" === this.style.cursor || "e-resize" === this.style.cursor ? (i.qm = !0, i.$o = this, i.sp = this.event, i.Mf = DayPilot.mc(e), s().style.cursor = this.style.cursor, M.Tm()) : ("move" === this.style.cursor || "Full" === E.moveBy && this.event.client.moveEnabled()) && E._d(this, e) } DayPilot.Menu && DayPilot.Menu.active && (DayPilot.Menu.active.hide(), DayPilot.Menu.active = null) }, this._d = function (e, t) { var n = E.rm; E.um(t), n.kt = !0, n.rm = e, n.Vo = e.event, n.Mf = DayPilot.mc(t), n.Uo = DayPilot.mo3(e, t).x, n.Zo = E.getDate(E.coords.x, !0), M.Tm() }, this.Le = {}; var Y = E.Le; "undefined" == typeof b.touch && (b.touch = {}), b.touch.active = !1, b.touch.start = !1, Y.sm = [], Y.relativeCoords = function (e) { return Y.zg(e) }, Y.startResizing = function (e, t) { Y.ne(e, t) }, Y.startMoving = function (e, t) { Y._d(e, t) }, Y.ct = function (e) { if (!b.touch.active && !b.touch.start) { DayPilot.Menu && DayPilot.Menu.touchPosition(e), e.stopPropagation(), Y.lt(), b.touch.start = !0, b.touch.active = !1; var t = this; E.coords = Y.zg(e); var i = E.tapAndHoldTimeout; Y.sm.push(window.setTimeout(function () { b.touch.active = !0, b.touch.start = !1, e.preventDefault(); var i = t.event; switch (E.eventTapAndHoldHandling) { case "Move": if (i.client.moveEnabled()) { var a = n(e); Y._d(t, a) } break; case "ContextMenu": DayPilot.Menu && DayPilot.Menu.touchPosition(e); var r = i.client.contextMenu(); r ? r.show(i) : E.contextMenu && E.contextMenu.show(i) } }, i)) } }, Y.dt = function (e) { Y.lt(), b.touch.start = !1 }, Y.et = function (e) { if (!DayPilot.Util.isMouseEvent(e)) { if (Y.lt(), b.touch.start) { b.touch.start = !1, e.preventDefault(), e.stopPropagation(); var t = this; window.setTimeout(function () { E.Ub(t, e) }) } window.setTimeout(function () { b.touch.start = !1, b.touch.active = !1 }, 500) } }, Y.af = function (e) { if (!(b.touch.active || b.touch.start || e.touches.length > 1 || "Disabled" === E.timeRangeSelectedHandling)) { Y.lt(), b.touch.start = !0, b.touch.active = !1; var t = E.tapAndHoldTimeout; Y.sm.push(window.setTimeout(function () { b.touch.active = !0, b.touch.start = !1, e.preventDefault(), E.coords = Y.zg(e), E.mt(E.coords) ? E.nt(e) : Y._o = E.ot() }, t)); E.coords = Y.zg(e) } }, Y.bf = function (e) { if (Y.lt(), b.touch.start = !1, i.$o) return e.preventDefault(), void Y.Dg(); if (b.touch.active) { if (e.preventDefault(), E.coords = Y.zg(e), i.rm) return void Y.Eg(); if (Y._o) { var t = Y._o; t.end = { x: Math.floor(E.coords.x / E.cellWidth), "time": E.getDate(E.coords.x, !0) }, E.mn(t) } } }, Y.debug = function (e) { }, Y.cf = function (e) { Y.lt(); if (b.touch.active) { if (i.rm) { e.preventDefault(); var t = i.Vo; if (E !== i.Xp.calendar) return; var n = i.Xp.start, a = i.Xp.end, r = "Days" !== E.viewType ? i.Xp.row.id : null, o = i.aq && t.part.external, l = i.Xp.overlapping, d = !i.Xp.allowed; if (c(i.rm, E.ca(E.pt.eventMovingSource)), x(i.Xp), E.eq(), i.Xp.calendar = null, s().style.cursor = "", i.rm = null, i.Vo = null, i.Xp = null, E.Vp.clear(), l || d || E.Vp.forbidden || E.Vp.invalid) return; E.oc(t, n, a, r, o) } if (Y._o) { var u = Y._o; Y._o = null; var h = E.elements.range2; h && h.overlapping ? E.clearSelection() : (E.ln = u, E.in(u)) } } else if (b.touch.start) { if (E.coords.x < E.getScrollX()) return; var u = E.ot(); E.mn(u); var h = E.elements.range2; h && h.overlapping ? E.clearSelection() : (E.ln = u, E.in(u)) } window.setTimeout(function () { b.touch.start = !1, b.touch.active = !1 }, 500) }, Y.lt = function () { for (var e = 0; e < Y.sm.length; e++)clearTimeout(Y.sm[e]); Y.sm = [] }, Y.zg = function (e) { function t(e, t, n) { var i = DayPilot.abs(n); return { x: e - i.x, y: t - i.y, toString: function () { return "x: " + this.x + ", y:" + this.y } } } var n = E.wl, i = e.touches ? e.touches[0] : e, a = i.pageX, r = i.pageY, o = t(a, r, n); if (o.grid = "main", E.vl.top.enabled()) { var s = E.vl.top, l = t(a, r, s.divCells); l.y > 0 && l.y <= s.height && (o = l, o.grid = "top") } if (E.vl.bottom.enabled()) { var d = E.vl.bottom, c = t(a, r, d.divCells); c.y > 0 && c.y <= s.height && (o = c, o.grid = "bottom") } return o }, Y._d = function (e, t) { i.rm = e, i.Vo = e.event, i.Mf = t; var n = DayPilot.abs(e); i.Uo = t.x - n.x, i.Zo = E.getDate(E.coords.x, !0), i.Xp = E.Gb(e), E.pp() }, Y.ne = function (e, t) { i.$o = e, i.sp = e.event, i.$o.dpBorder = t, i.rp || (i.rp = E.Gb(e)), E.Zp() }, Y.Dg = function () { if (!i.rp) { var e = i.$o; i.rp = E.Gb(e) } E.Zp(); var t = { x: E.coords.x, y: E.coords.y, "grid": E.coords.grid }; E.Qf(t) }, Y.Eg = function () { if (i.Xp && i.Xp.calendar !== E && E.eq(), !i.Xp) { var e = i.rm; i.Xp = E.Gb(e) } i.Xp.calendar.pp(); var t = { x: E.coords.x, y: E.coords.y, "grid": E.coords.grid }; E.Qf(t) }, Y.Fq = function (e) { var t = this.row, n = E.qn(t); if (!(b.touch.active || b.touch.start || e.touches.length > 1)) { Y.lt(), b.touch.start = !0, b.touch.active = !1; var i = E.tapAndHoldTimeout; Y.sm.push(window.setTimeout(function () { b.touch.active = !0, b.touch.start = !1, e.preventDefault(), E.contextMenuResource && E.contextMenuResource.show(n) }, i)); E.coords = Y.zg(e) } }, Y.Gq = function (e) { b.touch.active && (b.touch.start = !1, e.preventDefault(), e.stopPropagation()), window.setTimeout(function () { b.touch.start = !1, b.touch.active = !1 }, 500) }, this.jt = function (e, t) { var n = this.eventResizeMargin, a = this.eventMoveMargin, r = e; if ("undefined" != typeof i) { var o = DayPilot.mo3(e, t); if (o && (E.eventOffset = o, !i.$o && !i.rm)) { var s = r.event.part.start.toString() === r.event.start().toString(), l = r.event.part.end.toString() === r.event.rawend().toString(); if ("Top" === E.moveBy && o.y <= a && r.event.client.moveEnabled() && "Disabled" !== E.eventMoveHandling ? e.style.cursor = "move" : ("Top" === E.moveBy || "Full" === E.moveBy) && o.x <= n && r.event.client.resizeEnabled() && "Disabled" !== E.eventResizeHandling ? s ? (e.style.cursor = "w-resize", e.dpBorder = "left") : e.style.cursor = "not-allowed" : "Left" === E.moveBy && o.x <= a && r.event.client.moveEnabled() && "Disabled" !== E.eventMoveHandling ? e.style.cursor = "move" : e.offsetWidth - o.x <= n && r.event.client.resizeEnabled() && "Disabled" !== E.eventResizeHandling ? l ? (e.style.cursor = "e-resize", e.dpBorder = "right") : e.style.cursor = "not-allowed" : i.$o || i.rm || (r.event.client.clickEnabled() && "Disabled" !== E.eventClickHandling ? e.style.cursor = "pointer" : e.style.cursor = "default"), "undefined" != typeof DayPilot.Bubble && E.bubble && "Bubble" === E.eventHoverHandling && ("default" === e.style.cursor || "pointer" === e.style.cursor)) { this.Fg && o.x === this.Fg.x && o.y === this.Fg.y; this.Fg = o, E.bubble.showEvent(e.event) } } } }, this.xp = function () { return "Days" !== this.viewType ? this.itline.length : Math.floor(1440 / this.cellDuration) }, this.jn = function (e) { var e = e || i._o || E.ln; if (!e) return null; var t = E.Xn(e.start.grid), n = t.rowlist[e.start.y]; if (!n) return null; var a = e.qt ? e.qt : e, r = a.end.time > a.start.time, o = n.id, s = r ? a.start.x : a.end.x, l = r ? a.end.x : a.start.x, d = n.start.getTime() - this.Ob().getTime(), c = E.snapToGrid && E.snapToGridTimeRangeSelecting; e.forceSnap && (c = !0); var u, h; c ? (u = this.itline[s].start.addTime(d), h = this.itline[l].end.addTime(d)) : r ? (u = a.start.time, h = a.end.time) : (u = a.end.time, h = a.start.time); var f = new DayPilot.Selection(u, h, o, E); return f.allowed = !e.div || !e.div.overlapping, f }, this.dd = function (e) { var t = e.parentNode, n = E.eventEditMinWidth, i = (e.event.text() || "").trim(), a = document.createElement("textarea"); return a.style.position = "absolute", a.style.width = (e.offsetWidth < n ? n : e.offsetWidth - 2) + "px", a.style.height = e.offsetHeight - 2 + "px", a.style.fontFamily = DayPilot.gs(e, "fontFamily") || DayPilot.gs(e, "font-family"), a.style.fontSize = DayPilot.gs(e, "fontSize") || DayPilot.gs(e, "font-size"), a.style.left = e.offsetLeft + "px", a.style.top = e.offsetTop + "px", a.style.border = "1px solid black", a.style.padding = "1px", a.style.marginTop = "0px", a.style.backgroundColor = "white", a.value = i, a.event = e.event, t.appendChild(a), a }, this.rt = function (e) { var t = T.gk(); t.sort(function (e, t) { var n = e.event, i = t.event; return n.part.dayIndex !== i.part.dayIndex ? n.part.dayIndex - i.part.dayIndex : n.start() !== i.start() ? n.start().getTime() - i.start().getTime() : i.end().getTime() - n.end().getTime() }); var n = t.indexOf(e); return n === -1 ? null : n + 1 < t.length ? t[n + 1] : t[0] }, this.Vb = function (e) { if (e) { if (i.Ao && i.Ao.blur(), e.event) { var t = e.event; G.Bo(); var n = this.dd(e); if (i.Ao = n, DayPilot.rePassive(n, DayPilot.touch.start, function (e) { e.stopPropagation() }), n.onblur = function () { if (n.onblur = null, i.Ao === n && (i.Ao = null), n.parentNode && n.parentNode.removeChild(n), e.event) { var t = (e.event.text(), n.value); E.zc(e.event, t, n.canceling) } }, n.onmousedown = function (e) { e.stopPropagation && e.stopPropagation() }, n.cancel = function () { i.Ao && (i.Ao.canceling = !0, i.Ao.blur()) }, n.onkeydown = function (a) { if ("function" == typeof E.onEventEditKeyDown) { var r = {}; if (r.e = e.event, r.element = n, r.preventDefault = function () { r.preventDefault.value = !0 }, r.submit = function () { n.onblur() }, r.cancel = function () { i.Ao.cancel() }, r.originalEvent = a, E.onEventEditKeyDown(r), r.preventDefault.value) return } var o = i.Ao, s = a.keyCode; if (13 === s && (a.stopPropagation(), this.onblur()), 27 === s) o.cancel(); else if (9 === s && E.eventEditTabNext) { var l = E.Pg(t), d = E.rt(l); return o && o.cancel(), d && setTimeout(function () { E.Vb(d) }, 0), !1 } }, "function" == typeof E.onAfterEventEditRender) { var a = {}; a.element = n, a.e = e.event, E.onAfterEventEditRender(a) } n.select(), n.focus() } } }, this.st = {}, this.st.resource = function () { return "undefined" != typeof DayPilot.Bubble ? new DayPilot.Bubble : { "showResource": function () { }, "hideOnMouseOut": function () { } } }(), this.st.cell = function () { return "undefined" != typeof DayPilot.Bubble ? new DayPilot.Bubble : { "showResource": function () { }, "hideOnMouseOut": function () { } } }(), this.zq = function (e) { var t = this, n = t.row; if (E.db(), E.tt = !0, clearTimeout(E.ut), E.ut = setTimeout(function () { E.tt = !1 }, 500), "undefined" != typeof DayPilot.Bubble) { E.cellBubble; var i = E.qn(n); i.div = t, E.resourceBubble ? E.resourceBubble.showResource(i) : n.bubbleHtml && E.st.resource.showResource(i) } }, this.xq = function (e) { var t = this; t.active || (t.active = !0, E.ht(t)) }, this.yq = function (e) { var t = this; delete t.active, E.it(t) }, this.Aq = function (e) { var t = this; "undefined" != typeof DayPilot.Bubble && E.resourceBubble ? E.resourceBubble.hideOnMouseOut() : E.st.resource.hideOnMouseOut(); var n = t.firstChild; DayPilot.Areas.hideAreas(n, e), n.data = null }, this.Bq = function (e) { C.row && (O.cancelClick = !0, setTimeout(function () { O.cancelClick = !1 }, 100)), E.mr && (E.mr = !1, clearTimeout(E.nr), E.Dq.call(this, e)) }, this._k = function () { if ("None" !== E.timeHeaderPosition && this.timeHeader) { this.ra.timeHeader = {}, E.elements.timeHeader.length > 0 && (E.Qn(), E.elements.timeHeader = []); var e = l(); e.style.position = "relative", this.nav.timeHeader = e; for (var t = 0; t < this.timeHeader.length; t++)for (var n = this.timeHeader[t], i = 0; i < n.length; i++)this.vt(i, t); var a = this.divNorth; if (1 === a.childNodes.length) a.replaceChild(e, a.childNodes[0]); else { if (DayPilot.browser.ie && a && a.firstChild) { for (var r = [], o = 0; o < a.firstChild.childNodes.length; o++)r.push(a.firstChild.childNodes[o]); x(r) } a.innerHTML = "", a.appendChild(e) } var s = this.Ll(); a.style.width = s + 5e3 + "px", s > 0 && (this.divStretch.style.width = s + "px"), E.wt() } }, this.Xa = function () { if (E.divCorner) { var e = E.divCorner && E.divCorner.domArgs; if (E.divCorner.domArgs = null, e && ("function" == typeof E.onBeforeCornerDomRemove && E.onBeforeCornerDomRemove(e), "function" == typeof E.onBeforeCornerDomAdd && E.Y.reactDOM)) { var t = E.divCorner; if (t) { if (m(e.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.ja(t) } } } } }, this.lm = function (e, t) { var n = null, i = this.Ha.Lc(), t = t || this.cellGroupBy, a = e.start; e.end; switch (t) { case "Minute": n = a.toString("m"); break; case "Hour": n = "Clock12Hours" === E.Ha.Kc() ? a.toString("h tt", i) : a.toString("H", i); break; case "Day": n = a.toString(i.datePattern); break; case "Week": n = 1 === J.Jd() ? a.weekNumberISO() : a.weekNumber(); break; case "Month": n = a.toString("MMMM yyyy", i); break; case "Quarter": n = "Q" + Math.floor(a.getMonth() / 3 + 1); break; case "Year": n = a.toString("yyyy"); break; case "None": n = ""; break; case "Cell": var r = (e.end.ticks - e.start.ticks) / 6e4; n = this.xt(a, r); break; default: throw new DayPilot.Exception("Invalid groupBy value: " + t) }return n }, this.xt = function (e, t) { var n = this.Ha.Lc(), t = t || this.cellDuration; return t < 1 ? e.toString("ss") : t < 60 ? e.toString("mm") : t < 1440 ? "Clock12Hours" === E.Ha.Kc() ? e.toString("h tt", n) : e.toString("H", n) : t < 10080 ? e.toString("d") : 10080 === t ? 1 === J.Jd() ? e.weekNumberISO() : e.weekNumber() : e.toString("MMMM yyyy", n) }, this.im = function (e) { var t = this.scale; switch (t) { case "Cell": throw new DayPilot.Exception("Invalid scale: Cell"); case "Manual": throw new DayPilot.Exception("Internal error (addScaleSize in Manual mode)"); case "CellDuration": return e.addMinutes(this.cellDuration); default: return this.km(e, t, !0) } }, this.km = function (e, t, n) { var i, a; if (n) { var r = "Days" !== this.viewType ? this.days : 1; a = this.startDate.addDays(r), "Manual" === E.scale && (a = E.Wd()) } else a = E.Wd(), "Days" === E.viewType && (a = E.startDate.addDays(1)); var t = t || this.cellGroupBy, o = 60; switch (t) { case "Minute": e.getMinutes() + e.getSeconds() + e.getMilliseconds() > 0 && (e = e.getDatePart().addHours(e.getHours()).addMinutes(e.getMinutes())), i = e.addMinutes(1); break; case "Hour": e.getHours() + e.getMinutes() + e.getSeconds() + e.getMilliseconds() > 0 && (e = e.getDatePart().addHours(e.getHours())), i = e.addHours(1); break; case "Day": i = e.getDatePart().addDays(1); break; case "Week": for (i = e.getDatePart().addDays(1); i.dayOfWeek() !== J.Jd();)i = i.addDays(1); break; case "Month": e = e.getDatePart(), i = e.addMonths(1), i = i.firstDayOfMonth(); for (var s = DayPilot.DateUtil.diff(i, e) / 6e4 % o === 0; !s;)i = i.addHours(1), s = DayPilot.DateUtil.diff(i, e) / 6e4 % o === 0; break; case "Quarter": for (e = e.getDatePart(), i = e.addMonths(1), i = i.firstDayOfMonth(); i.getMonth() % 3;)i = i.addMonths(1); for (var s = DayPilot.DateUtil.diff(i, e) / 6e4 % o === 0; !s;)i = i.addHours(1), s = DayPilot.DateUtil.diff(i, e) / 6e4 % o === 0; break; case "Year": e = e.getDatePart(), i = e.addYears(1), i = i.firstDayOfYear(); for (var s = DayPilot.DateUtil.diff(i, e) / 6e4 % o === 0; !s;)i = i.addHours(1), s = DayPilot.DateUtil.diff(i, e) / 6e4 % o === 0; break; case "None": i = a; break; case "Cell": var l = this.pm(e); i = l.current ? l.current.end : l.past ? l.previous.end : l.next.start; break; default: throw n ? new DayPilot.Exception("Invalid scale value: " + t) : new DayPilot.Exception("Invalid groupBy value: " + t) }return i.getTime() > a.getTime() && (i = a), i }, this.pt = {}, this.pt.timeheadercol = "_timeheadercol", this.pt.timeheadercolInner = "_timeheadercol_inner", this.pt.resourcedivider = "_resourcedivider", this.pt.eventFloat = "_event_float", this.pt.eventFloatInner = "_event_float_inner", this.pt.event = "_event", this.pt.eventInner = "_event_inner", this.pt.eventBar = "_event_bar", this.pt.eventBarInner = "_event_bar_inner", this.pt.eventDelete = "_event_delete", this.pt.eventLine = "_event_line", this.pt.eventMovingSource = "_event_moving_source"; var q = this.pt; this.vt = function (e, t) { var n = this.nav.timeHeader, i = this.timeHeader[t][e], a = e === this.timeHeader[t].length - 1, r = t < this.timeHeader.length - 1, o = i.left, s = i.width, d = K.Gp(t), c = d.top, h = d.height, f = l(); f.style.position = "absolute", f.style.top = c + "px", f.style.left = o + "px", f.style.width = s + "px", f.style.height = h + "px", i.toolTip && (f.title = i.toolTip), f.setAttribute("aria-hidden", "true"), i.cssClass && u(f, i.cssClass), f.setAttribute("unselectable", "on"), f.style.KhtmlUserSelect = "none", f.style.MozUserSelect = "none", f.style.webkitUserSelect = "none", f.oncontextmenu = function () { return !1 }, f.cell = {}, f.cell.start = i.start, f.cell.end = i.end, f.cell.level = t, f.cell.th = i, f.onclick = this.Iq, f.oncontextmenu = this.Jq, DayPilot.rePassive(f, DayPilot.touch.start, function (e) { e.stopPropagation() }), f.style.overflow = "hidden", E.timeHeaderTextWrappingEnabled || (f.style.whiteSpace = "nowrap"); var v = l(); v.setAttribute("unselectable", "on"), v.innerHTML = E.Fa(i.text, i.innerHTML), i.backColor && (v.style.background = i.backColor), i.fontColor && (v.style.color = i.fontColor); var p = this.ca(q.timeheadercol), g = this.ca(q.timeheadercolInner); r && (p = this.ca("_timeheadergroup"), g = this.ca("_timeheadergroup_inner")), u(f, p), u(v, g), u(f, E.ca("_timeheader_cell")), u(v, E.ca("_timeheader_cell_inner")), a && u(f, E.ca("_timeheader_cell_last")), function () { if ("function" == typeof E.onBeforeTimeHeaderDomAdd || "function" == typeof E.onBeforeTimeHeaderDomRemove) { var e = {}; if (e.control = E, e.header = {}, e.header.start = i.start, e.header.end = i.end, e.header.level = t, e.element = null, f.domArgs = e, "function" == typeof E.onBeforeTimeHeaderDomAdd) { E.onBeforeTimeHeaderDomAdd(e); var n = e.element; if (n) { v.innerHTML = ""; var a = l(); v.appendChild(a), e.Be = a; if (m(n)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.X(n, a) } else a.appendChild(n) } } } }(), f.appendChild(v); var b = DayPilot.Areas.resolvePosition(i.areas, E, o, s); DayPilot.Areas.attach(f, i, { "areas": b }), this.ra.timeHeader[e + "_" + t] = f, this.elements.timeHeader.push(f), n.appendChild(f) }, this.yt = function () { var e = E.timeHeader, t = e.length - 1; if (t < 0) return null; for (var n = e[t], i = DayPilot.Date.now(), a = 0; a < n.length; a++) { var r = n[a]; if (r.start <= i && i <= r.end) return E.ra.timeHeader[a + "_" + t] } return null }, this.zt = null, this.wt = function () { var e = E.ca("_timeheader_cell_now"), t = E.zt, n = E.yt(); t !== n && (c(t, e), u(n, e), E.zt = n) }, this.At = null, this.Bt = function () { clearTimeout(E.At), E.At = setTimeout(function () { E.wt(), E.Bt() }, 5e3) }, this.Rn = function () { clearTimeout(E.At) }, this.Wm = function () { clearTimeout(E.At), E.showCurrentTimeHeader && (E.wt(), E.Bt()) }, this.Bm = function () { return E.Jk ? void F.Wq() : (E.em().forEach(function (e) { var t = e.getHeight() + e.marginBottom + e.marginTop; e.height !== t && (E.bn = !0), e.height = t }), void (E.bn && (E.ra.drawArea = null))) }, this.bl = function () { E.em().forEach(function (e) { if (!e.hidden) { var t = E.Xn(e.grid), n = t.divHeader; if (n) { var i = e.index; if (n.rows[i]) for (var a = 0; a < n.rows[i].cells.length; a++) { var r = n.rows[i].cells[a], o = t.rowlist[i].cells[a]; E.oq && r && (r.style.top = e.top + "px"); var s = e.height; o.rowspan > 1 && (s = o.totalHeight()), r && r.firstChild && parseInt(r.firstChild.style.height, 10) !== s && (r.firstChild.style.height = s + "px") } } } }), E.oq && E.nav.resScrollSpace && (E.nav.resScrollSpace.style.top = E.Nk + "px") }, this.Jg = function (e) { var t = this.separators[e]; t.location = t.location || t.Location, t.color = t.color || t.Color, t.layer = t.layer || t.Layer, t.width = t.width || t.Width, t.opacity = t.opacity || t.Opacity; var n = new DayPilot.Date(t.location), i = t.color, a = t.width ? t.width : 1, r = !!t.layer && "AboveEvents" === t.layer, o = t.opacity ? t.opacity : 100; if (!(n.getTime() < E.Ob().getTime() || n.getTime() >= E.Wd().getTime())) { var s = this.getPixels(n); if (!s.cut && !(s.left < 0 || s.left > E.Ll())) { var d = l(); d.style.width = a + "px", d.style.height = E.Nk + "px", d.style.position = "absolute", d.style.left = s.left - 1 + "px", d.style.top = "0px", d.style.backgroundColor = i, d.style.opacity = o / 100, d.style.filter = "alpha(opacity=" + o + ")", d.className = E.ca("_separator"), t.cssClass && (d.className += " " + t.cssClass), r ? this.divSeparatorsAbove.appendChild(d) : this.divSeparators.appendChild(d), this.elements.separators.push(d) } } }, this.Xf = function (e) { }, this.Cs = function (e) { if ("Disabled" === E.timeRangeDoubleClickHandling) return !1; i.Ct && (clearTimeout(i.Ct), i.Ct = null); if (E.um(e), e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0, E.mt(E.coords)) { var t = E.jn(E.ln); E.yc(t.start, t.end, t.resource) } else if (i._o = E.ot(), i._o) { i.Dt = E; var t = E.jn(i._o); E.yc(t.start, t.end, t.resource), E.ln = i._o } i._o = null }, this.zs = function (e) { if (!b.touch.start && !b.touch.active) { if (i.Ct, 1, E.Et(), E.db(), E.um(e), i.Ft) return !1; var t = g(e); if (E.Gt()) return !1; var n = E.mt(E.coords); if (t.middle || t.right && n) return !1; if (n) return !1; var a = t.left ? "left" : t.right ? "right" : t.middle ? "middle" : "unknown"; E.Ht = a; var r = e.ctrlKey, o = e.metaKey, s = e.shiftKey, l = r || o, d = {}; if (d.action = "None", "Disabled" !== J.vm() && s ? d.action = "RectangleSelect" : "Disabled" !== E.timeRangeSelectedHandling && (d.action = "TimeRangeSelect"), d.shift = s, d.ctrl = s, d.meta = o, d.originalEvent = e, d.button = a, d.preventDefault = function () { d.action = "None" }, "function" == typeof E.onGridMouseDown && E.onGridMouseDown(d), "None" === d.action) return "undefined" != typeof DayPilot.Menu && DayPilot.Menu.hide({ "calendar": E }), e.preventDefault(), e.stopPropagation(), !1; if ("RectangleSelect" === d.action) { var c = {}; return c.start = E.coords, c.calendar = E, i.Ft = c, !1 } E.allowMultiRange && !l && X.clear(); return !E.Mn(E.coords.y, E.coords.grid).element.isNewRow && (i._o = E.ot(), i._o && (i._o.ctrl = l, i.Dt = E), !1) } }, this.ot = function () { var e = {}, t = E.nm(E.coords.x).x, n = E.getDate(E.coords.x, !0); return e.start = { y: E.Mn(E.coords.y, E.coords.grid).i, x: t, "grid": E.coords.grid, "time": n }, e.end = { x: t, "time": n }, E.$n(E.Mn(E.coords.y, E.coords.grid).i, E.coords.grid) ? null : (e.calendar = E, E.mn(e), e) }, this.$p = function () { E.Lf(); var e = i.rp, t = i.$o; !function () { var n = E.It, a = { "start": e.start, "end": E.qj(e.end) }; e.original = a; var r = "left" === i.$o.dpBorder ? "start" : "end", o = e.original; if (!o || !n || n.start !== o.start || n.end !== o.end) { N.clear(), N.Lp(), n && (c(e, n.cssClass), e.firstChild.innerHTML = ""); var s = t.event.part.dayIndex, l = E.rowlist[s], d = {}; d.start = a.start, d.end = a.end, d.duration = new DayPilot.Duration(d.start, d.end), d.row = E.qn(l), d.e = t.event, d.allowed = !0, d.resizing = r, d.what = r, d.anchor = "end" === d.what ? a.start : a.end, d.left = {}, d.left.html = d.start.toString(E.eventResizingStartEndFormat, J.Lc()), d.left.enabled = E.eventResizingStartEndEnabled, d.left.space = 5, d.left.width = null, d.left.height = E.eventHeight, d.right = {}, d.right.html = d.end.toString(E.eventResizingStartEndFormat, J.Lc()), d.right.enabled = E.eventResizingStartEndEnabled, d.right.space = 5, d.right.width = null, d.right.height = E.eventHeight, d.cssClass = null, d.html = null, d.overlapping = d.row.events.forRange(d.start, d.end).filter(function (e) { return !E.xd(e, d.e) }).length > 0, d.shift = E.coords.shift, d.ctrl = E.coords.ctrl, d.meta = E.coords.meta, d.alt = E.coords.alt, d.multiresize = N.Jp(); var h = {}; h.event = t.event, h.start = d.start, h.end = d.end, d.multiresize.splice(0, 0, h), E.It = a, "function" == typeof E.onEventResizing && E.onEventResizing(d), N.list = y(d.multiresize, !0), N.list.splice(0, 1), N.Rp(), e.allowed = d.allowed, u(e, d.cssClass), d.html && (e.firstChild.innerHTML = d.html); var v = d.start, p = E.Vi(d.end); if (e.finalStart = v, e.finalEnd = p, "Days" === E.viewType) { var m = l.start.getTime() - E.Ob().getTime(); v = v.addTime(-m), p = p.addTime(-m) } var g = DayPilot.DateUtil.diff(v, p); g = f(g, 1); var b = (J.Lg(g), E.snapToGrid && E.snapToGridEventResizing), w = b ? E.getPixels(v).boxLeft : E.getPixels(v).left, x = b ? E.getPixels(p).boxRight : E.getPixels(p).left; e.style.left = w + "px", e.style.width = x - w + "px", e.left = w, e.width = x - w, E.bq(i.rp, d), E.cq(i.rp, d) } }() }, this.Bs = function (e) { if (i.Ft) return e.cancelBubble = !0, e.preventDefault(), i.og(e), !1; if (E.rm = {}, E.ln) { var t = g(e); if (t.left) { var n = E.ln; if (E.mt(E.coords)) { var a = function (e) { return function () { i.Ct = null; var t = E.jn(e); if (t) { var n = {}; n.start = t.start, n.end = t.end, n.resource = t.resource, n.preventDefault = function () { n.preventDefault.value = !0 }, "function" == typeof E.onTimeRangeClick && E.onTimeRangeClick(n), n.preventDefault.value || "function" == typeof E.onTimeRangeClicked && E.onTimeRangeClicked(n) } } }; "Disabled" != E.timeRangeClickHandling && ("Disabled" === E.timeRangeDoubleClickHandling ? a(n)() : (clearTimeout(i.Ct), i.Ct = setTimeout(a(n), E.doubleClickTimeout))) } } } var t = g(e); t.right && E.nt(e) }, this.nt = function (e) { if ("Disabled" !== E.timeRangeSelectedHandling && "Disabled" !== E.timeRangeRightClickHandling) { if (i._o || E.ln || !y(X.list).isEmpty()) { var t = E.Mn(E.coords.y, E.coords.grid); if (E.$n(t.i)) return void (i._o = null); var n = null, a = E.mt(E.coords); if (n = a ? E.jn(a) : E.jn(), !n) return void (i._o = null); var r = a && a.args; if (r && !r.ignoreDisabledCells && E.Nc(n.start, n.end, n.resource)) return i._o = null, void E.clearSelection(); n.end = E.qj(n.end); var o = {}; o.start = n.start, o.end = n.end, o.resource = n.resource, o.ctrl = e.ctrlKey, o.shift = e.shiftKey, o.meta = e.metaKey, o.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof E.onTimeRangeRightClick && (E.onTimeRangeRightClick(o), o.preventDefault.value) || ("ContextMenu" === E.timeRangeRightClickHandling && E.contextMenuSelection && E.contextMenuSelection.show(n), "function" == typeof E.onTimeRangeRightClicked && E.onTimeRangeRightClicked(o)) } } }, this.Gt = function () { return !!(i.$o || i.rm || i._o || i.aq) || !!E.rm.kt }, this.dragInProgress = function () { return E.Gt() }, this.um = function (e) { var t = DayPilot.mo3(E.wl, e); if (t = t || {}, t.grid = "main", E.vl.top.enabled()) { var n = E.vl.top, i = DayPilot.mo3(n.divCells, e); i && i.y > 0 && i.y <= n.height && (t = i, t.grid = "top") } if (E.vl.bottom.enabled()) { var a = E.vl.bottom, r = DayPilot.mo3(a.divCells, e); r && r.y > 0 && r.y <= a.height && (t = r, t.grid = "bottom") } t.stamp = t.grid + "_" + t.x + "_" + t.y, E.coords && E.coords.stamp === t.stamp || (E.coords = t) }, this.getCoords = function () { if (!E.coords) return null; var e = {}; e.x = E.coords.x, e.y = E.coords.y, e.grid = E.coords.grid; var t = E.Mn(e.y, e.grid).element; return e.row = t, e.time = E.getDate(e.x, !0), e.cell = E.cells.findByPixels(e.x, e.y, e.grid)[0], e.event = E.coords.insideEvent ? E.coords.insideEvent : null, e.eventOffset = null, e.event && (e.eventOffset = p(E.eventOffset, {}, ["x", "y"])), e }, this.xs = !0, this.fq = function (e) { if (!b.touch.active) { var t = DayPilot.mc(e); if (E.um(e), e.insideMainD = !0, E.xs = !0, window.event && window.event.srcElement && (window.event.srcElement.inside = !0), E.rm.kt) { DayPilot.distance(E.rm.Mf, t) > 2 && (p(E.rm, i), s().style.cursor = "move", E.rm = {}) } if (i.$o && i.sp.calendar === E) i.$o.event || (i.$o.event = i.sp), E.Jt(); else if (i.Vo) { var n = i.Vo.calendar, a = n !== E; a && n && i.Vo.calendar.bb(), i.Vo.part.external = a, E.Kt() } else if (i._o && i._o.calendar === E) i._o.moved = !0, E.Lt(); else if (_.source) { var r = _.source; M.Zi(r.coords, E.coords) } else i.Ft && (i.Ft.moved = !0, clearTimeout(V.Mt), V.Mt = setTimeout(function () { V.draw() }, 0)); "Disabled" !== E.crosshairType && E.Nt(), E.Ot(); var o = E.coords.insideEvent; if (E.cellBubble && E.coords && E.rowlist && E.rowlist.length > 0 && !o) { var l = E.nm(E.coords.x).x, d = E.Mn(E.coords.y, E.coords.grid).i; if (0 <= d && d < E.rowlist.length && 0 <= l && l < E.itline.length) { var c = {}; c.calendar = E, c.start = E.itline[l].start, c.end = E.itline[l].end, c.resource = E.rowlist[d].id, c.toJSON = function () { var e = {}; return e.start = this.start, e.end = this.end, e.resource = this.resource, e }; var u = E.coords.grid + "_" + l + "_" + d, h = E.ra.cells[u]; E.cellBubble.showCell(c, h) } } if (i.aq) { if (E.Et(), i.Pt && s().removeChild(i.Pt), i.Pt = null, !i.Xp && E.coords && E.rowlist.length > 0) { if (!i.Vo) { i.rm = i.aq.Qt || {}; var f = i.aq.Qt ? i.aq.Qt.event : null, v = f || i.aq.event; if (v) if (E !== v.calendar) { var n = v.calendar, m = v, g = p(v.data); v = new DayPilot.Event(g), v.calendar = n, v.part.duration = n.cp(m), v.part.external = !0 } else v.part.external = !1; else { var e = E.Rt(); v = new DayPilot.Event(e), v.calendar = E, v.calendar = null, v.part.duration = 1e3 * i.aq.duration, v.part.external = !0 } i.rm.event || (i.rm.event = v), i.Vo = v } i.Xp = E.Gb(i.Vo) } e.cancelBubble = !0 } var y = { x: E.coords.x, y: E.coords.y, "grid": E.coords.grid }; E.Qf(y) } }, this.Rt = function () { var e, t = E.itline[0].start, n = i.aq.Pf; if (n) e = p(n, {}), e.start = t, e.end = t.addSeconds(i.aq.duration); else { e = { "id": i.aq.id, "start": t, "end": t.addSeconds(i.aq.duration), "text": i.aq.text }; var a = i.aq.Of; if (a) { var r = ["duration", "element", "remove", "id", "text"]; for (var o in a) w(r, o) || (e[o] = a[o]) } } return e }, this.Qf = function (e) {
                var t = e.grid, n = i.rm || i.$o || i._o || i.Ft, a = "Always" === E.autoScroll, r = "Drag" === E.autoScroll && n, o = a || r, s = i.$o || i._o || "main" !== t; if (o) {
                    var l = E.nav.scroll; e.x -= l.scrollLeft, e.x += A.Cl, e.y -= l.scrollTop; var d = l.clientWidth, c = l.clientHeight, u = 30, h = e.x < u ? e.x : 0, f = d - e.x < u ? d - e.x : 0, v = E.vl.top.height, p = e.y - v, m = p < u && p > 0 ? p : 0, g = c - E.vl.bottom.height - E.vl.top.height, b = g - p < u ? c - e.y : 0, y = 0, w = 0, x = 50; h && (y = -50 * S(h, u)),
                        f && (y = x * S(f, u)), m && (w = -50 * S(m, u) / 2), b && (w = x * S(m, u) / 2), s && (w = 0), y || w ? E.St = setTimeout(function () { E.tg(y, w) }, 200) : (clearTimeout(E.St), E.db())
                }
            }, this.Lt = function () { var e = i._o, t = E.nm(E.coords.x).x, n = E.getDate(E.coords.x, !0); e.end = { x: t, "time": n }, E.mn(e) }, this.Jt = function () { i.rp || (i.rp = E.Gb(i.$o)), E.Zp() }, this.Kt = function () { if (i.Xp && i.Xp.calendar !== E && i.Xp.calendar && (i.Xp.calendar.bb(), i.Xp.calendar = null, x(i.Xp), i.Xp = null), !i.Xp) { u(i.rm, E.ca(q.eventMovingSource)); var e = i.Vo; i.Xp = E.Gb(e) } E.mp(), E.pp() }, this.Tt = {}; var V = this.Tt; V.start = function () { var e = {}; e.start = E.coords, e.calendar = E, i.Ft = e }, V.draw = function () { var e = i.Ft; if (e) { var t = i.Ft.start, n = E.coords; V.clear(); var a, r, o, s, l, d, c, u, f = { "x": e.x, "y": e.y, "width": e.width, "height": e.height }; if (function () { l = Math.min(t.x, n.x), c = Math.max(t.x, n.x), "Free" === J.vm() ? (d = Math.min(t.y, n.y), u = Math.max(t.y, n.y)) : "Row" === J.vm() && (d = t.y, u = t.y) }(), "Free" === J.vm()) a = l, r = d, o = c - l, s = u - d; else { if ("Row" !== J.vm()) throw new DayPilot.Exception("Invalid DayPilot.Scheduler.rectangleSelectMode value: " + E.rectangleSelectMode); var v = E.Mn(d).i, p = E.rowlist[v]; r = p.top, s = p.height; if (E.snapToGrid && E.snapToGridRectangleSelecting) { a = E.nm(l).cell.left; var m = E.nm(c).cell; o = m.left + m.width - a } else a = l, o = c - l } var g = h(E.divRectangle, a, r, o, s); if (g.style.boxSizing = "border-box", g.className = E.ca("_selectionrectangle"), e.x = a, e.y = r, e.width = o, e.height = s, !(e.x === f.x && e.y === f.y && e.width === f.width && e.height === f.height || "function" != typeof E.onRectangleEventSelecting && "function" != typeof E.onRectangleSelecting)) { var b = E.Mn(e.y).i, y = E.Mn(e.y + e.height).i, w = { "start": { "y": b }, "end": { "y": y } }, x = E.In(w), k = {}; k.events = T.Gl(e.x, e.y, e.width, e.height).map(function (e) { return e.event }), k.start = E.getDate(e.x, !0), k.end = E.getDate(e.x + e.width, !0), k.resources = x, k.visible = !0, "function" == typeof E.onRectangleEventSelecting && E.onRectangleEventSelecting(k), "function" == typeof E.onRectangleSelecting && E.onRectangleSelecting(k), k.visible || (g.style.display = "none") } } }, V.clear = function () { E.divRectangle.innerHTML = "", E.elements.rectangle = [] }, this.Ut = function () { if (!E.coords) return null; if (!E.Fs()) return null; if (!E.itline || 0 === E.itline.length) return null; var e = E.nm(E.coords.x).x, t = E.Mn(E.coords.y, E.coords.grid).element; if (!t) return null; var n = t.index; return E.cells.findXy(e, n, E.coords.grid)[0] }, this.Ot = function () { var e = this.Ut(); if (this.hover.cell) { if (this.hover.cell.x === e.x && this.hover.cell.y === e.y && this.hover.cell.grid === e.grid) return; this.ys() } this.hover.cell = e; var t = {}; t.cell = e, "function" == typeof this.onCellMouseOver && this.onCellMouseOver(t), "function" == typeof this.onCellMouseEnter && this.onCellMouseEnter(t) }, this.ys = function () { if (this.hover.cell) { var e = {}; e.cell = this.hover.cell, "function" == typeof this.onCellMouseOut && this.onCellMouseOut(e), "function" == typeof this.onCellMouseLeave && this.onCellMouseLeave(e), this.hover.cell = null } }, this.hover = {}, this.Nt = function () { var e = E.Vt(); if (e) { var t = E.hover.crosshair; t && t.x === e.x && t.y === e.y && t.grid === e.grid && t.thX === e.thX || (E.hover.crosshair = e, this.Kf()) } }, this.Vt = function () { if (!E.coords) return null; if (!E.Fs()) return null; if (!E.itline || 0 === E.itline.length) return null; var e = E.Mn(E.coords.y, E.coords.grid).element; if (!e) return null; var t = e.index, n = null, i = E.nm(E.coords.x); i && (n = i.x); var a = E.Wt(), r = null, o = E.zp(a, E.coords.x); return o && (r = o.x), { "x": n, "thX": r, "y": t, "grid": E.coords.grid } }, this.Et = function () { this.vl.top.divCrosshair.innerHTML = "", this.vl.main.divCrosshair.innerHTML = "", this.vl.bottom.divCrosshair.innerHTML = "", this.Xt = null, this.Yt = null }, this.cb = function () { if (this.Et(), E.hover.crosshair = null, this.Zt && this.Zt.parentNode && (this.Zt.parentNode.removeChild(this.Zt), this.Zt = null), this.$t) { for (var e = 0; e < this.$t.length; e++) { var t = this.$t[e]; t.parentNode && t.parentNode.removeChild(t) } this.$t = null } this.Mk = -1, this.Lk = -1, this._t = null }, this.Wt = function () { var e = this.timeHeader ? this.timeHeader.length - 1 : 1; return "number" == typeof E.crosshairTimeHeaderLevel && E.crosshairTimeHeaderLevel < e && E.crosshairTimeHeaderLevel >= 0 && (e = E.crosshairTimeHeaderLevel), e }, this.Kf = function () { function e(e, t) { var n = E.vl[e], i = n.height, a = t.left, r = E.Xt[e]; if (!r) { var r = l(); r.style.height = i + "px", r.style.position = "absolute", r.style.top = "0px", r.className = E.ca("_crosshair_vertical"), E.Xt[e] = r, n.divCrosshair.appendChild(r) } r.style.left = a + "px", r.style.width = t.width + "px" } if (E.coords && E.Fs()) { var t = E.Mn(E.coords.y, E.coords.grid).element; if (t) { var n = E.nm(E.coords.x).x, i = t.index, a = t.grid, r = E.Xn(a), o = ["top", "main", "bottom"], s = this.crosshairType; if (this.Xt || (this.Xt = {}), "Full" === s) { var d = this.itline[n]; o.forEach(function (t) { e(t, d) }); var c = t.top, u = t.height, h = E.Ll(), f = E.Yt; if (f && f.parentNode && E._t !== a && (f.parentNode.removeChild(f), f = null), !f) { var f = l(); f.style.width = h + "px", f.style.height = u + "px", f.style.position = "absolute", f.style.top = c + "px", f.style.left = "0px", f.className = E.ca("_crosshair_horizontal"), E.Yt = f, r.divCrosshair.appendChild(f) } f.style.top = c + "px", f.style.height = u + "px" } var v = E.Wt(), p = E.zp(v, E.coords.x); if (p && E.Mk !== p.x) { E.Zt && this.Zt.parentNode && (E.Zt.parentNode.removeChild(E.Zt), E.Zt = null); var u = K.Gp(v).height, f = l(); f.style.width = p.cell.width + "px", f.style.height = u + "px", f.style.left = "0px", f.style.top = "0px", f.style.position = "absolute", f.className = E.ca("_crosshair_top"), E.Zt = f; var m = this.divNorth, g = v; E.nav.timeHeader ? E.ra.timeHeader[p.x + "_" + g].appendChild(f) : m && m.firstChild.rows[g].cells[n] && m.firstChild.rows[g].cells[n].firstChild.appendChild(f) } if (E.Lk !== i || E._t !== a) { if (E.$t) { for (var b = 0; b < E.$t.length; b++) { var y = E.$t[b]; y.parentNode && y.parentNode.removeChild(y) } E.$t = null } this.rowHeaderCols ? this.rowHeaderCols.length : 1; if (E.$t = [], r.rowlist[i]) for (var b = 0; b < r.rowlist[i].cells.length; b++) { var w = r.rowlist[i].cells[b], x = w.refCell, u = t.height, k = i; x ? (u = x.row.split.totalHeight(), k = x.y) : w.rowspan > 1 && (u = w.totalHeight()); var C = r.divHeader.rows[k] && r.divHeader.rows[k].cells[b]; if (C) { var h = E.Ol(), f = l(); f.style.width = h + "px", f.style.height = u + "px", f.style.left = "0px", f.style.top = "0px", f.style.position = "absolute", f.className = E.ca("_crosshair_left"), E.$t.push(f), r.divHeader.rows[k].cells[b].firstChild.appendChild(f) } } } p && (E.Mk = p.x), E.Lk = i, E._t = a } } }, this.zp = function (e, t) { var n = E.timeHeader[e]; if (!n) return null; for (var i = 0; i < n.length; i++) { var a = n[i]; if (t >= a.left && t < a.left + a.width) { var r = {}; return r.cell = a, r.x = i, r } } return null }, this.au = function (e) { return E.zp(E.timeHeader.length - 1, e) }, this.As = function (e) { if (e.cancelBubble = !0, !E.allowDefaultContextMenu) return !1 }, this.mt = function (e) { function t(t) { if (!t || !t.start || !t.end) return !1; t = t.qt ? t.qt : t; var n = t.start.grid, i = E.xo(t.start.y, t.start.grid), a = 0; "main" === n && (a = E.vl.top.height); var r = t.start.time.getTime() < t.end.time.getTime(), o = r ? t.start.time : t.end.time, s = r ? t.end.time : t.start.time, l = E.getPixels(o).left, d = E.getPixels(s).left, c = i.top + a, u = i.bottom + a, h = e.x >= l && e.x <= d, f = e.y >= c && e.y <= u, v = e.grid === t.start.grid; return !!(h && f && v) && t } var n = E.ln; return n ? t(n) : y(X.list).isEmpty() ? void 0 : X.list.find(function (e) { return t(e) }) }, this.mn = function (e, t) { function n(e, t) { var n, i, a, r, c = e.end.time > e.start.time, u = e.start.y, h = e.start.time && e.end.time; if (o || !h) { var f = c ? e.start.x : e.end.x, v = c ? e.end.x : e.start.x, p = E.itline[f], m = E.itline[v]; n = p.left, i = m.left + m.width } else c ? (a = e.start.time, r = e.end.time) : (a = e.end.time, r = e.start.time), n = E.getPixels(a).left, i = E.getPixels(r).left; var g = i - n, b = E.elements.range2; if (!b) { b = l(), b.style.position = "absolute", b.setAttribute("unselectable", "on"); var y = l(); y.className = E.ca("_shadow_inner"), b.appendChild(y), s.divShadow.appendChild(b) } b.grid !== e.start.grid && (b.parentNode.removeChild(b), s.divShadow.appendChild(b)); var w = d[u]; return b.className = E.ca("_shadow"), b.firstChild.innerHTML = "", b.style.left = n + "px", b.style.top = w.top + "px", b.style.width = g + "px", b.style.height = w.height - 1 + "px", b.calendar = E, b.grid = e.start.grid, b.row = w, E.elements.range2 = b, function () { b.overlapping = !1; var i = d[u]; E.Sp(b, i, n, g, null); var a = c ? e.start.time : e.end.time, r = c ? e.end.time : e.start.time; t.ignoreDisabledCells || E.Tp(b, a, r, i.id) }(), b } var e = e || i._o; if (e && e.calendar === E) { i.Ao && i.Ao.blur(), t = t || {}; var a = t.justDraw, r = e.forceSnap, o = E.snapToGrid && E.snapToGridTimeRangeSelecting; r && (o = !0); var s = E.Xn(e.start.grid), d = s.rowlist; !function () { var t = e.end.time >= e.start.time, i = t ? e.start.x : e.end.x, r = t ? e.end.x : e.start.x, s = e.start.y, l = d[s]; if (l && !l.hidden) { var c = E.itline[i], h = E.itline[r], f = E.bu, v = c.start.addTime(l.data.offset), p = h.end.addTime(l.data.offset); if (o || (t ? (v = e.start.time, p = e.end.time) : (v = e.end.time, p = e.start.time)), a || !f || f.start.getTime() !== v.getTime() || f.rawend.getTime() !== p.getTime() || f.resource !== d[s].id) { var m = { "start": v, "end": E.qj(p), "rawend": p, "resource": d[s].id }, g = {}; g.anchor = t ? m.start : m.end, g.start = m.start, g.end = m.end, g.duration = new DayPilot.Duration(v, p), g.resource = d[s].id, g.row = E.qn(l), g.allowed = !0, g.control = E, g.ignoreDisabledCells = !1, g.left = {}, g.left.html = g.start.toString(E.timeRangeSelectingStartEndFormat, J.Lc()), g.left.enabled = E.timeRangeSelectingStartEndEnabled, g.left.space = 5, g.left.width = null, g.left.height = E.eventHeight, g.right = {}, g.right.html = g.end.toString(E.timeRangeSelectingStartEndFormat, J.Lc()), g.right.enabled = E.timeRangeSelectingStartEndEnabled, g.right.space = 5, g.right.width = null, g.right.height = E.eventHeight, g.overlapping = g.row.events.forRange(v, p).length > 0, g.html = null, g.cssClass = null, g.button = E.Ht, E.bu = m, "function" != typeof E.onTimeRangeSelecting || a || (E.onTimeRangeSelecting(g), g.resource = m.resource), g.end = E.Vi(g.end), e.args = g; var b = E.cu(e); E.kn(b, g.start, g.end); var y = n(b, g); g.html && (y.firstChild.innerHTML = g.html), g.cssClass && u(y, g.cssClass), E.bq(y, g), e.qt = b, e.disabled = !g.allowed, E.cq(y, g) } } }() } }, this.cu = function (e) { return { "start": { "x": e.start.x, "y": e.start.y, "time": e.start.time, "grid": e.start.grid }, "end": { "x": e.end.x, "time": e.end.time }, "disabled": e.disabled, "calendar": e.calendar, "args": e.args, "forceSnap": e.forceSnap } }, this.range = {}, this.range.all = function () { return E.multirange.get() }, this.multirange = {}, this.multirange.get = function () { return X.get(!0) }, this.multirange.add = function (e) { if (!e) throw new DayPilot.Exception("Range not specified"); if (!e.start || !e.end || !e.resource) throw new DayPilot.Exception("Invalid range specified"); if (y(X.list).isEmpty()) { var t = E.jn(); if (t) { var n = E.du(t.start, t.end, t.resource); E.eu.add(n) } } var n = E.du(e.start, e.end, e.resource); E.mn(n), E.eu.add(n) }, this.multirange.clear = function () { X.clear(), E.clearSelection(), E.bu = null }, this.eu = {}; var X = this.eu; this.eu.list = [], this.eu.drawLaterTimeout = null, this.eu.drawLater = function () { clearTimeout(E.eu.drawLaterTimeout), E.eu.drawLaterTimeout = setTimeout(function () { X.list.forEach(function (e) { E.elements.range2 = null, E.mn(e) }) }, 0) }, this.eu.clear = function () { x(y(X.list).map(function (e) { return e.div })), X.list = [] }, this.eu.add = function (e) { e.div = E.elements.range2, E.elements.range2 = null, E.eq(), X.list.push(e) }, this.eu.get = function (e) { var t = y(X.list).map(function (e) { return E.jn(e) }); if (e && t.isEmpty()) { var n = E.jn(); n && t.push(n) } return t }, this.eu.dispatch = function () { if (E.allowMultiRange && !i._o) { var e = y(X.list).last(); E.in(e) } }, this.fu = function (e) { if ("Disabled" === E.timeRangeSelectedHandling) return !1; if (!b.touch.active && !b.touch.start) { var t = g(e); if (!i._o && !i.Ft && !(E.ln && E.mt(E.coords) && (t.right || t.middle) || E.$n(E.Mn(E.coords.y).i))) { var n = {}, a = E.nm(E.coords.x).x; n.start = { y: E.Mn(E.coords.y).i, x: a, "grid": E.coords.grid }, n.end = { x: a }, n.calendar = E, E.ln = n, E.in(n) } } }, this.sm = {}, this.sm.Ab = null, this.sm.drawCells = null, this.sm.drawRows = null, this.sm.click = null, this.sm.resClick = [], this.sm.updateFloats = null, this.ml = function (e, t) { if (!E.xa) { t = t || {}, "undefined" == typeof DayPilot.Bubble || t.dontHideBubble || DayPilot.Bubble.hideActive(), E.Ea(); var n = E.nav.scroll; if (E.yp = n.scrollLeft, E.wp = n.scrollTop, E.Os = n.clientWidth, E.divTimeScroll && (E.divTimeScroll.scrollLeft = E.yp), E.vl.top.enabled() && (E.vl.top.div.scrollLeft = E.yp), E.vl.bottom.enabled() && (E.vl.bottom.div.scrollLeft = E.yp), DayPilot.browser.ios && i.ls ? a() : E.divResScroll.scrollTop = E.wp, A.gm() && E.wa && "Auto" != E.cellWidthSpec && !E.sl) if (A.s) a(); else { if (E.nav.scroll.scrollLeft < E.infiniteScrollingMargin) return A.s = !0, E.nav.scroll.style.overflowX = "hidden", void setTimeout(function () { A._l(-E.infiniteScrollingStepDays) }, 100); if (E.nav.scroll.scrollWidth - (E.nav.scroll.scrollLeft + E.nav.scroll.clientWidth) < E.infiniteScrollingMargin) return A.s = !0, E.nav.scroll.style.overflowX = "hidden", void setTimeout(function () { A._l(E.infiniteScrollingStepDays) }, 100) } if (E.navigatorBackSync && !function () { var e = DayPilot.Util.evalVariable(E.navigatorBackSync), t = E.getViewPort().start; e.select(t, { "dontNotify": !0, "dontFocus": !0 }) }(), E.progressiveRowRendering && (E.sm.drawRows && (clearTimeout(E.sm.drawRows), E.sm.drawRows = null), E.scrollDelayRows > 0 ? E.sm.drawRows = setTimeout(function () { E.Km() }, E.scrollDelayRows) : E.Km()), E.sm.drawCells && (clearTimeout(E.sm.drawCells), E.sm.drawCells = null), E.scrollDelayCells > 0) E.sm.drawCells = setTimeout(E.gu(), E.scrollDelayCells); else { E.gu()() } if (E.dynamicLoading) return E.Nj(), void E.hu(); E.sm.Ab && (clearTimeout(E.sm.Ab), E.sm.Ab = null), E.scrollDelayEvents > 0 ? E.sm.Ab = setTimeout(E.iu(), E.scrollDelayEvents) : E.Ab(), E.sm.updateFloats && (clearTimeout(E.sm.updateFloats), E.sm.updateFloats = null), E.scrollDelayFloats > 0 ? E.sm.updateFloats = setTimeout(function () { E.kl() }, E.scrollDelayFloats) : E.kl(), E.onScrollCalled = !0 } }, this.gu = function () { return function () { E && (E.Nj(), E.gl()) } }, this.iu = function () { return function () { E && (E.$s() ? window.setTimeout(function () { E.Xs(), window.setTimeout(function () { E.Ab(!0) }, 50) }, 50) : E.El()) } }, this.Ea = function () { E.ra.eventHeight = null, E.ra.drawArea = null }, this.show = function () { E.visible = !0, E.Pk = !0, E.nav.top.style.display = "", E.D(), E.Cb(), E.Ho(), E.ml() }, this.hide = function () { E.visible = !1, E.Pk = !1, E.nav.top.style.display = "none" }, this.hu = function () { var e = E.nav.scroll; E.yp = e.scrollLeft, E.wp = e.scrollTop, E.Os = e.clientWidth, E.divTimeScroll.scrollLeft = E.yp, E.divResScroll.scrollTop = E.wp, E.refreshTimeout && window.clearTimeout(E.refreshTimeout); var t = E.scrollDelayDynamic; E.ju || (E.refreshTimeout = window.setTimeout(E.ku(e.scrollLeft, e.scrollTop), t)), E.kl() }, this.Jo = function (e) { if (!E.events.list) return null; for (var t = 0; t < this.events.list.length; t++) { var n = this.events.list[t]; if (E.xd(n, e)) { var i = {}; return i.ex = n, i.index = t, i.modified = !E.lu(e, n), i } } return null }, this.lu = function (e, t) { for (var n in e) if (("object" != typeof e[n] || e[n] instanceof DayPilot.Date) && e[n] !== t[n]) return !1; for (var n in t) if ("object" != typeof t[n] && e[n] !== t[n]) return !1; return !0 }, this.ju = !1, this.il = function (e, t, n) { E.ju = !0; var i = n && n.clearEvents, a = n && n.remove, r = n && n.dontForceCellRendering, o = []; if (E.events.list || (E.events.list = []), i) E.ob(e); else { var s = []; y(a).forEach(function (e) { var t = y(E.events.list).find(function (t) { return t.id === e }); t && s.push(t) }), s.forEach(function (e) { var t = E.events.ym(e); o = o.concat(t), DayPilot.rfa(E.events.list, e) }); for (var l = [], d = 0; d < e.length; d++) { var c = e[d]; l[d] = E.Jo(c) } for (var d = 0; d < e.length; d++) { var c = e[d], u = l[d], h = u && u.modified, f = !u; if (h) { this.events.list[u.index] = c; var v = E.events.ym(u.ex); o = o.concat(v) } else f && this.events.list.push(c); (h || f) && (o = o.concat(E.events.zm(c))) } E.Am(o), E.Bm() } E.al(), E.wb(); if (i || r) { E.Ta(); var p = E.bn || !E.beforeCellRenderCaching; p && E.cl(), E.bl(), p ? E.gl() : E.Ho(), E.Ab(), t && t() } else E.Cm(o, !1, function () { t && t(), E.Xs(), E.Ab() }), E.Ho(); setTimeout(function () { E.ju = !1 }, 0) }, this.ku = function (e, t) { return E.ia() ? function () { E.scrollX = e, E.scrollY = t, E.Ka("Scroll") } : function () { if ("function" == typeof E.onScroll) { var e = function (e) { var t = function () { if (E.Fb() && "function" == typeof E.onAfterRender) { var e = {}; e.isCallBack = !1, e.isScroll = !0, e.data = null, E.onAfterRender(e) } }; E.il(e.events, t, e) }, t = {}; t.viewport = E.getViewPort(), t.async = !0, t.events = [], t.remove = [], t.clearEvents = !0, t.dontForceCellRendering = !1, t.loaded = function () { this.async && e(t) }, E.onScroll(t), t.async || e(t) } } }, this.mu = function () { var e = this.hd(), t = e.xStart, n = e.xEnd - e.xStart, i = e.yStart, a = e.yEnd - e.yStart; this.cellProperties || (this.cellProperties = {}); for (var r = E.vl.top, o = E.vl.bottom, s = 0; s <= n; s++) { for (var l = t + s, d = 0; d < a; d++) { var c = i + d; this.rowlist[c].hidden || this.Oe(l, c) } if (this.nu(l), r.enabled()) { for (var c = 0; c < r.rowlist.length; c++)this.Oe(l, c, "top"); this.nu(l, "top") } if (o.enabled()) { for (var c = 0; c < o.rowlist.length; c++)this.Oe(l, c, "bottom"); this.nu(l, "bottom") } } for (var u = this.iq(), c = u.start; c < u.end; c++)this.rowlist[c].hidden || this.ou(c); if (r.enabled()) for (var c = 0; c < r.rowlist.length; c++)r.rowlist[c].hidden || this.ou(c, "top"); if (o.enabled()) for (var c = 0; c < o.rowlist.length; c++)o.rowlist[c].hidden || this.ou(c, "bottom") }, this.gl = function () { if (!E.xa) { var e = E.em(); if (e && e.length > 0) { if (this.cellSweeping) { var t = this.cellSweepingCacheSize; this.Zs(t) } G.Bo(), this.mu(), this.qu(), G.Cn({ "dontFocus": !0 }) } this.bn = !1 } }, this.qu = function () { for (var e = this.hd(), t = E.vl.top, n = E.vl.bottom, i = e.xStart; i < e.xEnd; i++) { i < this.itline.length - 1 && this.itline[i + 1].breakBefore && (this.ru(i), t.enabled() && this.ru(i, "top"), n.enabled() && this.ru(i, "bottom")) } }, this.ru = function (e, t) { t = t || "main"; var n = E.vl[t], i = n.divBreaks, a = "main" === t, r = a ? E.Nk : n.height, o = t + "_x_" + e; if (!this.ra.breaks[o]) { var s = {}; if ("function" == typeof E.onBeforeGridLineRender) { var d = E.itline[e], c = E.itline[e + 1]; if (s.start = d && d.end, s.end = c && c.start, s.hidden = !1, s.cssClass = null, s.type = "VerticalBreak", s.grid = t, s.color = null, E.onBeforeGridLineRender(s), s.hidden) return } var u = E.itline[e + 1].left - 1, h = l(); h.style.left = u + "px", h.style.top = "0px", h.style.width = "1px", h.style.height = r + "px", h.style.fontSize = "1px", h.style.lineHeight = "1px", h.style.overflow = "hidden", h.style.position = "absolute", h.setAttribute("unselectable", "on"), h.className = this.ca("_matrix_vertical_break"), s.cssClass && (h.className += " " + s.cssClass), s.color && (h.style.backgroundColor = s.color), i.appendChild(h), this.elements.breaks.push(h), this.ra.breaks[o] = h } }, this.hd = function () { if (E.ra.drawArea) return E.ra.drawArea; if (!this.nav.scroll) return null; var e = E.wp, t = {}, n = null != this.dynamicEventRenderingMarginX ? this.dynamicEventRenderingMarginX : this.dynamicEventRenderingMargin, i = null != this.dynamicEventRenderingMarginY ? this.dynamicEventRenderingMarginY : this.dynamicEventRenderingMargin, a = E.yp - n - A.Cl, r = a + E.Os + 2 * n, o = 0, s = 0; if (E.itline && E.itline.length > 0) { o = E.nm(a).x, s = E.nm(r, !0).x; var l = this.xp(); s = Math.min(s, l), o = f(o, 0) } var d = e - i, c = e + this.nav.scroll.offsetHeight + 2 * i, u = this.Mn(d).i, h = this.Mn(c).i; h < this.rowlist.length && h++, t.xStart = o, t.xEnd = s, t.yStart = u, t.yEnd = h; var v = E.nav.scroll; return 0 === v.clientWidth && (v = E.divTimeScroll), t.pixels = {}, t.pixels.left = v.scrollLeft - A.Cl, t.pixels.right = v.scrollLeft - A.Cl + v.clientWidth, t.pixels.top = v.scrollTop, t.pixels.bottom = v.scrollTop + v.clientHeight, t.pixels.width = v.scrollWidth, t.sw = DayPilot.sw(E.nav.scroll), E.ra.drawArea = t, t }, this.Ll = function () { var e = 0, t = this.itline[this.itline.length - 1]; return e = t ? t.left + t.width : 0, (e < 0 || isNaN(e)) && (e = 0), e }, this.ou = function (e, t) { t = t || "main"; var n = E.vl[t], i = n.rowlist, a = n.divLines, r = t + "_y_" + e; if (!this.ra.Rk[r]) { var o = i[e], s = {}; if ("function" != typeof E.onBeforeGridLineRender || (s.row = E.qn(o), s.hidden = !1, s.cssClass = null, s.type = "HorizontalLine", s.color = null, E.onBeforeGridLineRender(s), !s.hidden)) { var d = "number" == typeof o.forcedHeight ? o.forcedHeight : o.height, c = o.top + d - 1, u = this.Ll(), h = l(), f = h.style; f.left = "0px", f.top = c + "px", f.width = u + "px", f.height = "1px", f.fontSize = "1px", f.lineHeight = "1px", f.overflow = "hidden", f.position = "absolute", h.setAttribute("unselectable", "on"), h.className = this.ca("_matrix_horizontal_line"), s.cssClass && (h.className += " " + s.cssClass), s.color && (f.backgroundColor = s.color), a.appendChild(h), this.ra.Rk[r] = h } } }, this.nu = function (e, t) { var n = this.itline[e]; if (n) { t = t || "main"; var i = E.vl[t], a = i.divLines, r = "main" === t, o = r ? E.Nk : i.height, s = t + "_x_" + e; if (!this.ra.Qk[s]) { var d = {}; if ("function" != typeof E.onBeforeGridLineRender || (d.start = n.start, d.end = n.end, d.hidden = !1, d.cssClass = null, d.type = "VerticalLine", d.color = null, E.onBeforeGridLineRender(d), !d.hidden)) { var c = n.left + n.width - 1, u = l(), h = u.style; h.left = c + "px", h.top = "0px", h.width = "1px", h.height = o + "px", h.fontSize = "1px", h.lineHeight = "1px", h.overflow = "hidden", h.position = "absolute", u.setAttribute("unselectable", "on"), u.className = this.ca("_matrix_vertical_line"), d.cssClass && (u.className += " " + d.cssClass), d.color && (h.backgroundColor = d.color), a.appendChild(u), this.elements.linesVertical.push(u), this.ra.Qk[s] = u } } } }, this.np = function (e, t) { function n() { var t = E.su(e, i.expanded, !1); if (!a) for (var n = 0; n < t.length; n++) { var r = t[n]; E.cn(r) } E.Nq(), E.wb(), E.Nj(); var o = E.qn(i, e); a ? E.Bn(o) : E.An(o) } E.rl.No && (E.rl.skip = !0); var i = this.rowlist[e], a = !i.expanded; if (i.expanded = a, i.resource && (i.resource.expanded = a), t = t || {}, E.Xk({ "includeHidden": !0 }), E.treeAnimation && !t.notAnimated) { var r = this.su(e, i.expanded, !0); E.Mq(r, a ? "show" : "hide", function () { n() }) } else n() }, this.Nq = function () { E.al(), E.Yk(), E.Zk(), E.wb(), E.Ea(), E.en(), M.Gm(), E.cl(), E.gl(), E.Km(), E.Ab(), E.Ea() }, this.Hq = function (e) { var t = {}; if (t.index = e, "function" == typeof this.onLoadNode) { var n = {}, i = this.rowlist[e].resource; n.resource = i, n.async = !1, n.loaded = function () { this.async && (i.dynamicChildren = !1, i.expanded = !0, E.update()) }, this.onLoadNode(n), n.async || (i.dynamicChildren = !1, i.expanded = !0, this.update()) } else this.Ka("LoadNode", t) }, this.su = function (e, t, n) { var i = this.rowlist[e], a = []; if (null === i.children || 0 === i.children.length) return a; for (var r = 0; r < i.children.length; r++) { var o = i.children[r], s = this.rowlist[o], l = t && i.expanded && !s.Or; t && s.hidden && (s.forcedHeight = 0), n && !t || (s.hidden = !l), n || delete s.forcedHeight, t === l && a.push(o); var d = this.su(o, t && !s.hidden); d.length > 0 && (a = a.concat(d)) } return a }, this.tg = function (e, t) { this.db(), this.ug(e, t) }, this.vg = function (e) { if (!e) return !1; var t = this.nav.scroll, n = t.scrollWidth, i = t.scrollLeft, a = t.clientWidth, r = i + a; return !(e < 0 && i <= 0) && (!(e > 0 && r >= n) && (t.scrollLeft += e, E.coords.x += e, E.wg(), !0)) }, this.xg = function (e) { if (!e) return !1; var t = this.nav.scroll, n = t.scrollHeight, i = t.scrollTop, a = t.clientHeight, r = i + a; return !(e < 0 && i <= 0) && (!(e > 0 && r >= n) && (t.scrollTop += e, E.coords.y += e, E.wg(), !0)) }, this.wg = function () { i.$o && i.$o.event.calendar === E ? E.Jt() : i.rm && (i.Vo.calendar === E || i.Vo.calendar && i.Vo.calendar.dragOutAllowed) ? (i.rm.event || (i.rm.event = i.Vo), E.Kt()) : i._o && i._o.calendar === E && E.Lt() }, this.ug = function (e, t) { if (!E.tt) { if (!(this.vg(e) || this.xg(t))) return } var n = function (e, t) { return function () { E.ug(e, t) } }; this.yg = window.setTimeout(n(e, t), 100) }, this.db = function () { E.yg && (window.clearTimeout(E.yg), E.yg = null) }, this.al = function () { E.vl.top.enabled() && (E.vl.top.height = E.tu(E.vl.top.rowlist, 0)), E.vl.bottom.enabled() && (E.vl.bottom.height = E.tu(E.vl.bottom.rowlist, 0)), E.Nk = E.tu(E.rowlist, E.vl.top.height) }, this.tu = function (e, t) { for (var n = 0, i = t || 0, t = t || 0, a = 0; a < e.length; a++) { var r = e[a]; r.hidden || (r.top = t, r.displayY = n, t += "number" == typeof r.forcedHeight ? r.forcedHeight : r.height, n += 1), r.absTop = i, i += r.height } return t }, this.cl = function () { var e = "function" == typeof E.onBeforeRowHeaderDomAdd && E.Y.reactDOM; (DayPilot.browser.ie || e) && E.uu(), E.elements.cells = [], E.elements.breaks = [], E.ra.cells = [], E.ra.breaks = [], E.divBreaks.innerHTML = "", E.vl.top.divBreaks.innerHTML = "", E.vl.bottom.divBreaks.innerHTML = "", E.divCells.innerHTML = "", E.vl.top.divCells.innerHTML = "", E.vl.bottom.divCells.innerHTML = "", E.tq() }, this.tq = function () { E.divLines.innerHTML = "", E.vl.top.divLines.innerHTML = "", E.vl.bottom.divLines.innerHTML = "", E.ra.Qk = {}, E.ra.Rk = {}, E.elements.linesVertical = [] }, this.uu = function (e) { var t = y(); for (var n in E.ra.cells) t.push(E.ra.cells[n]); t.forEach(function (e) { E.Oo(e) }) }, this.gn = function (e, t) { t = t || "main"; var n = y(); for (var i in E.ra.cells) n.push(E.ra.cells[i]); n.filter(function (n) { return n && n.coords && n.coords.y === e && n.coords.grid === t }).forEach(function (e) { E.Oo(e) }) }, this.vu = 0, this.wu = y(["html", "cssClass", "backColor", "backImage", "backRepeat", "areas", "disabled", "fontColor", "text"]), this.xu = E.wu.add("business"), this.Oe = function (e, t, n) { if (this.wa) { var i = E.tm(e); if (i) { n = n || "main"; var a = this.vl[n], r = a.rowlist, o = a.divCells, s = "main" === n, d = n + "_" + e + "_" + t; if (!this.ra.cells[d]) { var c = this.Qo(e, t, n); if (E.Ep(e, t, n), !this.drawBlankCells) { var h = !1; if (s && this.jp(t) ? h = !1 : this.yu(c, E.wu) || (h = !0), h) return } var f = l(); f.style.left = i.left + "px", f.style.top = r[t].top + "px", f.style.width = i.width + "px", f.style.height = r[t].height + "px", f.style.position = "absolute", f.setAttribute("unselectable", "on"), f.className = this.ca("_cell"), f.coords = {}, f.coords.x = e, f.coords.y = t, f.coords.grid = n, s && E.jp(t) && u(f, this.ca("_cellparent")), z.ra[t] && u(f, this.ca("_cell_selected")); var v = E.cells.findXy(e, t, n)[0]; if (c) { c.cssClass && u(f, c.cssClass), f.innerHTML = E.Fa(c.text, c.html), c.backImage && (f.style.backgroundImage = 'url("' + c.backImage + '")'), c.backRepeat && (f.style.backgroundRepeat = c.backRepeat), c.business && E.cellsMarkBusiness && u(f, E.ca("_cell_business")), c.disabled && u(f, E.ca("_cell_disabled")), c.backColor && (f.style.backgroundColor = c.backColor), c.fontColor && (f.style.color = c.fontColor); var g = DayPilot.Areas.resolvePosition(c.areas, E, i.left, i.width); DayPilot.Areas.attach(f, v, { "areas": g }) } if (function () { if ("function" == typeof E.onBeforeCellDomAdd || "function" == typeof E.onBeforeCellDomRemove) { var e = {}; if (e.control = E, e.cell = v, e.element = null, f.domArgs = e, "function" == typeof E.onBeforeCellDomAdd && E.onBeforeCellDomAdd(e), e.element) { var t = f; if (t) { e.Be = t; if (m(e.element)) { if (!E.Y.reactDOM) throw new DayPilot.Exception("Can't reach ReactDOM"); E.Y.X(e.element, t) } else t.appendChild(e.element) } } } }(), o.appendChild(f), this.elements.cells.push(f), this.ra.cells[d] = f, "function" == typeof E.onAfterCellRender) { var b = {}; b.cell = p(v, {}, ["x", "y", "displayY", "start", "end", "resource", "grid"]), b.div = f, E.onAfterCellRender(b) } } } } }, this.hm = {}, this.Ho = function () { E.lr(), E.zu().forEach(function (e) { E.gn(e.y, e.grid) }), E.gl() }, this.lr = function () { function e(e) { E.vl[e].rowlist.forEach(function (t, n) { t.isNewRow || t.resource.cellsAutoUpdated && E.itline.forEach(function (t, i) { var a = e + "_" + i + "_" + n; delete E.hm[a] }) }) } e("main"), e("top"), e("bottom") }, this.zu = function () { function e(e, n, r) { for (var o = 0; o < r; o++)for (var s = n + o, l = E.vl[e].rowlist[s], d = 0; d <= a; d++) { var c = i + d; if (!l.hidden && !E.hm[e + "_" + c + "_" + s]) { t.push({ "grid": e, "y": s }); break } } } var t = y(), n = this.hd(), i = n.xStart, a = n.xEnd - n.xStart; return e("main", n.yStart, n.yEnd - n.yStart), e("top", 0, E.vl.top.rowlist.length), e("bottom", 0, E.vl.bottom.rowlist.length), t }, this.Ep = function (e, t, n) { if ("function" == typeof this.onBeforeCellRender) { n = n || "main"; var i = n + "_" + e + "_" + t; if (E.beforeCellRenderCaching && E.hm[i]) return; E.hm[i] = !0; var a = E.tm(e); if (!a) return; var r = E.cells.findXy(e, t, n)[0], o = {}; return o.cell = r, o.control = E, o.getPixels = function (e) { var e = new DayPilot.Date(e); return E.getPixels(e).left - a.left }, this.onBeforeCellRender(o), p(o.cell, o.cell.properties, E.xu), o.cell.properties.disabled && (E.hm.dq = !0), o } }, this.yu = function (e, t) { if (t) { for (var n = 0; n < t.length; n++)if (!v(e[t[n]])) return !0 } else for (var i in e) if (!v(e[i])) return !0; return !1 }, this.clearSelection = function () { this.jl(), X.clear() }, this.cleanSelection = this.clearSelection, this.du = function (e, t, n) { e = new DayPilot.Date(e), t = new DayPilot.Date(t); var i = E.zl(n), a = E.pm(e), r = a.current || a.next; if (!r) throw new DayPilot.Exception("Time range selection 'start' out of timeline"); var o = E.pm(new DayPilot.Date(t).addMilliseconds(-1)), s = o.current || o.previous; if (!s) throw new DayPilot.Exception("Time range selection 'end' out of timeline"); var l = {}; return l.start = { y: i.index, x: k(E.itline, r), "time": e, "grid": i.grid }, l.end = { x: k(E.itline, s), "time": t }, l.calendar = this, l }, this.selectTimeRange = function (e, t, n, i) { var a = E.du(e, t, n); E.mn(a), i || setTimeout(function () { E.in(a) }, 0) }, this.pc = function () { var e = i.Xp && i.Xp.source; e && c(e, E.ca(E.pt.eventMovingSource)), x(i.Xp), i.Xp = null, E.eq(), E.Vp.clear(), b.movingLink && (b.movingLink.clear(), b.movingLink = null) }, this.jl = function () { E.divShadow && (E.divShadow.innerHTML = ""), E.vl.top.divShadow && (E.vl.top.divShadow.innerHTML = ""), E.vl.bottom.divShadow && (E.vl.bottom.divShadow.innerHTML = ""), E.elements.range = [], E.elements.range2 = null, E.eq(), E.ln = null, E.bu = null }; var G = {}; G.uk = null, G.Co = !1, G.Au = function (e) { if (!e) return null; var t = {}; if ("event" === e.type) t.e = e.event; else if ("cell" === e.type) { var n = G.Bu(e.x, e.y); t.cell = {}, t.cell.start = n.thc.start, t.cell.end = n.thc.end, t.cell.resource = n.row.id } return t }, G.Cn = function (e) { if (!i.Ao && !G.Co) { e = e || {}; var t = e.dontFocus, n = G.uk; if (n) { var a = n.x, r = n.y; if ("cell" === n.type) { var o = G.Bu(a, r), s = o.row, l = G.Cu(a, r); l && u(l, E.ca("_cell_focus")), "top" === n.line && s.marginTop && u(l, E.ca("_cell_focus_top")), "bottom" === n.line && s.marginBottom && u(l, E.ca("_cell_focus_bottom")) } else { var l = E.Pg(n.event); l && u(l, E.ca("_event_focus")) } if (!t) { var d = E.Nn(); if (d.start.x >= a) { var c = E.itline[a].start; E.scrollTo(c) } else if (d.end.x <= a) { var h = E.itline[a].end; E.scrollTo(h, !1, "right") } if (d.start.y >= r) E.nav.scroll.scrollTop = E.rowlist[r].top - E.vl.top.height; else if (d.end.y <= r) { var s = E.rowlist[r], f = s.top + s.height; E.nav.scroll.scrollTop = f - E.nav.scroll.clientHeight + E.vl.bottom.height } } } } }, G.Bo = function () { var e = G.uk; if (e) if ("cell" === e.type) { var t = G.Cu(G.uk.x, G.uk.y); t && (c(t, E.ca("_cell_focus")), c(t, E.ca("_cell_focus_top")), c(t, E.ca("_cell_focus_bottom"))) } else { var t = E.Pg(e.event); t && c(t, E.ca("_event_focus")) } }, G.Bu = function (e, t) { var n = {}, i = E.rowlist[t], a = E.itline[e], r = [], o = i.lines.map(function (e) { var t = e.filter(function (e) { return d(e.part.start, e.part.end, a.start, a.end) }); return r = r.concat(t), t }); return n.lines = o, n.thc = a, n.row = i, n.events = r, n }, G.Ym = function () { var e = G.uk; e && (G.Bo(), G.uk = G.Du(e.x, e.y, e.pixels, e.line), G.Cn({ "dontFocus": !0 })) }, G.Du = function (e, t, n, i) { var a = {}; n = n || E.itline[e].left, i = v(i) ? "top" : i; var r = G.Bu(e, t), o = r.lines, s = r.row, l = r.events, c = s.marginTop || s.marginBottom, u = !1, h = l.length > 0, f = i, p = null, m = null; if (h) if (s.marginTop && "top" === i) u = !0, f = "top"; else if (s.marginBottom && "bottom" === i) u = !0, f = "bottom"; else { if ("top" === i) if (s.marginBottom) { var g = r.lines.find(function (e) { return e.find(function (e) { return e.part.left <= n && n <= e.part.right }) }); if (g) f = r.lines.indexOf(g); else { var b = r.lines.find(function (e) { return e.find(function (e) { return d(e.part.left, e.part.right, r.thc.left, r.thc.left + r.thc.right) }) }); b ? (f = r.lines.indexOf(b), m = b[0]) : f = "bottom" } } else f = s.marginTop ? "top" : 0; else if ("bottom" === i) if (c) { var g = r.lines.slice().reverse().find(function (e) { return e.find(function (e) { return e.part.left <= n && n <= e.part.right }) }); f = r.lines.indexOf(g), f === -1 && (f = G.Eu(i, s)) } else f = o.length - 1; else f = i; var y = o[f]; m || (m = y && y.find(function (e) { return e.part.left <= n && n <= e.part.right })), m || (u = !0, f = G.Eu(f, s)), p = m } else u = !0, f = c ? G.Eu(i, s) : 0; return a.x = e, a.y = t, u ? (a.type = "cell", a.pixels = n, a.line = f, a) : (a.type = "event", a.event = p, a.pixels = p.part.left, a.x = E.nm(p.part.left).x, a.line = f, a) }, G.Fu = function (e) {
                var t = {}, n = G.uk, i = E.rowlist[n.y], a = i.lines[n.line], r = G.Bu(n.x, n.y), o = i.marginTop || i.marginBottom; if ("right" === e) { if ("event" === n.type) { var s = n.event.part.end, l = n.event.part.right, c = E.pm(s), u = c.i, h = c.current.left + c.current.width, f = a.indexOf(n.event) + 1, v = a[f], p = r.lines[n.line], m = p[p.indexOf(n.event) + 1]; if (v && v.part.left === l) return t.x = u + 1, t.y = n.y, t.type = "event", t.line = n.line, t.pixels = v.part.left, t.event = v, t; if (m && o) return t.x = u, t.y = n.y, t.type = "event", t.line = n.line, t.pixels = m.part.left, t.event = m, t; if (h === l) { var g = G.Gu(u); return g === u ? n : (t.x = u + 1, t.y = n.y, t.type = "cell", t.pixels = E.itline[t.x].left, t.line = n.line, i.marginTop ? t.line = "top" : i.marginBottom && (t.line = "bottom"), t) } return t.x = u, t.y = n.y, t.type = "cell", t.line = n.line, t.pixels = n.event.part.right, o && (t.line = G.Eu(n.line, i)), t } var r = G.Bu(n.x, n.y), a = r.lines[n.line], v = a && a.find(function (e) { return e.part.left > n.pixels }); if (v) return t.x = n.x, t.y = n.y, t.type = "event", t.event = v, t.pixels = v.part.left, t.line = n.line, t; var g = G.Gu(n.x); return g === n.x ? n : G.Du(n.x + 1, n.y, null, n.line) } if ("left" === e) {
                    var b = n.x; if ("event" === n.type) { b = E.nm(n.event.part.left).x; var c = E.itline[b]; if (n.event.part.left !== c.left) { var f = a.indexOf(n.event) - 1, v = a[f]; return v && v.part.right === n.event.part.left ? (c = E.nm(v.part.right, !0), t.x = c.x, t.y = n.y, t.type = "event", t.line = n.line, t.pixels = v.part.right, t.event = v, t) : (c = E.nm(n.event.part.left), t.x = c.x, t.y = n.y, t.type = "cell", t.line = n.line, t.pixels = n.event.part.left, o && (t.line = G.Eu(n.line, i)), t) } t = G.Du(b - 1, n.y, c.right, n.line) } else {
                        var r = G.Bu(n.x, n.y), a = r.lines[n.line], v = a && a.slice().reverse().find(function (e) { return e.part.right < n.pixels }); if (v) return t.x = n.x, t.y = n.y, t.type = "event", t.event = v, t.pixels = v.part.right, t.line = n.line, t; var g = G.Hu(n.x); if (g === n.x) return n; var c = E.itline[b - 1], h = c.left + c.width;
                        t = G.Du(b - 1, n.y, h, n.line)
                    } return t
                } if ("down" === e) { var r = G.Bu(n.x, n.y), y = r.lines.find(function (e) { return e.find(function (e) { return e.part.left <= n.pixels && n.pixels <= e.part.right }) }); if ("top" === n.line && i.marginTop) { if (y) { var w = r.lines.indexOf(y); return t = G.Du(n.x, n.y, n.pixels, w), t.pixels = n.pixels, t.x = n.x, t } var x = r.lines.find(function (e) { return e.find(function (e) { return d(e.part.left, e.part.right, r.thc.left, r.thc.left + r.thc.right) }) }); if (x) { var k = x[0]; return t = G.Du(n.x, n.y, k.part.left, r.lines.indexOf(x)), t.pixels = n.pixels, t.x = n.x, t } var C = G.Iu(n.y); return C === n.y ? n : (t = G.Du(n.x, n.y + 1, n.pixels, "top"), t.pixels = n.pixels, t.x = n.x, t) } if ("bottom" === n.line && i.marginBottom) { var C = G.Iu(n.y); return C === n.y ? n : (t = G.Du(n.x, n.y + 1, n.pixels, "top"), t.pixels = n.pixels, t.x = n.x, t) } if (n.line < i.lines.length - 1) { var _ = n.y, D = n.line + 1; i.marginTop && "top" === n.line && (D = 0); var y = r.lines.slice(D).find(function (e) { return e.find(function (e) { return e.part.left <= n.pixels && n.pixels <= e.part.right }) }); if (y) D = r.lines.indexOf(y); else if (i.marginBottom) D = "bottom"; else if (i.marginTop) { var x = r.lines.slice(n.line + 1).find(function (e) { return e.find(function (e) { return d(e.part.left, e.part.right, r.thc.left, r.thc.left + r.thc.right) }) }); if (x) { var k = x[0]; return t = G.Du(n.x, n.y, k.part.left, r.lines.indexOf(x)) } D = "top", _ += 1 } else n.event ? D = i.lines.length - 1 : (D = 0, _ += 1); return t = G.Du(n.x, _, n.pixels, D), t.pixels = n.pixels, t.x = n.x, t } if (n.line === i.lines.length - 1 && i.marginBottom) return t = G.Du(n.x, n.y, n.pixels, "bottom"), t.pixels = n.pixels, t.x = n.x, t; var C = G.Iu(n.y); return C === n.y ? n : (t = G.Du(n.x, n.y + 1, n.pixels, "top"), t.pixels = n.pixels, t.x = n.x, t) } if ("up" === e) { var r = G.Bu(n.x, n.y), y = r.lines.slice().reverse().find(function (e) { return e.find(function (e) { return e.part.left <= n.pixels && n.pixels <= e.part.right }) }); if ("bottom" === n.line && i.marginBottom && y) { var w = r.lines.indexOf(y); t = G.Du(n.x, n.y, n.pixels, w) } else if (0 === n.line && i.marginTop) t = G.Du(n.x, n.y, n.pixels, "top"); else if (n.line > 0) { var D = "bottom", _ = n.y, y = r.lines.slice(0, n.line).reverse().find(function (e) { return e.find(function (e) { return e.part.left <= n.pixels && n.pixels <= e.part.right }) }); y ? D = r.lines.indexOf(y) : i.marginTop ? D = "top" : i.marginBottom ? _ -= 1 : D = 0; var C = G.Ju(_); if (C === _) return n; t = G.Du(n.x, _, n.pixels, D) } else { var C = G.Ju(n.y); if (C === n.y) return n; t = G.Du(n.x, n.y - 1, n.pixels, "bottom") } return t.x = n.x, t.pixels = n.pixels, t } return null
            }, G.Eu = function (e, t) { var n = "top" === e && t.marginTop || "bottom" === e && t.marginBottom; if ("number" == typeof e || !n) { if (t.marginTop) return "top"; if (t.marginBottom) return "bottom" } return e }, G.Cu = function (e, t, n) { n = n || "main"; var i = n + "_" + e + "_" + t; return E.ra.cells[i] }, G.Ku = function () { return G.uk }, G.Ah = function () { var e = E.keyboardTarget; switch (e) { case "component": return E.nav.top; case "document": return document }throw new DayPilot.Exception("Invalid keyboardTarget value: " + e) }, G._o = null, G.Lu = function (e) { if (16 === e.keyCode) { var t = G._o; if (G._o = null, !t || !t.end) return; var n = t.start.x < t.end.x, i = n ? t.start.x : t.end.x, a = n ? t.end.x : t.start.x; G.Mu(i, t.start.y, a, { "forceSnap": !0 }) } }, G.Nu = function (e) { var t = 37, n = 38, a = 39, r = 40, o = 13, s = {}; s["_37"] = "left", s["_39"] = "right", s["_38"] = "up", s["_40"] = "down"; var l = [t, n, a, r], d = l.indexOf(e.keyCode) !== -1, c = [t, n, a, r, o], u = c.indexOf(e.keyCode) !== -1; if (!i.Ao) { if ("function" == typeof E.onKeyDown) { var h = {}; if (h.originalEvent = e, h.preventDefault = function () { h.preventDefault.value = !0 }, E.onKeyDown(h), h.preventDefault.value) return } if (d && (e.preventDefault(), !G.uk)) return void G.Ou(); if (u) { var f = e.shiftKey; if (G.uk) { var v = E.jp(G.uk.y), p = !(v && E.treePreventParentUsage); f && !G.uk.event && !G._o && p && (G._o = { "calendar": E, "forceSnap": !0, "start": { x: G.uk.x, y: G.uk.y, time: E.itline[G.uk.x].start } }) } if (!G._o || e.keyCode !== n && e.keyCode !== r) { var m = G.Fu(s["_" + e.keyCode]), h = {}; if (h.previous = E.keyboard.getFocus(), h.focus = G.Au(m), h.preventDefault = function () { h.preventDefault.value = !0 }, !d || "function" != typeof E.onKeyboardFocusChange || (E.onKeyboardFocusChange(h), !h.preventDefault.value)) { if (d) G.Bo(), G.uk = m, G.Cn(); else switch (e.keyCode) { case o: if (e.preventDefault(), G.uk && G.uk.event) { var g = E.Pg(G.uk.event); G.Pu(g, e) } else p && G.Mu(G.uk.x, G.uk.y) }d && "function" == typeof E.onKeyboardFocusChanged && (E.onKeyboardFocusChanged(h), h.preventDefault.value) || (e.keyCode !== t && e.keyCode !== a || G._o && (G._o.end = { x: G.uk.x, y: G.uk.y, time: E.itline[G.uk.x].start }, E.mn(G._o)), G._o) } } } } }, G.Sn = function () { var e = G.Ah(); e.removeEventListener("keyup", G.Lu), e.removeEventListener("keydown", G.Nu) }, G.Qu = function () { var e = G.Ah(); e !== document && E.nav.top.setAttribute("tabindex", "-1"), E.ia() || (e.addEventListener("keyup", G.Lu), e.addEventListener("keydown", G.Nu)) }, G.Pu = function (e, t) { E.Ub(e, t) }, G.Mu = function (e, t, n) { o = o || {}; var i = {}; i.forceSnap = !0, i.start = { y: t, x: e, time: E.itline[e].start }, i.end = { x: "undefined" == typeof n ? e : n }, i.end.time = E.itline[i.end.x].start, i.calendar = E, E.ln = i, E.in(i) }, G.Ou = function () { var e = E.Nn(); G.Bo(), G.uk = G.Du(e.start.x, e.start.y), G.Cn() }, G.Ru = function () { var e = "Always" === E.useEventBoxes; e = e && !E.ia(), e && (G.Qu(), G.Ah() !== document && E.nav.top.focus()) }, G.Ju = function (e) { if (e <= 0) return e; for (var t = e; t > 0;)if (t -= 1, !E.rowlist[t].hidden) return t; return e }, G.Iu = function (e) { var t = E.rowlist.length - 1; if (e >= t) return e; for (var n = e; n < t;)if (n += 1, !E.rowlist[n].hidden) return n; return e }, G.Gu = function (e) { return e >= E.itline.length - 1 ? e : e + 1 }, G.Hu = function (e) { return e <= 0 ? e : e + 1 }, G.Pm = function () { G.uk = null }, this.Qm = G, this.keyboard = {}, this.keyboard.focusCell = function (e, t) { var n = E.Um(e, t); if (!n) throw new DayPilot.Exception("Can't find the specified cell"); if ("main" !== n.grid) throw new DayPilot.Exception("Can't focus a cell in a frozen row"); G.Bo(), G.uk = G.Du(n.x, n.y), G.Cn() }, this.keyboard.focusEvent = function (e) { e instanceof DayPilot.Event && (e = e.id()); var t = E.events.find(e); if (!t) throw new DayPilot.Exception("Event not found"); t = E.events.po(t.data); var n = (E.rowlist[t.part.dayIndex], {}); n.type = "event", n.event = t, n.pixels = t.part.left, n.x = E.nm(t.part.left).x, n.y = t.part.dayIndex, n.line = t.part.line, G.Bo(), G.uk = n, G.Cn() }, this.keyboard.resetFocus = function () { G.Ou() }, this.keyboard.getFocus = function () { return G.Au(G.uk) }, this.keyboard.move = function (e, t) { t = t || {}; var n = t.dontFireEvent; G.Bo(); var i = G.Fu(e), a = {}; return a.previous = E.keyboard.getFocus(), a.focus = G.Au(i), a.preventDefault = function () { a.preventDefault.value = !0 }, "function" == typeof E.onKeyboardFocusChange && !n && (E.onKeyboardFocusChange(a), a.preventDefault.value) ? void G.Cn() : (G.uk = i, G.Cn(), void ("function" != typeof E.onKeyboardFocusChanged || n || E.onKeyboardFocusChanged(a))) }, this.Ha = {}; var J = this.Ha; J.Rg = function () { delete E.ra.eventHeight, delete E.ra.headerHeight }, J.Ga = function () { return "Disabled" !== E.xssProtection }, J.Lc = function () { return DayPilot.Locale.find(E.locale) }, J.Kc = function () { return "Auto" !== E.timeFormat ? E.timeFormat : J.Lc().timeFormat }, J.Jd = function () { if ("Auto" === E.weekStarts) { var e = J.Lc(); return e ? e.weekStarts : 0 } return E.weekStarts || 0 }, J.uq = function () { var e = navigator.userAgent.toLowerCase(); return e.indexOf("mobile") !== -1 || e.indexOf("android") != -1 }, J.Ur = function () { var e = /MSIE 6/i.test(navigator.userAgent); return "Auto" === E.layout ? e ? "TableBased" : "DivBased" : E.layout }, J.fc = function () { var e; if ("Immediate" === E.notifyCommit) e = "Notify"; else { if ("Queue" !== E.notifyCommit) throw new DayPilot.Exception("Invalid notifyCommit value: " + E.notifyCommit); e = "Queue" } return e }, J.Pq = function () { return "Days" !== E.viewType }, J.Lg = function (e) { return "Always" === E.useEventBoxes || "Never" !== E.useEventBoxes && e < 60 * E.Yo() * 1e3 }, J.Fp = function () { return "number" == typeof E.durationBarHeight ? E.durationBarHeight : 4 }, J._n = function () { if (E.ra.eventHeight) return E.ra.eventHeight; var e = E.Vg("_event_height").height; return e || (e = E.eventHeight), E.ra.eventHeight = e, e }, J.Ae = function () { if (E.ra.headerHeight) return E.ra.headerHeight; var e = E.Vg("_header_height").height; return e || (e = E.headerHeight), E.ra.headerHeight = e, e }, J.ns = function () { if (E.ra.scrollLineHeight) return E.ra.scrollLineHeight; var e = l(); e.style.fontSize = "initial", e.style.display = "none", s().appendChild(e); var t = parseInt(window.getComputedStyle(e).fontSize) || 16; return s().removeChild(e), E.ra.scrollLineHeight = t, t }, J.Pl = function () { return E.rowHeaderScrolling ? E.rowHeaderSplitterWidth : 1 }, J.vm = function () { return "string" == typeof E.multiSelectRectangle ? E.multiSelectRectangle : "Disabled" === E.rectangleSelectHandling ? "Disabled" : E.rectangleSelectMode }, J.Su = function () { return "string" == typeof E.multiSelectRectangle ? "Free" === E.multiSelectRectangle || "Row" === E.multiSelectRectangle ? "EventSelect" : "Disabled" : E.rectangleSelectHandling }, J.Cp = function () { return y(E.rowHeaderColumns).filter(function (e) { return !e.hidden }) }, this.Tu = {}; var K = this.Tu; K.Gp = function (e) { var t = {}; t.top = 0, t.height = 0; for (var n = J.Ae(), i = 0; i <= e; i++) { var a = E.timeHeaders[i]; t.top += t.height, t.height = a.height || n } return t }, this.Qo = function (e, t, n) { n = n || "main"; var i = n + "_" + e + "_" + t, a = E.vl[n], r = a.rowlist; if (E.cellConfig) { i = e + "_" + t; for (var o = 0, s = 0; s < E.resources.length; s++)if (!E.resources[s].hidden) { if (o === t) { t = s; break } o += 1 } } if (this.cellProperties || (this.cellProperties = {}), this.cellProperties[i]) return this.cellProperties[i]; if (this.Hk && (this.cellProperties[i] = E.Uu(e, t)), !this.cellProperties[i]) { var l = r[t], d = l.id, c = l.start.getTime() - E.Ob().getTime(), u = E.tm(e), h = u.start.addTime(c), f = u.end.addTime(c), v = {}; v.start = h, v.end = f, v.resource = d; var p = {}; p.business = E.isBusiness(v), l.cellsDisabled && (E.hm.dq = !0, p.disabled = !0), this.cellProperties[i] = p } return this.cellProperties[i] }, this.Vu = function (e, t, n) { var i = t + "_" + n; return this.cellProperties[i] = {}, p(e, this.cellProperties[i], E.xu), this.cellProperties[i] }, this.Uu = function (e, t) { if (!this.cellConfig) return null; var n = this.cellConfig, i = this.cellProperties[e + "_" + t]; !i && n.vertical && (i = this.cellProperties[e + "_0"]), !i && n.horizontal && (i = this.cellProperties["0_" + t]), !i && n["default"] && (i = n["default"]); var a = {}; return p(i, a, E.xu), a }, this.nb = function () { if (!this.Hk && !this.Ik && (this.Ik = !0, this.cellConfig)) { var e = this.cellConfig; if (e.vertical) for (var t = 0; t < e.x; t++) { var n = this.cellProperties[t + "_0"]; if (n) for (var i = 1; i < e.y; i++)this.Vu(n, t, i) } if (e.horizontal) for (var i = 0; i < e.y; i++) { var n = this.cellProperties["0_" + i]; if (n) for (var t = 1; t < e.x; t++)this.Vu(n, t, i) } if (e["default"]) for (var n = e["default"], i = 0; i < e.y; i++)for (var t = 0; t < e.x; t++)this.cellProperties[t + "_" + i] || this.Vu(n, t, i) } }, this.isBusiness = function (e, t) { var n = e.start, i = e.end, a = (i.getTime() - n.getTime()) / 6e4; if (a <= 1440 && !(E.businessWeekends || t || 0 !== e.start.dayOfWeek() && 6 !== e.start.dayOfWeek())) return !1; if (a < 720) { var r = n.getHours(); r += n.getMinutes() / 60, r += n.getSeconds() / 3600, r += n.getMilliseconds() / 36e5; var o = this.businessBeginsHour, s = this.businessEndsHour; if (0 === s && (s = 24), o === s) return !1; if (!(o < s)) return r < s || r >= o; if (r < o) return !1; if (s >= 24) return !0; if (r >= s) return !1 } return !0 }, this.Re = function () { switch (E.ya) { case "aspnet": if (!this.Pa()) throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/"); break; case "netmvc": if (!this.backendUrl) throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/"); break; case "javaxx": if (!this.backendUrl) throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/") } }, this.D = function () { "hidden" === this.nav.top.style.visibility && (this.nav.top.style.visibility = "visible") }, this.fg = function () { var e = E.nav.top; return !!e && (e.offsetWidth > 0 && e.offsetHeight > 0) }, this.gg = function () { var e = E.fg; return e() ? void E.hg() : void (E.Qa || (E.Qa = setInterval(function () { e() && (clearInterval(E.Qa), E.show(), E.kq(), E.hg()) }, 100))) }, this.Wu = function (e) { "Parent100Pct" !== this.heightSpec && (this.heightSpec = "Fixed"), this.height = e - (this.Ql() + 2), this.wb() }, this.setHeight = this.Wu, this.zl = function (e) { return E.Rq(e).first() }, this.gh = function () { if (this.id && this.id.tagName) this.nav.top = this.id; else { if ("string" != typeof this.id) throw new DayPilot.Exception("DayPilot.Scheduler() constructor requires the target element or its ID as a parameter"); if (this.nav.top = document.getElementById(this.id), !this.nav.top) throw new DayPilot.Exception("DayPilot.Scheduler: The placeholder element not found: '" + t + "'.") } }, this.Xu = function () { this.rowHeaderColumnsMode = "Legacy", this.Sg(), this.Wk(), this.Xk(), this.Sm(), this.Cb(), this.lg(), this._a(), i.ih(this), this.jb(this.afterRenderData, !1), this.Ns(), this.Eb(), this.Ka("Init") }, this.init = function () { if (this.wa) throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties."); if (this.gh(), this.nav.top.dp) { if (this.nav.top.dp === E) return E; if (this.Pa()) return E; throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.") } return this.Gs(), this.Yu(), this.gg(), this.Zu(), this }, this.Zu = function () { E.keyboardEnabled && G.Ru() }, this.$u = function () { E.multiselect.fl(E.selectedEvents) }, this.Yu = function () { if (this.Nm(), this.fh()) return this.Xu(), this.wa = !0, void this.Ea(); this.lg(), this._a(), i.ih(this), this.Ns(), this.$u(), E.zoomLevels && E.zoomLevels[E.zoom.active] && E.zoom.setActive(E.zoom.active), !E.wa && A.gm() && (E.sl || (E.sl = { "date": E.startDate })), this.Bd(); var angular = E.Qg.scope || E.rl.enabled; E.scrollToDate ? E.scrollTo(E.scrollToDate) : E.scrollX || E.scrollY ? E.setScroll(E.scrollX, E.scrollY) : angular || E.ml(), E.scrollToResourceId && (E.scrollToResource(E.scrollToResourceId), E.scrollToResourceId = null); var e = function () { E.scrollY && E.setScroll(E.scrollX, E.scrollY) }; window.setTimeout(e, 200), this.messageHTML && window.setTimeout(function () { E.message(E.messageHTML) }, 0), this.Eb(), this.Ea(), this.jb(this.afterRenderData, !1), E.initEventEnabled && setTimeout(function () { E.Ka("Init") }), this.jh(), this.wa = !0, this._u = !0; var t = E.sl; t ? E.scrollTo(t.date, t.animated, t.position) : E.ml(), E.sl = null }, this.Hs = function () { E.ia() && delete E.infinite }, this.kh = null, this.Ug = function (e) { if (e) { var t = { "resources": { "preInit": function () { var e = this.data; e && (E.resources = e) } }, "events": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? E.events.list = e.list : E.events.list = e) }, "postInit": function () { } }, "links": { "preInit": function () { var e = this.data; e && (DayPilot.isArray(e.list) ? E.links.list = e.list : E.links.list = e) }, "postInit": function () { } }, "scrollTo": { "preInit": function () { }, "postInit": function () { this.data && E.ql(this.data, e.scrollToAnimated, e.scrollToPosition) } }, "scrollX": { "postInit": function () { this.data && E.xl(this.data) } }, "scrollY": { "postInit": function () { this.data && E.Ml(this.data) } }, "zoom": { "preInit": function () { var e = this.data; if ("string" == typeof e) { var t = e; e = E.zoom.ed(t) } var n = e !== E.zoom.active, i = E.zoom.Zj(); E.zoom.gd(e, i); n ? this.date = i : this.date = null }, "postInit": function () { this.date && E.ql(this.date, !1, E.zoomPosition) } } }; E.kh = t, E.rl.scrollToRequested && (t.scrollTo.data = E.rl.scrollToRequested, E.rl.scrollToRequested = null), E.rl.scrollXRequested && (t.scrollX.data = E.rl.scrollXRequested, E.rl.scrollXRequested = null), E.rl.scrollYRequested && (t.scrollY.data = E.rl.scrollYRequested, E.rl.scrollYRequested = null); for (var n in e) t[n] || (E[n] = e[n]); for (var n in e) if (t[n]) { var i = t[n]; i.data = e[n], i.preInit && i.preInit() } } }, this.jh = function () { var e = E.kh; for (var t in e) { var n = e[t]; n.postInit && n.postInit() } E.kh = {} }, this.diag = function () { var e = {}; return e.dataEvents = E.events.list && E.events.list.length, e.dataRows = E.rowlist && E.rowlist.length, e.dataTimeline = E.itline && E.itline.length, e.dataCells = e.dataTimeline * e.dataRows, e.renderedEvents = E.elements.events.length, e.renderedCells = E.elements.cells.length, e.renderedRows = E.divResScroll.firstChild.childNodes.length - 1, e.domEvents = E.divEvents.getElementsByTagName("*").length, e.domCells = E.divCells.getElementsByTagName("*").length, e.domRows = E.divResScroll.getElementsByTagName("*").length, e }, this.temp = {}, this.temp.allowDuplicateEventIds = !1, this.internal = {}, this.internal.initialized = function () { return E.wa }, this.internal.dragInProgress = this.Gt, this.internal.startMoving = this._d, this.internal.invokeEvent = this.ec, this.internal.eventMenuClick = this.uc, this.internal.timeRangeMenuClick = this.vc, this.internal.resourceHeaderMenuClick = this.on, this.internal.linkMenuClick = this.nn, this.internal.bubbleCallBack = this.sc, this.internal.findEventDiv = this.Pg, this.internal.rowStartMoving = this.yn._d, this.internal.getNodeChildren = this.hb, this.internal.callback = function () { E.Ka.apply(E, arguments) }, this.internal.createRowObject = this.qn, this.internal.restools = this.Dr, this.internal.gantt = null, this.internal.adjustEndIn = E.Vi, this.internal.adjustEndNormalize = E.tj, this.internal.xssTextHtml = E.Fa, this.internal.touch = E.Le, this.internal.cssNames = E.pt, this.internal.enableCellStacking = function (e) { E.Jk = !0, E.Kk = e }, this.internal.deleteDragSource = function () { E.qc() }, this.internal.skipUpdate = E.rl.skipUpdate, this.internal.skipped = E.rl.skipped, this.internal.loadOptions = E.Ug, this.internal.postInit = E.jh, this.internal.enableAngular2 = function () { E.rl.enabled = !0 }, this.internal.eventsFromAttr = function () { E.rl.Go = !0 }, this.internal.resourcesFromAttr = function () { E.rl.No = !0 }, this.internal.evImmediateRefresh = function () { E.events.hn() }, this.internal.enableReact = function (e, t) { E.Y.react = e, E.Y.reactDOM = t }, this.internal.reactRefs = function () { return p(E.Y, {}, ["react", "reactDOM"]) }, this.Init = this.init, this.Ug(o)
        }, o = "2023.3.5688" === (new DayPilot.Scheduler).v, DayPilot.Row = function (e, t) { if (!e) throw new DayPilot.Exception("No row object supplied when creating DayPilot.Row"); if (!t) throw new DayPilot.Exception("No parent control supplied when creating DayPilot.Row"); this.av = {}; var n = this.av; n.id = e.id, n.name = e.name, n.data = e.resource, n.tags = e.tags; var i = this; i.isRow = !0, i.menuType = "resource", i.start = e.start, i.name = e.name, i.value = e.id, i.id = e.id, i.tags = e.tags, i.bubbleHtml = e.bubbleHtml, i.index = e.index, i.displayY = e.displayY, i.level = e.level, i.calendar = t, i.data = e.resource, i.grid = e.grid, i.Qp = e, i.$ = {}, i.$.row = e, i.toJSON = function (e) { var t = {}; return t.start = this.start, t.name = this.name, t.value = this.value, t.id = this.id, t.index = this.index, t }, i.parent = function () { return i.Qp.Cr ? t.qn(i.Qp.Cr) : null }, i.children = function () { var e = y(i.$.row.children).map(function (e) { return t.qn(t.rowlist[e]) }); return e.add = function (e) { var t = i.$.row.resource; t.children || (t.children = []), t.children.push(e) }, e }, i.splitParent = function () { return i.Qp.split.parent ? t.qn(i.Qp.split.parent) : null }, i.splitChildren = function () { return (i.Qp.split.list || []).map(function (e) { return t.qn(e) }) }, i.loaded = function () { return i.Qp.loaded }, Object.defineProperty(i, "hidden", { get: function () { return i.Qp.hidden } }), Object.defineProperty(i, "hiddenUsingFilter", { get: function () { return i.Qp.Or }, set: function (e) { i.Qp.Or = e, e || (i.Qp.hidden = !i.Qp.Pr()) } }), i.cells = {}, i.cells.all = function () { for (var e = [], n = t.itline.length, a = i.index, r = 0; r < n; r++) { var o = t.cells.findXy(r, a, i.grid); e.push(o[0]) } return t.Ro(e) }, i.cells.forRange = function (e, n) { var a = i, r = a.start.getTime() - t.Ob().getTime(); e = new DayPilot.Date(e), n = new DayPilot.Date(n); var o = t.Ob().addTime(r), s = t.Wd().addTime(r); e < o && (e = o), n > s && (n = s); var l = t.cells.find(e, i)[0], d = t.cells.find(n.addTime(-1), i)[0]; if (!l) return null; if (!d) return null; if (l.y !== d.y) return null; for (var c = l.y, u = [], h = l.x; h <= d.x; h++)u.push(t.cells.ce(h, c, l.grid)); return t.Ro(u) }, i.cells.totalDuration = function () { return new DayPilot.Duration(i.cells.all().map(function (e) { return e.end.getTime() - e.start.getTime() }).reduce(function (e, t) { return e + t }, 0)) }, i.events = {}, i.events.all = function () { for (var e = y(), t = 0; t < i.Qp.events.length; t++)e.push(i.Qp.events[t]); return e }, i.events.isEmpty = function () { return 0 === i.Qp.events.length }, i.events.forRange = function (e, t) { return i.Qp.events.forRange(e, t) }, i.events.totalDuration = function () { var e = 0; return i.events.all().forEach(function (t) { e += t.part.end.getTime() - t.part.start.getTime() }), new DayPilot.Duration(e) }, i.groups = {}, i.groups.collapseAll = function () { for (var e = 0; e < i.Qp.blocks.length; e++) { new a(i.Qp.blocks[e]).bv() } t.Bm(), t.Cm([i.Qp]), t.wb() }, i.groups.expandAll = function () { for (var e = 0; e < i.Qp.blocks.length; e++) { new a(i.Qp.blocks[e]).cv() } t.Bm(), t.Cm([i.Qp]), t.wb(), t.Ab() }, i.groups.expanded = function () { for (var e = [], n = 0; n < i.Qp.blocks.length; n++) { var r = i.Qp.blocks[n]; r.expanded && r.lines.length > t.groupConcurrentEventsLimit && e.push(new a(r)) } return y(e) }, i.groups.collapsed = function () { for (var e = [], t = 0; t < i.Qp.blocks.length; t++) { var n = i.Qp.blocks[t]; n.expanded || e.push(new a(n)) } return y(e) }, i.groups.all = function () { for (var e = [], t = 0; t < i.Qp.blocks.length; t++) { var n = i.Qp.blocks[t]; e.push(new a(n)) } return y(e) }, i.events.collapseGroups = i.groups.collapseAll, i.events.expandGroups = i.groups.expandAll, i.column = function (e) { return new r(i, e) }, i.toggle = function () { t.np(i.index) }, i.collapse = function () { i.$.row.expanded && i.toggle() }, i.expand = function () { i.$.row.expanded || i.toggle() }, i.remove = function () { t.rows.remove(i) }, i.edit = function () { t.rows.edit(i) }, i.addClass = function (e) { var n = i, a = t.divHeader, n = a.rows[n.index]; if (n) { u(y(n.cells).map(function (e) { return e.cellDiv }), e) } i.$.row.cssClass = DayPilot.Util.addClassToString(i.$.row.cssClass, e), i.data.cssClass = e }, i.removeClass = function (e) { var n = i, a = t.divHeader, n = a.rows[n.index]; if (n) { c(y(n.cells).map(function (e) { return e.cellDiv }), e) } i.$.row.cssClass = DayPilot.Util.removeClassFromString(i.$.row.cssClass, e), i.data.cssClass = DayPilot.Util.removeClassFromString(i.data.cssClass, e) }; var a = function (e) { var n = function (e) { for (var n = 0; n < t.elements.events.length; n++) { var i = t.elements.events[n]; if (i.event === e) return i } return null }; this.cv = function () { e.expanded = !0; var i = t.Vq; y(e.events).forEach(function (e) { i.push(e.id()) }); var a = n(e); if (a) { t.Ws(a); var r = k(t.elements.events, a); r !== -1 && t.elements.events.splice(r, 1) } }, this.expand = function () { this.cv(), t.Bm(), t.Cm([e.row]), t.wb(), t.Ab() }, this.bv = function () { if (e.lines.length > t.groupConcurrentEventsLimit) { e.expanded = !1; var n = y(e.events).map(function (e) { return e.id() }); t.Vq = t.Vq.filter(function (e) { return !w(n, e) }) } }, this.collapse = function () { this.bv(), t.Bm(), t.Cm([e.row]), t.wb() } }, r = function (e, t) { this.html = function (e) { var n = i.calendar.divHeader, i = n.rows[i.index]; if (!i) throw new DayPilot.Exception("Row not rendered"); var a = i.cells[t], r = a.textDiv; return "undefined" == typeof e ? r.innerHTML : void (r.innerHTML = e) } } }, i.rm = null, i.Vo = null, i.Mf = null, i.$o = null, i.sp = null, i.qm = !1, i.mg = !1, i.Ct = null, i.Aa = null, i.dv = function (e, t, n, a) { DayPilot.us(e); var r = i.aq = {}; return r.element = e, r.duration = t, r.text = a, r.id = n, r.data = { "id": n, "text": a, "duration": t, "externalHtml": a }, !1 }, DayPilot.Scheduler.def = {}, DayPilot.Scheduler.startDragging = function (e) { var e = e || {}, t = e.element, n = e.keepElement ? null : t; DayPilot.us(t); var a = i.aq = {}; return a.element = n, a.id = e.id, a.duration = e.duration || 60, a.text = e.text || "", a.data = e, a.Of = e, a.Pf = e.data, !1 }, DayPilot.Scheduler.makeDraggable = function (e) { function t() { var t = i.aq = {}; t.element = a, t.id = o, t.duration = l, t.text = s, t.data = e, t.Of = e, t.Pf = e.data } e = e || {}; var n = e.element, a = e.keepElement ? null : e.remove || n, r = e.data || {}, o = "undefined" != typeof e.id ? e.id : r.id, s = "string" == typeof e.text ? e.text : r.text || "", l = e.duration || r.duration; if (l instanceof DayPilot.Duration && (l = l.totalSeconds()), l || (l = r.start && r.end ? new DayPilot.Duration(r.start, r.end).totalSeconds() : 60), !n) throw new DayPilot.Exception("makeDraggable(options): options.element must be specified"); DayPilot.us(n), DayPilot.re(n, "mousedown", function (e) { if (g(e).left) { t(); var n = e.target || e.srcElement; if (n.tagName) { var i = n.tagName.toLowerCase(); if ("textarea" === i || "select" === i || "input" === i) return !1 } return e.preventDefault(), !1 } }), DayPilot.reNonPassive(n, "touchstart", function (e) { window.setTimeout(function () { t(), i.pg(e), e.preventDefault() }, 0), e.preventDefault() }) }, DayPilot.Scheduler.stopDragging = function () { if (i.aq && i.aq.Qt) { var e = i.aq.Qt, t = e.event.calendar; t && c(e, t.ca(n.pt.eventMovingSource)) } if (i.ev(), i.$o && (x(i.rp), i.$o = null, i.sp = null, i.rp = null), i.rm) { var n = i.Vo.calendar; n && (n.pc(), n.eb = null, c(i.rm, n.ca(n.pt.eventMovingSource))), x(i.Xp), i.rm = null, i.Vo = null, i.Xp = null } if (i._o) { var n = i._o.calendar; n.clearSelection(), i._o = null } s().style.cursor = "", y(i.Jf).forEach(function (e) { e.db(), e.eq(), e.yn.pr(), e.Vp.clear() }) }, DayPilot.Scheduler.registerDropTarget = function (e) { e = e || {}; var t = e.element, n = e.onDragOver, a = "function" == typeof n, r = e.onDrop, o = "function" == typeof r, s = e.onDragLeave, l = "function" == typeof s; if (!t) throw new DayPilot.Exception("registerDropTarget(options): options.element must be specified"); t.addEventListener("mousemove", function (e) { if (i.aq) { var t = i.aq.event; if (t && a) { var r = {}; r.e = t, n(r) } } }), t.addEventListener("mouseleave", function (e) { if (i.aq) { var t = i.aq.event; if (t && l) { var n = {}; n.e = t, s(n) } } }), t.addEventListener("mouseup", function (e) { if (i.aq) { var t = i.aq.event; if (t && o) { var n = {}; n.e = t, r(n) } } }) }, i.ev = function () { i.Pt && (s().removeChild(i.Pt), i.Pt = null), i.aq = null }, i.fv = function () { var e = i.aq; if (e) { var t = e && e.Of, n = t && t.onDrop; if ("function" == typeof n) { var a = {}; a.options = t, n(a) } } }, i.ih = function (e) { i.Jf || (i.Jf = y(), i.Jf.out = function () { i.Jf.forEach(function (e) { e.bb() }) }); for (var t = 0; t < i.Jf.length; t++)if (i.Jf[t] === e) return; i.Jf.push(e) }, i.$a = function (e) { var t = i.Jf; if (t) { var n = k(t, e); n !== -1 && t.splice(n, 1), 0 === t.length && (t = null) } t || (DayPilot.ue(document, "mousemove", i.ng), DayPilot.ue(document, "mouseup", i.og), DayPilot.ue(document, "mousedown", i.Ls), DayPilot.ue(document, "touchmove", i.pg), DayPilot.ue(document, "touchend", i.qg), DayPilot.ue(window, "keyup", i.Ms), i.mg = !1) }, i.pg = function (e) { if (i.$o) { var a = i.$o.event.calendar; a.coords = a.Le.zg(e), a.Le.Dg() } if (i.rm && !i.aq) { var a = i.Vo.calendar; a.coords = a.Le.zg(e), a.Le.Eg(), function () { if (a.dragOutAllowed) { var n = t(e); if (!n || n !== a) { var r = i.Vo; i.aq = {}; var o = i.aq; o.id = r.id(), o.text = r.text(), o.Qt = i.rm, o.element = null, o.duration = (r.rawend().getTime() - r.start().getTime()) / 1e3, o.text = r.text(), o.id = r.id(), o.event = p(r, new DayPilot.Event), a.eq(), x(i.Xp), i.Xp.calendar = null, i.Xp = null, i.Zo = null, i.Jf.out() } } }() } if (i.aq) { var r = n(e), a = t(e); if (a) { if (i.Pt && s().removeChild(i.Pt), i.Pt = null, a.coords = a.Le.zg(e), !i.Xp && a.rowlist.length > 0) { if (!i.rm) { i.rm = {}; var o = i.aq.event; if (!o) { var e = a.Rt(); o = new DayPilot.Event(e), o.calendar = a, o.part.duration = 1e3 * i.aq.duration } o.part.external = !0; var l = i.aq.Qt; l && l.event && l.event.calendar === a && (o.part.external = !1), i.Vo = o } i.Xp = a.Gb(i.Vo) } i.rm && a.Le.Eg() } else { x(i.Xp); var d = i.rm; i.rm = null, i.Vo = null, i.Xp = null, i.Pt || (i.Pt = i.gv(i.aq.Of), i.Pt.source = d); var c = i.Pt; c.style.left = r.x + "px", c.style.top = r.y + "px", i.Jf.out() } } }, i.qg = function (e) { i.ls = !1, i.og(e) }, i.ng = function (e) { if ("undefined" != typeof i && !b.touch.active && !b.touch.start && !(e.insideMainD || e.srcElement && e.srcElement.inside)) { var t = DayPilot.mc(e); if (i.aq) { if (!i.aq.hv) { var n = i.aq.Of || {}, a = n.onDragStart, r = !1; if ("function" == typeof a) { var o = {}; o.options = n, o.preventDefault = function () { o.preventDefault.value = !0 }, a(o), r = o.preventDefault.value } if (i.aq.hv = !0, r) return i.fv(), void (i.aq = null) } s().style.cursor = "move", i.Pt || (i.Pt = i.gv(i.aq.Of)); var l = i.Pt; if (l.style.left = t.x + "px", l.style.top = t.y + "px", i.rm = null, i.Vo = null, i.Xp) { var d = i.Xp.calendar; d && d.eq(), i.Xp.calendar = null, x(i.Xp), i.Xp = null } } else if (i.rm && i.Vo && i.Vo.calendar.dragOutAllowed && !i.aq) { var d = i.Vo.calendar, e = i.Vo; s().style.cursor = "move", i.Pt || (i.Pt = i.gv(e.data), i.Pt.source = i.rm); var l = i.Pt; l.style.left = t.x + "px", l.style.top = t.y + "px", i.aq = {}; var c = i.aq; c.Qt = i.rm, c.element = null, c.duration = (e.rawend().getTime() - e.start().getTime()) / 1e3, c.text = e.text(), c.id = e.value(), c.event = p(e, new DayPilot.Event), d.eq(), x(i.Xp), i.Xp.calendar = null, i.Xp = null } if (i.sq && 0 === e.buttons) { i.sq.cleanup(), i.sq = null } i.Jf.out() } }, i.lh = function (e) { if (i.Jf) for (var t = 0; t < i.Jf.length; t++) { var n = i.Jf[t]; i.$a(n) } }, i.Ls = function (e) { i.Ao && i.Ao.blur() }, i.Ms = function (e) { 17 === e.keyCode && i.Dt && i.Dt.eu.dispatch() }, i.og = function (e) { if (y(i.Jf).forEach(function (e) { e.db(), e.rm = {}, e.Ht = null }), i.$o) { var t = function () { var e = i.sp, t = e.calendar; s().style.cursor = "", i.$o = null, i.sp = null, x(i.rp), i.rp = null, t && (t.It = null) }; if (setTimeout(function () { i.qm = !1 }), !i.rp) return void t(); var n = i.sp, r = n.calendar, o = i.rp.finalStart, l = i.rp.finalEnd, d = i.rp.overlapping, u = !i.rp.allowed, h = r.Ip.isInvalid(); r.eq(), r.Ip.clear(); var f = "left" === i.$o.dpBorder ? "start" : "end"; if (t(), d || u || h || r.Ip.forbidden) return; r.jc(n, o, l, f) } else if (i.Vo) { var t = function () { b.movingAreaData = null; var e = i.Xp && i.Xp.calendar; i.Xp && (x(i.Xp), i.Xp.calendar = null), s().style.cursor = "", i.rm = null, i.Vo = null, i.fv(), i.aq = null, e && (e.eb = null) }; if (setTimeout(function () { i.qm = !1 }), !i.Xp) return void t(); var v = i.aq && i.aq.Qt, n = v ? v.event : i.Vo, r = i.Xp.calendar; if (!r) return void t(); if (n.calendar && n.calendar !== r) { var m = n.calendar, w = n, k = p(n.data); n = new DayPilot.Event(k, m), n.part = { "external": !0, "duration": m.cp(w) } } if (i.Xp.source = i.rm, function () { if (i.aq && i.aq.Qt) { var e = i.aq.Qt; if (e && e.event) { c(e, e.event.calendar.ca(r.pt.eventMovingSource)) } } }(), !i.Xp.row) return void t(); clearTimeout(r.lp.timeout); var o = i.Xp.start, l = i.Xp.end, D = "Days" !== r.viewType ? i.Xp.row.id : null, S = n.part.external, E = i.Xp.line, d = i.Xp.overlapping, u = !i.Xp.allowed; if (i.aq && (r.nl || (r.nl = {}), r.nl.ol = i.aq.element, i.fv(), i.aq = null), i.Xp.calendar = null, s().style.cursor = "", i.rm = null, i.Vo = null, d || u || r.Vp.forbidden || r.Vp.invalid) return void r.pc(); r.oc(n, o, l, D, S, e, E), b.movingAreaData = null } else if (i._o) { var T = g(e), A = i._o, r = A.calendar, t = function () { }; r.bu = null; var H = e.ctrlKey || e.metaKey; if (r.allowMultiRange && r.elements.range2) return r.elements.range2.overlapping ? (x(r.elements.range2), r.elements.range2 = null, r.eq()) : r.eu.add(A), i._o = null, H || T.left && r.eu.dispatch(), void t(); if (i.Ct) return clearTimeout(i.Ct), i.Ct = null, void t(); r.ln = A, i._o = null; var M = function (e) { return function () { i.Ct = null; var t = r.elements.range2; return t && t.overlapping ? void r.clearSelection() : void r.in(e) } }, R = r.cu(A); if (t(), !T.left) return void (i.Ct = null); if (A.moved || "Disabled" === r.timeRangeDoubleClickHandling) return M(R)(), e.cancelBubble = !0, !1; i.Ct = setTimeout(M(R), r.doubleClickTimeout) } else if (C.row) { var r = C.calendar; r && r.or() } else if (_.source) { var r = _.calendar; r.bo.bj(), r.bo.Tm(), _.source = null, _.calendar = null } else if (i.sq) { var B = i.sq; B.cleanup(), i.sq = null } else if (i.Ft) { var P = i.Ft, r = P.calendar; if (!P.moved) return i.Ft = null, void (r.mt(r.coords) || r.fu(e)); var N = P.x, I = P.y, L = P.width, z = P.height, O = !1, U = r.Fl.Gl(N, I, L, z).map(function (e) { return e.event }), j = function () { setTimeout(function () { r.Tt.clear(), i.Ft = null }, 0), r.eq() }; if ("function" == typeof r.onRectangleEventSelect || "function" == typeof r.onRectangleSelect) { var W = r.Mn(I).i, F = r.Mn(I + z).i, Y = { "start": { "y": W }, "end": { "y": F } }, q = r.In(Y), V = {}; if (V.events = U, V.append = !1, V.start = r.getDate(N, !0), V.end = r.getDate(N + L, !0), V.resources = q, V.preventDefault = function () { this.preventDefault.value = !0 }, "function" == typeof r.onRectangleEventSelect && r.onRectangleEventSelect(V), "function" == typeof r.onRectangleSelect && r.onRectangleSelect(V), V.preventDefault.value) return r.Tt.clear(), i.Ft = null, void j(); O = V.append } if ("EventSelect" === r.Ha.Su() && (O || r.multiselect.clear(!0), U.forEach(function (e) { r.multiselect.add(e, !0) }), r.multiselect.redraw()), j(), "function" == typeof r.onRectangleEventSelected || "function" == typeof r.onRectangleSelected) { var V = {}; V.events = U, "function" == typeof r.onRectangleEventSelected && r.onRectangleEventSelected(V), "function" == typeof r.onRectangleSelected && r.onRectangleSelected(V) } } if (i.aq && (i.aq.event && i.aq.event.part && delete i.aq.event.part.external, i.fv(), i.aq = null, s().style.cursor = ""), i.Pt) { if (i.Pt.source) { var v = i.Pt.source; if (v.event) { var r = i.Pt.source.event.calendar; c(i.Pt.source, r.ca(r.pt.eventMovingSource)) } else a() } s().removeChild(i.Pt), i.Pt = null } i.Uo = null, i.Zo = null }, i.gv = function (e) { e = e || {}; var t = document.createElement("div"); return t.setAttribute("unselectable", "on"), t.style.position = "absolute", t.style.width = "100px", t.style.height = "20px", t.style.zIndex = 101, t.style.pointerEvents = "none", t.style.backgroundColor = "#aaaaaa", t.style.opacity = .5, t.style.overflow = "hidden", t.className = e.externalCssClass, e.externalHtml && (t.innerHTML = e.externalHtml), s().appendChild(t), t }; var C = {}; b.rowmoving = C; var _ = {}; b.linking = _, "undefined" != typeof jQuery && !function (e) { e.fn.daypilotScheduler = function (e) { var t = null, n = this.each(function () { if (!this.daypilot) { var n = new DayPilot.Scheduler(this.id || this, e); n.init(), this.daypilot = n, t || (t = n) } }); return 1 === this.length ? t : n } }(jQuery), function () {
            var e = DayPilot.am(); e && e.directive("daypilotScheduler", ["$parse", function (e) {
                return {
                    "restrict": "E", "template": "<div id='{{id}}'></div>", "compile": function (t, n) {
                        return t[0].removeAttribute("id"), t[0].innerHTML = this["template"].replace("{{id}}", n["id"]),
                            function (t, n, i) { var a = new DayPilot.Scheduler(n[0].firstChild); a.Qg.scope = t; var r = i["id"]; r && (t[r] = a); var o = i["publishAs"]; if (o) { (0, e(o).assign)(t, a) } for (var s in i) if (0 === s.indexOf("on")) { var l = DayPilot.Util.shouldApply(s); l ? !function (n) { a[n] = function (a) { var r = e(i[n]); DayPilot.Util.safeApply(t, function () { r(t, { "args": a }) }) } }(s) : !function (n) { a[n] = function (a) { e(i[n])(t, { "args": a }) } }(s) } var d = t["$watch"], c = i["config"] || i["daypilotConfig"], u = i["events"] || i["daypilotEvents"]; c || a.init(), d.call(t, c, function (e, t) { a.Ug(e), a.wa ? (a.update(), a.jh()) : a.init() }, !0), u && d.call(t, u, function (e) { a.events.list = e, a.Bd({ "eventsOnly": !0 }) }, !0), t.$on("$destroy", function () { a.dispose() }) }
                    }
                }
            }])
        }(), "undefined" != typeof Sys && Sys.Application && Sys.Application.notifyScriptLoaded && Sys.Application.notifyScriptLoaded()
    }
}(DayPilot), "undefined" == typeof DayPilot) var DayPilot = {}; "undefined" == typeof DayPilot.Global && (DayPilot.Global = {}), function (DayPilot) { "undefined" == typeof DayPilot.Year && (DayPilot.Year = function (e, t) { this.v = "2023.3.5688"; this.startDate = new DayPilot.Date, this.cssOnly = !0, this.cssClassPrefix = null, this.columns = 4, this.cellWidth = 20, this.showWeekNumbers = !1, this.iv = [], this.uj = function () { this.root.dp = this, this.Qh = new DayPilot.Date(this.startDate.toString("yyyy-01-01", "en-us")) }, this.ca = function (e) { return this.cssClassPrefix ? this.cssClassPrefix + e : "" }, this.wj = function () { return this.showWeekNumbers ? this.cellWidth : 0 }, this.Rp = function () { this.iv = []; var e = this.columns, t = 12 / e; this.root.className = this.ca("_main"), this.root.style.width = e * (7 * this.cellWidth + this.wj()) + "px"; for (var n = 0; n < t; n++) { for (var i = 0; i < e; i++) { var a = n * e + i, r = r + "_nav_" + a, o = document.createElement("div"); o.id = r, o.style.float = "left", this.root.appendChild(o); var s = new DayPilot.Navigator(r); s.startDate = this.Qh.addMonths(a), s.cssOnly = this.cssOnly, s.cssClassPrefix = this.cssClassPrefix, s.cellWidth = this.cellWidth, s.showWeekNumbers = this.showWeekNumbers, s.internal.showLinks = {}, s.selectMode = "none", s.timeRangeSelectedHandling = "JavaScript", s.onTimeRangeSelected = this.jv, s.init(), s.root.className = "", this.iv.push(s) } var l = document.createElement("div"); l.style.clear = "left", this.root.appendChild(l) } }, this.jv = function (e) { alert("clicked: " + e.day) }, this.init = function () { if (this.root = document.getElementById(e), !this.root.dp) return this.uj(), this.Rp(), this } }) }(DayPilot);
